var XA=Object.defineProperty;var KA=(t,e,n)=>e in t?XA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Xe=(t,e,n)=>KA(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var AG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wb={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df=Symbol.for("react.element"),YA=Symbol.for("react.portal"),QA=Symbol.for("react.fragment"),JA=Symbol.for("react.strict_mode"),ZA=Symbol.for("react.profiler"),e3=Symbol.for("react.provider"),t3=Symbol.for("react.context"),n3=Symbol.for("react.forward_ref"),r3=Symbol.for("react.suspense"),i3=Symbol.for("react.memo"),a3=Symbol.for("react.lazy"),vy=Symbol.iterator;function o3(t){return t===null||typeof t!="object"?null:(t=vy&&t[vy]||t["@@iterator"],typeof t=="function"?t:null)}var zb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ub=Object.assign,Vb={};function pl(t,e,n){this.props=t,this.context=e,this.refs=Vb,this.updater=n||zb}pl.prototype.isReactComponent={};pl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hb(){}Hb.prototype=pl.prototype;function Ag(t,e,n){this.props=t,this.context=e,this.refs=Vb,this.updater=n||zb}var Ig=Ag.prototype=new Hb;Ig.constructor=Ag;Ub(Ig,pl.prototype);Ig.isPureReactComponent=!0;var my=Array.isArray,$b=Object.prototype.hasOwnProperty,Rg={current:null},jb={key:!0,ref:!0,__self:!0,__source:!0};function Gb(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)$b.call(e,r)&&!jb.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:df,type:t,key:a,ref:o,props:i,_owner:Rg.current}}function s3(t,e){return{$$typeof:df,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fg(t){return typeof t=="object"&&t!==null&&t.$$typeof===df}function u3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gy=/\/+/g;function A0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?u3(""+t.key):e.toString(36)}function Yh(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case df:case YA:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+A0(o,0):r,my(i)?(n="",t!=null&&(n=t.replace(gy,"$&/")+"/"),Yh(i,e,n,"",function(l){return l})):i!=null&&(Fg(i)&&(i=s3(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",my(t))for(var s=0;s<t.length;s++){a=t[s];var u=r+A0(a,s);o+=Yh(a,e,n,u,i)}else if(u=o3(t),typeof u=="function")for(t=u.call(t),s=0;!(a=t.next()).done;)a=a.value,u=r+A0(a,s++),o+=Yh(a,e,n,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qf(t,e,n){if(t==null)return t;var r=[],i=0;return Yh(t,r,"","",function(a){return e.call(n,a,i++)}),r}function l3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gr={current:null},Qh={transition:null},c3={ReactCurrentDispatcher:gr,ReactCurrentBatchConfig:Qh,ReactCurrentOwner:Rg};function Xb(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:qf,forEach:function(t,e,n){qf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qf(t,function(){e++}),e},toArray:function(t){return qf(t,function(e){return e})||[]},only:function(t){if(!Fg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ot.Component=pl;ot.Fragment=QA;ot.Profiler=ZA;ot.PureComponent=Ag;ot.StrictMode=JA;ot.Suspense=r3;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c3;ot.act=Xb;ot.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ub({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Rg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)$b.call(e,u)&&!jb.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&s!==void 0?s[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:df,type:t.type,key:i,ref:a,props:r,_owner:o}};ot.createContext=function(t){return t={$$typeof:t3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:e3,_context:t},t.Consumer=t};ot.createElement=Gb;ot.createFactory=function(t){var e=Gb.bind(null,t);return e.type=t,e};ot.createRef=function(){return{current:null}};ot.forwardRef=function(t){return{$$typeof:n3,render:t}};ot.isValidElement=Fg;ot.lazy=function(t){return{$$typeof:a3,_payload:{_status:-1,_result:t},_init:l3}};ot.memo=function(t,e){return{$$typeof:i3,type:t,compare:e===void 0?null:e}};ot.startTransition=function(t){var e=Qh.transition;Qh.transition={};try{t()}finally{Qh.transition=e}};ot.unstable_act=Xb;ot.useCallback=function(t,e){return gr.current.useCallback(t,e)};ot.useContext=function(t){return gr.current.useContext(t)};ot.useDebugValue=function(){};ot.useDeferredValue=function(t){return gr.current.useDeferredValue(t)};ot.useEffect=function(t,e){return gr.current.useEffect(t,e)};ot.useId=function(){return gr.current.useId()};ot.useImperativeHandle=function(t,e,n){return gr.current.useImperativeHandle(t,e,n)};ot.useInsertionEffect=function(t,e){return gr.current.useInsertionEffect(t,e)};ot.useLayoutEffect=function(t,e){return gr.current.useLayoutEffect(t,e)};ot.useMemo=function(t,e){return gr.current.useMemo(t,e)};ot.useReducer=function(t,e,n){return gr.current.useReducer(t,e,n)};ot.useRef=function(t){return gr.current.useRef(t)};ot.useState=function(t){return gr.current.useState(t)};ot.useSyncExternalStore=function(t,e,n){return gr.current.useSyncExternalStore(t,e,n)};ot.useTransition=function(){return gr.current.useTransition()};ot.version="18.3.1";Wb.exports=ot;var ve=Wb.exports;const R=qA(ve);var Kb={exports:{}},ri={},qb={exports:{}},Yb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,Q){var te=G.length;G.push(Q);e:for(;0<te;){var pe=te-1>>>1,P=G[pe];if(0<i(P,Q))G[pe]=Q,G[te]=P,te=pe;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Q=G[0],te=G.pop();if(te!==Q){G[0]=te;e:for(var pe=0,P=G.length,j=P>>>1;pe<j;){var U=2*(pe+1)-1,z=G[U],Z=U+1,xe=G[Z];if(0>i(z,te))Z<P&&0>i(xe,z)?(G[pe]=xe,G[Z]=te,pe=Z):(G[pe]=z,G[U]=te,pe=U);else if(Z<P&&0>i(xe,te))G[pe]=xe,G[Z]=te,pe=Z;else break e}}return Q}function i(G,Q){var te=G.sortIndex-Q.sortIndex;return te!==0?te:G.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var u=[],l=[],c=1,f=null,h=3,d=!1,v=!1,p=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(G){for(var Q=n(l);Q!==null;){if(Q.callback===null)r(l);else if(Q.startTime<=G)r(l),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(l)}}function w(G){if(p=!1,y(G),!v)if(n(u)!==null)v=!0,ae(_);else{var Q=n(l);Q!==null&&ie(w,Q.startTime-G)}}function _(G,Q){v=!1,p&&(p=!1,g(S),S=-1),d=!0;var te=h;try{for(y(Q),f=n(u);f!==null&&(!(f.expirationTime>Q)||G&&!A());){var pe=f.callback;if(typeof pe=="function"){f.callback=null,h=f.priorityLevel;var P=pe(f.expirationTime<=Q);Q=t.unstable_now(),typeof P=="function"?f.callback=P:f===n(u)&&r(u),y(Q)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var U=n(l);U!==null&&ie(w,U.startTime-Q),j=!1}return j}finally{f=null,h=te,d=!1}}var b=!1,E=null,S=-1,C=5,T=-1;function A(){return!(t.unstable_now()-T<C)}function I(){if(E!==null){var G=t.unstable_now();T=G;var Q=!0;try{Q=E(!0,G)}finally{Q?V():(b=!1,E=null)}}else b=!1}var V;if(typeof x=="function")V=function(){x(I)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,K=J.port2;J.port1.onmessage=I,V=function(){K.postMessage(null)}}else V=function(){m(I,0)};function ae(G){E=G,b||(b=!0,V())}function ie(G,Q){S=m(function(){G(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){v||d||(v=!0,ae(_))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var te=h;h=Q;try{return G()}finally{h=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,Q){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var te=h;h=G;try{return Q()}finally{h=te}},t.unstable_scheduleCallback=function(G,Q,te){var pe=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?pe+te:pe):te=pe,G){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=te+P,G={id:c++,callback:Q,priorityLevel:G,startTime:te,expirationTime:P,sortIndex:-1},te>pe?(G.sortIndex=te,e(l,G),n(u)===null&&G===n(l)&&(p?(g(S),S=-1):p=!0,ie(w,te-pe))):(G.sortIndex=P,e(u,G),v||d||(v=!0,ae(_))),G},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(G){var Q=h;return function(){var te=h;h=Q;try{return G.apply(this,arguments)}finally{h=te}}}})(Yb);qb.exports=Yb;var f3=qb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h3=ve,ti=f3;function be(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qb=new Set,kc={};function Hs(t,e){Zu(t,e),Zu(t+"Capture",e)}function Zu(t,e){for(kc[t]=e,t=0;t<e.length;t++)Qb.add(e[t])}var Va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zv=Object.prototype.hasOwnProperty,d3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xy={},yy={};function p3(t){return Zv.call(yy,t)?!0:Zv.call(xy,t)?!1:d3.test(t)?yy[t]=!0:(xy[t]=!0,!1)}function v3(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function m3(t,e,n,r){if(e===null||typeof e>"u"||v3(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xr(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gn[t]=new xr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gn[e]=new xr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gn[t]=new xr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gn[t]=new xr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gn[t]=new xr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gn[t]=new xr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gn[t]=new xr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gn[t]=new xr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gn[t]=new xr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dg=/[\-:]([a-z])/g;function Og(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dg,Og);Gn[e]=new xr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dg,Og);Gn[e]=new xr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dg,Og);Gn[e]=new xr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gn[t]=new xr(t,1,!1,t.toLowerCase(),null,!1,!1)});Gn.xlinkHref=new xr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gn[t]=new xr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pg(t,e,n,r){var i=Gn.hasOwnProperty(e)?Gn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(m3(e,n,i,r)&&(n=null),r||i===null?p3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qa=h3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yf=Symbol.for("react.element"),wu=Symbol.for("react.portal"),_u=Symbol.for("react.fragment"),Ng=Symbol.for("react.strict_mode"),em=Symbol.for("react.profiler"),Jb=Symbol.for("react.provider"),Zb=Symbol.for("react.context"),Mg=Symbol.for("react.forward_ref"),tm=Symbol.for("react.suspense"),nm=Symbol.for("react.suspense_list"),Lg=Symbol.for("react.memo"),ho=Symbol.for("react.lazy"),eE=Symbol.for("react.offscreen"),wy=Symbol.iterator;function Rl(t){return t===null||typeof t!="object"?null:(t=wy&&t[wy]||t["@@iterator"],typeof t=="function"?t:null)}var Wt=Object.assign,I0;function ql(t){if(I0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);I0=e&&e[1]||""}return`
`+I0+t}var R0=!1;function F0(t,e){if(!t||R0)return"";R0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=s);break}}}finally{R0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ql(t):""}function g3(t){switch(t.tag){case 5:return ql(t.type);case 16:return ql("Lazy");case 13:return ql("Suspense");case 19:return ql("SuspenseList");case 0:case 2:case 15:return t=F0(t.type,!1),t;case 11:return t=F0(t.type.render,!1),t;case 1:return t=F0(t.type,!0),t;default:return""}}function rm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _u:return"Fragment";case wu:return"Portal";case em:return"Profiler";case Ng:return"StrictMode";case tm:return"Suspense";case nm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zb:return(t.displayName||"Context")+".Consumer";case Jb:return(t._context.displayName||"Context")+".Provider";case Mg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lg:return e=t.displayName||null,e!==null?e:rm(t.type)||"Memo";case ho:e=t._payload,t=t._init;try{return rm(t(e))}catch{}}return null}function x3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rm(e);case 8:return e===Ng?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function y3(t){var e=tE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qf(t){t._valueTracker||(t._valueTracker=y3(t))}function nE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function im(t,e){var n=e.checked;return Wt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _y(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rE(t,e){e=e.checked,e!=null&&Pg(t,"checked",e,!1)}function am(t,e){rE(t,e);var n=Wo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?om(t,e.type,n):e.hasOwnProperty("defaultValue")&&om(t,e.type,Wo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function by(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function om(t,e,n){(e!=="number"||vd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yl=Array.isArray;function Ou(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function sm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(be(91));return Wt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ey(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(be(92));if(Yl(n)){if(1<n.length)throw Error(be(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wo(n)}}function iE(t,e){var n=Wo(e.value),r=Wo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Sy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function aE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function um(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?aE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jf,oE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jf=Jf||document.createElement("div"),Jf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ac(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ac={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w3=["Webkit","ms","Moz","O"];Object.keys(ac).forEach(function(t){w3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ac[e]=ac[t]})});function sE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ac.hasOwnProperty(t)&&ac[t]?(""+e).trim():e+"px"}function uE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=sE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var _3=Wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lm(t,e){if(e){if(_3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(be(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(be(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(be(61))}if(e.style!=null&&typeof e.style!="object")throw Error(be(62))}}function cm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fm=null;function Bg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hm=null,Pu=null,Nu=null;function Cy(t){if(t=mf(t)){if(typeof hm!="function")throw Error(be(280));var e=t.stateNode;e&&(e=Pp(e),hm(t.stateNode,t.type,e))}}function lE(t){Pu?Nu?Nu.push(t):Nu=[t]:Pu=t}function cE(){if(Pu){var t=Pu,e=Nu;if(Nu=Pu=null,Cy(t),e)for(t=0;t<e.length;t++)Cy(e[t])}}function fE(t,e){return t(e)}function hE(){}var D0=!1;function dE(t,e,n){if(D0)return t(e,n);D0=!0;try{return fE(t,e,n)}finally{D0=!1,(Pu!==null||Nu!==null)&&(hE(),cE())}}function Ic(t,e){var n=t.stateNode;if(n===null)return null;var r=Pp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(be(231,e,typeof n));return n}var dm=!1;if(Va)try{var Fl={};Object.defineProperty(Fl,"passive",{get:function(){dm=!0}}),window.addEventListener("test",Fl,Fl),window.removeEventListener("test",Fl,Fl)}catch{dm=!1}function b3(t,e,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var oc=!1,md=null,gd=!1,pm=null,E3={onError:function(t){oc=!0,md=t}};function S3(t,e,n,r,i,a,o,s,u){oc=!1,md=null,b3.apply(E3,arguments)}function C3(t,e,n,r,i,a,o,s,u){if(S3.apply(this,arguments),oc){if(oc){var l=md;oc=!1,md=null}else throw Error(be(198));gd||(gd=!0,pm=l)}}function $s(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ty(t){if($s(t)!==t)throw Error(be(188))}function T3(t){var e=t.alternate;if(!e){if(e=$s(t),e===null)throw Error(be(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ty(i),t;if(a===r)return Ty(i),e;a=a.sibling}throw Error(be(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error(be(189))}}if(n.alternate!==r)throw Error(be(190))}if(n.tag!==3)throw Error(be(188));return n.stateNode.current===n?t:e}function vE(t){return t=T3(t),t!==null?mE(t):null}function mE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mE(t);if(e!==null)return e;t=t.sibling}return null}var gE=ti.unstable_scheduleCallback,ky=ti.unstable_cancelCallback,k3=ti.unstable_shouldYield,A3=ti.unstable_requestPaint,Yt=ti.unstable_now,I3=ti.unstable_getCurrentPriorityLevel,Wg=ti.unstable_ImmediatePriority,xE=ti.unstable_UserBlockingPriority,xd=ti.unstable_NormalPriority,R3=ti.unstable_LowPriority,yE=ti.unstable_IdlePriority,Rp=null,sa=null;function F3(t){if(sa&&typeof sa.onCommitFiberRoot=="function")try{sa.onCommitFiberRoot(Rp,t,void 0,(t.current.flags&128)===128)}catch{}}var Ni=Math.clz32?Math.clz32:P3,D3=Math.log,O3=Math.LN2;function P3(t){return t>>>=0,t===0?32:31-(D3(t)/O3|0)|0}var Zf=64,eh=4194304;function Ql(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var s=o&~i;s!==0?r=Ql(s):(a&=o,a!==0&&(r=Ql(a)))}else o=n&~i,o!==0?r=Ql(o):a!==0&&(r=Ql(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ni(e),i=1<<n,r|=t[n],e&=~i;return r}function N3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M3(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Ni(a),s=1<<o,u=i[o];u===-1?(!(s&n)||s&r)&&(i[o]=N3(s,e)):u<=e&&(t.expiredLanes|=s),a&=~s}}function vm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wE(){var t=Zf;return Zf<<=1,!(Zf&4194240)&&(Zf=64),t}function O0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ni(e),t[e]=n}function L3(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ni(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function zg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ni(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var wt=0;function _E(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bE,Ug,EE,SE,CE,mm=!1,th=[],ko=null,Ao=null,Io=null,Rc=new Map,Fc=new Map,vo=[],B3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ay(t,e){switch(t){case"focusin":case"focusout":ko=null;break;case"dragenter":case"dragleave":Ao=null;break;case"mouseover":case"mouseout":Io=null;break;case"pointerover":case"pointerout":Rc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(e.pointerId)}}function Dl(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=mf(e),e!==null&&Ug(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function W3(t,e,n,r,i){switch(e){case"focusin":return ko=Dl(ko,t,e,n,r,i),!0;case"dragenter":return Ao=Dl(Ao,t,e,n,r,i),!0;case"mouseover":return Io=Dl(Io,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rc.set(a,Dl(Rc.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Fc.set(a,Dl(Fc.get(a)||null,t,e,n,r,i)),!0}return!1}function TE(t){var e=xs(t.target);if(e!==null){var n=$s(e);if(n!==null){if(e=n.tag,e===13){if(e=pE(n),e!==null){t.blockedOn=e,CE(t.priority,function(){EE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fm=r,n.target.dispatchEvent(r),fm=null}else return e=mf(n),e!==null&&Ug(e),t.blockedOn=n,!1;e.shift()}return!0}function Iy(t,e,n){Jh(t)&&n.delete(e)}function z3(){mm=!1,ko!==null&&Jh(ko)&&(ko=null),Ao!==null&&Jh(Ao)&&(Ao=null),Io!==null&&Jh(Io)&&(Io=null),Rc.forEach(Iy),Fc.forEach(Iy)}function Ol(t,e){t.blockedOn===e&&(t.blockedOn=null,mm||(mm=!0,ti.unstable_scheduleCallback(ti.unstable_NormalPriority,z3)))}function Dc(t){function e(i){return Ol(i,t)}if(0<th.length){Ol(th[0],t);for(var n=1;n<th.length;n++){var r=th[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ko!==null&&Ol(ko,t),Ao!==null&&Ol(Ao,t),Io!==null&&Ol(Io,t),Rc.forEach(e),Fc.forEach(e),n=0;n<vo.length;n++)r=vo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vo.length&&(n=vo[0],n.blockedOn===null);)TE(n),n.blockedOn===null&&vo.shift()}var Mu=qa.ReactCurrentBatchConfig,wd=!0;function U3(t,e,n,r){var i=wt,a=Mu.transition;Mu.transition=null;try{wt=1,Vg(t,e,n,r)}finally{wt=i,Mu.transition=a}}function V3(t,e,n,r){var i=wt,a=Mu.transition;Mu.transition=null;try{wt=4,Vg(t,e,n,r)}finally{wt=i,Mu.transition=a}}function Vg(t,e,n,r){if(wd){var i=gm(t,e,n,r);if(i===null)H0(t,e,r,_d,n),Ay(t,r);else if(W3(i,t,e,n,r))r.stopPropagation();else if(Ay(t,r),e&4&&-1<B3.indexOf(t)){for(;i!==null;){var a=mf(i);if(a!==null&&bE(a),a=gm(t,e,n,r),a===null&&H0(t,e,r,_d,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else H0(t,e,r,null,n)}}var _d=null;function gm(t,e,n,r){if(_d=null,t=Bg(r),t=xs(t),t!==null)if(e=$s(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _d=t,null}function kE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(I3()){case Wg:return 1;case xE:return 4;case xd:case R3:return 16;case yE:return 536870912;default:return 16}default:return 16}}var go=null,Hg=null,Zh=null;function AE(){if(Zh)return Zh;var t,e=Hg,n=e.length,r,i="value"in go?go.value:go.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return Zh=i.slice(t,1<r?1-r:void 0)}function ed(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nh(){return!0}function Ry(){return!1}function ii(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?nh:Ry,this.isPropagationStopped=Ry,this}return Wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nh)},persist:function(){},isPersistent:nh}),e}var vl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$g=ii(vl),vf=Wt({},vl,{view:0,detail:0}),H3=ii(vf),P0,N0,Pl,Fp=Wt({},vf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pl&&(Pl&&t.type==="mousemove"?(P0=t.screenX-Pl.screenX,N0=t.screenY-Pl.screenY):N0=P0=0,Pl=t),P0)},movementY:function(t){return"movementY"in t?t.movementY:N0}}),Fy=ii(Fp),$3=Wt({},Fp,{dataTransfer:0}),j3=ii($3),G3=Wt({},vf,{relatedTarget:0}),M0=ii(G3),X3=Wt({},vl,{animationName:0,elapsedTime:0,pseudoElement:0}),K3=ii(X3),q3=Wt({},vl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Y3=ii(q3),Q3=Wt({},vl,{data:0}),Dy=ii(Q3),J3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Z3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eI[t])?!!e[t]:!1}function jg(){return tI}var nI=Wt({},vf,{key:function(t){if(t.key){var e=J3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ed(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Z3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jg,charCode:function(t){return t.type==="keypress"?ed(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ed(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rI=ii(nI),iI=Wt({},Fp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oy=ii(iI),aI=Wt({},vf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jg}),oI=ii(aI),sI=Wt({},vl,{propertyName:0,elapsedTime:0,pseudoElement:0}),uI=ii(sI),lI=Wt({},Fp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cI=ii(lI),fI=[9,13,27,32],Gg=Va&&"CompositionEvent"in window,sc=null;Va&&"documentMode"in document&&(sc=document.documentMode);var hI=Va&&"TextEvent"in window&&!sc,IE=Va&&(!Gg||sc&&8<sc&&11>=sc),Py=" ",Ny=!1;function RE(t,e){switch(t){case"keyup":return fI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bu=!1;function dI(t,e){switch(t){case"compositionend":return FE(e);case"keypress":return e.which!==32?null:(Ny=!0,Py);case"textInput":return t=e.data,t===Py&&Ny?null:t;default:return null}}function pI(t,e){if(bu)return t==="compositionend"||!Gg&&RE(t,e)?(t=AE(),Zh=Hg=go=null,bu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return IE&&e.locale!=="ko"?null:e.data;default:return null}}var vI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function My(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vI[t.type]:e==="textarea"}function DE(t,e,n,r){lE(r),e=bd(e,"onChange"),0<e.length&&(n=new $g("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var uc=null,Oc=null;function mI(t){HE(t,0)}function Dp(t){var e=Cu(t);if(nE(e))return t}function gI(t,e){if(t==="change")return e}var OE=!1;if(Va){var L0;if(Va){var B0="oninput"in document;if(!B0){var Ly=document.createElement("div");Ly.setAttribute("oninput","return;"),B0=typeof Ly.oninput=="function"}L0=B0}else L0=!1;OE=L0&&(!document.documentMode||9<document.documentMode)}function By(){uc&&(uc.detachEvent("onpropertychange",PE),Oc=uc=null)}function PE(t){if(t.propertyName==="value"&&Dp(Oc)){var e=[];DE(e,Oc,t,Bg(t)),dE(mI,e)}}function xI(t,e,n){t==="focusin"?(By(),uc=e,Oc=n,uc.attachEvent("onpropertychange",PE)):t==="focusout"&&By()}function yI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dp(Oc)}function wI(t,e){if(t==="click")return Dp(e)}function _I(t,e){if(t==="input"||t==="change")return Dp(e)}function bI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wi=typeof Object.is=="function"?Object.is:bI;function Pc(t,e){if(Wi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Zv.call(e,i)||!Wi(t[i],e[i]))return!1}return!0}function Wy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zy(t,e){var n=Wy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wy(n)}}function NE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ME(){for(var t=window,e=vd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vd(t.document)}return e}function Xg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function EI(t){var e=ME(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&NE(n.ownerDocument.documentElement,n)){if(r!==null&&Xg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=zy(n,a);var o=zy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var SI=Va&&"documentMode"in document&&11>=document.documentMode,Eu=null,xm=null,lc=null,ym=!1;function Uy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ym||Eu==null||Eu!==vd(r)||(r=Eu,"selectionStart"in r&&Xg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lc&&Pc(lc,r)||(lc=r,r=bd(xm,"onSelect"),0<r.length&&(e=new $g("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Eu)))}function rh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Su={animationend:rh("Animation","AnimationEnd"),animationiteration:rh("Animation","AnimationIteration"),animationstart:rh("Animation","AnimationStart"),transitionend:rh("Transition","TransitionEnd")},W0={},LE={};Va&&(LE=document.createElement("div").style,"AnimationEvent"in window||(delete Su.animationend.animation,delete Su.animationiteration.animation,delete Su.animationstart.animation),"TransitionEvent"in window||delete Su.transitionend.transition);function Op(t){if(W0[t])return W0[t];if(!Su[t])return t;var e=Su[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in LE)return W0[t]=e[n];return t}var BE=Op("animationend"),WE=Op("animationiteration"),zE=Op("animationstart"),UE=Op("transitionend"),VE=new Map,Vy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xo(t,e){VE.set(t,e),Hs(e,[t])}for(var z0=0;z0<Vy.length;z0++){var U0=Vy[z0],CI=U0.toLowerCase(),TI=U0[0].toUpperCase()+U0.slice(1);Xo(CI,"on"+TI)}Xo(BE,"onAnimationEnd");Xo(WE,"onAnimationIteration");Xo(zE,"onAnimationStart");Xo("dblclick","onDoubleClick");Xo("focusin","onFocus");Xo("focusout","onBlur");Xo(UE,"onTransitionEnd");Zu("onMouseEnter",["mouseout","mouseover"]);Zu("onMouseLeave",["mouseout","mouseover"]);Zu("onPointerEnter",["pointerout","pointerover"]);Zu("onPointerLeave",["pointerout","pointerover"]);Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jl));function Hy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,C3(r,e,void 0,t),t.currentTarget=null}function HE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Hy(i,s,l),a=u}else for(o=0;o<r.length;o++){if(s=r[o],u=s.instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Hy(i,s,l),a=u}}}if(gd)throw t=pm,gd=!1,pm=null,t}function kt(t,e){var n=e[Sm];n===void 0&&(n=e[Sm]=new Set);var r=t+"__bubble";n.has(r)||($E(e,t,2,!1),n.add(r))}function V0(t,e,n){var r=0;e&&(r|=4),$E(n,t,r,e)}var ih="_reactListening"+Math.random().toString(36).slice(2);function Nc(t){if(!t[ih]){t[ih]=!0,Qb.forEach(function(n){n!=="selectionchange"&&(kI.has(n)||V0(n,!1,t),V0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ih]||(e[ih]=!0,V0("selectionchange",!1,e))}}function $E(t,e,n,r){switch(kE(e)){case 1:var i=U3;break;case 4:i=V3;break;default:i=Vg}n=i.bind(null,e,n,t),i=void 0,!dm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function H0(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;s!==null;){if(o=xs(s),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}s=s.parentNode}}r=r.return}dE(function(){var l=a,c=Bg(n),f=[];e:{var h=VE.get(t);if(h!==void 0){var d=$g,v=t;switch(t){case"keypress":if(ed(n)===0)break e;case"keydown":case"keyup":d=rI;break;case"focusin":v="focus",d=M0;break;case"focusout":v="blur",d=M0;break;case"beforeblur":case"afterblur":d=M0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Fy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=j3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=oI;break;case BE:case WE:case zE:d=K3;break;case UE:d=uI;break;case"scroll":d=H3;break;case"wheel":d=cI;break;case"copy":case"cut":case"paste":d=Y3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Oy}var p=(e&4)!==0,m=!p&&t==="scroll",g=p?h!==null?h+"Capture":null:h;p=[];for(var x=l,y;x!==null;){y=x;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,g!==null&&(w=Ic(x,g),w!=null&&p.push(Mc(x,w,y)))),m)break;x=x.return}0<p.length&&(h=new d(h,v,null,n,c),f.push({event:h,listeners:p}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==fm&&(v=n.relatedTarget||n.fromElement)&&(xs(v)||v[Ha]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(v=n.relatedTarget||n.toElement,d=l,v=v?xs(v):null,v!==null&&(m=$s(v),v!==m||v.tag!==5&&v.tag!==6)&&(v=null)):(d=null,v=l),d!==v)){if(p=Fy,w="onMouseLeave",g="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(p=Oy,w="onPointerLeave",g="onPointerEnter",x="pointer"),m=d==null?h:Cu(d),y=v==null?h:Cu(v),h=new p(w,x+"leave",d,n,c),h.target=m,h.relatedTarget=y,w=null,xs(c)===l&&(p=new p(g,x+"enter",v,n,c),p.target=y,p.relatedTarget=m,w=p),m=w,d&&v)t:{for(p=d,g=v,x=0,y=p;y;y=ou(y))x++;for(y=0,w=g;w;w=ou(w))y++;for(;0<x-y;)p=ou(p),x--;for(;0<y-x;)g=ou(g),y--;for(;x--;){if(p===g||g!==null&&p===g.alternate)break t;p=ou(p),g=ou(g)}p=null}else p=null;d!==null&&$y(f,h,d,p,!1),v!==null&&m!==null&&$y(f,m,v,p,!0)}}e:{if(h=l?Cu(l):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var _=gI;else if(My(h))if(OE)_=_I;else{_=yI;var b=xI}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=wI);if(_&&(_=_(t,l))){DE(f,_,n,c);break e}b&&b(t,h,l),t==="focusout"&&(b=h._wrapperState)&&b.controlled&&h.type==="number"&&om(h,"number",h.value)}switch(b=l?Cu(l):window,t){case"focusin":(My(b)||b.contentEditable==="true")&&(Eu=b,xm=l,lc=null);break;case"focusout":lc=xm=Eu=null;break;case"mousedown":ym=!0;break;case"contextmenu":case"mouseup":case"dragend":ym=!1,Uy(f,n,c);break;case"selectionchange":if(SI)break;case"keydown":case"keyup":Uy(f,n,c)}var E;if(Gg)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else bu?RE(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(IE&&n.locale!=="ko"&&(bu||S!=="onCompositionStart"?S==="onCompositionEnd"&&bu&&(E=AE()):(go=c,Hg="value"in go?go.value:go.textContent,bu=!0)),b=bd(l,S),0<b.length&&(S=new Dy(S,t,null,n,c),f.push({event:S,listeners:b}),E?S.data=E:(E=FE(n),E!==null&&(S.data=E)))),(E=hI?dI(t,n):pI(t,n))&&(l=bd(l,"onBeforeInput"),0<l.length&&(c=new Dy("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=E))}HE(f,e)})}function Mc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Ic(t,n),a!=null&&r.unshift(Mc(t,a,i)),a=Ic(t,e),a!=null&&r.push(Mc(t,a,i))),t=t.return}return r}function ou(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $y(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,i?(u=Ic(n,a),u!=null&&o.unshift(Mc(n,u,s))):i||(u=Ic(n,a),u!=null&&o.push(Mc(n,u,s)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var AI=/\r\n?/g,II=/\u0000|\uFFFD/g;function jy(t){return(typeof t=="string"?t:""+t).replace(AI,`
`).replace(II,"")}function ah(t,e,n){if(e=jy(e),jy(t)!==e&&n)throw Error(be(425))}function Ed(){}var wm=null,_m=null;function bm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Em=typeof setTimeout=="function"?setTimeout:void 0,RI=typeof clearTimeout=="function"?clearTimeout:void 0,Gy=typeof Promise=="function"?Promise:void 0,FI=typeof queueMicrotask=="function"?queueMicrotask:typeof Gy<"u"?function(t){return Gy.resolve(null).then(t).catch(DI)}:Em;function DI(t){setTimeout(function(){throw t})}function $0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Dc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Dc(e)}function Ro(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ml=Math.random().toString(36).slice(2),na="__reactFiber$"+ml,Lc="__reactProps$"+ml,Ha="__reactContainer$"+ml,Sm="__reactEvents$"+ml,OI="__reactListeners$"+ml,PI="__reactHandles$"+ml;function xs(t){var e=t[na];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ha]||n[na]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xy(t);t!==null;){if(n=t[na])return n;t=Xy(t)}return e}t=n,n=t.parentNode}return null}function mf(t){return t=t[na]||t[Ha],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(be(33))}function Pp(t){return t[Lc]||null}var Cm=[],Tu=-1;function Ko(t){return{current:t}}function Rt(t){0>Tu||(t.current=Cm[Tu],Cm[Tu]=null,Tu--)}function Ct(t,e){Tu++,Cm[Tu]=t.current,t.current=e}var zo={},or=Ko(zo),kr=Ko(!1),Ds=zo;function el(t,e){var n=t.type.contextTypes;if(!n)return zo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ar(t){return t=t.childContextTypes,t!=null}function Sd(){Rt(kr),Rt(or)}function Ky(t,e,n){if(or.current!==zo)throw Error(be(168));Ct(or,e),Ct(kr,n)}function jE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(be(108,x3(t)||"Unknown",i));return Wt({},n,r)}function Cd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zo,Ds=or.current,Ct(or,t),Ct(kr,kr.current),!0}function qy(t,e,n){var r=t.stateNode;if(!r)throw Error(be(169));n?(t=jE(t,e,Ds),r.__reactInternalMemoizedMergedChildContext=t,Rt(kr),Rt(or),Ct(or,t)):Rt(kr),Ct(kr,n)}var Oa=null,Np=!1,j0=!1;function GE(t){Oa===null?Oa=[t]:Oa.push(t)}function NI(t){Np=!0,GE(t)}function qo(){if(!j0&&Oa!==null){j0=!0;var t=0,e=wt;try{var n=Oa;for(wt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Oa=null,Np=!1}catch(i){throw Oa!==null&&(Oa=Oa.slice(t+1)),gE(Wg,qo),i}finally{wt=e,j0=!1}}return null}var ku=[],Au=0,Td=null,kd=0,ci=[],fi=0,Os=null,Ma=1,La="";function ls(t,e){ku[Au++]=kd,ku[Au++]=Td,Td=t,kd=e}function XE(t,e,n){ci[fi++]=Ma,ci[fi++]=La,ci[fi++]=Os,Os=t;var r=Ma;t=La;var i=32-Ni(r)-1;r&=~(1<<i),n+=1;var a=32-Ni(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ma=1<<32-Ni(e)+i|n<<i|r,La=a+t}else Ma=1<<a|n<<i|r,La=t}function Kg(t){t.return!==null&&(ls(t,1),XE(t,1,0))}function qg(t){for(;t===Td;)Td=ku[--Au],ku[Au]=null,kd=ku[--Au],ku[Au]=null;for(;t===Os;)Os=ci[--fi],ci[fi]=null,La=ci[--fi],ci[fi]=null,Ma=ci[--fi],ci[fi]=null}var Zr=null,Kr=null,Ot=!1,Ii=null;function KE(t,e){var n=pi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Yy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zr=t,Kr=Ro(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zr=t,Kr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Os!==null?{id:Ma,overflow:La}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=pi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zr=t,Kr=null,!0):!1;default:return!1}}function Tm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function km(t){if(Ot){var e=Kr;if(e){var n=e;if(!Yy(t,e)){if(Tm(t))throw Error(be(418));e=Ro(n.nextSibling);var r=Zr;e&&Yy(t,e)?KE(r,n):(t.flags=t.flags&-4097|2,Ot=!1,Zr=t)}}else{if(Tm(t))throw Error(be(418));t.flags=t.flags&-4097|2,Ot=!1,Zr=t}}}function Qy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zr=t}function oh(t){if(t!==Zr)return!1;if(!Ot)return Qy(t),Ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bm(t.type,t.memoizedProps)),e&&(e=Kr)){if(Tm(t))throw qE(),Error(be(418));for(;e;)KE(t,e),e=Ro(e.nextSibling)}if(Qy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(be(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kr=Ro(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kr=null}}else Kr=Zr?Ro(t.stateNode.nextSibling):null;return!0}function qE(){for(var t=Kr;t;)t=Ro(t.nextSibling)}function tl(){Kr=Zr=null,Ot=!1}function Yg(t){Ii===null?Ii=[t]:Ii.push(t)}var MI=qa.ReactCurrentBatchConfig;function Nl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(be(309));var r=n.stateNode}if(!r)throw Error(be(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(be(284));if(!n._owner)throw Error(be(290,t))}return t}function sh(t,e){throw t=Object.prototype.toString.call(e),Error(be(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jy(t){var e=t._init;return e(t._payload)}function YE(t){function e(g,x){if(t){var y=g.deletions;y===null?(g.deletions=[x],g.flags|=16):y.push(x)}}function n(g,x){if(!t)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function r(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function i(g,x){return g=Po(g,x),g.index=0,g.sibling=null,g}function a(g,x,y){return g.index=y,t?(y=g.alternate,y!==null?(y=y.index,y<x?(g.flags|=2,x):y):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function s(g,x,y,w){return x===null||x.tag!==6?(x=J0(y,g.mode,w),x.return=g,x):(x=i(x,y),x.return=g,x)}function u(g,x,y,w){var _=y.type;return _===_u?c(g,x,y.props.children,w,y.key):x!==null&&(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ho&&Jy(_)===x.type)?(w=i(x,y.props),w.ref=Nl(g,x,y),w.return=g,w):(w=sd(y.type,y.key,y.props,null,g.mode,w),w.ref=Nl(g,x,y),w.return=g,w)}function l(g,x,y,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=Z0(y,g.mode,w),x.return=g,x):(x=i(x,y.children||[]),x.return=g,x)}function c(g,x,y,w,_){return x===null||x.tag!==7?(x=ks(y,g.mode,w,_),x.return=g,x):(x=i(x,y),x.return=g,x)}function f(g,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=J0(""+x,g.mode,y),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Yf:return y=sd(x.type,x.key,x.props,null,g.mode,y),y.ref=Nl(g,null,x),y.return=g,y;case wu:return x=Z0(x,g.mode,y),x.return=g,x;case ho:var w=x._init;return f(g,w(x._payload),y)}if(Yl(x)||Rl(x))return x=ks(x,g.mode,y,null),x.return=g,x;sh(g,x)}return null}function h(g,x,y,w){var _=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return _!==null?null:s(g,x,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Yf:return y.key===_?u(g,x,y,w):null;case wu:return y.key===_?l(g,x,y,w):null;case ho:return _=y._init,h(g,x,_(y._payload),w)}if(Yl(y)||Rl(y))return _!==null?null:c(g,x,y,w,null);sh(g,y)}return null}function d(g,x,y,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(y)||null,s(x,g,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yf:return g=g.get(w.key===null?y:w.key)||null,u(x,g,w,_);case wu:return g=g.get(w.key===null?y:w.key)||null,l(x,g,w,_);case ho:var b=w._init;return d(g,x,y,b(w._payload),_)}if(Yl(w)||Rl(w))return g=g.get(y)||null,c(x,g,w,_,null);sh(x,w)}return null}function v(g,x,y,w){for(var _=null,b=null,E=x,S=x=0,C=null;E!==null&&S<y.length;S++){E.index>S?(C=E,E=null):C=E.sibling;var T=h(g,E,y[S],w);if(T===null){E===null&&(E=C);break}t&&E&&T.alternate===null&&e(g,E),x=a(T,x,S),b===null?_=T:b.sibling=T,b=T,E=C}if(S===y.length)return n(g,E),Ot&&ls(g,S),_;if(E===null){for(;S<y.length;S++)E=f(g,y[S],w),E!==null&&(x=a(E,x,S),b===null?_=E:b.sibling=E,b=E);return Ot&&ls(g,S),_}for(E=r(g,E);S<y.length;S++)C=d(E,g,S,y[S],w),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?S:C.key),x=a(C,x,S),b===null?_=C:b.sibling=C,b=C);return t&&E.forEach(function(A){return e(g,A)}),Ot&&ls(g,S),_}function p(g,x,y,w){var _=Rl(y);if(typeof _!="function")throw Error(be(150));if(y=_.call(y),y==null)throw Error(be(151));for(var b=_=null,E=x,S=x=0,C=null,T=y.next();E!==null&&!T.done;S++,T=y.next()){E.index>S?(C=E,E=null):C=E.sibling;var A=h(g,E,T.value,w);if(A===null){E===null&&(E=C);break}t&&E&&A.alternate===null&&e(g,E),x=a(A,x,S),b===null?_=A:b.sibling=A,b=A,E=C}if(T.done)return n(g,E),Ot&&ls(g,S),_;if(E===null){for(;!T.done;S++,T=y.next())T=f(g,T.value,w),T!==null&&(x=a(T,x,S),b===null?_=T:b.sibling=T,b=T);return Ot&&ls(g,S),_}for(E=r(g,E);!T.done;S++,T=y.next())T=d(E,g,S,T.value,w),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?S:T.key),x=a(T,x,S),b===null?_=T:b.sibling=T,b=T);return t&&E.forEach(function(I){return e(g,I)}),Ot&&ls(g,S),_}function m(g,x,y,w){if(typeof y=="object"&&y!==null&&y.type===_u&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Yf:e:{for(var _=y.key,b=x;b!==null;){if(b.key===_){if(_=y.type,_===_u){if(b.tag===7){n(g,b.sibling),x=i(b,y.props.children),x.return=g,g=x;break e}}else if(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===ho&&Jy(_)===b.type){n(g,b.sibling),x=i(b,y.props),x.ref=Nl(g,b,y),x.return=g,g=x;break e}n(g,b);break}else e(g,b);b=b.sibling}y.type===_u?(x=ks(y.props.children,g.mode,w,y.key),x.return=g,g=x):(w=sd(y.type,y.key,y.props,null,g.mode,w),w.ref=Nl(g,x,y),w.return=g,g=w)}return o(g);case wu:e:{for(b=y.key;x!==null;){if(x.key===b)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){n(g,x.sibling),x=i(x,y.children||[]),x.return=g,g=x;break e}else{n(g,x);break}else e(g,x);x=x.sibling}x=Z0(y,g.mode,w),x.return=g,g=x}return o(g);case ho:return b=y._init,m(g,x,b(y._payload),w)}if(Yl(y))return v(g,x,y,w);if(Rl(y))return p(g,x,y,w);sh(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(n(g,x.sibling),x=i(x,y),x.return=g,g=x):(n(g,x),x=J0(y,g.mode,w),x.return=g,g=x),o(g)):n(g,x)}return m}var nl=YE(!0),QE=YE(!1),Ad=Ko(null),Id=null,Iu=null,Qg=null;function Jg(){Qg=Iu=Id=null}function Zg(t){var e=Ad.current;Rt(Ad),t._currentValue=e}function Am(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Lu(t,e){Id=t,Qg=Iu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Cr=!0),t.firstContext=null)}function gi(t){var e=t._currentValue;if(Qg!==t)if(t={context:t,memoizedValue:e,next:null},Iu===null){if(Id===null)throw Error(be(308));Iu=t,Id.dependencies={lanes:0,firstContext:t}}else Iu=Iu.next=t;return e}var ys=null;function e1(t){ys===null?ys=[t]:ys.push(t)}function JE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,e1(e)):(n.next=i.next,i.next=n),e.interleaved=n,$a(t,r)}function $a(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var po=!1;function t1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ba(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ut&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,$a(t,n)}return i=r.interleaved,i===null?(e.next=e,e1(r)):(e.next=i.next,i.next=e),r.interleaved=e,$a(t,n)}function td(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zg(t,n)}}function Zy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rd(t,e,n,r){var i=t.updateQueue;po=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,l=u.next;u.next=null,o===null?a=l:o.next=l,o=u;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(a!==null){var f=i.baseState;o=0,c=l=u=null,s=a;do{var h=s.lane,d=s.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=t,p=s;switch(h=e,d=n,p.tag){case 1:if(v=p.payload,typeof v=="function"){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,h=typeof v=="function"?v.call(d,f,h):v,h==null)break e;f=Wt({},f,h);break e;case 2:po=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=d,u=f):c=c.next=d,o|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Ns|=o,t.lanes=o,t.memoizedState=f}}function e2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(be(191,i));i.call(r)}}}var gf={},ua=Ko(gf),Bc=Ko(gf),Wc=Ko(gf);function ws(t){if(t===gf)throw Error(be(174));return t}function n1(t,e){switch(Ct(Wc,e),Ct(Bc,t),Ct(ua,gf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:um(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=um(e,t)}Rt(ua),Ct(ua,e)}function rl(){Rt(ua),Rt(Bc),Rt(Wc)}function eS(t){ws(Wc.current);var e=ws(ua.current),n=um(e,t.type);e!==n&&(Ct(Bc,t),Ct(ua,n))}function r1(t){Bc.current===t&&(Rt(ua),Rt(Bc))}var Nt=Ko(0);function Fd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var G0=[];function i1(){for(var t=0;t<G0.length;t++)G0[t]._workInProgressVersionPrimary=null;G0.length=0}var nd=qa.ReactCurrentDispatcher,X0=qa.ReactCurrentBatchConfig,Ps=0,Bt=null,pn=null,Tn=null,Dd=!1,cc=!1,zc=0,LI=0;function qn(){throw Error(be(321))}function a1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wi(t[n],e[n]))return!1;return!0}function o1(t,e,n,r,i,a){if(Ps=a,Bt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nd.current=t===null||t.memoizedState===null?UI:VI,t=n(r,i),cc){a=0;do{if(cc=!1,zc=0,25<=a)throw Error(be(301));a+=1,Tn=pn=null,e.updateQueue=null,nd.current=HI,t=n(r,i)}while(cc)}if(nd.current=Od,e=pn!==null&&pn.next!==null,Ps=0,Tn=pn=Bt=null,Dd=!1,e)throw Error(be(300));return t}function s1(){var t=zc!==0;return zc=0,t}function Ji(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Bt.memoizedState=Tn=t:Tn=Tn.next=t,Tn}function xi(){if(pn===null){var t=Bt.alternate;t=t!==null?t.memoizedState:null}else t=pn.next;var e=Tn===null?Bt.memoizedState:Tn.next;if(e!==null)Tn=e,pn=t;else{if(t===null)throw Error(be(310));pn=t,t={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},Tn===null?Bt.memoizedState=Tn=t:Tn=Tn.next=t}return Tn}function Uc(t,e){return typeof e=="function"?e(t):e}function K0(t){var e=xi(),n=e.queue;if(n===null)throw Error(be(311));n.lastRenderedReducer=t;var r=pn,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var s=o=null,u=null,l=a;do{var c=l.lane;if((Ps&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=f,o=r):u=u.next=f,Bt.lanes|=c,Ns|=c}l=l.next}while(l!==null&&l!==a);u===null?o=r:u.next=s,Wi(r,e.memoizedState)||(Cr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,Bt.lanes|=a,Ns|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function q0(t){var e=xi(),n=e.queue;if(n===null)throw Error(be(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Wi(a,e.memoizedState)||(Cr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function tS(){}function nS(t,e){var n=Bt,r=xi(),i=e(),a=!Wi(r.memoizedState,i);if(a&&(r.memoizedState=i,Cr=!0),r=r.queue,u1(aS.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Tn!==null&&Tn.memoizedState.tag&1){if(n.flags|=2048,Vc(9,iS.bind(null,n,r,i,e),void 0,null),Fn===null)throw Error(be(349));Ps&30||rS(n,e,i)}return i}function rS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iS(t,e,n,r){e.value=n,e.getSnapshot=r,oS(e)&&sS(t)}function aS(t,e,n){return n(function(){oS(e)&&sS(t)})}function oS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wi(t,n)}catch{return!0}}function sS(t){var e=$a(t,1);e!==null&&Mi(e,t,1,-1)}function t2(t){var e=Ji();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uc,lastRenderedState:t},e.queue=t,t=t.dispatch=zI.bind(null,Bt,t),[e.memoizedState,t]}function Vc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function uS(){return xi().memoizedState}function rd(t,e,n,r){var i=Ji();Bt.flags|=t,i.memoizedState=Vc(1|e,n,void 0,r===void 0?null:r)}function Mp(t,e,n,r){var i=xi();r=r===void 0?null:r;var a=void 0;if(pn!==null){var o=pn.memoizedState;if(a=o.destroy,r!==null&&a1(r,o.deps)){i.memoizedState=Vc(e,n,a,r);return}}Bt.flags|=t,i.memoizedState=Vc(1|e,n,a,r)}function n2(t,e){return rd(8390656,8,t,e)}function u1(t,e){return Mp(2048,8,t,e)}function lS(t,e){return Mp(4,2,t,e)}function cS(t,e){return Mp(4,4,t,e)}function fS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hS(t,e,n){return n=n!=null?n.concat([t]):null,Mp(4,4,fS.bind(null,e,t),n)}function l1(){}function dS(t,e){var n=xi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&a1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pS(t,e){var n=xi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&a1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vS(t,e,n){return Ps&21?(Wi(n,e)||(n=wE(),Bt.lanes|=n,Ns|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Cr=!0),t.memoizedState=n)}function BI(t,e){var n=wt;wt=n!==0&&4>n?n:4,t(!0);var r=X0.transition;X0.transition={};try{t(!1),e()}finally{wt=n,X0.transition=r}}function mS(){return xi().memoizedState}function WI(t,e,n){var r=Oo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gS(t))xS(e,n);else if(n=JE(t,e,n,r),n!==null){var i=vr();Mi(n,t,r,i),yS(n,e,r)}}function zI(t,e,n){var r=Oo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gS(t))xS(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Wi(s,o)){var u=e.interleaved;u===null?(i.next=i,e1(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=JE(t,e,i,r),n!==null&&(i=vr(),Mi(n,t,r,i),yS(n,e,r))}}function gS(t){var e=t.alternate;return t===Bt||e!==null&&e===Bt}function xS(t,e){cc=Dd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zg(t,n)}}var Od={readContext:gi,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},UI={readContext:gi,useCallback:function(t,e){return Ji().memoizedState=[t,e===void 0?null:e],t},useContext:gi,useEffect:n2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rd(4194308,4,fS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rd(4194308,4,t,e)},useInsertionEffect:function(t,e){return rd(4,2,t,e)},useMemo:function(t,e){var n=Ji();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ji();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=WI.bind(null,Bt,t),[r.memoizedState,t]},useRef:function(t){var e=Ji();return t={current:t},e.memoizedState=t},useState:t2,useDebugValue:l1,useDeferredValue:function(t){return Ji().memoizedState=t},useTransition:function(){var t=t2(!1),e=t[0];return t=BI.bind(null,t[1]),Ji().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Bt,i=Ji();if(Ot){if(n===void 0)throw Error(be(407));n=n()}else{if(n=e(),Fn===null)throw Error(be(349));Ps&30||rS(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,n2(aS.bind(null,r,a,t),[t]),r.flags|=2048,Vc(9,iS.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Ji(),e=Fn.identifierPrefix;if(Ot){var n=La,r=Ma;n=(r&~(1<<32-Ni(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=LI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},VI={readContext:gi,useCallback:dS,useContext:gi,useEffect:u1,useImperativeHandle:hS,useInsertionEffect:lS,useLayoutEffect:cS,useMemo:pS,useReducer:K0,useRef:uS,useState:function(){return K0(Uc)},useDebugValue:l1,useDeferredValue:function(t){var e=xi();return vS(e,pn.memoizedState,t)},useTransition:function(){var t=K0(Uc)[0],e=xi().memoizedState;return[t,e]},useMutableSource:tS,useSyncExternalStore:nS,useId:mS,unstable_isNewReconciler:!1},HI={readContext:gi,useCallback:dS,useContext:gi,useEffect:u1,useImperativeHandle:hS,useInsertionEffect:lS,useLayoutEffect:cS,useMemo:pS,useReducer:q0,useRef:uS,useState:function(){return q0(Uc)},useDebugValue:l1,useDeferredValue:function(t){var e=xi();return pn===null?e.memoizedState=t:vS(e,pn.memoizedState,t)},useTransition:function(){var t=q0(Uc)[0],e=xi().memoizedState;return[t,e]},useMutableSource:tS,useSyncExternalStore:nS,useId:mS,unstable_isNewReconciler:!1};function ki(t,e){if(t&&t.defaultProps){e=Wt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Im(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Wt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Lp={isMounted:function(t){return(t=t._reactInternals)?$s(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vr(),i=Oo(t),a=Ba(r,i);a.payload=e,n!=null&&(a.callback=n),e=Fo(t,a,i),e!==null&&(Mi(e,t,i,r),td(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vr(),i=Oo(t),a=Ba(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Fo(t,a,i),e!==null&&(Mi(e,t,i,r),td(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vr(),r=Oo(t),i=Ba(n,r);i.tag=2,e!=null&&(i.callback=e),e=Fo(t,i,r),e!==null&&(Mi(e,t,r,n),td(e,t,r))}};function r2(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Pc(n,r)||!Pc(i,a):!0}function wS(t,e,n){var r=!1,i=zo,a=e.contextType;return typeof a=="object"&&a!==null?a=gi(a):(i=Ar(e)?Ds:or.current,r=e.contextTypes,a=(r=r!=null)?el(t,i):zo),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function i2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Lp.enqueueReplaceState(e,e.state,null)}function Rm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},t1(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=gi(a):(a=Ar(e)?Ds:or.current,i.context=el(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Im(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Lp.enqueueReplaceState(i,i.state,null),Rd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function il(t,e){try{var n="",r=e;do n+=g3(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Y0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $I=typeof WeakMap=="function"?WeakMap:Map;function _S(t,e,n){n=Ba(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Nd||(Nd=!0,Um=r),Fm(t,e)},n}function bS(t,e,n){n=Ba(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Fm(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Fm(t,e),typeof r!="function"&&(Do===null?Do=new Set([this]):Do.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function a2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new $I;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=iR.bind(null,t,e,n),e.then(t,t))}function o2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function s2(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ba(-1,1),e.tag=2,Fo(n,e,1))),n.lanes|=1),t)}var jI=qa.ReactCurrentOwner,Cr=!1;function hr(t,e,n,r){e.child=t===null?QE(e,null,n,r):nl(e,t.child,n,r)}function u2(t,e,n,r,i){n=n.render;var a=e.ref;return Lu(e,i),r=o1(t,e,n,r,a,i),n=s1(),t!==null&&!Cr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ja(t,e,i)):(Ot&&n&&Kg(e),e.flags|=1,hr(t,e,r,i),e.child)}function l2(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!g1(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,ES(t,e,a,r,i)):(t=sd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Pc,n(o,r)&&t.ref===e.ref)return ja(t,e,i)}return e.flags|=1,t=Po(a,r),t.ref=e.ref,t.return=e,e.child=t}function ES(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Pc(a,r)&&t.ref===e.ref)if(Cr=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(Cr=!0);else return e.lanes=t.lanes,ja(t,e,i)}return Dm(t,e,n,r,i)}function SS(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(Fu,Vr),Vr|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ct(Fu,Vr),Vr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Ct(Fu,Vr),Vr|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Ct(Fu,Vr),Vr|=r;return hr(t,e,i,n),e.child}function CS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Dm(t,e,n,r,i){var a=Ar(n)?Ds:or.current;return a=el(e,a),Lu(e,i),n=o1(t,e,n,r,a,i),r=s1(),t!==null&&!Cr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ja(t,e,i)):(Ot&&r&&Kg(e),e.flags|=1,hr(t,e,n,i),e.child)}function c2(t,e,n,r,i){if(Ar(n)){var a=!0;Cd(e)}else a=!1;if(Lu(e,i),e.stateNode===null)id(t,e),wS(e,n,r),Rm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=gi(l):(l=Ar(n)?Ds:or.current,l=el(e,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||u!==l)&&i2(e,o,r,l),po=!1;var h=e.memoizedState;o.state=h,Rd(e,r,o,i),u=e.memoizedState,s!==r||h!==u||kr.current||po?(typeof c=="function"&&(Im(e,n,c,r),u=e.memoizedState),(s=po||r2(e,n,s,r,h,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ZE(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:ki(e.type,s),o.props=l,f=e.pendingProps,h=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=gi(u):(u=Ar(n)?Ds:or.current,u=el(e,u));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||h!==u)&&i2(e,o,r,u),po=!1,h=e.memoizedState,o.state=h,Rd(e,r,o,i);var v=e.memoizedState;s!==f||h!==v||kr.current||po?(typeof d=="function"&&(Im(e,n,d,r),v=e.memoizedState),(l=po||r2(e,n,l,r,h,v,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Om(t,e,n,r,a,i)}function Om(t,e,n,r,i,a){CS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&qy(e,n,!1),ja(t,e,a);r=e.stateNode,jI.current=e;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=nl(e,t.child,null,a),e.child=nl(e,null,s,a)):hr(t,e,s,a),e.memoizedState=r.state,i&&qy(e,n,!0),e.child}function TS(t){var e=t.stateNode;e.pendingContext?Ky(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ky(t,e.context,!1),n1(t,e.containerInfo)}function f2(t,e,n,r,i){return tl(),Yg(i),e.flags|=256,hr(t,e,n,r),e.child}var Pm={dehydrated:null,treeContext:null,retryLane:0};function Nm(t){return{baseLanes:t,cachePool:null,transitions:null}}function kS(t,e,n){var r=e.pendingProps,i=Nt.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ct(Nt,i&1),t===null)return km(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=zp(o,r,0,null),t=ks(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Nm(n),e.memoizedState=Pm,t):c1(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return GI(t,e,o,r,s,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,s=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Po(i,u),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=Po(s,a):(a=ks(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Nm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=Pm,r}return a=t.child,t=a.sibling,r=Po(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function c1(t,e){return e=zp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function uh(t,e,n,r){return r!==null&&Yg(r),nl(e,t.child,null,n),t=c1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function GI(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Y0(Error(be(422))),uh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=zp({mode:"visible",children:r.children},i,0,null),a=ks(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&nl(e,t.child,null,o),e.child.memoizedState=Nm(o),e.memoizedState=Pm,a);if(!(e.mode&1))return uh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(be(419)),r=Y0(a,r,void 0),uh(t,e,o,r)}if(s=(o&t.childLanes)!==0,Cr||s){if(r=Fn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,$a(t,i),Mi(r,t,i,-1))}return m1(),r=Y0(Error(be(421))),uh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=aR.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Kr=Ro(i.nextSibling),Zr=e,Ot=!0,Ii=null,t!==null&&(ci[fi++]=Ma,ci[fi++]=La,ci[fi++]=Os,Ma=t.id,La=t.overflow,Os=e),e=c1(e,r.children),e.flags|=4096,e)}function h2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Am(t.return,e,n)}function Q0(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function AS(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(hr(t,e,r.children,n),r=Nt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&h2(t,n,e);else if(t.tag===19)h2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ct(Nt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Fd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Q0(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Fd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Q0(e,!0,n,null,a);break;case"together":Q0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function id(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ja(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ns|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(be(153));if(e.child!==null){for(t=e.child,n=Po(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Po(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function XI(t,e,n){switch(e.tag){case 3:TS(e),tl();break;case 5:eS(e);break;case 1:Ar(e.type)&&Cd(e);break;case 4:n1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ct(Ad,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ct(Nt,Nt.current&1),e.flags|=128,null):n&e.child.childLanes?kS(t,e,n):(Ct(Nt,Nt.current&1),t=ja(t,e,n),t!==null?t.sibling:null);Ct(Nt,Nt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return AS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ct(Nt,Nt.current),r)break;return null;case 22:case 23:return e.lanes=0,SS(t,e,n)}return ja(t,e,n)}var IS,Mm,RS,FS;IS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Mm=function(){};RS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ws(ua.current);var a=null;switch(n){case"input":i=im(t,i),r=im(t,r),a=[];break;case"select":i=Wt({},i,{value:void 0}),r=Wt({},r,{value:void 0}),a=[];break;case"textarea":i=sm(t,i),r=sm(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ed)}lm(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(kc.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(a=a||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(kc.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&kt("scroll",t),a||s===u||(a=[])):(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(e.updateQueue=l)&&(e.flags|=4)}};FS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ml(t,e){if(!Ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KI(t,e,n){var r=e.pendingProps;switch(qg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(e),null;case 1:return Ar(e.type)&&Sd(),Yn(e),null;case 3:return r=e.stateNode,rl(),Rt(kr),Rt(or),i1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(oh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ii!==null&&($m(Ii),Ii=null))),Mm(t,e),Yn(e),null;case 5:r1(e);var i=ws(Wc.current);if(n=e.type,t!==null&&e.stateNode!=null)RS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(be(166));return Yn(e),null}if(t=ws(ua.current),oh(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[na]=e,r[Lc]=a,t=(e.mode&1)!==0,n){case"dialog":kt("cancel",r),kt("close",r);break;case"iframe":case"object":case"embed":kt("load",r);break;case"video":case"audio":for(i=0;i<Jl.length;i++)kt(Jl[i],r);break;case"source":kt("error",r);break;case"img":case"image":case"link":kt("error",r),kt("load",r);break;case"details":kt("toggle",r);break;case"input":_y(r,a),kt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},kt("invalid",r);break;case"textarea":Ey(r,a),kt("invalid",r)}lm(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&ah(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&ah(r.textContent,s,t),i=["children",""+s]):kc.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&kt("scroll",r)}switch(n){case"input":Qf(r),by(r,a,!0);break;case"textarea":Qf(r),Sy(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Ed)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=aE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[na]=e,t[Lc]=r,IS(t,e,!1,!1),e.stateNode=t;e:{switch(o=cm(n,r),n){case"dialog":kt("cancel",t),kt("close",t),i=r;break;case"iframe":case"object":case"embed":kt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Jl.length;i++)kt(Jl[i],t);i=r;break;case"source":kt("error",t),i=r;break;case"img":case"image":case"link":kt("error",t),kt("load",t),i=r;break;case"details":kt("toggle",t),i=r;break;case"input":_y(t,r),i=im(t,r),kt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Wt({},r,{value:void 0}),kt("invalid",t);break;case"textarea":Ey(t,r),i=sm(t,r),kt("invalid",t);break;default:i=r}lm(n,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="style"?uE(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&oE(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ac(t,u):typeof u=="number"&&Ac(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(kc.hasOwnProperty(a)?u!=null&&a==="onScroll"&&kt("scroll",t):u!=null&&Pg(t,a,u,o))}switch(n){case"input":Qf(t),by(t,r,!1);break;case"textarea":Qf(t),Sy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wo(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Ou(t,!!r.multiple,a,!1):r.defaultValue!=null&&Ou(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ed)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yn(e),null;case 6:if(t&&e.stateNode!=null)FS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(be(166));if(n=ws(Wc.current),ws(ua.current),oh(e)){if(r=e.stateNode,n=e.memoizedProps,r[na]=e,(a=r.nodeValue!==n)&&(t=Zr,t!==null))switch(t.tag){case 3:ah(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ah(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[na]=e,e.stateNode=r}return Yn(e),null;case 13:if(Rt(Nt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ot&&Kr!==null&&e.mode&1&&!(e.flags&128))qE(),tl(),e.flags|=98560,a=!1;else if(a=oh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(be(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(be(317));a[na]=e}else tl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yn(e),a=!1}else Ii!==null&&($m(Ii),Ii=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Nt.current&1?vn===0&&(vn=3):m1())),e.updateQueue!==null&&(e.flags|=4),Yn(e),null);case 4:return rl(),Mm(t,e),t===null&&Nc(e.stateNode.containerInfo),Yn(e),null;case 10:return Zg(e.type._context),Yn(e),null;case 17:return Ar(e.type)&&Sd(),Yn(e),null;case 19:if(Rt(Nt),a=e.memoizedState,a===null)return Yn(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Ml(a,!1);else{if(vn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Fd(t),o!==null){for(e.flags|=128,Ml(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ct(Nt,Nt.current&1|2),e.child}t=t.sibling}a.tail!==null&&Yt()>al&&(e.flags|=128,r=!0,Ml(a,!1),e.lanes=4194304)}else{if(!r)if(t=Fd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ml(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ot)return Yn(e),null}else 2*Yt()-a.renderingStartTime>al&&n!==1073741824&&(e.flags|=128,r=!0,Ml(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Yt(),e.sibling=null,n=Nt.current,Ct(Nt,r?n&1|2:n&1),e):(Yn(e),null);case 22:case 23:return v1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vr&1073741824&&(Yn(e),e.subtreeFlags&6&&(e.flags|=8192)):Yn(e),null;case 24:return null;case 25:return null}throw Error(be(156,e.tag))}function qI(t,e){switch(qg(e),e.tag){case 1:return Ar(e.type)&&Sd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rl(),Rt(kr),Rt(or),i1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return r1(e),null;case 13:if(Rt(Nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(be(340));tl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Rt(Nt),null;case 4:return rl(),null;case 10:return Zg(e.type._context),null;case 22:case 23:return v1(),null;case 24:return null;default:return null}}var lh=!1,Jn=!1,YI=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Ru(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$t(t,e,r)}else n.current=null}function Lm(t,e,n){try{n()}catch(r){$t(t,e,r)}}var d2=!1;function QI(t,e){if(wm=wd,t=ME(),Xg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,s=-1,u=-1,l=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(s=o+i),f!==a||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++l===i&&(s=o),h===a&&++c===r&&(u=o),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=s===-1||u===-1?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(_m={focusedElem:t,selectionRange:n},wd=!1,Oe=e;Oe!==null;)if(e=Oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Oe=t;else for(;Oe!==null;){e=Oe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,m=v.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?p:ki(e.type,p),m);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(be(163))}}catch(w){$t(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Oe=t;break}Oe=e.return}return v=d2,d2=!1,v}function fc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Lm(e,n,a)}i=i.next}while(i!==r)}}function Bp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Bm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function DS(t){var e=t.alternate;e!==null&&(t.alternate=null,DS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[na],delete e[Lc],delete e[Sm],delete e[OI],delete e[PI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function OS(t){return t.tag===5||t.tag===3||t.tag===4}function p2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||OS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ed));else if(r!==4&&(t=t.child,t!==null))for(Wm(t,e,n),t=t.sibling;t!==null;)Wm(t,e,n),t=t.sibling}function zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zm(t,e,n),t=t.sibling;t!==null;)zm(t,e,n),t=t.sibling}var Ln=null,Ai=!1;function oo(t,e,n){for(n=n.child;n!==null;)PS(t,e,n),n=n.sibling}function PS(t,e,n){if(sa&&typeof sa.onCommitFiberUnmount=="function")try{sa.onCommitFiberUnmount(Rp,n)}catch{}switch(n.tag){case 5:Jn||Ru(n,e);case 6:var r=Ln,i=Ai;Ln=null,oo(t,e,n),Ln=r,Ai=i,Ln!==null&&(Ai?(t=Ln,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ln.removeChild(n.stateNode));break;case 18:Ln!==null&&(Ai?(t=Ln,n=n.stateNode,t.nodeType===8?$0(t.parentNode,n):t.nodeType===1&&$0(t,n),Dc(t)):$0(Ln,n.stateNode));break;case 4:r=Ln,i=Ai,Ln=n.stateNode.containerInfo,Ai=!0,oo(t,e,n),Ln=r,Ai=i;break;case 0:case 11:case 14:case 15:if(!Jn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Lm(n,e,o),i=i.next}while(i!==r)}oo(t,e,n);break;case 1:if(!Jn&&(Ru(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){$t(n,e,s)}oo(t,e,n);break;case 21:oo(t,e,n);break;case 22:n.mode&1?(Jn=(r=Jn)||n.memoizedState!==null,oo(t,e,n),Jn=r):oo(t,e,n);break;default:oo(t,e,n)}}function v2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YI),e.forEach(function(r){var i=oR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Si(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:Ln=s.stateNode,Ai=!1;break e;case 3:Ln=s.stateNode.containerInfo,Ai=!0;break e;case 4:Ln=s.stateNode.containerInfo,Ai=!0;break e}s=s.return}if(Ln===null)throw Error(be(160));PS(a,o,i),Ln=null,Ai=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){$t(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NS(e,t),e=e.sibling}function NS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Si(e,t),Gi(t),r&4){try{fc(3,t,t.return),Bp(3,t)}catch(p){$t(t,t.return,p)}try{fc(5,t,t.return)}catch(p){$t(t,t.return,p)}}break;case 1:Si(e,t),Gi(t),r&512&&n!==null&&Ru(n,n.return);break;case 5:if(Si(e,t),Gi(t),r&512&&n!==null&&Ru(n,n.return),t.flags&32){var i=t.stateNode;try{Ac(i,"")}catch(p){$t(t,t.return,p)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,s=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&rE(i,a),cm(s,o);var l=cm(s,a);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?uE(i,f):c==="dangerouslySetInnerHTML"?oE(i,f):c==="children"?Ac(i,f):Pg(i,c,f,l)}switch(s){case"input":am(i,a);break;case"textarea":iE(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var d=a.value;d!=null?Ou(i,!!a.multiple,d,!1):h!==!!a.multiple&&(a.defaultValue!=null?Ou(i,!!a.multiple,a.defaultValue,!0):Ou(i,!!a.multiple,a.multiple?[]:"",!1))}i[Lc]=a}catch(p){$t(t,t.return,p)}}break;case 6:if(Si(e,t),Gi(t),r&4){if(t.stateNode===null)throw Error(be(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(p){$t(t,t.return,p)}}break;case 3:if(Si(e,t),Gi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Dc(e.containerInfo)}catch(p){$t(t,t.return,p)}break;case 4:Si(e,t),Gi(t);break;case 13:Si(e,t),Gi(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(d1=Yt())),r&4&&v2(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Jn=(l=Jn)||c,Si(e,t),Jn=l):Si(e,t),Gi(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(Oe=t,c=t.child;c!==null;){for(f=Oe=c;Oe!==null;){switch(h=Oe,d=h.child,h.tag){case 0:case 11:case 14:case 15:fc(4,h,h.return);break;case 1:Ru(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(p){$t(r,n,p)}}break;case 5:Ru(h,h.return);break;case 22:if(h.memoizedState!==null){g2(f);continue}}d!==null?(d.return=h,Oe=d):g2(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=sE("display",o))}catch(p){$t(t,t.return,p)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(p){$t(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Si(e,t),Gi(t),r&4&&v2(t);break;case 21:break;default:Si(e,t),Gi(t)}}function Gi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(OS(n)){var r=n;break e}n=n.return}throw Error(be(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ac(i,""),r.flags&=-33);var a=p2(t);zm(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,s=p2(t);Wm(t,s,o);break;default:throw Error(be(161))}}catch(u){$t(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JI(t,e,n){Oe=t,MS(t)}function MS(t,e,n){for(var r=(t.mode&1)!==0;Oe!==null;){var i=Oe,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||lh;if(!o){var s=i.alternate,u=s!==null&&s.memoizedState!==null||Jn;s=lh;var l=Jn;if(lh=o,(Jn=u)&&!l)for(Oe=i;Oe!==null;)o=Oe,u=o.child,o.tag===22&&o.memoizedState!==null?x2(i):u!==null?(u.return=o,Oe=u):x2(i);for(;a!==null;)Oe=a,MS(a),a=a.sibling;Oe=i,lh=s,Jn=l}m2(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Oe=a):m2(t)}}function m2(t){for(;Oe!==null;){var e=Oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jn||Bp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ki(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&e2(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}e2(e,o,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Dc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(be(163))}Jn||e.flags&512&&Bm(e)}catch(h){$t(e,e.return,h)}}if(e===t){Oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Oe=n;break}Oe=e.return}}function g2(t){for(;Oe!==null;){var e=Oe;if(e===t){Oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Oe=n;break}Oe=e.return}}function x2(t){for(;Oe!==null;){var e=Oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bp(4,e)}catch(u){$t(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){$t(e,i,u)}}var a=e.return;try{Bm(e)}catch(u){$t(e,a,u)}break;case 5:var o=e.return;try{Bm(e)}catch(u){$t(e,o,u)}}}catch(u){$t(e,e.return,u)}if(e===t){Oe=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Oe=s;break}Oe=e.return}}var ZI=Math.ceil,Pd=qa.ReactCurrentDispatcher,f1=qa.ReactCurrentOwner,mi=qa.ReactCurrentBatchConfig,ut=0,Fn=null,nn=null,$n=0,Vr=0,Fu=Ko(0),vn=0,Hc=null,Ns=0,Wp=0,h1=0,hc=null,_r=null,d1=0,al=1/0,Da=null,Nd=!1,Um=null,Do=null,ch=!1,xo=null,Md=0,dc=0,Vm=null,ad=-1,od=0;function vr(){return ut&6?Yt():ad!==-1?ad:ad=Yt()}function Oo(t){return t.mode&1?ut&2&&$n!==0?$n&-$n:MI.transition!==null?(od===0&&(od=wE()),od):(t=wt,t!==0||(t=window.event,t=t===void 0?16:kE(t.type)),t):1}function Mi(t,e,n,r){if(50<dc)throw dc=0,Vm=null,Error(be(185));pf(t,n,r),(!(ut&2)||t!==Fn)&&(t===Fn&&(!(ut&2)&&(Wp|=n),vn===4&&mo(t,$n)),Ir(t,r),n===1&&ut===0&&!(e.mode&1)&&(al=Yt()+500,Np&&qo()))}function Ir(t,e){var n=t.callbackNode;M3(t,e);var r=yd(t,t===Fn?$n:0);if(r===0)n!==null&&ky(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ky(n),e===1)t.tag===0?NI(y2.bind(null,t)):GE(y2.bind(null,t)),FI(function(){!(ut&6)&&qo()}),n=null;else{switch(_E(r)){case 1:n=Wg;break;case 4:n=xE;break;case 16:n=xd;break;case 536870912:n=yE;break;default:n=xd}n=$S(n,LS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function LS(t,e){if(ad=-1,od=0,ut&6)throw Error(be(327));var n=t.callbackNode;if(Bu()&&t.callbackNode!==n)return null;var r=yd(t,t===Fn?$n:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ld(t,r);else{e=r;var i=ut;ut|=2;var a=WS();(Fn!==t||$n!==e)&&(Da=null,al=Yt()+500,Ts(t,e));do try{nR();break}catch(s){BS(t,s)}while(!0);Jg(),Pd.current=a,ut=i,nn!==null?e=0:(Fn=null,$n=0,e=vn)}if(e!==0){if(e===2&&(i=vm(t),i!==0&&(r=i,e=Hm(t,i))),e===1)throw n=Hc,Ts(t,0),mo(t,r),Ir(t,Yt()),n;if(e===6)mo(t,r);else{if(i=t.current.alternate,!(r&30)&&!eR(i)&&(e=Ld(t,r),e===2&&(a=vm(t),a!==0&&(r=a,e=Hm(t,a))),e===1))throw n=Hc,Ts(t,0),mo(t,r),Ir(t,Yt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(be(345));case 2:cs(t,_r,Da);break;case 3:if(mo(t,r),(r&130023424)===r&&(e=d1+500-Yt(),10<e)){if(yd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){vr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Em(cs.bind(null,t,_r,Da),e);break}cs(t,_r,Da);break;case 4:if(mo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ni(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=Yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZI(r/1960))-r,10<r){t.timeoutHandle=Em(cs.bind(null,t,_r,Da),r);break}cs(t,_r,Da);break;case 5:cs(t,_r,Da);break;default:throw Error(be(329))}}}return Ir(t,Yt()),t.callbackNode===n?LS.bind(null,t):null}function Hm(t,e){var n=hc;return t.current.memoizedState.isDehydrated&&(Ts(t,e).flags|=256),t=Ld(t,e),t!==2&&(e=_r,_r=n,e!==null&&$m(e)),t}function $m(t){_r===null?_r=t:_r.push.apply(_r,t)}function eR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Wi(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mo(t,e){for(e&=~h1,e&=~Wp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ni(e),r=1<<n;t[n]=-1,e&=~r}}function y2(t){if(ut&6)throw Error(be(327));Bu();var e=yd(t,0);if(!(e&1))return Ir(t,Yt()),null;var n=Ld(t,e);if(t.tag!==0&&n===2){var r=vm(t);r!==0&&(e=r,n=Hm(t,r))}if(n===1)throw n=Hc,Ts(t,0),mo(t,e),Ir(t,Yt()),n;if(n===6)throw Error(be(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cs(t,_r,Da),Ir(t,Yt()),null}function p1(t,e){var n=ut;ut|=1;try{return t(e)}finally{ut=n,ut===0&&(al=Yt()+500,Np&&qo())}}function Ms(t){xo!==null&&xo.tag===0&&!(ut&6)&&Bu();var e=ut;ut|=1;var n=mi.transition,r=wt;try{if(mi.transition=null,wt=1,t)return t()}finally{wt=r,mi.transition=n,ut=e,!(ut&6)&&qo()}}function v1(){Vr=Fu.current,Rt(Fu)}function Ts(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RI(n)),nn!==null)for(n=nn.return;n!==null;){var r=n;switch(qg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sd();break;case 3:rl(),Rt(kr),Rt(or),i1();break;case 5:r1(r);break;case 4:rl();break;case 13:Rt(Nt);break;case 19:Rt(Nt);break;case 10:Zg(r.type._context);break;case 22:case 23:v1()}n=n.return}if(Fn=t,nn=t=Po(t.current,null),$n=Vr=e,vn=0,Hc=null,h1=Wp=Ns=0,_r=hc=null,ys!==null){for(e=0;e<ys.length;e++)if(n=ys[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}ys=null}return t}function BS(t,e){do{var n=nn;try{if(Jg(),nd.current=Od,Dd){for(var r=Bt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Dd=!1}if(Ps=0,Tn=pn=Bt=null,cc=!1,zc=0,f1.current=null,n===null||n.return===null){vn=1,Hc=e,nn=null;break}e:{var a=t,o=n.return,s=n,u=e;if(e=$n,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=o2(o);if(d!==null){d.flags&=-257,s2(d,o,s,a,e),d.mode&1&&a2(a,l,e),e=d,u=l;var v=e.updateQueue;if(v===null){var p=new Set;p.add(u),e.updateQueue=p}else v.add(u);break e}else{if(!(e&1)){a2(a,l,e),m1();break e}u=Error(be(426))}}else if(Ot&&s.mode&1){var m=o2(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),s2(m,o,s,a,e),Yg(il(u,s));break e}}a=u=il(u,s),vn!==4&&(vn=2),hc===null?hc=[a]:hc.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=_S(a,u,e);Zy(a,g);break e;case 1:s=u;var x=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Do===null||!Do.has(y)))){a.flags|=65536,e&=-e,a.lanes|=e;var w=bS(a,s,e);Zy(a,w);break e}}a=a.return}while(a!==null)}US(n)}catch(_){e=_,nn===n&&n!==null&&(nn=n=n.return);continue}break}while(!0)}function WS(){var t=Pd.current;return Pd.current=Od,t===null?Od:t}function m1(){(vn===0||vn===3||vn===2)&&(vn=4),Fn===null||!(Ns&268435455)&&!(Wp&268435455)||mo(Fn,$n)}function Ld(t,e){var n=ut;ut|=2;var r=WS();(Fn!==t||$n!==e)&&(Da=null,Ts(t,e));do try{tR();break}catch(i){BS(t,i)}while(!0);if(Jg(),ut=n,Pd.current=r,nn!==null)throw Error(be(261));return Fn=null,$n=0,vn}function tR(){for(;nn!==null;)zS(nn)}function nR(){for(;nn!==null&&!k3();)zS(nn)}function zS(t){var e=HS(t.alternate,t,Vr);t.memoizedProps=t.pendingProps,e===null?US(t):nn=e,f1.current=null}function US(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qI(n,e),n!==null){n.flags&=32767,nn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vn=6,nn=null;return}}else if(n=KI(n,e,Vr),n!==null){nn=n;return}if(e=e.sibling,e!==null){nn=e;return}nn=e=t}while(e!==null);vn===0&&(vn=5)}function cs(t,e,n){var r=wt,i=mi.transition;try{mi.transition=null,wt=1,rR(t,e,n,r)}finally{mi.transition=i,wt=r}return null}function rR(t,e,n,r){do Bu();while(xo!==null);if(ut&6)throw Error(be(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(be(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(L3(t,a),t===Fn&&(nn=Fn=null,$n=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ch||(ch=!0,$S(xd,function(){return Bu(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=mi.transition,mi.transition=null;var o=wt;wt=1;var s=ut;ut|=4,f1.current=null,QI(t,n),NS(n,t),EI(_m),wd=!!wm,_m=wm=null,t.current=n,JI(n),A3(),ut=s,wt=o,mi.transition=a}else t.current=n;if(ch&&(ch=!1,xo=t,Md=i),a=t.pendingLanes,a===0&&(Do=null),F3(n.stateNode),Ir(t,Yt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Nd)throw Nd=!1,t=Um,Um=null,t;return Md&1&&t.tag!==0&&Bu(),a=t.pendingLanes,a&1?t===Vm?dc++:(dc=0,Vm=t):dc=0,qo(),null}function Bu(){if(xo!==null){var t=_E(Md),e=mi.transition,n=wt;try{if(mi.transition=null,wt=16>t?16:t,xo===null)var r=!1;else{if(t=xo,xo=null,Md=0,ut&6)throw Error(be(331));var i=ut;for(ut|=4,Oe=t.current;Oe!==null;){var a=Oe,o=a.child;if(Oe.flags&16){var s=a.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(Oe=l;Oe!==null;){var c=Oe;switch(c.tag){case 0:case 11:case 15:fc(8,c,a)}var f=c.child;if(f!==null)f.return=c,Oe=f;else for(;Oe!==null;){c=Oe;var h=c.sibling,d=c.return;if(DS(c),c===l){Oe=null;break}if(h!==null){h.return=d,Oe=h;break}Oe=d}}}var v=a.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var m=p.sibling;p.sibling=null,p=m}while(p!==null)}}Oe=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Oe=o;else e:for(;Oe!==null;){if(a=Oe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:fc(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,Oe=g;break e}Oe=a.return}}var x=t.current;for(Oe=x;Oe!==null;){o=Oe;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,Oe=y;else e:for(o=x;Oe!==null;){if(s=Oe,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Bp(9,s)}}catch(_){$t(s,s.return,_)}if(s===o){Oe=null;break e}var w=s.sibling;if(w!==null){w.return=s.return,Oe=w;break e}Oe=s.return}}if(ut=i,qo(),sa&&typeof sa.onPostCommitFiberRoot=="function")try{sa.onPostCommitFiberRoot(Rp,t)}catch{}r=!0}return r}finally{wt=n,mi.transition=e}}return!1}function w2(t,e,n){e=il(n,e),e=_S(t,e,1),t=Fo(t,e,1),e=vr(),t!==null&&(pf(t,1,e),Ir(t,e))}function $t(t,e,n){if(t.tag===3)w2(t,t,n);else for(;e!==null;){if(e.tag===3){w2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Do===null||!Do.has(r))){t=il(n,t),t=bS(e,t,1),e=Fo(e,t,1),t=vr(),e!==null&&(pf(e,1,t),Ir(e,t));break}}e=e.return}}function iR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vr(),t.pingedLanes|=t.suspendedLanes&n,Fn===t&&($n&n)===n&&(vn===4||vn===3&&($n&130023424)===$n&&500>Yt()-d1?Ts(t,0):h1|=n),Ir(t,e)}function VS(t,e){e===0&&(t.mode&1?(e=eh,eh<<=1,!(eh&130023424)&&(eh=4194304)):e=1);var n=vr();t=$a(t,e),t!==null&&(pf(t,e,n),Ir(t,n))}function aR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),VS(t,n)}function oR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(be(314))}r!==null&&r.delete(e),VS(t,n)}var HS;HS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kr.current)Cr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Cr=!1,XI(t,e,n);Cr=!!(t.flags&131072)}else Cr=!1,Ot&&e.flags&1048576&&XE(e,kd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;id(t,e),t=e.pendingProps;var i=el(e,or.current);Lu(e,n),i=o1(null,e,r,t,i,n);var a=s1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ar(r)?(a=!0,Cd(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,t1(e),i.updater=Lp,e.stateNode=i,i._reactInternals=e,Rm(e,r,t,n),e=Om(null,e,r,!0,a,n)):(e.tag=0,Ot&&a&&Kg(e),hr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(id(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=uR(r),t=ki(r,t),i){case 0:e=Dm(null,e,r,t,n);break e;case 1:e=c2(null,e,r,t,n);break e;case 11:e=u2(null,e,r,t,n);break e;case 14:e=l2(null,e,r,ki(r.type,t),n);break e}throw Error(be(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),Dm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),c2(t,e,r,i,n);case 3:e:{if(TS(e),t===null)throw Error(be(387));r=e.pendingProps,a=e.memoizedState,i=a.element,ZE(t,e),Rd(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=il(Error(be(423)),e),e=f2(t,e,r,n,i);break e}else if(r!==i){i=il(Error(be(424)),e),e=f2(t,e,r,n,i);break e}else for(Kr=Ro(e.stateNode.containerInfo.firstChild),Zr=e,Ot=!0,Ii=null,n=QE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tl(),r===i){e=ja(t,e,n);break e}hr(t,e,r,n)}e=e.child}return e;case 5:return eS(e),t===null&&km(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,bm(r,i)?o=null:a!==null&&bm(r,a)&&(e.flags|=32),CS(t,e),hr(t,e,o,n),e.child;case 6:return t===null&&km(e),null;case 13:return kS(t,e,n);case 4:return n1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=nl(e,null,r,n):hr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),u2(t,e,r,i,n);case 7:return hr(t,e,e.pendingProps,n),e.child;case 8:return hr(t,e,e.pendingProps.children,n),e.child;case 12:return hr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Ct(Ad,r._currentValue),r._currentValue=o,a!==null)if(Wi(a.value,o)){if(a.children===i.children&&!kr.current){e=ja(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Ba(-1,n&-n),u.tag=2;var l=a.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Am(a.return,n,e),s.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(be(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),Am(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}hr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Lu(e,n),i=gi(i),r=r(i),e.flags|=1,hr(t,e,r,n),e.child;case 14:return r=e.type,i=ki(r,e.pendingProps),i=ki(r.type,i),l2(t,e,r,i,n);case 15:return ES(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),id(t,e),e.tag=1,Ar(r)?(t=!0,Cd(e)):t=!1,Lu(e,n),wS(e,r,i),Rm(e,r,i,n),Om(null,e,r,!0,t,n);case 19:return AS(t,e,n);case 22:return SS(t,e,n)}throw Error(be(156,e.tag))};function $S(t,e){return gE(t,e)}function sR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pi(t,e,n,r){return new sR(t,e,n,r)}function g1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uR(t){if(typeof t=="function")return g1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mg)return 11;if(t===Lg)return 14}return 2}function Po(t,e){var n=t.alternate;return n===null?(n=pi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sd(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")g1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case _u:return ks(n.children,i,a,e);case Ng:o=8,i|=8;break;case em:return t=pi(12,n,e,i|2),t.elementType=em,t.lanes=a,t;case tm:return t=pi(13,n,e,i),t.elementType=tm,t.lanes=a,t;case nm:return t=pi(19,n,e,i),t.elementType=nm,t.lanes=a,t;case eE:return zp(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jb:o=10;break e;case Zb:o=9;break e;case Mg:o=11;break e;case Lg:o=14;break e;case ho:o=16,r=null;break e}throw Error(be(130,t==null?t:typeof t,""))}return e=pi(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function ks(t,e,n,r){return t=pi(7,t,r,e),t.lanes=n,t}function zp(t,e,n,r){return t=pi(22,t,r,e),t.elementType=eE,t.lanes=n,t.stateNode={isHidden:!1},t}function J0(t,e,n){return t=pi(6,t,null,e),t.lanes=n,t}function Z0(t,e,n){return e=pi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=O0(0),this.expirationTimes=O0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function x1(t,e,n,r,i,a,o,s,u){return t=new lR(t,e,n,s,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=pi(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},t1(a),t}function cR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function jS(t){if(!t)return zo;t=t._reactInternals;e:{if($s(t)!==t||t.tag!==1)throw Error(be(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ar(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(be(171))}if(t.tag===1){var n=t.type;if(Ar(n))return jE(t,n,e)}return e}function GS(t,e,n,r,i,a,o,s,u){return t=x1(n,r,!0,t,i,a,o,s,u),t.context=jS(null),n=t.current,r=vr(),i=Oo(n),a=Ba(r,i),a.callback=e??null,Fo(n,a,i),t.current.lanes=i,pf(t,i,r),Ir(t,r),t}function Up(t,e,n,r){var i=e.current,a=vr(),o=Oo(i);return n=jS(n),e.context===null?e.context=n:e.pendingContext=n,e=Ba(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fo(i,e,o),t!==null&&(Mi(t,i,o,a),td(t,i,o)),o}function Bd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function y1(t,e){_2(t,e),(t=t.alternate)&&_2(t,e)}function fR(){return null}var XS=typeof reportError=="function"?reportError:function(t){console.error(t)};function w1(t){this._internalRoot=t}Vp.prototype.render=w1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(be(409));Up(t,e,null,null)};Vp.prototype.unmount=w1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ms(function(){Up(null,t,null,null)}),e[Ha]=null}};function Vp(t){this._internalRoot=t}Vp.prototype.unstable_scheduleHydration=function(t){if(t){var e=SE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vo.length&&e!==0&&e<vo[n].priority;n++);vo.splice(n,0,t),n===0&&TE(t)}};function _1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function b2(){}function hR(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var l=Bd(o);a.call(l)}}var o=GS(e,r,t,0,null,!1,!1,"",b2);return t._reactRootContainer=o,t[Ha]=o.current,Nc(t.nodeType===8?t.parentNode:t),Ms(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=Bd(u);s.call(l)}}var u=x1(t,0,!1,null,null,!1,!1,"",b2);return t._reactRootContainer=u,t[Ha]=u.current,Nc(t.nodeType===8?t.parentNode:t),Ms(function(){Up(e,u,n,r)}),u}function $p(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var u=Bd(o);s.call(u)}}Up(e,o,t,i)}else o=hR(n,e,t,i,r);return Bd(o)}bE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ql(e.pendingLanes);n!==0&&(zg(e,n|1),Ir(e,Yt()),!(ut&6)&&(al=Yt()+500,qo()))}break;case 13:Ms(function(){var r=$a(t,1);if(r!==null){var i=vr();Mi(r,t,1,i)}}),y1(t,1)}};Ug=function(t){if(t.tag===13){var e=$a(t,134217728);if(e!==null){var n=vr();Mi(e,t,134217728,n)}y1(t,134217728)}};EE=function(t){if(t.tag===13){var e=Oo(t),n=$a(t,e);if(n!==null){var r=vr();Mi(n,t,e,r)}y1(t,e)}};SE=function(){return wt};CE=function(t,e){var n=wt;try{return wt=t,e()}finally{wt=n}};hm=function(t,e,n){switch(e){case"input":if(am(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Pp(r);if(!i)throw Error(be(90));nE(r),am(r,i)}}}break;case"textarea":iE(t,n);break;case"select":e=n.value,e!=null&&Ou(t,!!n.multiple,e,!1)}};fE=p1;hE=Ms;var dR={usingClientEntryPoint:!1,Events:[mf,Cu,Pp,lE,cE,p1]},Ll={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pR={bundleType:Ll.bundleType,version:Ll.version,rendererPackageName:Ll.rendererPackageName,rendererConfig:Ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vE(t),t===null?null:t.stateNode},findFiberByHostInstance:Ll.findFiberByHostInstance||fR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fh.isDisabled&&fh.supportsFiber)try{Rp=fh.inject(pR),sa=fh}catch{}}ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dR;ri.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_1(e))throw Error(be(200));return cR(t,e,null,n)};ri.createRoot=function(t,e){if(!_1(t))throw Error(be(299));var n=!1,r="",i=XS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=x1(t,1,!1,null,null,n,!1,r,i),t[Ha]=e.current,Nc(t.nodeType===8?t.parentNode:t),new w1(e)};ri.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(be(188)):(t=Object.keys(t).join(","),Error(be(268,t)));return t=vE(e),t=t===null?null:t.stateNode,t};ri.flushSync=function(t){return Ms(t)};ri.hydrate=function(t,e,n){if(!Hp(e))throw Error(be(200));return $p(null,t,e,!0,n)};ri.hydrateRoot=function(t,e,n){if(!_1(t))throw Error(be(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=XS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=GS(e,null,t,1,n??null,i,!1,a,o),t[Ha]=e.current,Nc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Vp(e)};ri.render=function(t,e,n){if(!Hp(e))throw Error(be(200));return $p(null,t,e,!1,n)};ri.unmountComponentAtNode=function(t){if(!Hp(t))throw Error(be(40));return t._reactRootContainer?(Ms(function(){$p(null,null,t,!1,function(){t._reactRootContainer=null,t[Ha]=null})}),!0):!1};ri.unstable_batchedUpdates=p1;ri.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hp(n))throw Error(be(200));if(t==null||t._reactInternals===void 0)throw Error(be(38));return $p(t,e,n,!1,r)};ri.version="18.3.1-next-f1338f8080-20240426";function KS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KS)}catch(t){console.error(t)}}KS(),Kb.exports=ri;var vR=Kb.exports,qS,E2=vR;qS=E2.createRoot,E2.hydrateRoot;/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Wd={};Wd.version="0.18.5";var YS=1252,mR=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],QS=function(t){mR.indexOf(t)!=-1&&(YS=t)};function gR(){QS(1252)}var $c=function(t){QS(t)};function xR(){$c(1200),gR()}var hh=function(e){return String.fromCharCode(e)},S2=function(e){return String.fromCharCode(e)},zd,yo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function jc(t){for(var e="",n=0,r=0,i=0,a=0,o=0,s=0,u=0,l=0;l<t.length;)n=t.charCodeAt(l++),a=n>>2,r=t.charCodeAt(l++),o=(n&3)<<4|r>>4,i=t.charCodeAt(l++),s=(r&15)<<2|i>>6,u=i&63,isNaN(r)?s=u=64:isNaN(i)&&(u=64),e+=yo.charAt(a)+yo.charAt(o)+yo.charAt(s)+yo.charAt(u);return e}function Ga(t){var e="",n=0,r=0,i=0,a=0,o=0,s=0,u=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<t.length;)a=yo.indexOf(t.charAt(l++)),o=yo.indexOf(t.charAt(l++)),n=a<<2|o>>4,e+=String.fromCharCode(n),s=yo.indexOf(t.charAt(l++)),r=(o&15)<<4|s>>2,s!==64&&(e+=String.fromCharCode(r)),u=yo.indexOf(t.charAt(l++)),i=(s&3)<<6|u,u!==64&&(e+=String.fromCharCode(i));return e}var ft=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Ya=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Ls(t){return ft?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function C2(t){return ft?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Fi=function(e){return ft?Ya(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function jp(t){if(typeof ArrayBuffer>"u")return Fi(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!=t.length;++r)n[r]=t.charCodeAt(r)&255;return e}function xf(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function yR(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var Vn=ft?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Ya(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),i=0;for(e=0,n=0;e<t.length;n+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)r.set(t[e],n);else{if(typeof t[e]=="string")throw"wtf";r.set(new Uint8Array(t[e]),n)}return r}return[].concat.apply([],t.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function wR(t){for(var e=[],n=0,r=t.length+250,i=Ls(t.length+255),a=0;a<t.length;++a){var o=t.charCodeAt(a);if(o<128)i[n++]=o;else if(o<2048)i[n++]=192|o>>6&31,i[n++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var s=t.charCodeAt(++a)&1023;i[n++]=240|o>>8&7,i[n++]=128|o>>2&63,i[n++]=128|s>>6&15|(o&3)<<4,i[n++]=128|s&63}else i[n++]=224|o>>12&15,i[n++]=128|o>>6&63,i[n++]=128|o&63;n>r&&(e.push(i.slice(0,n)),n=0,i=Ls(65535),r=65530)}return e.push(i.slice(0,n)),Vn(e)}var pc=/\u0000/g,dh=/[\u0001-\u0006]/g;function Wu(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function Di(t,e){var n=""+t;return n.length>=e?n:jt("0",e-n.length)+n}function b1(t,e){var n=""+t;return n.length>=e?n:jt(" ",e-n.length)+n}function Ud(t,e){var n=""+t;return n.length>=e?n:n+jt(" ",e-n.length)}function _R(t,e){var n=""+Math.round(t);return n.length>=e?n:jt("0",e-n.length)+n}function bR(t,e){var n=""+t;return n.length>=e?n:jt("0",e-n.length)+n}var T2=Math.pow(2,32);function su(t,e){if(t>T2||t<-T2)return _R(t,e);var n=Math.round(t);return bR(n,e)}function Vd(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var k2=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],ev=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function ER(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Gt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},A2={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},SR={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Hd(t,e,n){for(var r=t<0?-1:1,i=t*r,a=0,o=1,s=0,u=1,l=0,c=0,f=Math.floor(i);l<e&&(f=Math.floor(i),s=f*o+a,c=f*l+u,!(i-f<5e-8));)i=1/(i-f),a=o,o=s,u=l,l=c;if(c>e&&(l>e?(c=u,s=a):(c=l,s=o)),!n)return[0,r*s,c];var h=Math.floor(r*s/c);return[h,r*s-h*c,c]}function ph(t,e,n){if(t>2958465||t<0)return null;var r=t|0,i=Math.floor(86400*(t-r)),a=0,o=[],s={D:r,T:i,u:86400*(t-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(s.u)<1e-6&&(s.u=0),e&&e.date1904&&(r+=1462),s.u>.9999&&(s.u=0,++i==86400&&(s.T=i=0,++r,++s.D)),r===60)o=n?[1317,10,29]:[1900,2,29],a=3;else if(r===0)o=n?[1317,8,29]:[1900,1,0],a=6;else{r>60&&--r;var u=new Date(1900,0,1);u.setDate(u.getDate()+r-1),o=[u.getFullYear(),u.getMonth()+1,u.getDate()],a=u.getDay(),r<60&&(a=(a+6)%7),n&&(a=FR(u,o))}return s.y=o[0],s.m=o[1],s.d=o[2],s.S=i%60,i=Math.floor(i/60),s.M=i%60,i=Math.floor(i/60),s.H=i,s.q=a,s}var JS=new Date(1899,11,31,0,0,0),CR=JS.getTime(),TR=new Date(1900,2,1,0,0,0);function ZS(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=TR&&(n+=24*60*60*1e3),(n-(CR+(t.getTimezoneOffset()-JS.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function E1(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function kR(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function AR(t){var e=t<0?12:11,n=E1(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function IR(t){var e=E1(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function RR(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=AR(t):e===10?n=t.toFixed(10).substr(0,12):n=IR(t),E1(kR(n.toUpperCase()))}function jm(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):RR(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Uo(14,ZS(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function FR(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function DR(t,e,n,r){var i="",a=0,o=0,s=n.y,u,l=0;switch(t){case 98:s=n.y+543;case 121:switch(e.length){case 1:case 2:u=s%100,l=2;break;default:u=s%1e4,l=4;break}break;case 109:switch(e.length){case 1:case 2:u=n.m,l=e.length;break;case 3:return ev[n.m-1][1];case 5:return ev[n.m-1][0];default:return ev[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:u=n.d,l=e.length;break;case 3:return k2[n.q][0];default:return k2[n.q][1]}break;case 104:switch(e.length){case 1:case 2:u=1+(n.H+11)%12,l=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:u=n.H,l=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:u=n.M,l=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?Di(n.S,e.length):(r>=2?o=r===3?1e3:100:o=r===1?10:1,a=Math.round(o*(n.S+n.u)),a>=60*o&&(a=0),e==="s"?a===0?"0":""+a/o:(i=Di(a,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":u=n.D*24+n.H;break;case"[m]":case"[mm]":u=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":u=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}l=e.length===3?1:2;break;case 101:u=s,l=1;break}var c=l>0?Di(u,l):"";return c}function wo(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var eC=/%/g;function OR(t,e,n){var r=e.replace(eC,""),i=e.length-r.length;return Wa(t,r,n*Math.pow(10,2*i))+jt("%",i)}function PR(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Wa(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function tC(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+tC(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%i;if(a<0&&(a+=i),n=(e/Math.pow(10,a)).toPrecision(r+1+(i+a)%i),n.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+a):n+="E+"+(o-a);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(s,u,l,c){return u+l+c.substr(0,(i+a)%i)+"."+c.substr(a)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var nC=/# (\?+)( ?)\/( ?)(\d+)/;function NR(t,e,n){var r=parseInt(t[4],10),i=Math.round(e*r),a=Math.floor(i/r),o=i-a*r,s=r;return n+(a===0?"":""+a)+" "+(o===0?jt(" ",t[1].length+1+t[4].length):b1(o,t[1].length)+t[2]+"/"+t[3]+Di(s,t[4].length))}function MR(t,e,n){return n+(e===0?"":""+e)+jt(" ",t[1].length+2+t[4].length)}var rC=/^#*0*\.([0#]+)/,iC=/\).*[0#]/,aC=/\(###\) ###\\?-####/;function dr(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function I2(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function R2(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function LR(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function BR(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function ui(t,e,n){if(t.charCodeAt(0)===40&&!e.match(iC)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?ui("n",r,n):"("+ui("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return PR(t,e,n);if(e.indexOf("%")!==-1)return OR(t,e,n);if(e.indexOf("E")!==-1)return tC(e,n);if(e.charCodeAt(0)===36)return"$"+ui(t,e.substr(e.charAt(1)==" "?2:1),n);var i,a,o,s,u=Math.abs(n),l=n<0?"-":"";if(e.match(/^00+$/))return l+su(u,e.length);if(e.match(/^[#?]+$/))return i=su(n,0),i==="0"&&(i=""),i.length>e.length?i:dr(e.substr(0,e.length-i.length))+i;if(a=e.match(nC))return NR(a,u,l);if(e.match(/^#+0+$/))return l+su(u,e.length-e.indexOf("0"));if(a=e.match(rC))return i=I2(n,a[1].length).replace(/^([^\.]+)$/,"$1."+dr(a[1])).replace(/\.$/,"."+dr(a[1])).replace(/\.(\d*)$/,function(v,p){return"."+p+jt("0",dr(a[1]).length-p.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return l+I2(u,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return l+wo(su(u,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+ui(t,e,-n):wo(""+(Math.floor(n)+LR(n,a[1].length)))+"."+Di(R2(n,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return ui(t,e.replace(/^#,#*,/,""),n);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Wu(ui(t,e.replace(/[\\-]/g,""),n)),o=0,Wu(Wu(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<i.length?i.charAt(o++):v==="0"?"0":""}));if(e.match(aC))return i=ui(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var c="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(a[4].length,7),s=Hd(u,Math.pow(10,o)-1,!1),i=""+l,c=Wa("n",a[1],s[1]),c.charAt(c.length-1)==" "&&(c=c.substr(0,c.length-1)+"0"),i+=c+a[2]+"/"+a[3],c=Ud(s[2],o),c.length<a[4].length&&(c=dr(a[4].substr(a[4].length-c.length))+c),i+=c,i;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(a[1].length,a[4].length),7),s=Hd(u,Math.pow(10,o)-1,!0),l+(s[0]||(s[1]?"":"0"))+" "+(s[1]?b1(s[1],o)+a[2]+"/"+a[3]+Ud(s[2],o):jt(" ",2*o+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return i=su(n,0),e.length<=i.length?i:dr(e.substr(0,e.length-i.length))+i;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var f=e.indexOf(".")-o,h=e.length-i.length-f;return dr(e.substr(0,f)+i+e.substr(e.length-h))}if(a=e.match(/^00,000\.([#0]*0)$/))return o=R2(n,a[1].length),n<0?"-"+ui(t,e,-n):wo(BR(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Di(0,3-v.length):"")+v})+"."+Di(o,a[1].length);switch(e){case"###,##0.00":return ui(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var d=wo(su(u,0));return d!=="0"?l+d:"";case"###,###.00":return ui(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return ui(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function WR(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Wa(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function zR(t,e,n){var r=e.replace(eC,""),i=e.length-r.length;return Wa(t,r,n*Math.pow(10,2*i))+jt("%",i)}function oC(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+oC(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%i;if(a<0&&(a+=i),n=(e/Math.pow(10,a)).toPrecision(r+1+(i+a)%i),!n.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+a):n+="E+"+(o-a),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(s,u,l,c){return u+l+c.substr(0,(i+a)%i)+"."+c.substr(a)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function qi(t,e,n){if(t.charCodeAt(0)===40&&!e.match(iC)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?qi("n",r,n):"("+qi("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return WR(t,e,n);if(e.indexOf("%")!==-1)return zR(t,e,n);if(e.indexOf("E")!==-1)return oC(e,n);if(e.charCodeAt(0)===36)return"$"+qi(t,e.substr(e.charAt(1)==" "?2:1),n);var i,a,o,s,u=Math.abs(n),l=n<0?"-":"";if(e.match(/^00+$/))return l+Di(u,e.length);if(e.match(/^[#?]+$/))return i=""+n,n===0&&(i=""),i.length>e.length?i:dr(e.substr(0,e.length-i.length))+i;if(a=e.match(nC))return MR(a,u,l);if(e.match(/^#+0+$/))return l+Di(u,e.length-e.indexOf("0"));if(a=e.match(rC))return i=(""+n).replace(/^([^\.]+)$/,"$1."+dr(a[1])).replace(/\.$/,"."+dr(a[1])),i=i.replace(/\.(\d*)$/,function(v,p){return"."+p+jt("0",dr(a[1]).length-p.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return l+(""+u).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return l+wo(""+u);if(a=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+qi(t,e,-n):wo(""+n)+"."+jt("0",a[1].length);if(a=e.match(/^#,#*,#0/))return qi(t,e.replace(/^#,#*,/,""),n);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Wu(qi(t,e.replace(/[\\-]/g,""),n)),o=0,Wu(Wu(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<i.length?i.charAt(o++):v==="0"?"0":""}));if(e.match(aC))return i=qi(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var c="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(a[4].length,7),s=Hd(u,Math.pow(10,o)-1,!1),i=""+l,c=Wa("n",a[1],s[1]),c.charAt(c.length-1)==" "&&(c=c.substr(0,c.length-1)+"0"),i+=c+a[2]+"/"+a[3],c=Ud(s[2],o),c.length<a[4].length&&(c=dr(a[4].substr(a[4].length-c.length))+c),i+=c,i;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(a[1].length,a[4].length),7),s=Hd(u,Math.pow(10,o)-1,!0),l+(s[0]||(s[1]?"":"0"))+" "+(s[1]?b1(s[1],o)+a[2]+"/"+a[3]+Ud(s[2],o):jt(" ",2*o+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return i=""+n,e.length<=i.length?i:dr(e.substr(0,e.length-i.length))+i;if(a=e.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var f=e.indexOf(".")-o,h=e.length-i.length-f;return dr(e.substr(0,f)+i+e.substr(e.length-h))}if(a=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+qi(t,e,-n):wo(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Di(0,3-v.length):"")+v})+"."+Di(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var d=wo(""+u);return d!=="0"?l+d:"";default:if(e.match(/\.[0#?]*$/))return qi(t,e.slice(0,e.lastIndexOf(".")),n)+dr(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Wa(t,e,n){return(n|0)===n?qi(t,e,n):ui(t,e,n)}function UR(t){for(var e=[],n=!1,r=0,i=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(i,r-i),i=r+1}if(e[e.length]=t.substr(i),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var sC=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function uC(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":Vd(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match(sC))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function VR(t,e,n,r){for(var i=[],a="",o=0,s="",u="t",l,c,f,h="H";o<t.length;)switch(s=t.charAt(o)){case"G":if(!Vd(t,o))throw new Error("unrecognized character "+s+" in "+t);i[i.length]={t:"G",v:"General"},o+=7;break;case'"':for(a="";(f=t.charCodeAt(++o))!==34&&o<t.length;)a+=String.fromCharCode(f);i[i.length]={t:"t",v:a},++o;break;case"\\":var d=t.charAt(++o),v=d==="("||d===")"?d:"t";i[i.length]={t:v,v:d},++o;break;case"_":i[i.length]={t:"t",v:" "},o+=2;break;case"@":i[i.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(l==null&&(l=ph(e,n,t.charAt(o+1)==="2"),l==null))return"";i[i.length]={t:"X",v:t.substr(o,2)},u=s,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":s=s.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||l==null&&(l=ph(e,n),l==null))return"";for(a=s;++o<t.length&&t.charAt(o).toLowerCase()===s;)a+=s;s==="m"&&u.toLowerCase()==="h"&&(s="M"),s==="h"&&(s=h),i[i.length]={t:s,v:a},u=s;break;case"A":case"a":case"":var p={t:s,v:s};if(l==null&&(l=ph(e,n)),t.substr(o,3).toUpperCase()==="A/P"?(l!=null&&(p.v=l.H>=12?"P":"A"),p.t="T",h="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(l!=null&&(p.v=l.H>=12?"PM":"AM"),p.t="T",o+=5,h="h"):t.substr(o,5).toUpperCase()==="/"?(l!=null&&(p.v=l.H>=12?"":""),p.t="T",o+=5,h="h"):(p.t="t",++o),l==null&&p.t==="T")return"";i[i.length]=p,u=s;break;case"[":for(a=s;t.charAt(o++)!=="]"&&o<t.length;)a+=t.charAt(o);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(sC)){if(l==null&&(l=ph(e,n),l==null))return"";i[i.length]={t:"Z",v:a.toLowerCase()},u=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",uC(t)||(i[i.length]={t:"t",v:a}));break;case".":if(l!=null){for(a=s;++o<t.length&&(s=t.charAt(o))==="0";)a+=s;i[i.length]={t:"s",v:a};break}case"0":case"#":for(a=s;++o<t.length&&"0#?.,E+-%".indexOf(s=t.charAt(o))>-1;)a+=s;i[i.length]={t:"n",v:a};break;case"?":for(a=s;t.charAt(++o)===s;)a+=s;i[i.length]={t:s,v:a},u=s;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":i[i.length]={t:r===1?"t":s,v:s},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=s;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)a+=t.charAt(o);i[i.length]={t:"D",v:a};break;case" ":i[i.length]={t:s,v:s},++o;break;case"$":i[i.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(s)===-1)throw new Error("unrecognized character "+s+" in "+t);i[i.length]={t:"t",v:s},++o;break}var m=0,g=0,x;for(o=i.length-1,u="t";o>=0;--o)switch(i[o].t){case"h":case"H":i[o].t=h,u="h",m<1&&(m=1);break;case"s":(x=i[o].v.match(/\.0+$/))&&(g=Math.max(g,x[0].length-1)),m<3&&(m=3);case"d":case"y":case"M":case"e":u=i[o].t;break;case"m":u==="s"&&(i[o].t="M",m<2&&(m=2));break;case"X":break;case"Z":m<1&&i[o].v.match(/[Hh]/)&&(m=1),m<2&&i[o].v.match(/[Mm]/)&&(m=2),m<3&&i[o].v.match(/[Ss]/)&&(m=3)}switch(m){case 0:break;case 1:l.u>=.5&&(l.u=0,++l.S),l.S>=60&&(l.S=0,++l.M),l.M>=60&&(l.M=0,++l.H);break;case 2:l.u>=.5&&(l.u=0,++l.S),l.S>=60&&(l.S=0,++l.M);break}var y="",w;for(o=0;o<i.length;++o)switch(i[o].t){case"t":case"T":case" ":case"D":break;case"X":i[o].v="",i[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[o].v=DR(i[o].t.charCodeAt(0),i[o].v,l,g),i[o].t="t";break;case"n":case"?":for(w=o+1;i[w]!=null&&((s=i[w].t)==="?"||s==="D"||(s===" "||s==="t")&&i[w+1]!=null&&(i[w+1].t==="?"||i[w+1].t==="t"&&i[w+1].v==="/")||i[o].t==="("&&(s===" "||s==="n"||s===")")||s==="t"&&(i[w].v==="/"||i[w].v===" "&&i[w+1]!=null&&i[w+1].t=="?"));)i[o].v+=i[w].v,i[w]={v:"",t:";"},++w;y+=i[o].v,o=w-1;break;case"G":i[o].t="t",i[o].v=jm(e,n);break}var _="",b,E;if(y.length>0){y.charCodeAt(0)==40?(b=e<0&&y.charCodeAt(0)===45?-e:e,E=Wa("n",y,b)):(b=e<0&&r>1?-e:e,E=Wa("n",y,b),b<0&&i[0]&&i[0].t=="t"&&(E=E.substr(1),i[0].v="-"+i[0].v)),w=E.length-1;var S=i.length;for(o=0;o<i.length;++o)if(i[o]!=null&&i[o].t!="t"&&i[o].v.indexOf(".")>-1){S=o;break}var C=i.length;if(S===i.length&&E.indexOf("E")===-1){for(o=i.length-1;o>=0;--o)i[o]==null||"n?".indexOf(i[o].t)===-1||(w>=i[o].v.length-1?(w-=i[o].v.length,i[o].v=E.substr(w+1,i[o].v.length)):w<0?i[o].v="":(i[o].v=E.substr(0,w+1),w=-1),i[o].t="t",C=o);w>=0&&C<i.length&&(i[C].v=E.substr(0,w+1)+i[C].v)}else if(S!==i.length&&E.indexOf("E")===-1){for(w=E.indexOf(".")-1,o=S;o>=0;--o)if(!(i[o]==null||"n?".indexOf(i[o].t)===-1)){for(c=i[o].v.indexOf(".")>-1&&o===S?i[o].v.indexOf(".")-1:i[o].v.length-1,_=i[o].v.substr(c+1);c>=0;--c)w>=0&&(i[o].v.charAt(c)==="0"||i[o].v.charAt(c)==="#")&&(_=E.charAt(w--)+_);i[o].v=_,i[o].t="t",C=o}for(w>=0&&C<i.length&&(i[C].v=E.substr(0,w+1)+i[C].v),w=E.indexOf(".")+1,o=S;o<i.length;++o)if(!(i[o]==null||"n?(".indexOf(i[o].t)===-1&&o!==S)){for(c=i[o].v.indexOf(".")>-1&&o===S?i[o].v.indexOf(".")+1:0,_=i[o].v.substr(0,c);c<i[o].v.length;++c)w<E.length&&(_+=E.charAt(w++));i[o].v=_,i[o].t="t",C=o}}}for(o=0;o<i.length;++o)i[o]!=null&&"n?".indexOf(i[o].t)>-1&&(b=r>1&&e<0&&o>0&&i[o-1].v==="-"?-e:e,i[o].v=Wa(i[o].t,i[o].v,b),i[o].t="t");var T="";for(o=0;o!==i.length;++o)i[o]!=null&&(T+=i[o].v);return T}var F2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function D2(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function HR(t,e){var n=UR(t),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var a=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,a];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var o=n[0].match(F2),s=n[1].match(F2);return D2(e,o)?[r,n[0]]:D2(e,s)?[r,n[1]]:[r,n[o!=null&&s!=null?2:1]]}return[r,a]}function Uo(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:Gt)[t],r==null&&(r=n.table&&n.table[A2[t]]||Gt[A2[t]]),r==null&&(r=SR[t]||"General");break}if(Vd(r,0))return jm(e,n);e instanceof Date&&(e=ZS(e,n.date1904));var i=HR(r,e);if(Vd(i[1]))return jm(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return VR(i[1],e,n,i[0])}function lC(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(Gt[n]==null){e<0&&(e=n);continue}if(Gt[n]==t){e=n;break}}e<0&&(e=391)}return Gt[e]=t,e}function Gp(t){for(var e=0;e!=392;++e)t[e]!==void 0&&lC(t[e],e)}function Xp(){Gt=ER()}var cC=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function $R(t){var e=typeof t=="number"?Gt[t]:t;return e=e.replace(cC,"(\\d+)"),new RegExp("^"+e+"$")}function jR(t,e,n){var r=-1,i=-1,a=-1,o=-1,s=-1,u=-1;(e.match(cC)||[]).forEach(function(f,h){var d=parseInt(n[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":r=d;break;case"d":a=d;break;case"h":o=d;break;case"s":u=d;break;case"m":o>=0?s=d:i=d;break}}),u>=0&&s==-1&&i>=0&&(s=i,i=-1);var l=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);l.length==7&&(l="0"+l),l.length==8&&(l="20"+l);var c=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2);return o==-1&&s==-1&&u==-1?l:r==-1&&i==-1&&a==-1?c:l+"T"+c}var GR=function(){var t={};t.version="1.2.0";function e(){for(var E=0,S=new Array(256),C=0;C!=256;++C)E=C,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,S[C]=E;return typeof Int32Array<"u"?new Int32Array(S):S}var n=e();function r(E){var S=0,C=0,T=0,A=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(T=0;T!=256;++T)A[T]=E[T];for(T=0;T!=256;++T)for(C=E[T],S=256+T;S<4096;S+=256)C=A[S]=C>>>8^E[C&255];var I=[];for(T=1;T!=16;++T)I[T-1]=typeof Int32Array<"u"?A.subarray(T*256,T*256+256):A.slice(T*256,T*256+256);return I}var i=r(n),a=i[0],o=i[1],s=i[2],u=i[3],l=i[4],c=i[5],f=i[6],h=i[7],d=i[8],v=i[9],p=i[10],m=i[11],g=i[12],x=i[13],y=i[14];function w(E,S){for(var C=S^-1,T=0,A=E.length;T<A;)C=C>>>8^n[(C^E.charCodeAt(T++))&255];return~C}function _(E,S){for(var C=S^-1,T=E.length-15,A=0;A<T;)C=y[E[A++]^C&255]^x[E[A++]^C>>8&255]^g[E[A++]^C>>16&255]^m[E[A++]^C>>>24]^p[E[A++]]^v[E[A++]]^d[E[A++]]^h[E[A++]]^f[E[A++]]^c[E[A++]]^l[E[A++]]^u[E[A++]]^s[E[A++]]^o[E[A++]]^a[E[A++]]^n[E[A++]];for(T+=15;A<T;)C=C>>>8^n[(C^E[A++])&255];return~C}function b(E,S){for(var C=S^-1,T=0,A=E.length,I=0,V=0;T<A;)I=E.charCodeAt(T++),I<128?C=C>>>8^n[(C^I)&255]:I<2048?(C=C>>>8^n[(C^(192|I>>6&31))&255],C=C>>>8^n[(C^(128|I&63))&255]):I>=55296&&I<57344?(I=(I&1023)+64,V=E.charCodeAt(T++)&1023,C=C>>>8^n[(C^(240|I>>8&7))&255],C=C>>>8^n[(C^(128|I>>2&63))&255],C=C>>>8^n[(C^(128|V>>6&15|(I&3)<<4))&255],C=C>>>8^n[(C^(128|V&63))&255]):(C=C>>>8^n[(C^(224|I>>12&15))&255],C=C>>>8^n[(C^(128|I>>6&63))&255],C=C>>>8^n[(C^(128|I&63))&255]);return~C}return t.table=n,t.bstr=w,t.buf=_,t.str=b,t}(),bt=function(){var e={};e.version="1.2.1";function n(k,L){for(var O=k.split("/"),N=L.split("/"),D=0,B=0,ne=Math.min(O.length,N.length);D<ne;++D){if(B=O[D].length-N[D].length)return B;if(O[D]!=N[D])return O[D]<N[D]?-1:1}return O.length-N.length}function r(k){if(k.charAt(k.length-1)=="/")return k.slice(0,-1).indexOf("/")===-1?k:r(k.slice(0,-1));var L=k.lastIndexOf("/");return L===-1?k:k.slice(0,L+1)}function i(k){if(k.charAt(k.length-1)=="/")return i(k.slice(0,-1));var L=k.lastIndexOf("/");return L===-1?k:k.slice(L+1)}function a(k,L){typeof L=="string"&&(L=new Date(L));var O=L.getHours();O=O<<6|L.getMinutes(),O=O<<5|L.getSeconds()>>>1,k.write_shift(2,O);var N=L.getFullYear()-1980;N=N<<4|L.getMonth()+1,N=N<<5|L.getDate(),k.write_shift(2,N)}function o(k){var L=k.read_shift(2)&65535,O=k.read_shift(2)&65535,N=new Date,D=O&31;O>>>=5;var B=O&15;O>>>=4,N.setMilliseconds(0),N.setFullYear(O+1980),N.setMonth(B-1),N.setDate(D);var ne=L&31;L>>>=5;var ue=L&63;return L>>>=6,N.setHours(L),N.setMinutes(ue),N.setSeconds(ne<<1),N}function s(k){Hr(k,0);for(var L={},O=0;k.l<=k.length-4;){var N=k.read_shift(2),D=k.read_shift(2),B=k.l+D,ne={};switch(N){case 21589:O=k.read_shift(1),O&1&&(ne.mtime=k.read_shift(4)),D>5&&(O&2&&(ne.atime=k.read_shift(4)),O&4&&(ne.ctime=k.read_shift(4))),ne.mtime&&(ne.mt=new Date(ne.mtime*1e3));break}k.l=B,L[N]=ne}return L}var u;function l(){return u||(u={})}function c(k,L){if(k[0]==80&&k[1]==75)return Cl(k,L);if((k[0]|32)==109&&(k[1]|32)==105)return Wf(k,L);if(k.length<512)throw new Error("CFB file size "+k.length+" < 512");var O=3,N=512,D=0,B=0,ne=0,ue=0,q=0,re=[],oe=k.slice(0,512);Hr(oe,0);var _e=f(oe);switch(O=_e[0],O){case 3:N=512;break;case 4:N=4096;break;case 0:if(_e[1]==0)return Cl(k,L);default:throw new Error("Major Version: Expected 3 or 4 saw "+O)}N!==512&&(oe=k.slice(0,N),Hr(oe,28));var Ce=k.slice(0,N);h(oe,O);var Ae=oe.read_shift(4,"i");if(O===3&&Ae!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ae);oe.l+=4,ne=oe.read_shift(4,"i"),oe.l+=4,oe.chk("00100000","Mini Stream Cutoff Size: "),ue=oe.read_shift(4,"i"),D=oe.read_shift(4,"i"),q=oe.read_shift(4,"i"),B=oe.read_shift(4,"i");for(var ye=-1,ke=0;ke<109&&(ye=oe.read_shift(4,"i"),!(ye<0));++ke)re[ke]=ye;var Ge=d(k,N);m(q,B,Ge,N,re);var W=x(Ge,ne,re,N);W[ne].name="!Directory",D>0&&ue!==V&&(W[ue].name="!MiniFAT"),W[re[0]].name="!FAT",W.fat_addrs=re,W.ssz=N;var Y={},he=[],Le=[],nt=[];y(ne,W,Ge,he,D,Y,Le,ue),v(Le,nt,he),he.shift();var Je={FileIndex:Le,FullPaths:nt};return L&&L.raw&&(Je.raw={header:Ce,sectors:Ge}),Je}function f(k){if(k[k.l]==80&&k[k.l+1]==75)return[0,0];k.chk(J,"Header Signature: "),k.l+=16;var L=k.read_shift(2,"u");return[k.read_shift(2,"u"),L]}function h(k,L){var O=9;switch(k.l+=2,O=k.read_shift(2)){case 9:if(L!=3)throw new Error("Sector Shift: Expected 9 saw "+O);break;case 12:if(L!=4)throw new Error("Sector Shift: Expected 12 saw "+O);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+O)}k.chk("0600","Mini Sector Shift: "),k.chk("000000000000","Reserved: ")}function d(k,L){for(var O=Math.ceil(k.length/L)-1,N=[],D=1;D<O;++D)N[D-1]=k.slice(D*L,(D+1)*L);return N[O-1]=k.slice(O*L),N}function v(k,L,O){for(var N=0,D=0,B=0,ne=0,ue=0,q=O.length,re=[],oe=[];N<q;++N)re[N]=oe[N]=N,L[N]=O[N];for(;ue<oe.length;++ue)N=oe[ue],D=k[N].L,B=k[N].R,ne=k[N].C,re[N]===N&&(D!==-1&&re[D]!==D&&(re[N]=re[D]),B!==-1&&re[B]!==B&&(re[N]=re[B])),ne!==-1&&(re[ne]=N),D!==-1&&N!=re[N]&&(re[D]=re[N],oe.lastIndexOf(D)<ue&&oe.push(D)),B!==-1&&N!=re[N]&&(re[B]=re[N],oe.lastIndexOf(B)<ue&&oe.push(B));for(N=1;N<q;++N)re[N]===N&&(B!==-1&&re[B]!==B?re[N]=re[B]:D!==-1&&re[D]!==D&&(re[N]=re[D]));for(N=1;N<q;++N)if(k[N].type!==0){if(ue=N,ue!=re[ue])do ue=re[ue],L[N]=L[ue]+"/"+L[N];while(ue!==0&&re[ue]!==-1&&ue!=re[ue]);re[N]=-1}for(L[0]+="/",N=1;N<q;++N)k[N].type!==2&&(L[N]+="/")}function p(k,L,O){for(var N=k.start,D=k.size,B=[],ne=N;O&&D>0&&ne>=0;)B.push(L.slice(ne*I,ne*I+I)),D-=I,ne=ms(O,ne*4);return B.length===0?ce(0):Vn(B).slice(0,k.size)}function m(k,L,O,N,D){var B=V;if(k===V){if(L!==0)throw new Error("DIFAT chain shorter than expected")}else if(k!==-1){var ne=O[k],ue=(N>>>2)-1;if(!ne)return;for(var q=0;q<ue&&(B=ms(ne,q*4))!==V;++q)D.push(B);m(ms(ne,N-4),L-1,O,N,D)}}function g(k,L,O,N,D){var B=[],ne=[];D||(D=[]);var ue=N-1,q=0,re=0;for(q=L;q>=0;){D[q]=!0,B[B.length]=q,ne.push(k[q]);var oe=O[Math.floor(q*4/N)];if(re=q*4&ue,N<4+re)throw new Error("FAT boundary crossed: "+q+" 4 "+N);if(!k[oe])break;q=ms(k[oe],re)}return{nodes:B,data:z2([ne])}}function x(k,L,O,N){var D=k.length,B=[],ne=[],ue=[],q=[],re=N-1,oe=0,_e=0,Ce=0,Ae=0;for(oe=0;oe<D;++oe)if(ue=[],Ce=oe+L,Ce>=D&&(Ce-=D),!ne[Ce]){q=[];var ye=[];for(_e=Ce;_e>=0;){ye[_e]=!0,ne[_e]=!0,ue[ue.length]=_e,q.push(k[_e]);var ke=O[Math.floor(_e*4/N)];if(Ae=_e*4&re,N<4+Ae)throw new Error("FAT boundary crossed: "+_e+" 4 "+N);if(!k[ke]||(_e=ms(k[ke],Ae),ye[_e]))break}B[Ce]={nodes:ue,data:z2([q])}}return B}function y(k,L,O,N,D,B,ne,ue){for(var q=0,re=N.length?2:0,oe=L[k].data,_e=0,Ce=0,Ae;_e<oe.length;_e+=128){var ye=oe.slice(_e,_e+128);Hr(ye,64),Ce=ye.read_shift(2),Ae=A1(ye,0,Ce-re),N.push(Ae);var ke={name:Ae,type:ye.read_shift(1),color:ye.read_shift(1),L:ye.read_shift(4,"i"),R:ye.read_shift(4,"i"),C:ye.read_shift(4,"i"),clsid:ye.read_shift(16),state:ye.read_shift(4,"i"),start:0,size:0},Ge=ye.read_shift(2)+ye.read_shift(2)+ye.read_shift(2)+ye.read_shift(2);Ge!==0&&(ke.ct=w(ye,ye.l-8));var W=ye.read_shift(2)+ye.read_shift(2)+ye.read_shift(2)+ye.read_shift(2);W!==0&&(ke.mt=w(ye,ye.l-8)),ke.start=ye.read_shift(4,"i"),ke.size=ye.read_shift(4,"i"),ke.size<0&&ke.start<0&&(ke.size=ke.type=0,ke.start=V,ke.name=""),ke.type===5?(q=ke.start,D>0&&q!==V&&(L[q].name="!StreamData")):ke.size>=4096?(ke.storage="fat",L[ke.start]===void 0&&(L[ke.start]=g(O,ke.start,L.fat_addrs,L.ssz)),L[ke.start].name=ke.name,ke.content=L[ke.start].data.slice(0,ke.size)):(ke.storage="minifat",ke.size<0?ke.size=0:q!==V&&ke.start!==V&&L[q]&&(ke.content=p(ke,L[q].data,(L[ue]||{}).data))),ke.content&&Hr(ke.content,0),B[Ae]=ke,ne.push(ke)}}function w(k,L){return new Date((Gr(k,L+4)/1e7*Math.pow(2,32)+Gr(k,L)/1e7-11644473600)*1e3)}function _(k,L){return l(),c(u.readFileSync(k),L)}function b(k,L){var O=L&&L.type;switch(O||ft&&Buffer.isBuffer(k)&&(O="buffer"),O||"base64"){case"file":return _(k,L);case"base64":return c(Fi(Ga(k)),L);case"binary":return c(Fi(k),L)}return c(k,L)}function E(k,L){var O=L||{},N=O.root||"Root Entry";if(k.FullPaths||(k.FullPaths=[]),k.FileIndex||(k.FileIndex=[]),k.FullPaths.length!==k.FileIndex.length)throw new Error("inconsistent CFB structure");k.FullPaths.length===0&&(k.FullPaths[0]=N+"/",k.FileIndex[0]={name:N,type:5}),O.CLSID&&(k.FileIndex[0].clsid=O.CLSID),S(k)}function S(k){var L="Sh33tJ5";if(!bt.find(k,"/"+L)){var O=ce(4);O[0]=55,O[1]=O[3]=50,O[2]=54,k.FileIndex.push({name:L,type:2,content:O,size:4,L:69,R:69,C:69}),k.FullPaths.push(k.FullPaths[0]+L),C(k)}}function C(k,L){E(k);for(var O=!1,N=!1,D=k.FullPaths.length-1;D>=0;--D){var B=k.FileIndex[D];switch(B.type){case 0:N?O=!0:(k.FileIndex.pop(),k.FullPaths.pop());break;case 1:case 2:case 5:N=!0,isNaN(B.R*B.L*B.C)&&(O=!0),B.R>-1&&B.L>-1&&B.R==B.L&&(O=!0);break;default:O=!0;break}}if(!(!O&&!L)){var ne=new Date(1987,1,19),ue=0,q=Object.create?Object.create(null):{},re=[];for(D=0;D<k.FullPaths.length;++D)q[k.FullPaths[D]]=!0,k.FileIndex[D].type!==0&&re.push([k.FullPaths[D],k.FileIndex[D]]);for(D=0;D<re.length;++D){var oe=r(re[D][0]);N=q[oe],N||(re.push([oe,{name:i(oe).replace("/",""),type:1,clsid:ae,ct:ne,mt:ne,content:null}]),q[oe]=!0)}for(re.sort(function(Ae,ye){return n(Ae[0],ye[0])}),k.FullPaths=[],k.FileIndex=[],D=0;D<re.length;++D)k.FullPaths[D]=re[D][0],k.FileIndex[D]=re[D][1];for(D=0;D<re.length;++D){var _e=k.FileIndex[D],Ce=k.FullPaths[D];if(_e.name=i(Ce).replace("/",""),_e.L=_e.R=_e.C=-(_e.color=1),_e.size=_e.content?_e.content.length:0,_e.start=0,_e.clsid=_e.clsid||ae,D===0)_e.C=re.length>1?1:-1,_e.size=0,_e.type=5;else if(Ce.slice(-1)=="/"){for(ue=D+1;ue<re.length&&r(k.FullPaths[ue])!=Ce;++ue);for(_e.C=ue>=re.length?-1:ue,ue=D+1;ue<re.length&&r(k.FullPaths[ue])!=r(Ce);++ue);_e.R=ue>=re.length?-1:ue,_e.type=1}else r(k.FullPaths[D+1]||"")==r(Ce)&&(_e.R=D+1),_e.type=2}}}function T(k,L){var O=L||{};if(O.fileType=="mad")return zf(k,O);switch(C(k),O.fileType){case"zip":return iu(k,O)}var N=function(Ae){for(var ye=0,ke=0,Ge=0;Ge<Ae.FileIndex.length;++Ge){var W=Ae.FileIndex[Ge];if(W.content){var Y=W.content.length;Y>0&&(Y<4096?ye+=Y+63>>6:ke+=Y+511>>9)}}for(var he=Ae.FullPaths.length+3>>2,Le=ye+7>>3,nt=ye+127>>7,Je=Le+ke+he+nt,ln=Je+127>>7,lr=ln<=109?0:Math.ceil((ln-109)/127);Je+ln+lr+127>>7>ln;)lr=++ln<=109?0:Math.ceil((ln-109)/127);var Zt=[1,lr,ln,nt,he,ke,ye,0];return Ae.FileIndex[0].size=ye<<6,Zt[7]=(Ae.FileIndex[0].start=Zt[0]+Zt[1]+Zt[2]+Zt[3]+Zt[4]+Zt[5])+(Zt[6]+7>>3),Zt}(k),D=ce(N[7]<<9),B=0,ne=0;{for(B=0;B<8;++B)D.write_shift(1,K[B]);for(B=0;B<8;++B)D.write_shift(2,0);for(D.write_shift(2,62),D.write_shift(2,3),D.write_shift(2,65534),D.write_shift(2,9),D.write_shift(2,6),B=0;B<3;++B)D.write_shift(2,0);for(D.write_shift(4,0),D.write_shift(4,N[2]),D.write_shift(4,N[0]+N[1]+N[2]+N[3]-1),D.write_shift(4,0),D.write_shift(4,4096),D.write_shift(4,N[3]?N[0]+N[1]+N[2]-1:V),D.write_shift(4,N[3]),D.write_shift(-4,N[1]?N[0]-1:V),D.write_shift(4,N[1]),B=0;B<109;++B)D.write_shift(-4,B<N[2]?N[1]+B:-1)}if(N[1])for(ne=0;ne<N[1];++ne){for(;B<236+ne*127;++B)D.write_shift(-4,B<N[2]?N[1]+B:-1);D.write_shift(-4,ne===N[1]-1?V:ne+1)}var ue=function(Ae){for(ne+=Ae;B<ne-1;++B)D.write_shift(-4,B+1);Ae&&(++B,D.write_shift(-4,V))};for(ne=B=0,ne+=N[1];B<ne;++B)D.write_shift(-4,ie.DIFSECT);for(ne+=N[2];B<ne;++B)D.write_shift(-4,ie.FATSECT);ue(N[3]),ue(N[4]);for(var q=0,re=0,oe=k.FileIndex[0];q<k.FileIndex.length;++q)oe=k.FileIndex[q],oe.content&&(re=oe.content.length,!(re<4096)&&(oe.start=ne,ue(re+511>>9)));for(ue(N[6]+7>>3);D.l&511;)D.write_shift(-4,ie.ENDOFCHAIN);for(ne=B=0,q=0;q<k.FileIndex.length;++q)oe=k.FileIndex[q],oe.content&&(re=oe.content.length,!(!re||re>=4096)&&(oe.start=ne,ue(re+63>>6)));for(;D.l&511;)D.write_shift(-4,ie.ENDOFCHAIN);for(B=0;B<N[4]<<2;++B){var _e=k.FullPaths[B];if(!_e||_e.length===0){for(q=0;q<17;++q)D.write_shift(4,0);for(q=0;q<3;++q)D.write_shift(4,-1);for(q=0;q<12;++q)D.write_shift(4,0);continue}oe=k.FileIndex[B],B===0&&(oe.start=oe.size?oe.start-1:V);var Ce=B===0&&O.root||oe.name;if(re=2*(Ce.length+1),D.write_shift(64,Ce,"utf16le"),D.write_shift(2,re),D.write_shift(1,oe.type),D.write_shift(1,oe.color),D.write_shift(-4,oe.L),D.write_shift(-4,oe.R),D.write_shift(-4,oe.C),oe.clsid)D.write_shift(16,oe.clsid,"hex");else for(q=0;q<4;++q)D.write_shift(4,0);D.write_shift(4,oe.state||0),D.write_shift(4,0),D.write_shift(4,0),D.write_shift(4,0),D.write_shift(4,0),D.write_shift(4,oe.start),D.write_shift(4,oe.size),D.write_shift(4,0)}for(B=1;B<k.FileIndex.length;++B)if(oe=k.FileIndex[B],oe.size>=4096)if(D.l=oe.start+1<<9,ft&&Buffer.isBuffer(oe.content))oe.content.copy(D,D.l,0,oe.size),D.l+=oe.size+511&-512;else{for(q=0;q<oe.size;++q)D.write_shift(1,oe.content[q]);for(;q&511;++q)D.write_shift(1,0)}for(B=1;B<k.FileIndex.length;++B)if(oe=k.FileIndex[B],oe.size>0&&oe.size<4096)if(ft&&Buffer.isBuffer(oe.content))oe.content.copy(D,D.l,0,oe.size),D.l+=oe.size+63&-64;else{for(q=0;q<oe.size;++q)D.write_shift(1,oe.content[q]);for(;q&63;++q)D.write_shift(1,0)}if(ft)D.l=D.length;else for(;D.l<D.length;)D.write_shift(1,0);return D}function A(k,L){var O=k.FullPaths.map(function(q){return q.toUpperCase()}),N=O.map(function(q){var re=q.split("/");return re[re.length-(q.slice(-1)=="/"?2:1)]}),D=!1;L.charCodeAt(0)===47?(D=!0,L=O[0].slice(0,-1)+L):D=L.indexOf("/")!==-1;var B=L.toUpperCase(),ne=D===!0?O.indexOf(B):N.indexOf(B);if(ne!==-1)return k.FileIndex[ne];var ue=!B.match(dh);for(B=B.replace(pc,""),ue&&(B=B.replace(dh,"!")),ne=0;ne<O.length;++ne)if((ue?O[ne].replace(dh,"!"):O[ne]).replace(pc,"")==B||(ue?N[ne].replace(dh,"!"):N[ne]).replace(pc,"")==B)return k.FileIndex[ne];return null}var I=64,V=-2,J="d0cf11e0a1b11ae1",K=[208,207,17,224,161,177,26,225],ae="00000000000000000000000000000000",ie={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:V,FREESECT:-1,HEADER_SIGNATURE:J,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ae,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function G(k,L,O){l();var N=T(k,O);u.writeFileSync(L,N)}function Q(k){for(var L=new Array(k.length),O=0;O<k.length;++O)L[O]=String.fromCharCode(k[O]);return L.join("")}function te(k,L){var O=T(k,L);switch(L&&L.type||"buffer"){case"file":return l(),u.writeFileSync(L.filename,O),O;case"binary":return typeof O=="string"?O:Q(O);case"base64":return jc(typeof O=="string"?O:Q(O));case"buffer":if(ft)return Buffer.isBuffer(O)?O:Ya(O);case"array":return typeof O=="string"?Fi(O):O}return O}var pe;function P(k){try{var L=k.InflateRaw,O=new L;if(O._processChunk(new Uint8Array([3,0]),O._finishFlushFlag),O.bytesRead)pe=k;else throw new Error("zlib does not expose bytesRead")}catch(N){console.error("cannot use native zlib: "+(N.message||N))}}function j(k,L){if(!pe)return es(k,L);var O=pe.InflateRaw,N=new O,D=N._processChunk(k.slice(k.l),N._finishFlushFlag);return k.l+=N.bytesRead,D}function U(k){return pe?pe.deflateRawSync(k):ro(k)}var z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],xe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function we(k){var L=(k<<1|k<<11)&139536|(k<<5|k<<15)&558144;return(L>>16|L>>8|L)&255}for(var ee=typeof Uint8Array<"u",de=ee?new Uint8Array(256):[],Fe=0;Fe<256;++Fe)de[Fe]=we(Fe);function Re(k,L){var O=de[k&255];return L<=8?O>>>8-L:(O=O<<8|de[k>>8&255],L<=16?O>>>16-L:(O=O<<8|de[k>>16&255],O>>>24-L))}function He(k,L){var O=L&7,N=L>>>3;return(k[N]|(O<=6?0:k[N+1]<<8))>>>O&3}function Ve(k,L){var O=L&7,N=L>>>3;return(k[N]|(O<=5?0:k[N+1]<<8))>>>O&7}function Me(k,L){var O=L&7,N=L>>>3;return(k[N]|(O<=4?0:k[N+1]<<8))>>>O&15}function $e(k,L){var O=L&7,N=L>>>3;return(k[N]|(O<=3?0:k[N+1]<<8))>>>O&31}function Te(k,L){var O=L&7,N=L>>>3;return(k[N]|(O<=1?0:k[N+1]<<8))>>>O&127}function Et(k,L,O){var N=L&7,D=L>>>3,B=(1<<O)-1,ne=k[D]>>>N;return O<8-N||(ne|=k[D+1]<<8-N,O<16-N)||(ne|=k[D+2]<<16-N,O<24-N)||(ne|=k[D+3]<<24-N),ne&B}function vt(k,L,O){var N=L&7,D=L>>>3;return N<=5?k[D]|=(O&7)<<N:(k[D]|=O<<N&255,k[D+1]=(O&7)>>8-N),L+3}function bn(k,L,O){var N=L&7,D=L>>>3;return O=(O&1)<<N,k[D]|=O,L+1}function Xt(k,L,O){var N=L&7,D=L>>>3;return O<<=N,k[D]|=O&255,O>>>=8,k[D+1]=O,L+8}function ur(k,L,O){var N=L&7,D=L>>>3;return O<<=N,k[D]|=O&255,O>>>=8,k[D+1]=O&255,k[D+2]=O>>>8,L+16}function St(k,L){var O=k.length,N=2*O>L?2*O:L+5,D=0;if(O>=L)return k;if(ft){var B=C2(N);if(k.copy)k.copy(B);else for(;D<k.length;++D)B[D]=k[D];return B}else if(ee){var ne=new Uint8Array(N);if(ne.set)ne.set(k);else for(;D<O;++D)ne[D]=k[D];return ne}return k.length=N,k}function Ut(k){for(var L=new Array(k),O=0;O<k;++O)L[O]=0;return L}function Pn(k,L,O){var N=1,D=0,B=0,ne=0,ue=0,q=k.length,re=ee?new Uint16Array(32):Ut(32);for(B=0;B<32;++B)re[B]=0;for(B=q;B<O;++B)k[B]=0;q=k.length;var oe=ee?new Uint16Array(q):Ut(q);for(B=0;B<q;++B)re[D=k[B]]++,N<D&&(N=D),oe[B]=0;for(re[0]=0,B=1;B<=N;++B)re[B+16]=ue=ue+re[B-1]<<1;for(B=0;B<q;++B)ue=k[B],ue!=0&&(oe[B]=re[ue+16]++);var _e=0;for(B=0;B<q;++B)if(_e=k[B],_e!=0)for(ue=Re(oe[B],N)>>N-_e,ne=(1<<N+4-_e)-1;ne>=0;--ne)L[ue|ne<<_e]=_e&15|B<<4;return N}var $i=ee?new Uint16Array(512):Ut(512),Mr=ee?new Uint16Array(32):Ut(32);if(!ee){for(var Kt=0;Kt<512;++Kt)$i[Kt]=0;for(Kt=0;Kt<32;++Kt)Mr[Kt]=0}(function(){for(var k=[],L=0;L<32;L++)k.push(5);Pn(k,Mr,32);var O=[];for(L=0;L<=143;L++)O.push(8);for(;L<=255;L++)O.push(9);for(;L<=279;L++)O.push(7);for(;L<=287;L++)O.push(8);Pn(O,$i,288)})();var qt=function(){for(var L=ee?new Uint8Array(32768):[],O=0,N=0;O<xe.length-1;++O)for(;N<xe[O+1];++N)L[N]=O;for(;N<32768;++N)L[N]=29;var D=ee?new Uint8Array(259):[];for(O=0,N=0;O<Z.length-1;++O)for(;N<Z[O+1];++N)D[N]=O;function B(ue,q){for(var re=0;re<ue.length;){var oe=Math.min(65535,ue.length-re),_e=re+oe==ue.length;for(q.write_shift(1,+_e),q.write_shift(2,oe),q.write_shift(2,~oe&65535);oe-- >0;)q[q.l++]=ue[re++]}return q.l}function ne(ue,q){for(var re=0,oe=0,_e=ee?new Uint16Array(32768):[];oe<ue.length;){var Ce=Math.min(65535,ue.length-oe);if(Ce<10){for(re=vt(q,re,+(oe+Ce==ue.length)),re&7&&(re+=8-(re&7)),q.l=re/8|0,q.write_shift(2,Ce),q.write_shift(2,~Ce&65535);Ce-- >0;)q[q.l++]=ue[oe++];re=q.l*8;continue}re=vt(q,re,+(oe+Ce==ue.length)+2);for(var Ae=0;Ce-- >0;){var ye=ue[oe];Ae=(Ae<<5^ye)&32767;var ke=-1,Ge=0;if((ke=_e[Ae])&&(ke|=oe&-32768,ke>oe&&(ke-=32768),ke<oe))for(;ue[ke+Ge]==ue[oe+Ge]&&Ge<250;)++Ge;if(Ge>2){ye=D[Ge],ye<=22?re=Xt(q,re,de[ye+1]>>1)-1:(Xt(q,re,3),re+=5,Xt(q,re,de[ye-23]>>5),re+=3);var W=ye<8?0:ye-4>>2;W>0&&(ur(q,re,Ge-Z[ye]),re+=W),ye=L[oe-ke],re=Xt(q,re,de[ye]>>3),re-=3;var Y=ye<4?0:ye-2>>1;Y>0&&(ur(q,re,oe-ke-xe[ye]),re+=Y);for(var he=0;he<Ge;++he)_e[Ae]=oe&32767,Ae=(Ae<<5^ue[oe])&32767,++oe;Ce-=Ge-1}else ye<=143?ye=ye+48:re=bn(q,re,1),re=Xt(q,re,de[ye]),_e[Ae]=oe&32767,++oe}re=Xt(q,re,0)-1}return q.l=(re+7)/8|0,q.l}return function(q,re){return q.length<8?B(q,re):ne(q,re)}}();function ro(k){var L=ce(50+Math.floor(k.length*1.1)),O=qt(k,L);return L.slice(0,O)}var Vt=ee?new Uint16Array(32768):Ut(32768),io=ee?new Uint16Array(32768):Ut(32768),ai=ee?new Uint16Array(128):Ut(128),Kn=1,ji=1;function nu(k,L){var O=$e(k,L)+257;L+=5;var N=$e(k,L)+1;L+=5;var D=Me(k,L)+4;L+=4;for(var B=0,ne=ee?new Uint8Array(19):Ut(19),ue=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],q=1,re=ee?new Uint8Array(8):Ut(8),oe=ee?new Uint8Array(8):Ut(8),_e=ne.length,Ce=0;Ce<D;++Ce)ne[z[Ce]]=B=Ve(k,L),q<B&&(q=B),re[B]++,L+=3;var Ae=0;for(re[0]=0,Ce=1;Ce<=q;++Ce)oe[Ce]=Ae=Ae+re[Ce-1]<<1;for(Ce=0;Ce<_e;++Ce)(Ae=ne[Ce])!=0&&(ue[Ce]=oe[Ae]++);var ye=0;for(Ce=0;Ce<_e;++Ce)if(ye=ne[Ce],ye!=0){Ae=de[ue[Ce]]>>8-ye;for(var ke=(1<<7-ye)-1;ke>=0;--ke)ai[Ae|ke<<ye]=ye&7|Ce<<3}var Ge=[];for(q=1;Ge.length<O+N;)switch(Ae=ai[Te(k,L)],L+=Ae&7,Ae>>>=3){case 16:for(B=3+He(k,L),L+=2,Ae=Ge[Ge.length-1];B-- >0;)Ge.push(Ae);break;case 17:for(B=3+Ve(k,L),L+=3;B-- >0;)Ge.push(0);break;case 18:for(B=11+Te(k,L),L+=7;B-- >0;)Ge.push(0);break;default:Ge.push(Ae),q<Ae&&(q=Ae);break}var W=Ge.slice(0,O),Y=Ge.slice(O);for(Ce=O;Ce<286;++Ce)W[Ce]=0;for(Ce=N;Ce<30;++Ce)Y[Ce]=0;return Kn=Pn(W,Vt,286),ji=Pn(Y,io,30),L}function Sl(k,L){if(k[0]==3&&!(k[1]&3))return[Ls(L),2];for(var O=0,N=0,D=C2(L||1<<18),B=0,ne=D.length>>>0,ue=0,q=0;!(N&1);){if(N=Ve(k,O),O+=3,N>>>1)N>>1==1?(ue=9,q=5):(O=nu(k,O),ue=Kn,q=ji);else{O&7&&(O+=8-(O&7));var re=k[O>>>3]|k[(O>>>3)+1]<<8;if(O+=32,re>0)for(!L&&ne<B+re&&(D=St(D,B+re),ne=D.length);re-- >0;)D[B++]=k[O>>>3],O+=8;continue}for(;;){!L&&ne<B+32767&&(D=St(D,B+32767),ne=D.length);var oe=Et(k,O,ue),_e=N>>>1==1?$i[oe]:Vt[oe];if(O+=_e&15,_e>>>=4,!(_e>>>8&255))D[B++]=_e;else{if(_e==256)break;_e-=257;var Ce=_e<8?0:_e-4>>2;Ce>5&&(Ce=0);var Ae=B+Z[_e];Ce>0&&(Ae+=Et(k,O,Ce),O+=Ce),oe=Et(k,O,q),_e=N>>>1==1?Mr[oe]:io[oe],O+=_e&15,_e>>>=4;var ye=_e<4?0:_e-2>>1,ke=xe[_e];for(ye>0&&(ke+=Et(k,O,ye),O+=ye),!L&&ne<Ae&&(D=St(D,Ae+100),ne=D.length);B<Ae;)D[B]=D[B-ke],++B}}}return L?[D,O+7>>>3]:[D.slice(0,B),O+7>>>3]}function es(k,L){var O=k.slice(k.l||0),N=Sl(O,L);return k.l+=N[1],N[0]}function un(k,L){if(k)typeof console<"u"&&console.error(L);else throw new Error(L)}function Cl(k,L){var O=k;Hr(O,0);var N=[],D=[],B={FileIndex:N,FullPaths:D};E(B,{root:L.root});for(var ne=O.length-4;(O[ne]!=80||O[ne+1]!=75||O[ne+2]!=5||O[ne+3]!=6)&&ne>=0;)--ne;O.l=ne+4,O.l+=4;var ue=O.read_shift(2);O.l+=6;var q=O.read_shift(4);for(O.l=q,ne=0;ne<ue;++ne){O.l+=20;var re=O.read_shift(4),oe=O.read_shift(4),_e=O.read_shift(2),Ce=O.read_shift(2),Ae=O.read_shift(2);O.l+=8;var ye=O.read_shift(4),ke=s(O.slice(O.l+_e,O.l+_e+Ce));O.l+=_e+Ce+Ae;var Ge=O.l;O.l=ye+4,ru(O,re,oe,B,ke),O.l=Ge}return B}function ru(k,L,O,N,D){k.l+=2;var B=k.read_shift(2),ne=k.read_shift(2),ue=o(k);if(B&8257)throw new Error("Unsupported ZIP encryption");for(var q=k.read_shift(4),re=k.read_shift(4),oe=k.read_shift(4),_e=k.read_shift(2),Ce=k.read_shift(2),Ae="",ye=0;ye<_e;++ye)Ae+=String.fromCharCode(k[k.l++]);if(Ce){var ke=s(k.slice(k.l,k.l+Ce));(ke[21589]||{}).mt&&(ue=ke[21589].mt),((D||{})[21589]||{}).mt&&(ue=D[21589].mt)}k.l+=Ce;var Ge=k.slice(k.l,k.l+re);switch(ne){case 8:Ge=j(k,oe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ne)}var W=!1;B&8&&(q=k.read_shift(4),q==134695760&&(q=k.read_shift(4),W=!0),re=k.read_shift(4),oe=k.read_shift(4)),re!=L&&un(W,"Bad compressed size: "+L+" != "+re),oe!=O&&un(W,"Bad uncompressed size: "+O+" != "+oe),wa(N,Ae,Ge,{unsafe:!0,mt:ue})}function iu(k,L){var O=L||{},N=[],D=[],B=ce(1),ne=O.compression?8:0,ue=0,q=0,re=0,oe=0,_e=0,Ce=k.FullPaths[0],Ae=Ce,ye=k.FileIndex[0],ke=[],Ge=0;for(q=1;q<k.FullPaths.length;++q)if(Ae=k.FullPaths[q].slice(Ce.length),ye=k.FileIndex[q],!(!ye.size||!ye.content||Ae=="Sh33tJ5")){var W=oe,Y=ce(Ae.length);for(re=0;re<Ae.length;++re)Y.write_shift(1,Ae.charCodeAt(re)&127);Y=Y.slice(0,Y.l),ke[_e]=GR.buf(ye.content,0);var he=ye.content;ne==8&&(he=U(he)),B=ce(30),B.write_shift(4,67324752),B.write_shift(2,20),B.write_shift(2,ue),B.write_shift(2,ne),ye.mt?a(B,ye.mt):B.write_shift(4,0),B.write_shift(-4,ke[_e]),B.write_shift(4,he.length),B.write_shift(4,ye.content.length),B.write_shift(2,Y.length),B.write_shift(2,0),oe+=B.length,N.push(B),oe+=Y.length,N.push(Y),oe+=he.length,N.push(he),B=ce(46),B.write_shift(4,33639248),B.write_shift(2,0),B.write_shift(2,20),B.write_shift(2,ue),B.write_shift(2,ne),B.write_shift(4,0),B.write_shift(-4,ke[_e]),B.write_shift(4,he.length),B.write_shift(4,ye.content.length),B.write_shift(2,Y.length),B.write_shift(2,0),B.write_shift(2,0),B.write_shift(2,0),B.write_shift(2,0),B.write_shift(4,0),B.write_shift(4,W),Ge+=B.l,D.push(B),Ge+=Y.length,D.push(Y),++_e}return B=ce(22),B.write_shift(4,101010256),B.write_shift(2,0),B.write_shift(2,0),B.write_shift(2,_e),B.write_shift(2,_e),B.write_shift(4,Ge),B.write_shift(4,oe),B.write_shift(2,0),Vn([Vn(N),Vn(D),B])}var ya={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Lf(k,L){if(k.ctype)return k.ctype;var O=k.name||"",N=O.match(/\.([^\.]+)$/);return N&&ya[N[1]]||L&&(N=(O=L).match(/[\.\\]([^\.\\])+$/),N&&ya[N[1]])?ya[N[1]]:"application/octet-stream"}function Bf(k){for(var L=jc(k),O=[],N=0;N<L.length;N+=76)O.push(L.slice(N,N+76));return O.join(`\r
`)+`\r
`}function w0(k){var L=k.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(re){var oe=re.charCodeAt(0).toString(16).toUpperCase();return"="+(oe.length==1?"0"+oe:oe)});L=L.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),L.charAt(0)==`
`&&(L="=0D"+L.slice(1)),L=L.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var O=[],N=L.split(`\r
`),D=0;D<N.length;++D){var B=N[D];if(B.length==0){O.push("");continue}for(var ne=0;ne<B.length;){var ue=76,q=B.slice(ne,ne+ue);q.charAt(ue-1)=="="?ue--:q.charAt(ue-2)=="="?ue-=2:q.charAt(ue-3)=="="&&(ue-=3),q=B.slice(ne,ne+ue),ne+=ue,ne<B.length&&(q+="="),O.push(q)}}return O.join(`\r
`)}function Tl(k){for(var L=[],O=0;O<k.length;++O){for(var N=k[O];O<=k.length&&N.charAt(N.length-1)=="=";)N=N.slice(0,N.length-1)+k[++O];L.push(N)}for(var D=0;D<L.length;++D)L[D]=L[D].replace(/[=][0-9A-Fa-f]{2}/g,function(B){return String.fromCharCode(parseInt(B.slice(1),16))});return Fi(L.join(`\r
`))}function _0(k,L,O){for(var N="",D="",B="",ne,ue=0;ue<10;++ue){var q=L[ue];if(!q||q.match(/^\s*$/))break;var re=q.match(/^(.*?):\s*([^\s].*)$/);if(re)switch(re[1].toLowerCase()){case"content-location":N=re[2].trim();break;case"content-type":B=re[2].trim();break;case"content-transfer-encoding":D=re[2].trim();break}}switch(++ue,D.toLowerCase()){case"base64":ne=Fi(Ga(L.slice(ue).join("")));break;case"quoted-printable":ne=Tl(L.slice(ue));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+D)}var oe=wa(k,N.slice(O.length),ne,{unsafe:!0});B&&(oe.ctype=B)}function Wf(k,L){if(Q(k.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var O=L&&L.root||"",N=(ft&&Buffer.isBuffer(k)?k.toString("binary"):Q(k)).split(`\r
`),D=0,B="";for(D=0;D<N.length;++D)if(B=N[D],!!/^Content-Location:/i.test(B)&&(B=B.slice(B.indexOf("file")),O||(O=B.slice(0,B.lastIndexOf("/")+1)),B.slice(0,O.length)!=O))for(;O.length>0&&(O=O.slice(0,O.length-1),O=O.slice(0,O.lastIndexOf("/")+1),B.slice(0,O.length)!=O););var ne=(N[1]||"").match(/boundary="(.*?)"/);if(!ne)throw new Error("MAD cannot find boundary");var ue="--"+(ne[1]||""),q=[],re=[],oe={FileIndex:q,FullPaths:re};E(oe);var _e,Ce=0;for(D=0;D<N.length;++D){var Ae=N[D];Ae!==ue&&Ae!==ue+"--"||(Ce++&&_0(oe,N.slice(_e,D),O),_e=D)}return oe}function zf(k,L){var O=L||{},N=O.boundary||"SheetJS";N="------="+N;for(var D=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+N.slice(2)+'"',"","",""],B=k.FullPaths[0],ne=B,ue=k.FileIndex[0],q=1;q<k.FullPaths.length;++q)if(ne=k.FullPaths[q].slice(B.length),ue=k.FileIndex[q],!(!ue.size||!ue.content||ne=="Sh33tJ5")){ne=ne.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ge){return"_x"+Ge.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ge){return"_u"+Ge.charCodeAt(0).toString(16)+"_"});for(var re=ue.content,oe=ft&&Buffer.isBuffer(re)?re.toString("binary"):Q(re),_e=0,Ce=Math.min(1024,oe.length),Ae=0,ye=0;ye<=Ce;++ye)(Ae=oe.charCodeAt(ye))>=32&&Ae<128&&++_e;var ke=_e>=Ce*4/5;D.push(N),D.push("Content-Location: "+(O.root||"file:///C:/SheetJS/")+ne),D.push("Content-Transfer-Encoding: "+(ke?"quoted-printable":"base64")),D.push("Content-Type: "+Lf(ue,ne)),D.push(""),D.push(ke?w0(oe):Bf(oe))}return D.push(N+`--\r
`),D.join(`\r
`)}function kl(k){var L={};return E(L,k),L}function wa(k,L,O,N){var D=N&&N.unsafe;D||E(k);var B=!D&&bt.find(k,L);if(!B){var ne=k.FullPaths[0];L.slice(0,ne.length)==ne?ne=L:(ne.slice(-1)!="/"&&(ne+="/"),ne=(ne+L).replace("//","/")),B={name:i(L),type:2},k.FileIndex.push(B),k.FullPaths.push(ne),D||bt.utils.cfb_gc(k)}return B.content=O,B.size=O?O.length:0,N&&(N.CLSID&&(B.clsid=N.CLSID),N.mt&&(B.mt=N.mt),N.ct&&(B.ct=N.ct)),B}function Uf(k,L){E(k);var O=bt.find(k,L);if(O){for(var N=0;N<k.FileIndex.length;++N)if(k.FileIndex[N]==O)return k.FileIndex.splice(N,1),k.FullPaths.splice(N,1),!0}return!1}function Al(k,L,O){E(k);var N=bt.find(k,L);if(N){for(var D=0;D<k.FileIndex.length;++D)if(k.FileIndex[D]==N)return k.FileIndex[D].name=i(O),k.FullPaths[D]=O,!0}return!1}function Vf(k){C(k,!0)}return e.find=A,e.read=b,e.parse=c,e.write=te,e.writeFile=G,e.utils={cfb_new:kl,cfb_add:wa,cfb_del:Uf,cfb_mov:Al,cfb_gc:Vf,ReadShift:mc,CheckField:AC,prep_blob:Hr,bconcat:Vn,use_zlib:P,_deflateRaw:ro,_inflateRaw:es,consts:ie},e}();function XR(t){return typeof t=="string"?jp(t):Array.isArray(t)?yR(t):t}function yf(t,e,n){if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=jp(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var r=n=="utf8"?Xc(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var i=new Blob([XR(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=a,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var s=File(t);return s.open("w"),s.encoding="binary",Array.isArray(e)&&(e=xf(e)),s.write(e),s.close(),e}catch(u){if(!u.message||!u.message.match(/onstruct/))throw u}throw new Error("cannot save file "+t)}function Xn(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function O2(t,e){for(var n=[],r=Xn(t),i=0;i!==r.length;++i)n[t[r[i]][e]]==null&&(n[t[r[i]][e]]=r[i]);return n}function S1(t){for(var e=[],n=Xn(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}function Kp(t){for(var e=[],n=Xn(t),r=0;r!==n.length;++r)e[t[n[r]]]=parseInt(n[r],10);return e}function KR(t){for(var e=[],n=Xn(t),r=0;r!==n.length;++r)e[t[n[r]]]==null&&(e[t[n[r]]]=[]),e[t[n[r]]].push(n[r]);return e}var $d=new Date(1899,11,30,0,0,0);function Dr(t,e){var n=t.getTime(),r=$d.getTime()+(t.getTimezoneOffset()-$d.getTimezoneOffset())*6e4;return(n-r)/(24*60*60*1e3)}var fC=new Date,qR=$d.getTime()+(fC.getTimezoneOffset()-$d.getTimezoneOffset())*6e4,P2=fC.getTimezoneOffset();function hC(t){var e=new Date;return e.setTime(t*24*60*60*1e3+qR),e.getTimezoneOffset()!==P2&&e.setTime(e.getTime()+(e.getTimezoneOffset()-P2)*6e4),e}var N2=new Date("2017-02-19T19:06:09.000Z"),dC=isNaN(N2.getFullYear())?new Date("2/19/17"):N2,YR=dC.getFullYear()==2017;function mr(t,e){var n=new Date(t);if(YR)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(dC.getFullYear()==1917&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function qp(t,e){if(ft&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(a){return n[a]||a})}catch{}for(var r=[],i=0;i!=t.length;++i)r.push(String.fromCharCode(t[i]));return r.join("")}function Or(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=Or(t[n]));return e}function jt(t,e){for(var n="";n.length<e;)n+=t;return n}function za(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,a){return n=-n,a}),!isNaN(e=Number(r)))?e/n:e}var QR=["january","february","march","april","may","june","july","august","september","october","november","december"];function Gc(t){var e=new Date(t),n=new Date(NaN),r=e.getYear(),i=e.getMonth(),a=e.getDate();if(isNaN(a))return n;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&QR.indexOf(o)==-1)return n}else if(o.match(/[a-z]/))return n;return r<0||r>8099?n:(i>0||a>1)&&r!=101?e:t.match(/[^-0-9:,\/\\]/)?n:e}function tt(t,e,n){if(t.FullPaths){if(typeof n=="string"){var r;return ft?r=Ya(n):r=wR(n),bt.utils.cfb_add(t,e,r)}bt.utils.cfb_add(t,e,n)}else t.file(e,n)}function C1(){return bt.utils.cfb_new()}var on=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,JR={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},T1=S1(JR),k1=/[&<>'"]/g,ZR=/[\u0000-\u0008\u000b-\u001f]/g;function yt(t){var e=t+"";return e.replace(k1,function(n){return T1[n]}).replace(ZR,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function M2(t){return yt(t).replace(/ /g,"_x0020_")}var pC=/[\u0000-\u001f]/g;function eF(t){var e=t+"";return e.replace(k1,function(n){return T1[n]}).replace(/\n/g,"<br/>").replace(pC,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function tF(t){var e=t+"";return e.replace(k1,function(n){return T1[n]}).replace(pC,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}function nF(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function rF(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function tv(t){for(var e="",n=0,r=0,i=0,a=0,o=0,s=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(i=t.charCodeAt(n++),r>191&&r<224){o=(r&31)<<6,o|=i&63,e+=String.fromCharCode(o);continue}if(a=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63);continue}o=t.charCodeAt(n++),s=((r&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(s>>>10&1023)),e+=String.fromCharCode(56320+(s&1023))}return e}function L2(t){var e=Ls(2*t.length),n,r,i=1,a=0,o=0,s;for(r=0;r<t.length;r+=i)i=1,(s=t.charCodeAt(r))<128?n=s:s<224?(n=(s&31)*64+(t.charCodeAt(r+1)&63),i=2):s<240?(n=(s&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),i=3):(i=4,n=(s&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,o=55296+(n>>>10&1023),n=56320+(n&1023)),o!==0&&(e[a++]=o&255,e[a++]=o>>>8,o=0),e[a++]=n%256,e[a++]=n>>>8;return e.slice(0,a).toString("ucs2")}function B2(t){return Ya(t,"binary").toString("utf8")}var vh="foo bar baz",vc=ft&&(B2(vh)==tv(vh)&&B2||L2(vh)==tv(vh)&&L2)||tv,Xc=ft?function(t){return Ya(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,i=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},iF=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)r=r.replace(t[i][0],t[i][1]);return r}}(),vC=/(^\s|\s$|\n)/;function Hn(t,e){return"<"+t+(e.match(vC)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Kc(t){return Xn(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Ee(t,e,n){return"<"+t+(n!=null?Kc(n):"")+(e!=null?(e.match(vC)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function Gm(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function aF(t,e){switch(typeof t){case"string":var n=Ee("vt:lpwstr",yt(t));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return Ee((t|0)==t?"vt:i4":"vt:r8",yt(String(t)));case"boolean":return Ee("vt:bool",t?"true":"false")}if(t instanceof Date)return Ee("vt:filetime",Gm(t));throw new Error("Unable to serialize "+t)}var kn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},gl=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],jr={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function oF(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,a=5;a>=0;--a)i=i*256+t[e+a];return r==2047?i==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}function sF(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,a=0,o=r?-e:e;isFinite(o)?o==0?i=a=0:(i=Math.floor(Math.log(o)/Math.LN2),a=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?i=-1022:(a-=Math.pow(2,52),i+=1023)):(i=2047,a=isNaN(e)?26985:0);for(var s=0;s<=5;++s,a/=256)t[n+s]=a&255;t[n+6]=(i&15)<<4|a&15,t[n+7]=i>>4|r}var W2=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var i=0,a=t[0][r].length;i<a;i+=n)e.push.apply(e,t[0][r].slice(i,i+n));return e},z2=ft?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Ya(e)})):W2(t)}:W2,U2=function(t,e,n){for(var r=[],i=e;i<n;i+=2)r.push(String.fromCharCode(Zl(t,i)));return r.join("").replace(pc,"")},A1=ft?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf16le",e,n).replace(pc,""):U2(t,e,n)}:U2,V2=function(t,e,n){for(var r=[],i=e;i<e+n;++i)r.push(("0"+t[i].toString(16)).slice(-2));return r.join("")},mC=ft?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):V2(t,e,n)}:V2,H2=function(t,e,n){for(var r=[],i=e;i<n;i++)r.push(String.fromCharCode(vu(t,i)));return r.join("")},wf=ft?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):H2(e,n,r)}:H2,gC=function(t,e){var n=Gr(t,e);return n>0?wf(t,e+4,e+4+n-1):""},xC=gC,yC=function(t,e){var n=Gr(t,e);return n>0?wf(t,e+4,e+4+n-1):""},wC=yC,_C=function(t,e){var n=2*Gr(t,e);return n>0?wf(t,e+4,e+4+n-1):""},bC=_C,EC=function(e,n){var r=Gr(e,n);return r>0?A1(e,n+4,n+4+r):""},SC=EC,CC=function(t,e){var n=Gr(t,e);return n>0?wf(t,e+4,e+4+n):""},TC=CC,kC=function(t,e){return oF(t,e)},jd=kC,I1=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};ft&&(xC=function(e,n){if(!Buffer.isBuffer(e))return gC(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},wC=function(e,n){if(!Buffer.isBuffer(e))return yC(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},bC=function(e,n){if(!Buffer.isBuffer(e))return _C(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},SC=function(e,n){if(!Buffer.isBuffer(e))return EC(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},TC=function(e,n){if(!Buffer.isBuffer(e))return CC(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},jd=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):kC(e,n)},I1=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var vu=function(t,e){return t[e]},Zl=function(t,e){return t[e+1]*256+t[e]},uF=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},Gr=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},ms=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},lF=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function mc(t,e){var n="",r,i,a=[],o,s,u,l;switch(e){case"dbcs":if(l=this.l,ft&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(u=0;u<t;++u)n+=String.fromCharCode(Zl(this,l)),l+=2;t*=2;break;case"utf8":n=wf(this,this.l,this.l+t);break;case"utf16le":t*=2,n=A1(this,this.l,this.l+t);break;case"wstr":return mc.call(this,t,"dbcs");case"lpstr-ansi":n=xC(this,this.l),t=4+Gr(this,this.l);break;case"lpstr-cp":n=wC(this,this.l),t=4+Gr(this,this.l);break;case"lpwstr":n=bC(this,this.l),t=4+2*Gr(this,this.l);break;case"lpp4":t=4+Gr(this,this.l),n=SC(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Gr(this,this.l),n=TC(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(o=vu(this,this.l+t++))!==0;)a.push(hh(o));n=a.join("");break;case"_wstr":for(t=0,n="";(o=Zl(this,this.l+t))!==0;)a.push(hh(o)),t+=2;t+=2,n=a.join("");break;case"dbcs-cont":for(n="",l=this.l,u=0;u<t;++u){if(this.lens&&this.lens.indexOf(l)!==-1)return o=vu(this,l),this.l=l+1,s=mc.call(this,t-u,o?"dbcs-cont":"sbcs-cont"),a.join("")+s;a.push(hh(Zl(this,l))),l+=2}n=a.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",l=this.l,u=0;u!=t;++u){if(this.lens&&this.lens.indexOf(l)!==-1)return o=vu(this,l),this.l=l+1,s=mc.call(this,t-u,o?"dbcs-cont":"sbcs-cont"),a.join("")+s;a.push(hh(vu(this,l))),l+=1}n=a.join("");break;default:switch(t){case 1:return r=vu(this,this.l),this.l++,r;case 2:return r=(e==="i"?uF:Zl)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(r=(t>0?ms:lF)(this,this.l),this.l+=4,r):(i=Gr(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=jd(this,this.l):i=jd([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:n=mC(this,this.l,t);break}}return this.l+=t,n}var cF=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},fF=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},hF=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function dF(t,e,n){var r=0,i=0;if(n==="dbcs"){for(i=0;i!=e.length;++i)hF(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(n==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(n==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(n==="utf16le"){var a=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var o=e.charCodeAt(i);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,cF(this,e,this.l);break;case 8:if(r=8,n==="f"){sF(this,e,this.l);break}case 16:break;case-4:r=4,fF(this,e,this.l);break}return this.l+=r,this}function AC(t,e){var n=mC(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function Hr(t,e){t.l=e,t.read_shift=mc,t.chk=AC,t.write_shift=dF}function pa(t,e){t.l+=e}function ce(t){var e=Ls(t);return Hr(e,0),e}function Rr(){var t=[],e=ft?256:2048,n=function(l){var c=ce(l);return Hr(c,0),c},r=n(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},a=function(l){return r&&l<r.length-r.l?r:(i(),r=n(Math.max(l+1,e)))},o=function(){return i(),Vn(t)},s=function(l){i(),r=l,r.l==null&&(r.l=r.length),a(e)};return{next:a,push:s,end:o,_bufs:t}}function ge(t,e,n,r){var i=+e,a;if(!isNaN(i)){r||(r=oL[i].p||(n||[]).length||0),a=1+(i>=128?1:0)+1,r>=128&&++a,r>=16384&&++a,r>=2097152&&++a;var o=t.next(a);i<=127?o.write_shift(1,i):(o.write_shift(1,(i&127)+128),o.write_shift(1,i>>7));for(var s=0;s!=4;++s)if(r>=128)o.write_shift(1,(r&127)+128),r>>=7;else{o.write_shift(1,r);break}r>0&&I1(n)&&t.push(n)}}function gc(t,e,n){var r=Or(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function $2(t,e,n){var r=Or(t);return r.s=gc(r.s,e.s,n),r.e=gc(r.e,e.s,n),r}function xc(t,e){if(t.cRel&&t.c<0)for(t=Or(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Or(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=_t(t);return!t.cRel&&t.cRel!=null&&(n=mF(n)),!t.rRel&&t.rRel!=null&&(n=pF(n)),n}function nv(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+rr(t.s.c)+":"+(t.e.cRel?"":"$")+rr(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+jn(t.s.r)+":"+(t.e.rRel?"":"$")+jn(t.e.r):xc(t.s,e.biff)+":"+xc(t.e,e.biff)}function R1(t){return parseInt(vF(t),10)-1}function jn(t){return""+(t+1)}function pF(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function vF(t){return t.replace(/\$(\d+)$/,"$1")}function F1(t){for(var e=gF(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function rr(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function mF(t){return t.replace(/^([A-Z])/,"$$$1")}function gF(t){return t.replace(/^\$([A-Z])/,"$1")}function xF(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function In(t){for(var e=0,n=0,r=0;r<t.length;++r){var i=t.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:e-1}}function _t(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function ni(t){var e=t.indexOf(":");return e==-1?{s:In(t),e:In(t)}:{s:In(t.slice(0,e)),e:In(t.slice(e+1))}}function an(t,e){return typeof e>"u"||typeof e=="number"?an(t.s,t.e):(typeof t!="string"&&(t=_t(t)),typeof e!="string"&&(e=_t(e)),t==e?t:t+":"+e)}function Ft(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,a=t.length;for(n=0;r<a&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.s.c=--n,n=0;r<a&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(e.s.r=--n,r===a||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=a&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.e.c=--n,n=0;r!=a&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return e.e.r=--n,e}function j2(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Uo(t.z,n?Dr(e):e)}catch{}try{return t.w=Uo((t.XF||{}).numFmtId||(n?14:0),n?Dr(e):e)}catch{return""+e}}function Xa(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?_f[t.v]||t.v:e==null?j2(t,t.v):j2(t,e))}function js(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function IC(t,e,n){var r=n||{},i=t?Array.isArray(t):r.dense,a=t||(i?[]:{}),o=0,s=0;if(a&&r.origin!=null){if(typeof r.origin=="number")o=r.origin;else{var u=typeof r.origin=="string"?In(r.origin):r.origin;o=u.r,s=u.c}a["!ref"]||(a["!ref"]="A1:A1")}var l={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var c=Ft(a["!ref"]);l.s.c=c.s.c,l.s.r=c.s.r,l.e.c=Math.max(l.e.c,c.e.c),l.e.r=Math.max(l.e.r,c.e.r),o==-1&&(l.e.r=o=c.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=e[f].length;++h)if(!(typeof e[f][h]>"u")){var d={v:e[f][h]},v=o+f,p=s+h;if(l.s.r>v&&(l.s.r=v),l.s.c>p&&(l.s.c=p),l.e.r<v&&(l.e.r=v),l.e.c<p&&(l.e.c=p),e[f][h]&&typeof e[f][h]=="object"&&!Array.isArray(e[f][h])&&!(e[f][h]instanceof Date))d=e[f][h];else if(Array.isArray(d.v)&&(d.f=e[f][h][1],d.v=d.v[0]),d.v===null)if(d.f)d.t="n";else if(r.nullError)d.t="e",d.v=0;else if(r.sheetStubs)d.t="z";else continue;else typeof d.v=="number"?d.t="n":typeof d.v=="boolean"?d.t="b":d.v instanceof Date?(d.z=r.dateNF||Gt[14],r.cellDates?(d.t="d",d.w=Uo(d.z,Dr(d.v))):(d.t="n",d.v=Dr(d.v),d.w=Uo(d.z,d.v))):d.t="s";if(i)a[v]||(a[v]=[]),a[v][p]&&a[v][p].z&&(d.z=a[v][p].z),a[v][p]=d;else{var m=_t({c:p,r:v});a[m]&&a[m].z&&(d.z=a[m].z),a[m]=d}}}return l.s.c<1e7&&(a["!ref"]=an(l)),a}function xl(t,e){return IC(null,t,e)}function yF(t){return t.read_shift(4,"i")}function Li(t,e){return e||(e=ce(4)),e.write_shift(4,t),e}function ir(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Rn(t,e){var n=!1;return e==null&&(n=!0,e=ce(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function wF(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function _F(t,e){return e||(e=ce(4)),e.write_shift(2,0),e.write_shift(2,0),e}function D1(t,e){var n=t.l,r=t.read_shift(1),i=ir(t),a=[],o={t:i,h:i};if(r&1){for(var s=t.read_shift(4),u=0;u!=s;++u)a.push(wF(t));o.r=a}else o.r=[{ich:0,ifnt:0}];return t.l=n+e,o}function bF(t,e){var n=!1;return e==null&&(n=!0,e=ce(15+4*t.t.length)),e.write_shift(1,0),Rn(t.t,e),n?e.slice(0,e.l):e}var EF=D1;function SF(t,e){var n=!1;return e==null&&(n=!0,e=ce(23+4*t.t.length)),e.write_shift(1,1),Rn(t.t,e),e.write_shift(4,1),_F({},e),n?e.slice(0,e.l):e}function wi(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function Gs(t,e){return e==null&&(e=ce(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Xs(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Ks(t,e){return e==null&&(e=ce(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var CF=ir,RC=Rn;function O1(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function Gd(t,e){var n=!1;return e==null&&(n=!0,e=ce(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var TF=ir,Xm=O1,P1=Gd;function FC(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var i=r===0?jd([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):ms(e,0)>>2;return n?i/100:i}function DC(t,e){e==null&&(e=ce(4));var n=0,r=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,n=1),r)e.write_shift(-4,((n?i:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function OC(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function kF(t,e){return e||(e=ce(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var qs=OC,yl=kF;function wl(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Bs(t,e){return(e||ce(8)).write_shift(8,t,"f")}function AF(t){var e={},n=t.read_shift(1),r=n>>>1,i=t.read_shift(1),a=t.read_shift(2,"i"),o=t.read_shift(1),s=t.read_shift(1),u=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var l=LF[i];l&&(e.rgb=nw(l));break;case 2:e.rgb=nw([o,s,u]);break;case 3:e.theme=i;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function Xd(t,e){if(e||(e=ce(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function IF(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function RF(t,e){e||(e=ce(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}var PC=2,Ur=3,mh=11,Kd=19,gh=64,FF=65,DF=71,OF=4108,PF=4126,Bn=80,G2={1:{n:"CodePage",t:PC},2:{n:"Category",t:Bn},3:{n:"PresentationFormat",t:Bn},4:{n:"ByteCount",t:Ur},5:{n:"LineCount",t:Ur},6:{n:"ParagraphCount",t:Ur},7:{n:"SlideCount",t:Ur},8:{n:"NoteCount",t:Ur},9:{n:"HiddenCount",t:Ur},10:{n:"MultimediaClipCount",t:Ur},11:{n:"ScaleCrop",t:mh},12:{n:"HeadingPairs",t:OF},13:{n:"TitlesOfParts",t:PF},14:{n:"Manager",t:Bn},15:{n:"Company",t:Bn},16:{n:"LinksUpToDate",t:mh},17:{n:"CharacterCount",t:Ur},19:{n:"SharedDoc",t:mh},22:{n:"HyperlinksChanged",t:mh},23:{n:"AppVersion",t:Ur,p:"version"},24:{n:"DigSig",t:FF},26:{n:"ContentType",t:Bn},27:{n:"ContentStatus",t:Bn},28:{n:"Language",t:Bn},29:{n:"Version",t:Bn},255:{},2147483648:{n:"Locale",t:Kd},2147483651:{n:"Behavior",t:Kd},1919054434:{}},X2={1:{n:"CodePage",t:PC},2:{n:"Title",t:Bn},3:{n:"Subject",t:Bn},4:{n:"Author",t:Bn},5:{n:"Keywords",t:Bn},6:{n:"Comments",t:Bn},7:{n:"Template",t:Bn},8:{n:"LastAuthor",t:Bn},9:{n:"RevNumber",t:Bn},10:{n:"EditTime",t:gh},11:{n:"LastPrinted",t:gh},12:{n:"CreatedDate",t:gh},13:{n:"ModifiedDate",t:gh},14:{n:"PageCount",t:Ur},15:{n:"WordCount",t:Ur},16:{n:"CharCount",t:Ur},17:{n:"Thumbnail",t:DF},18:{n:"Application",t:Bn},19:{n:"DocSecurity",t:Ur},255:{},2147483648:{n:"Locale",t:Kd},2147483651:{n:"Behavior",t:Kd},1919054434:{}};function NF(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var MF=NF([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),LF=Or(MF),_f={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},BF={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},xh={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function NC(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function MC(t,e){var n=KR(BF),r=[],i;r[r.length]=on,r[r.length]=Ee("Types",null,{xmlns:kn.CT,"xmlns:xsd":kn.xsd,"xmlns:xsi":kn.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(u){return Ee("Default",null,{Extension:u[0],ContentType:u[1]})}));var a=function(u){t[u]&&t[u].length>0&&(i=t[u][0],r[r.length]=Ee("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:xh[u][e.bookType]||xh[u].xlsx}))},o=function(u){(t[u]||[]).forEach(function(l){r[r.length]=Ee("Override",null,{PartName:(l[0]=="/"?"":"/")+l,ContentType:xh[u][e.bookType]||xh[u].xlsx})})},s=function(u){(t[u]||[]).forEach(function(l){r[r.length]=Ee("Override",null,{PartName:(l[0]=="/"?"":"/")+l,ContentType:n[u][0]})})};return a("workbooks"),o("sheets"),o("charts"),s("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(s),s("vba"),s("comments"),s("threadedcomments"),s("drawings"),o("metadata"),s("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var lt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function LC(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function zu(t){var e=[on,Ee("Relationships",null,{xmlns:kn.RELS})];return Xn(t["!id"]).forEach(function(n){e[e.length]=Ee("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function gt(t,e,n,r,i,a){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=n,[lt.HLINK,lt.XPATH,lt.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}function WF(t){var e=[on];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function K2(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function zF(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function UF(t){var e=[on];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(K2(t[n][0],t[n][1])),e.push(zF("",t[n][0]));return e.push(K2("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function BC(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Wd.version+"</meta:generator></office:meta></office:document-meta>"}var As=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function rv(t,e,n,r,i){i[t]!=null||e==null||e===""||(i[t]=e,e=yt(e),r[r.length]=n?Ee(t,e,n):Hn(t,e))}function WC(t,e){var n=e||{},r=[on,Ee("cp:coreProperties",null,{"xmlns:cp":kn.CORE_PROPS,"xmlns:dc":kn.dc,"xmlns:dcterms":kn.dcterms,"xmlns:dcmitype":kn.dcmitype,"xmlns:xsi":kn.xsi})],i={};if(!t&&!n.Props)return r.join("");t&&(t.CreatedDate!=null&&rv("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:Gm(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),t.ModifiedDate!=null&&rv("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:Gm(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var a=0;a!=As.length;++a){var o=As[a],s=n.Props&&n.Props[o[1]]!=null?n.Props[o[1]]:t?t[o[1]]:null;s===!0?s="1":s===!1?s="0":typeof s=="number"&&(s=String(s)),s!=null&&rv(o[0],s,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Uu=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],zC=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function UC(t){var e=[],n=Ee;return t||(t={}),t.Application="SheetJS",e[e.length]=on,e[e.length]=Ee("Properties",null,{xmlns:kn.EXT_PROPS,"xmlns:vt":kn.vt}),Uu.forEach(function(r){if(t[r[1]]!==void 0){var i;switch(r[2]){case"string":i=yt(String(t[r[1]]));break;case"bool":i=t[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=n(r[0],i))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+yt(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function VC(t){var e=[on,Ee("Properties",null,{xmlns:kn.CUST_PROPS,"xmlns:vt":kn.vt})];if(!t)return e.join("");var n=1;return Xn(t).forEach(function(i){++n,e[e.length]=Ee("property",aF(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:yt(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var q2={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function VF(t,e){var n=[];return Xn(q2).map(function(r){for(var i=0;i<As.length;++i)if(As[i][1]==r)return As[i];for(i=0;i<Uu.length;++i)if(Uu[i][1]==r)return Uu[i];throw r}).forEach(function(r){if(t[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:t[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),n.push(Hn(q2[r[1]]||r[1],i))}}),Ee("DocumentProperties",n.join(""),{xmlns:jr.o})}function HF(t,e){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return t&&Xn(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)){for(var o=0;o<As.length;++o)if(a==As[o][1])return;for(o=0;o<Uu.length;++o)if(a==Uu[o][1])return;for(o=0;o<n.length;++o)if(a==n[o])return;var s=t[a],u="string";typeof s=="number"?(u="float",s=String(s)):s===!0||s===!1?(u="boolean",s=s?"1":"0"):s=String(s),i.push(Ee(M2(a),s,{"dt:dt":u}))}}),e&&Xn(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)&&!(t&&Object.prototype.hasOwnProperty.call(t,a))){var o=e[a],s="string";typeof o=="number"?(s="float",o=String(o)):o===!0||o===!1?(s="boolean",o=o?"1":"0"):o instanceof Date?(s="dateTime.tz",o=o.toISOString()):o=String(o),i.push(Ee(M2(a),o,{"dt:dt":s}))}}),"<"+r+' xmlns="'+jr.o+'">'+i.join("")+"</"+r+">"}function $F(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,r=n%Math.pow(2,32),i=(n-r)/Math.pow(2,32);r*=1e7,i*=1e7;var a=r/Math.pow(2,32)|0;a>0&&(r=r%Math.pow(2,32),i+=a);var o=ce(8);return o.write_shift(4,r),o.write_shift(4,i),o}function Y2(t,e){var n=ce(4),r=ce(4);switch(n.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,e);break;case 5:r=ce(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=$F(e);break;case 31:case 80:for(r=ce(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Vn([n,r])}var HC=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function jF(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function Q2(t,e,n){var r=ce(8),i=[],a=[],o=8,s=0,u=ce(8),l=ce(8);if(u.write_shift(4,2),u.write_shift(4,1200),l.write_shift(4,1),a.push(u),i.push(l),o+=8+u.length,!e){l=ce(8),l.write_shift(4,0),i.unshift(l);var c=[ce(4)];for(c[0].write_shift(4,t.length),s=0;s<t.length;++s){var f=t[s][0];for(u=ce(8+2*(f.length+1)+(f.length%2?0:2)),u.write_shift(4,s+2),u.write_shift(4,f.length+1),u.write_shift(0,f,"dbcs");u.l!=u.length;)u.write_shift(1,0);c.push(u)}u=Vn(c),a.unshift(u),o+=8+u.length}for(s=0;s<t.length;++s)if(!(e&&!e[t[s][0]])&&!(HC.indexOf(t[s][0])>-1||zC.indexOf(t[s][0])>-1)&&t[s][1]!=null){var h=t[s][1],d=0;if(e){d=+e[t[s][0]];var v=n[d];if(v.p=="version"&&typeof h=="string"){var p=h.split(".");h=(+p[0]<<16)+(+p[1]||0)}u=Y2(v.t,h)}else{var m=jF(h);m==-1&&(m=31,h=String(h)),u=Y2(m,h)}a.push(u),l=ce(8),l.write_shift(4,e?d:2+s),i.push(l),o+=8+u.length}var g=8*(a.length+1);for(s=0;s<a.length;++s)i[s].write_shift(4,g),g+=a[s].length;return r.write_shift(4,o),r.write_shift(4,a.length),Vn([r].concat(i).concat(a))}function J2(t,e,n,r,i,a){var o=ce(i?68:48),s=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,bt.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,i?68:48);var u=Q2(t,n,r);if(s.push(u),i){var l=Q2(i,null,null);o.write_shift(16,a,"hex"),o.write_shift(4,68+u.length),s.push(l)}return Vn(s)}function GF(t,e){e||(e=ce(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function XF(t,e){return t.read_shift(e)===1}function pr(t,e){return e||(e=ce(2)),e.write_shift(2,+!!t),e}function $C(t){return t.read_shift(2,"u")}function li(t,e){return e||(e=ce(2)),e.write_shift(2,t),e}function jC(t,e,n){return n||(n=ce(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function GC(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var a=t.read_shift(1);a&&(i="dbcs-cont")}else n.biff==12&&(i="wstr");n.biff>=2&&n.biff<=5&&(i="cpstr");var o=r?t.read_shift(r,i):"";return o}function KF(t){var e=t.t||"",n=ce(3);n.write_shift(2,e.length),n.write_shift(1,1);var r=ce(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[n,r];return Vn(i)}function qF(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function YF(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):qF(t,r,n)}function QF(t,e,n){if(n.biff>5)return YF(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function XC(t,e,n){return n||(n=ce(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function Z2(t,e){e||(e=ce(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function JF(t){var e=ce(512),n=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),a=i>-1?31:23;switch(r.charAt(0)){case"#":a=28;break;case".":a&=-3;break}e.write_shift(4,2),e.write_shift(4,a);var o=[8,6815827,6619237,4849780,83];for(n=0;n<o.length;++n)e.write_shift(4,o[n]);if(a==28)r=r.slice(1),Z2(r,e);else if(a&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));var s=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(s.length+1)),n=0;n<s.length;++n)e.write_shift(2,s.charCodeAt(n));e.write_shift(2,0),a&8&&Z2(i>-1?r.slice(i+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));for(var u=0;r.slice(u*3,u*3+3)=="../"||r.slice(u*3,u*3+3)=="..\\";)++u;for(e.write_shift(2,u),e.write_shift(4,r.length-3*u+1),n=0;n<r.length-3*u;++n)e.write_shift(1,r.charCodeAt(n+3*u)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function Ws(t,e,n,r){return r||(r=ce(6)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n||0),r}function ZF(t,e,n){var r=n.biff>8?4:2,i=t.read_shift(r),a=t.read_shift(r,"i"),o=t.read_shift(r,"i");return[i,a,o]}function eD(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:n}}}function KC(t,e){return e||(e=ce(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function N1(t,e,n){var r=1536,i=16;switch(n.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=ce(i);return a.write_shift(2,r),a.write_shift(2,e),i>4&&a.write_shift(2,29282),i>6&&a.write_shift(2,1997),i>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function tD(t,e){var n=!e||e.biff==8,r=ce(n?112:54);for(r.write_shift(e.biff==8?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}function nD(t,e){var n=!e||e.biff>=8?2:1,r=ce(8+n*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function rD(t,e){var n=ce(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var r=[],i=0;i<t.length;++i)r[i]=KF(t[i]);var a=Vn([n].concat(r));return a.parts=[n.length].concat(r.map(function(o){return o.length})),a}function iD(){var t=ce(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function aD(t){var e=ce(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function oD(t,e){var n=t.name||"Arial",r=e&&e.biff==5,i=r?15+n.length:16+2*n.length,a=ce(i);return a.write_shift(2,t.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,n.length),r||a.write_shift(1,1),a.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),a}function sD(t,e,n,r){var i=ce(10);return Ws(t,e,r,i),i.write_shift(4,n),i}function uD(t,e,n,r,i){var a=!i||i.biff==8,o=ce(8+ +a+(1+a)*n.length);return Ws(t,e,r,o),o.write_shift(2,n.length),a&&o.write_shift(1,1),o.write_shift((1+a)*n.length,n,a?"utf16le":"sbcs"),o}function lD(t,e,n,r){var i=n&&n.biff==5;r||(r=ce(i?3+e.length:5+2*e.length)),r.write_shift(2,t),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var a=r.length>r.l?r.slice(0,r.l):r;return a.l==null&&(a.l=a.length),a}function cD(t,e){var n=e.biff==8||!e.biff?4:2,r=ce(2*n+6);return r.write_shift(n,t.s.r),r.write_shift(n,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function ew(t,e,n,r){var i=n&&n.biff==5;r||(r=ce(i?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,e<<4));var a=0;return t.numFmtId>0&&i&&(a|=1024),r.write_shift(4,a),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function fD(t){var e=ce(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function hD(t,e,n,r,i,a){var o=ce(8);return Ws(t,e,r,o),jC(n,a,o),o}function dD(t,e,n,r){var i=ce(14);return Ws(t,e,r,i),Bs(n,i),i}function pD(t,e,n){if(n.biff<8)return vD(t,e,n);for(var r=[],i=t.l+e,a=t.read_shift(n.biff>8?4:2);a--!==0;)r.push(ZF(t,n.biff>8?12:6,n));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return r}function vD(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=GC(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function mD(t){var e=ce(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)KC(t[n],e);return e}function gD(t){var e=ce(24),n=In(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return Vn([e,JF(t[1])])}function xD(t){var e=t[1].Tooltip,n=ce(10+2*(e.length+1));n.write_shift(2,2048);var r=In(t[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var i=0;i<e.length;++i)n.write_shift(2,e.charCodeAt(i));return n.write_shift(2,0),n}function yD(t){return t||(t=ce(4)),t.write_shift(2,1),t.write_shift(2,1),t}function wD(t,e,n){if(!n.cellStyles)return pa(t,e);var r=n&&n.biff>=12?4:2,i=t.read_shift(r),a=t.read_shift(r),o=t.read_shift(r),s=t.read_shift(r),u=t.read_shift(2);r==2&&(t.l+=2);var l={s:i,e:a,w:o,ixfe:s,flags:u};return(n.biff>=5||!n.biff)&&(l.level=u>>8&7),l}function _D(t,e){var n=ce(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var r=0;return t.hidden&&(r|=1),n.write_shift(1,r),r=t.level||0,n.write_shift(1,r),n.write_shift(2,0),n}function bD(t){for(var e=ce(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}function ED(t,e,n){var r=ce(15);return Ef(r,t,e),r.write_shift(8,n,"f"),r}function SD(t,e,n){var r=ce(9);return Ef(r,t,e),r.write_shift(2,n),r}var CD=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=S1({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(s,u){var l=[],c=Ls(1);switch(u.type){case"base64":c=Fi(Ga(s));break;case"binary":c=Fi(s);break;case"buffer":case"array":c=s;break}Hr(c,0);var f=c.read_shift(1),h=!!(f&136),d=!1,v=!1;switch(f){case 2:break;case 3:break;case 48:d=!0,h=!0;break;case 49:d=!0,h=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,m=521;f==2&&(p=c.read_shift(2)),c.l+=3,f!=2&&(p=c.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(m=c.read_shift(2));var g=c.read_shift(2),x=u.codepage||1252;f!=2&&(c.l+=16,c.read_shift(1),c[c.l]!==0&&(x=t[c[c.l]]),c.l+=1,c.l+=2),v&&(c.l+=36);for(var y=[],w={},_=Math.min(c.length,f==2?521:m-10-(d?264:0)),b=v?32:11;c.l<_&&c[c.l]!=13;)switch(w={},w.name=zd.utils.decode(x,c.slice(c.l,c.l+b)).replace(/[\u0000\r\n].*$/g,""),c.l+=b,w.type=String.fromCharCode(c.read_shift(1)),f!=2&&!v&&(w.offset=c.read_shift(4)),w.len=c.read_shift(1),f==2&&(w.offset=c.read_shift(2)),w.dec=c.read_shift(1),w.name.length&&y.push(w),f!=2&&(c.l+=v?13:14),w.type){case"B":(!d||w.len!=8)&&u.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":u.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(c[c.l]!==13&&(c.l=m-1),c.read_shift(1)!==13)throw new Error("DBF Terminator not found "+c.l+" "+c[c.l]);c.l=m;var E=0,S=0;for(l[0]=[],S=0;S!=y.length;++S)l[0][S]=y[S].name;for(;p-- >0;){if(c[c.l]===42){c.l+=g;continue}for(++c.l,l[++E]=[],S=0,S=0;S!=y.length;++S){var C=c.slice(c.l,c.l+y[S].len);c.l+=y[S].len,Hr(C,0);var T=zd.utils.decode(x,C);switch(y[S].type){case"C":T.trim().length&&(l[E][S]=T.replace(/\s+$/,""));break;case"D":T.length===8?l[E][S]=new Date(+T.slice(0,4),+T.slice(4,6)-1,+T.slice(6,8)):l[E][S]=T;break;case"F":l[E][S]=parseFloat(T.trim());break;case"+":case"I":l[E][S]=v?C.read_shift(-4,"i")^2147483648:C.read_shift(4,"i");break;case"L":switch(T.trim().toUpperCase()){case"Y":case"T":l[E][S]=!0;break;case"N":case"F":l[E][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+T+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));l[E][S]="##MEMO##"+(v?parseInt(T.trim(),10):C.read_shift(4));break;case"N":T=T.replace(/\u0000/g,"").trim(),T&&T!="."&&(l[E][S]=+T||0);break;case"@":l[E][S]=new Date(C.read_shift(-8,"f")-621356832e5);break;case"T":l[E][S]=new Date((C.read_shift(4)-2440588)*864e5+C.read_shift(4));break;case"Y":l[E][S]=C.read_shift(4,"i")/1e4+C.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":l[E][S]=-C.read_shift(-8,"f");break;case"B":if(d&&y[S].len==8){l[E][S]=C.read_shift(8,"f");break}case"G":case"P":C.l+=y[S].len;break;case"0":if(y[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+y[S].type)}}}if(f!=2&&c.l<c.length&&c[c.l++]!=26)throw new Error("DBF EOF Marker missing "+(c.l-1)+" of "+c.length+" "+c[c.l-1].toString(16));return u&&u.sheetRows&&(l=l.slice(0,u.sheetRows)),u.DBF=y,l}function r(s,u){var l=u||{};l.dateNF||(l.dateNF="yyyymmdd");var c=xl(n(s,l),l);return c["!cols"]=l.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete l.DBF,c}function i(s,u){try{return js(r(s,u),u)}catch(l){if(u&&u.WTF)throw l}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function o(s,u){var l=u||{};if(+l.codepage>=0&&$c(+l.codepage),l.type=="string")throw new Error("Cannot write DBF to JS string");var c=Rr(),f=Zd(s,{header:1,raw:!0,cellDates:!0}),h=f[0],d=f.slice(1),v=s["!cols"]||[],p=0,m=0,g=0,x=1;for(p=0;p<h.length;++p){if(((v[p]||{}).DBF||{}).name){h[p]=v[p].DBF.name,++g;continue}if(h[p]!=null){if(++g,typeof h[p]=="number"&&(h[p]=h[p].toString(10)),typeof h[p]!="string")throw new Error("DBF Invalid column name "+h[p]+" |"+typeof h[p]+"|");if(h.indexOf(h[p])!==p){for(m=0;m<1024;++m)if(h.indexOf(h[p]+"_"+m)==-1){h[p]+="_"+m;break}}}}var y=Ft(s["!ref"]),w=[],_=[],b=[];for(p=0;p<=y.e.c-y.s.c;++p){var E="",S="",C=0,T=[];for(m=0;m<d.length;++m)d[m][p]!=null&&T.push(d[m][p]);if(T.length==0||h[p]==null){w[p]="?";continue}for(m=0;m<T.length;++m){switch(typeof T[m]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=T[m]instanceof Date?"D":"C";break;default:S="C"}C=Math.max(C,String(T[m]).length),E=E&&E!=S?"C":S}C>250&&(C=250),S=((v[p]||{}).DBF||{}).type,S=="C"&&v[p].DBF.len>C&&(C=v[p].DBF.len),E=="B"&&S=="N"&&(E="N",b[p]=v[p].DBF.dec,C=v[p].DBF.len),_[p]=E=="C"||S=="N"?C:a[E]||0,x+=_[p],w[p]=E}var A=c.next(32);for(A.write_shift(4,318902576),A.write_shift(4,d.length),A.write_shift(2,296+32*g),A.write_shift(2,x),p=0;p<4;++p)A.write_shift(4,0);for(A.write_shift(4,0|(+e[YS]||3)<<8),p=0,m=0;p<h.length;++p)if(h[p]!=null){var I=c.next(32),V=(h[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);I.write_shift(1,V,"sbcs"),I.write_shift(1,w[p]=="?"?"C":w[p],"sbcs"),I.write_shift(4,m),I.write_shift(1,_[p]||a[w[p]]||0),I.write_shift(1,b[p]||0),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(1,0),I.write_shift(4,0),I.write_shift(4,0),m+=_[p]||a[w[p]]||0}var J=c.next(264);for(J.write_shift(4,13),p=0;p<65;++p)J.write_shift(4,0);for(p=0;p<d.length;++p){var K=c.next(x);for(K.write_shift(1,0),m=0;m<h.length;++m)if(h[m]!=null)switch(w[m]){case"L":K.write_shift(1,d[p][m]==null?63:d[p][m]?84:70);break;case"B":K.write_shift(8,d[p][m]||0,"f");break;case"N":var ae="0";for(typeof d[p][m]=="number"&&(ae=d[p][m].toFixed(b[m]||0)),g=0;g<_[m]-ae.length;++g)K.write_shift(1,32);K.write_shift(1,ae,"sbcs");break;case"D":d[p][m]?(K.write_shift(4,("0000"+d[p][m].getFullYear()).slice(-4),"sbcs"),K.write_shift(2,("00"+(d[p][m].getMonth()+1)).slice(-2),"sbcs"),K.write_shift(2,("00"+d[p][m].getDate()).slice(-2),"sbcs")):K.write_shift(8,"00000000","sbcs");break;case"C":var ie=String(d[p][m]!=null?d[p][m]:"").slice(0,_[m]);for(K.write_shift(1,ie,"sbcs"),g=0;g<_[m]-ie.length;++g)K.write_shift(1,32);break}}return c.next(1).write_shift(1,26),c.end()}return{to_workbook:i,to_sheet:r,from_sheet:o}}(),TD=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Xn(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(h,d){var v=t[d];return typeof v=="number"?S2(v):v},r=function(h,d,v){var p=d.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return p==59?h:S2(p)};t["|"]=254;function i(h,d){switch(d.type){case"base64":return a(Ga(h),d);case"binary":return a(h,d);case"buffer":return a(ft&&Buffer.isBuffer(h)?h.toString("binary"):xf(h),d);case"array":return a(qp(h),d)}throw new Error("Unrecognized type "+d.type)}function a(h,d){var v=h.split(/[\n\r]+/),p=-1,m=-1,g=0,x=0,y=[],w=[],_=null,b={},E=[],S=[],C=[],T=0,A;for(+d.codepage>=0&&$c(+d.codepage);g!==v.length;++g){T=0;var I=v[g].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),V=I.replace(/;;/g,"\0").split(";").map(function(z){return z.replace(/\u0000/g,";")}),J=V[0],K;if(I.length>0)switch(J){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":V[1].charAt(0)=="P"&&w.push(I.slice(3).replace(/;;/g,";"));break;case"C":var ae=!1,ie=!1,G=!1,Q=!1,te=-1,pe=-1;for(x=1;x<V.length;++x)switch(V[x].charAt(0)){case"A":break;case"X":m=parseInt(V[x].slice(1))-1,ie=!0;break;case"Y":for(p=parseInt(V[x].slice(1))-1,ie||(m=0),A=y.length;A<=p;++A)y[A]=[];break;case"K":K=V[x].slice(1),K.charAt(0)==='"'?K=K.slice(1,K.length-1):K==="TRUE"?K=!0:K==="FALSE"?K=!1:isNaN(za(K))?isNaN(Gc(K).getDate())||(K=mr(K)):(K=za(K),_!==null&&uC(_)&&(K=hC(K))),ae=!0;break;case"E":Q=!0;var P=SO(V[x].slice(1),{r:p,c:m});y[p][m]=[y[p][m],P];break;case"S":G=!0,y[p][m]=[y[p][m],"S5S"];break;case"G":break;case"R":te=parseInt(V[x].slice(1))-1;break;case"C":pe=parseInt(V[x].slice(1))-1;break;default:if(d&&d.WTF)throw new Error("SYLK bad record "+I)}if(ae&&(y[p][m]&&y[p][m].length==2?y[p][m][0]=K:y[p][m]=K,_=null),G){if(Q)throw new Error("SYLK shared formula cannot have own formula");var j=te>-1&&y[te][pe];if(!j||!j[1])throw new Error("SYLK shared formula cannot find base");y[p][m][1]=CO(j[1],{r:p-te,c:m-pe})}break;case"F":var U=0;for(x=1;x<V.length;++x)switch(V[x].charAt(0)){case"X":m=parseInt(V[x].slice(1))-1,++U;break;case"Y":for(p=parseInt(V[x].slice(1))-1,A=y.length;A<=p;++A)y[A]=[];break;case"M":T=parseInt(V[x].slice(1))/20;break;case"F":break;case"G":break;case"P":_=w[parseInt(V[x].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(C=V[x].slice(1).split(" "),A=parseInt(C[0],10);A<=parseInt(C[1],10);++A)T=parseInt(C[2],10),S[A-1]=T===0?{hidden:!0}:{wch:T},M1(S[A-1]);break;case"C":m=parseInt(V[x].slice(1))-1,S[m]||(S[m]={});break;case"R":p=parseInt(V[x].slice(1))-1,E[p]||(E[p]={}),T>0?(E[p].hpt=T,E[p].hpx=ZC(T)):T===0&&(E[p].hidden=!0);break;default:if(d&&d.WTF)throw new Error("SYLK bad record "+I)}U<1&&(_=null);break;default:if(d&&d.WTF)throw new Error("SYLK bad record "+I)}}return E.length>0&&(b["!rows"]=E),S.length>0&&(b["!cols"]=S),d&&d.sheetRows&&(y=y.slice(0,d.sheetRows)),[y,b]}function o(h,d){var v=i(h,d),p=v[0],m=v[1],g=xl(p,d);return Xn(m).forEach(function(x){g[x]=m[x]}),g}function s(h,d){return js(o(h,d),d)}function u(h,d,v,p){var m="C;Y"+(v+1)+";X"+(p+1)+";K";switch(h.t){case"n":m+=h.v||0,h.f&&!h.F&&(m+=";E"+B1(h.f,{r:v,c:p}));break;case"b":m+=h.v?"TRUE":"FALSE";break;case"e":m+=h.w||h.v;break;case"d":m+='"'+(h.w||h.v)+'"';break;case"s":m+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return m}function l(h,d){d.forEach(function(v,p){var m="F;W"+(p+1)+" "+(p+1)+" ";v.hidden?m+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=qd(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=Yd(v.wpx)),typeof v.wch=="number"&&(m+=Math.round(v.wch))),m.charAt(m.length-1)!=" "&&h.push(m)})}function c(h,d){d.forEach(function(v,p){var m="F;";v.hidden?m+="M0;":v.hpt?m+="M"+20*v.hpt+";":v.hpx&&(m+="M"+20*Qd(v.hpx)+";"),m.length>2&&h.push(m+"R"+(p+1))})}function f(h,d){var v=["ID;PWXL;N;E"],p=[],m=Ft(h["!ref"]),g,x=Array.isArray(h),y=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),h["!cols"]&&l(v,h["!cols"]),h["!rows"]&&c(v,h["!rows"]),v.push("B;Y"+(m.e.r-m.s.r+1)+";X"+(m.e.c-m.s.c+1)+";D"+[m.s.c,m.s.r,m.e.c,m.e.r].join(" "));for(var w=m.s.r;w<=m.e.r;++w)for(var _=m.s.c;_<=m.e.c;++_){var b=_t({r:w,c:_});g=x?(h[w]||[])[_]:h[b],!(!g||g.v==null&&(!g.f||g.F))&&p.push(u(g,h,w,_))}return v.join(y)+y+p.join(y)+y+"E"+y}return{to_workbook:s,to_sheet:o,from_sheet:f}}(),kD=function(){function t(a,o){switch(o.type){case"base64":return e(Ga(a),o);case"binary":return e(a,o);case"buffer":return e(ft&&Buffer.isBuffer(a)?a.toString("binary"):xf(a),o);case"array":return e(qp(a),o)}throw new Error("Unrecognized type "+o.type)}function e(a,o){for(var s=a.split(`
`),u=-1,l=-1,c=0,f=[];c!==s.length;++c){if(s[c].trim()==="BOT"){f[++u]=[],l=0;continue}if(!(u<0)){var h=s[c].trim().split(","),d=h[0],v=h[1];++c;for(var p=s[c]||"";(p.match(/["]/g)||[]).length&1&&c<s.length-1;)p+=`
`+s[++c];switch(p=p.trim(),+d){case-1:if(p==="BOT"){f[++u]=[],l=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?f[u][l]=!0:p==="FALSE"?f[u][l]=!1:isNaN(za(v))?isNaN(Gc(v).getDate())?f[u][l]=v:f[u][l]=mr(v):f[u][l]=za(v),++l;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),f[u][l++]=p!==""?p:null;break}if(p==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function n(a,o){return xl(t(a,o),o)}function r(a,o){return js(n(a,o),o)}var i=function(){var a=function(u,l,c,f,h){u.push(l),u.push(c+","+f),u.push('"'+h.replace(/"/g,'""')+'"')},o=function(u,l,c,f){u.push(l+","+c),u.push(l==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(u){var l=[],c=Ft(u["!ref"]),f,h=Array.isArray(u);a(l,"TABLE",0,1,"sheetjs"),a(l,"VECTORS",0,c.e.r-c.s.r+1,""),a(l,"TUPLES",0,c.e.c-c.s.c+1,""),a(l,"DATA",0,0,"");for(var d=c.s.r;d<=c.e.r;++d){o(l,-1,0,"BOT");for(var v=c.s.c;v<=c.e.c;++v){var p=_t({r:d,c:v});if(f=h?(u[d]||[])[v]:u[p],!f){o(l,1,0,"");continue}switch(f.t){case"n":var m=f.w;!m&&f.v!=null&&(m=f.v),m==null?f.f&&!f.F?o(l,1,0,"="+f.f):o(l,1,0,""):o(l,0,m,"V");break;case"b":o(l,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(l,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Uo(f.z||Gt[14],Dr(mr(f.v)))),o(l,0,f.w,"V");break;default:o(l,1,0,"")}}}o(l,-1,0,"EOD");var g=`\r
`,x=l.join(g);return x}}();return{to_workbook:r,to_sheet:n,from_sheet:i}}(),qC=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(f,h){for(var d=f.split(`
`),v=-1,p=-1,m=0,g=[];m!==d.length;++m){var x=d[m].trim().split(":");if(x[0]==="cell"){var y=In(x[1]);if(g.length<=y.r)for(v=g.length;v<=y.r;++v)g[v]||(g[v]=[]);switch(v=y.r,p=y.c,x[2]){case"t":g[v][p]=t(x[3]);break;case"v":g[v][p]=+x[3];break;case"vtf":var w=x[x.length-1];case"vtc":switch(x[3]){case"nl":g[v][p]=!!+x[4];break;default:g[v][p]=+x[4];break}x[2]=="vtf"&&(g[v][p]=[g[v][p],w])}}}return h&&h.sheetRows&&(g=g.slice(0,h.sheetRows)),g}function r(f,h){return xl(n(f,h),h)}function i(f,h){return js(r(f,h),h)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),u="--SocialCalcSpreadsheetControlSave--";function l(f){if(!f||!f["!ref"])return"";for(var h=[],d=[],v,p="",m=ni(f["!ref"]),g=Array.isArray(f),x=m.s.r;x<=m.e.r;++x)for(var y=m.s.c;y<=m.e.c;++y)if(p=_t({r:x,c:y}),v=g?(f[x]||[])[y]:f[p],!(!v||v.v==null||v.t==="z")){switch(d=["cell",p,"t"],v.t){case"s":case"str":d.push(e(v.v));break;case"n":v.f?(d[2]="vtf",d[3]="n",d[4]=v.v,d[5]=e(v.f)):(d[2]="v",d[3]=v.v);break;case"b":d[2]="vt"+(v.f?"f":"c"),d[3]="nl",d[4]=v.v?"1":"0",d[5]=e(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var w=Dr(mr(v.v));d[2]="vtc",d[3]="nd",d[4]=""+w,d[5]=v.w||Uo(v.z||Gt[14],w);break;case"e":continue}h.push(d.join(":"))}return h.push("sheet:c:"+(m.e.c-m.s.c+1)+":r:"+(m.e.r-m.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function c(f){return[a,o,s,o,l(f),u].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:c}}(),AD=function(){function t(c,f,h,d,v){v.raw?f[h][d]=c:c===""||(c==="TRUE"?f[h][d]=!0:c==="FALSE"?f[h][d]=!1:isNaN(za(c))?isNaN(Gc(c).getDate())?f[h][d]=c:f[h][d]=mr(c):f[h][d]=za(c))}function e(c,f){var h=f||{},d=[];if(!c||c.length===0)return d;for(var v=c.split(/[\r\n]/),p=v.length-1;p>=0&&v[p].length===0;)--p;for(var m=10,g=0,x=0;x<=p;++x)g=v[x].indexOf(" "),g==-1?g=v[x].length:g++,m=Math.max(m,g);for(x=0;x<=p;++x){d[x]=[];var y=0;for(t(v[x].slice(0,m).trim(),d,x,y,h),y=1;y<=(v[x].length-m)/10+1;++y)t(v[x].slice(m+(y-1)*10,m+y*10).trim(),d,x,y,h)}return h.sheetRows&&(d=d.slice(0,h.sheetRows)),d}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(c){for(var f={},h=!1,d=0,v=0;d<c.length;++d)(v=c.charCodeAt(d))==34?h=!h:!h&&v in n&&(f[v]=(f[v]||0)+1);v=[];for(d in f)Object.prototype.hasOwnProperty.call(f,d)&&v.push([f[d],d]);if(!v.length){f=r;for(d in f)Object.prototype.hasOwnProperty.call(f,d)&&v.push([f[d],d])}return v.sort(function(p,m){return p[0]-m[0]||r[p[1]]-r[m[1]]}),n[v.pop()[1]]||44}function a(c,f){var h=f||{},d="",v=h.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};c.slice(0,4)=="sep="?c.charCodeAt(5)==13&&c.charCodeAt(6)==10?(d=c.charAt(4),c=c.slice(7)):c.charCodeAt(5)==13||c.charCodeAt(5)==10?(d=c.charAt(4),c=c.slice(6)):d=i(c.slice(0,1024)):h&&h.FS?d=h.FS:d=i(c.slice(0,1024));var m=0,g=0,x=0,y=0,w=0,_=d.charCodeAt(0),b=!1,E=0,S=c.charCodeAt(0);c=c.replace(/\r\n/mg,`
`);var C=h.dateNF!=null?$R(h.dateNF):null;function T(){var A=c.slice(y,w),I={};if(A.charAt(0)=='"'&&A.charAt(A.length-1)=='"'&&(A=A.slice(1,-1).replace(/""/g,'"')),A.length===0)I.t="z";else if(h.raw)I.t="s",I.v=A;else if(A.trim().length===0)I.t="s",I.v=A;else if(A.charCodeAt(0)==61)A.charCodeAt(1)==34&&A.charCodeAt(A.length-1)==34?(I.t="s",I.v=A.slice(2,-1).replace(/""/g,'"')):TO(A)?(I.t="n",I.f=A.slice(1)):(I.t="s",I.v=A);else if(A=="TRUE")I.t="b",I.v=!0;else if(A=="FALSE")I.t="b",I.v=!1;else if(!isNaN(x=za(A)))I.t="n",h.cellText!==!1&&(I.w=A),I.v=x;else if(!isNaN(Gc(A).getDate())||C&&A.match(C)){I.z=h.dateNF||Gt[14];var V=0;C&&A.match(C)&&(A=jR(A,h.dateNF,A.match(C)||[]),V=1),h.cellDates?(I.t="d",I.v=mr(A,V)):(I.t="n",I.v=Dr(mr(A,V))),h.cellText!==!1&&(I.w=Uo(I.z,I.v instanceof Date?Dr(I.v):I.v)),h.cellNF||delete I.z}else I.t="s",I.v=A;if(I.t=="z"||(h.dense?(v[m]||(v[m]=[]),v[m][g]=I):v[_t({c:g,r:m})]=I),y=w+1,S=c.charCodeAt(y),p.e.c<g&&(p.e.c=g),p.e.r<m&&(p.e.r=m),E==_)++g;else if(g=0,++m,h.sheetRows&&h.sheetRows<=m)return!0}e:for(;w<c.length;++w)switch(E=c.charCodeAt(w)){case 34:S===34&&(b=!b);break;case _:case 10:case 13:if(!b&&T())break e;break}return w-y>0&&T(),v["!ref"]=an(p),v}function o(c,f){return!(f&&f.PRN)||f.FS||c.slice(0,4)=="sep="||c.indexOf("	")>=0||c.indexOf(",")>=0||c.indexOf(";")>=0?a(c,f):xl(e(c,f),f)}function s(c,f){var h="",d=f.type=="string"?[0,0,0,0]:zL(c,f);switch(f.type){case"base64":h=Ga(c);break;case"binary":h=c;break;case"buffer":f.codepage==65001?h=c.toString("utf8"):f.codepage&&typeof zd<"u"||(h=ft&&Buffer.isBuffer(c)?c.toString("binary"):xf(c));break;case"array":h=qp(c);break;case"string":h=c;break;default:throw new Error("Unrecognized type "+f.type)}return d[0]==239&&d[1]==187&&d[2]==191?h=vc(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=vc(h):f.type=="binary"&&typeof zd<"u",h.slice(0,19)=="socialcalc:version:"?qC.to_sheet(f.type=="string"?h:vc(h),f):o(h,f)}function u(c,f){return js(s(c,f),f)}function l(c){for(var f=[],h=Ft(c["!ref"]),d,v=Array.isArray(c),p=h.s.r;p<=h.e.r;++p){for(var m=[],g=h.s.c;g<=h.e.c;++g){var x=_t({r:p,c:g});if(d=v?(c[p]||[])[g]:c[x],!d||d.v==null){m.push("          ");continue}for(var y=(d.w||(Xa(d),d.w)||"").slice(0,10);y.length<10;)y+=" ";m.push(y+(g===0?" ":""))}f.push(m.join(""))}return f.join(`
`)}return{to_workbook:u,to_sheet:s,from_sheet:l}}(),tw=function(){function t(P,j,U){if(P){Hr(P,P.l||0);for(var z=U.Enum||te;P.l<P.length;){var Z=P.read_shift(2),xe=z[Z]||z[65535],we=P.read_shift(2),ee=P.l+we,de=xe.f&&xe.f(P,we,U);if(P.l=ee,j(de,xe,Z))return}}}function e(P,j){switch(j.type){case"base64":return n(Fi(Ga(P)),j);case"binary":return n(Fi(P),j);case"buffer":case"array":return n(P,j)}throw"Unsupported type "+j.type}function n(P,j){if(!P)return P;var U=j||{},z=U.dense?[]:{},Z="Sheet1",xe="",we=0,ee={},de=[],Fe=[],Re={s:{r:0,c:0},e:{r:0,c:0}},He=U.sheetRows||0;if(P[2]==0&&(P[3]==8||P[3]==9)&&P.length>=16&&P[14]==5&&P[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(P[2]==2)U.Enum=te,t(P,function(Te,Et,vt){switch(vt){case 0:U.vers=Te,Te>=4096&&(U.qpro=!0);break;case 6:Re=Te;break;case 204:Te&&(xe=Te);break;case 222:xe=Te;break;case 15:case 51:U.qpro||(Te[1].v=Te[1].v.slice(1));case 13:case 14:case 16:vt==14&&(Te[2]&112)==112&&(Te[2]&15)>1&&(Te[2]&15)<15&&(Te[1].z=U.dateNF||Gt[14],U.cellDates&&(Te[1].t="d",Te[1].v=hC(Te[1].v))),U.qpro&&Te[3]>we&&(z["!ref"]=an(Re),ee[Z]=z,de.push(Z),z=U.dense?[]:{},Re={s:{r:0,c:0},e:{r:0,c:0}},we=Te[3],Z=xe||"Sheet"+(we+1),xe="");var bn=U.dense?(z[Te[0].r]||[])[Te[0].c]:z[_t(Te[0])];if(bn){bn.t=Te[1].t,bn.v=Te[1].v,Te[1].z!=null&&(bn.z=Te[1].z),Te[1].f!=null&&(bn.f=Te[1].f);break}U.dense?(z[Te[0].r]||(z[Te[0].r]=[]),z[Te[0].r][Te[0].c]=Te[1]):z[_t(Te[0])]=Te[1];break}},U);else if(P[2]==26||P[2]==14)U.Enum=pe,P[2]==14&&(U.qpro=!0,P.l=0),t(P,function(Te,Et,vt){switch(vt){case 204:Z=Te;break;case 22:Te[1].v=Te[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Te[3]>we&&(z["!ref"]=an(Re),ee[Z]=z,de.push(Z),z=U.dense?[]:{},Re={s:{r:0,c:0},e:{r:0,c:0}},we=Te[3],Z="Sheet"+(we+1)),He>0&&Te[0].r>=He)break;U.dense?(z[Te[0].r]||(z[Te[0].r]=[]),z[Te[0].r][Te[0].c]=Te[1]):z[_t(Te[0])]=Te[1],Re.e.c<Te[0].c&&(Re.e.c=Te[0].c),Re.e.r<Te[0].r&&(Re.e.r=Te[0].r);break;case 27:Te[14e3]&&(Fe[Te[14e3][0]]=Te[14e3][1]);break;case 1537:Fe[Te[0]]=Te[1],Te[0]==we&&(Z=Te[1]);break}},U);else throw new Error("Unrecognized LOTUS BOF "+P[2]);if(z["!ref"]=an(Re),ee[xe||Z]=z,de.push(xe||Z),!Fe.length)return{SheetNames:de,Sheets:ee};for(var Ve={},Me=[],$e=0;$e<Fe.length;++$e)ee[de[$e]]?(Me.push(Fe[$e]||de[$e]),Ve[Fe[$e]]=ee[Fe[$e]]||ee[de[$e]]):(Me.push(Fe[$e]),Ve[Fe[$e]]={"!ref":"A1"});return{SheetNames:Me,Sheets:Ve}}function r(P,j){var U=j||{};if(+U.codepage>=0&&$c(+U.codepage),U.type=="string")throw new Error("Cannot write WK1 to JS string");var z=Rr(),Z=Ft(P["!ref"]),xe=Array.isArray(P),we=[];Se(z,0,a(1030)),Se(z,6,u(Z));for(var ee=Math.min(Z.e.r,8191),de=Z.s.r;de<=ee;++de)for(var Fe=jn(de),Re=Z.s.c;Re<=Z.e.c;++Re){de===Z.s.r&&(we[Re]=rr(Re));var He=we[Re]+Fe,Ve=xe?(P[de]||[])[Re]:P[He];if(!(!Ve||Ve.t=="z"))if(Ve.t=="n")(Ve.v|0)==Ve.v&&Ve.v>=-32768&&Ve.v<=32767?Se(z,13,d(de,Re,Ve.v)):Se(z,14,p(de,Re,Ve.v));else{var Me=Xa(Ve);Se(z,15,f(de,Re,Me.slice(0,239)))}}return Se(z,1),z.end()}function i(P,j){var U=j||{};if(+U.codepage>=0&&$c(+U.codepage),U.type=="string")throw new Error("Cannot write WK3 to JS string");var z=Rr();Se(z,0,o(P));for(var Z=0,xe=0;Z<P.SheetNames.length;++Z)(P.Sheets[P.SheetNames[Z]]||{})["!ref"]&&Se(z,27,Q(P.SheetNames[Z],xe++));var we=0;for(Z=0;Z<P.SheetNames.length;++Z){var ee=P.Sheets[P.SheetNames[Z]];if(!(!ee||!ee["!ref"])){for(var de=Ft(ee["!ref"]),Fe=Array.isArray(ee),Re=[],He=Math.min(de.e.r,8191),Ve=de.s.r;Ve<=He;++Ve)for(var Me=jn(Ve),$e=de.s.c;$e<=de.e.c;++$e){Ve===de.s.r&&(Re[$e]=rr($e));var Te=Re[$e]+Me,Et=Fe?(ee[Ve]||[])[$e]:ee[Te];if(!(!Et||Et.t=="z"))if(Et.t=="n")Se(z,23,T(Ve,$e,we,Et.v));else{var vt=Xa(Et);Se(z,22,E(Ve,$e,we,vt.slice(0,239)))}}++we}}return Se(z,1),z.end()}function a(P){var j=ce(2);return j.write_shift(2,P),j}function o(P){var j=ce(26);j.write_shift(2,4096),j.write_shift(2,4),j.write_shift(4,0);for(var U=0,z=0,Z=0,xe=0;xe<P.SheetNames.length;++xe){var we=P.SheetNames[xe],ee=P.Sheets[we];if(!(!ee||!ee["!ref"])){++Z;var de=ni(ee["!ref"]);U<de.e.r&&(U=de.e.r),z<de.e.c&&(z=de.e.c)}}return U>8191&&(U=8191),j.write_shift(2,U),j.write_shift(1,Z),j.write_shift(1,z),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(1,1),j.write_shift(1,2),j.write_shift(4,0),j.write_shift(4,0),j}function s(P,j,U){var z={s:{c:0,r:0},e:{c:0,r:0}};return j==8&&U.qpro?(z.s.c=P.read_shift(1),P.l++,z.s.r=P.read_shift(2),z.e.c=P.read_shift(1),P.l++,z.e.r=P.read_shift(2),z):(z.s.c=P.read_shift(2),z.s.r=P.read_shift(2),j==12&&U.qpro&&(P.l+=2),z.e.c=P.read_shift(2),z.e.r=P.read_shift(2),j==12&&U.qpro&&(P.l+=2),z.s.c==65535&&(z.s.c=z.e.c=z.s.r=z.e.r=0),z)}function u(P){var j=ce(8);return j.write_shift(2,P.s.c),j.write_shift(2,P.s.r),j.write_shift(2,P.e.c),j.write_shift(2,P.e.r),j}function l(P,j,U){var z=[{c:0,r:0},{t:"n",v:0},0,0];return U.qpro&&U.vers!=20768?(z[0].c=P.read_shift(1),z[3]=P.read_shift(1),z[0].r=P.read_shift(2),P.l+=2):(z[2]=P.read_shift(1),z[0].c=P.read_shift(2),z[0].r=P.read_shift(2)),z}function c(P,j,U){var z=P.l+j,Z=l(P,j,U);if(Z[1].t="s",U.vers==20768){P.l++;var xe=P.read_shift(1);return Z[1].v=P.read_shift(xe,"utf8"),Z}return U.qpro&&P.l++,Z[1].v=P.read_shift(z-P.l,"cstr"),Z}function f(P,j,U){var z=ce(7+U.length);z.write_shift(1,255),z.write_shift(2,j),z.write_shift(2,P),z.write_shift(1,39);for(var Z=0;Z<z.length;++Z){var xe=U.charCodeAt(Z);z.write_shift(1,xe>=128?95:xe)}return z.write_shift(1,0),z}function h(P,j,U){var z=l(P,j,U);return z[1].v=P.read_shift(2,"i"),z}function d(P,j,U){var z=ce(7);return z.write_shift(1,255),z.write_shift(2,j),z.write_shift(2,P),z.write_shift(2,U,"i"),z}function v(P,j,U){var z=l(P,j,U);return z[1].v=P.read_shift(8,"f"),z}function p(P,j,U){var z=ce(13);return z.write_shift(1,255),z.write_shift(2,j),z.write_shift(2,P),z.write_shift(8,U,"f"),z}function m(P,j,U){var z=P.l+j,Z=l(P,j,U);if(Z[1].v=P.read_shift(8,"f"),U.qpro)P.l=z;else{var xe=P.read_shift(2);w(P.slice(P.l,P.l+xe),Z),P.l+=xe}return Z}function g(P,j,U){var z=j&32768;return j&=-32769,j=(z?P:0)+(j>=8192?j-16384:j),(z?"":"$")+(U?rr(j):jn(j))}var x={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},y=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(P,j){Hr(P,0);for(var U=[],z=0,Z="",xe="",we="",ee="";P.l<P.length;){var de=P[P.l++];switch(de){case 0:U.push(P.read_shift(8,"f"));break;case 1:xe=g(j[0].c,P.read_shift(2),!0),Z=g(j[0].r,P.read_shift(2),!1),U.push(xe+Z);break;case 2:{var Fe=g(j[0].c,P.read_shift(2),!0),Re=g(j[0].r,P.read_shift(2),!1);xe=g(j[0].c,P.read_shift(2),!0),Z=g(j[0].r,P.read_shift(2),!1),U.push(Fe+Re+":"+xe+Z)}break;case 3:if(P.l<P.length){console.error("WK1 premature formula end");return}break;case 4:U.push("("+U.pop()+")");break;case 5:U.push(P.read_shift(2));break;case 6:{for(var He="";de=P[P.l++];)He+=String.fromCharCode(de);U.push('"'+He.replace(/"/g,'""')+'"')}break;case 8:U.push("-"+U.pop());break;case 23:U.push("+"+U.pop());break;case 22:U.push("NOT("+U.pop()+")");break;case 20:case 21:ee=U.pop(),we=U.pop(),U.push(["AND","OR"][de-20]+"("+we+","+ee+")");break;default:if(de<32&&y[de])ee=U.pop(),we=U.pop(),U.push(we+y[de]+ee);else if(x[de]){if(z=x[de][1],z==69&&(z=P[P.l++]),z>U.length){console.error("WK1 bad formula parse 0x"+de.toString(16)+":|"+U.join("|")+"|");return}var Ve=U.slice(-z);U.length-=z,U.push(x[de][0]+"("+Ve.join(",")+")")}else return de<=7?console.error("WK1 invalid opcode "+de.toString(16)):de<=24?console.error("WK1 unsupported op "+de.toString(16)):de<=30?console.error("WK1 invalid opcode "+de.toString(16)):de<=115?console.error("WK1 unsupported function opcode "+de.toString(16)):console.error("WK1 unrecognized opcode "+de.toString(16))}}U.length==1?j[1].f=""+U[0]:console.error("WK1 bad formula parse |"+U.join("|")+"|")}function _(P){var j=[{c:0,r:0},{t:"n",v:0},0];return j[0].r=P.read_shift(2),j[3]=P[P.l++],j[0].c=P[P.l++],j}function b(P,j){var U=_(P);return U[1].t="s",U[1].v=P.read_shift(j-4,"cstr"),U}function E(P,j,U,z){var Z=ce(6+z.length);Z.write_shift(2,P),Z.write_shift(1,U),Z.write_shift(1,j),Z.write_shift(1,39);for(var xe=0;xe<z.length;++xe){var we=z.charCodeAt(xe);Z.write_shift(1,we>=128?95:we)}return Z.write_shift(1,0),Z}function S(P,j){var U=_(P);U[1].v=P.read_shift(2);var z=U[1].v>>1;if(U[1].v&1)switch(z&7){case 0:z=(z>>3)*5e3;break;case 1:z=(z>>3)*500;break;case 2:z=(z>>3)/20;break;case 3:z=(z>>3)/200;break;case 4:z=(z>>3)/2e3;break;case 5:z=(z>>3)/2e4;break;case 6:z=(z>>3)/16;break;case 7:z=(z>>3)/64;break}return U[1].v=z,U}function C(P,j){var U=_(P),z=P.read_shift(4),Z=P.read_shift(4),xe=P.read_shift(2);if(xe==65535)return z===0&&Z===3221225472?(U[1].t="e",U[1].v=15):z===0&&Z===3489660928?(U[1].t="e",U[1].v=42):U[1].v=0,U;var we=xe&32768;return xe=(xe&32767)-16446,U[1].v=(1-we*2)*(Z*Math.pow(2,xe+32)+z*Math.pow(2,xe)),U}function T(P,j,U,z){var Z=ce(14);if(Z.write_shift(2,P),Z.write_shift(1,U),Z.write_shift(1,j),z==0)return Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(2,65535),Z;var xe=0,we=0,ee=0,de=0;return z<0&&(xe=1,z=-z),we=Math.log2(z)|0,z/=Math.pow(2,we-31),de=z>>>0,de&2147483648||(z/=2,++we,de=z>>>0),z-=de,de|=2147483648,de>>>=0,z*=Math.pow(2,32),ee=z>>>0,Z.write_shift(4,ee),Z.write_shift(4,de),we+=16383+(xe?32768:0),Z.write_shift(2,we),Z}function A(P,j){var U=C(P);return P.l+=j-14,U}function I(P,j){var U=_(P),z=P.read_shift(4);return U[1].v=z>>6,U}function V(P,j){var U=_(P),z=P.read_shift(8,"f");return U[1].v=z,U}function J(P,j){var U=V(P);return P.l+=j-10,U}function K(P,j){return P[P.l+j-1]==0?P.read_shift(j,"cstr"):""}function ae(P,j){var U=P[P.l++];U>j-1&&(U=j-1);for(var z="";z.length<U;)z+=String.fromCharCode(P[P.l++]);return z}function ie(P,j,U){if(!(!U.qpro||j<21)){var z=P.read_shift(1);P.l+=17,P.l+=1,P.l+=2;var Z=P.read_shift(j-21,"cstr");return[z,Z]}}function G(P,j){for(var U={},z=P.l+j;P.l<z;){var Z=P.read_shift(2);if(Z==14e3){for(U[Z]=[0,""],U[Z][0]=P.read_shift(2);P[P.l];)U[Z][1]+=String.fromCharCode(P[P.l]),P.l++;P.l++}}return U}function Q(P,j){var U=ce(5+P.length);U.write_shift(2,14e3),U.write_shift(2,j);for(var z=0;z<P.length;++z){var Z=P.charCodeAt(z);U[U.l++]=Z>127?95:Z}return U[U.l++]=0,U}var te={0:{n:"BOF",f:$C},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:s},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:c},16:{n:"FORMULA",f:m},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:c},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:K},222:{n:"SHEETNAMELP",f:ae},65535:{n:""}},pe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:b},23:{n:"NUMBER17",f:C},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:A},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:G},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:I},38:{n:"??"},39:{n:"NUMBER27",f:V},40:{n:"FORMULA28",f:J},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:K},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ie},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}}(),ID=/^\s|\s$|[\t\n\r]/;function YC(t,e){if(!e.bookSST)return"";var n=[on];n[n.length]=Ee("sst",null,{xmlns:gl[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var i=t[r],a="<si>";i.r?a+=i.r:(a+="<t",i.t||(i.t=""),i.t.match(ID)&&(a+=' xml:space="preserve"'),a+=">"+yt(i.t)+"</t>"),a+="</si>",n[n.length]=a}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function RD(t){return[t.read_shift(4),t.read_shift(4)]}function FD(t,e){return e||(e=ce(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var DD=bF;function OD(t){var e=Rr();ge(e,159,FD(t));for(var n=0;n<t.length;++n)ge(e,19,DD(t[n]));return ge(e,160),e.end()}function PD(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function QC(t){var e=0,n,r=PD(t),i=r.length+1,a,o,s,u,l;for(n=Ls(i),n[0]=r.length,a=1;a!=i;++a)n[a]=r[a-1];for(a=i-1;a>=0;--a)o=n[a],s=e&16384?1:0,u=e<<1&32767,l=s|u,e=l^o;return e^52811}var ND=function(){function t(i,a){switch(a.type){case"base64":return e(Ga(i),a);case"binary":return e(i,a);case"buffer":return e(ft&&Buffer.isBuffer(i)?i.toString("binary"):xf(i),a);case"array":return e(qp(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){var o=a||{},s=o.dense?[]:{},u=i.match(/\\trowd.*?\\row\b/g);if(!u.length)throw new Error("RTF missing table");var l={s:{c:0,r:0},e:{c:0,r:u.length-1}};return u.forEach(function(c,f){Array.isArray(s)&&(s[f]=[]);for(var h=/\\\w+\b/g,d=0,v,p=-1;v=h.exec(c);){switch(v[0]){case"\\cell":var m=c.slice(d,h.lastIndex-v[0].length);if(m[0]==" "&&(m=m.slice(1)),++p,m.length){var g={v:m,t:"s"};Array.isArray(s)?s[f][p]=g:s[_t({r:f,c:p})]=g}break}d=h.lastIndex}p>l.e.c&&(l.e.c=p)}),s["!ref"]=an(l),s}function n(i,a){return js(t(i,a),a)}function r(i){for(var a=["{\\rtf1\\ansi"],o=Ft(i["!ref"]),s,u=Array.isArray(i),l=o.s.r;l<=o.e.r;++l){a.push("\\trowd\\trautofit1");for(var c=o.s.c;c<=o.e.c;++c)a.push("\\cellx"+(c+1));for(a.push("\\pard\\intbl"),c=o.s.c;c<=o.e.c;++c){var f=_t({r:l,c});s=u?(i[l]||[])[c]:i[f],!(!s||s.v==null&&(!s.f||s.F))&&(a.push(" "+(s.w||(Xa(s),s.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:n,to_sheet:t,from_sheet:r}}();function nw(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}var MD=6,Ua=MD;function qd(t){return Math.floor((t+Math.round(128/Ua)/256)*Ua)}function Yd(t){return Math.floor((t-5)/Ua*100+.5)/100}function Km(t){return Math.round((t*Ua+5)/Ua*256)/256}function M1(t){t.width?(t.wpx=qd(t.width),t.wch=Yd(t.wpx),t.MDW=Ua):t.wpx?(t.wch=Yd(t.wpx),t.width=Km(t.wch),t.MDW=Ua):typeof t.wch=="number"&&(t.width=Km(t.wch),t.wpx=qd(t.width),t.MDW=Ua),t.customWidth&&delete t.customWidth}var LD=96,JC=LD;function Qd(t){return t*96/JC}function ZC(t){return t*JC/96}function BD(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&(e[e.length]=Ee("numFmt",null,{numFmtId:r,formatCode:yt(t[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Ee("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function WD(t){var e=[];return e[e.length]=Ee("cellXfs",null),t.forEach(function(n){e[e.length]=Ee("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Ee("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function eT(t,e){var n=[on,Ee("styleSheet",null,{xmlns:gl[0],"xmlns:vt":kn.vt})],r;return t.SSF&&(r=BD(t.SSF))!=null&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=WD(e.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function zD(t,e){var n=t.read_shift(2),r=ir(t);return[n,r]}function UD(t,e,n){n||(n=ce(6+4*e.length)),n.write_shift(2,t),Rn(e,n);var r=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),r}function VD(t,e,n){var r={};r.sz=t.read_shift(2)/20;var i=IF(t);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var a=t.read_shift(2);switch(a===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(r.underline=o);var s=t.read_shift(1);s>0&&(r.family=s);var u=t.read_shift(1);switch(u>0&&(r.charset=u),t.l++,r.color=AF(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=ir(t),r}function HD(t,e){e||(e=ce(25+4*32)),e.write_shift(2,t.sz*20),RF(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),Xd(t.color,e);var r=0;return r=2,e.write_shift(1,r),Rn(t.name,e),e.length>e.l?e.slice(0,e.l):e}var $D=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],iv,jD=pa;function rw(t,e){e||(e=ce(4*3+8*7+16*1)),iv||(iv=S1($D));var n=iv[t.patternType];n==null&&(n=40),e.write_shift(4,n);var r=0;if(n!=40)for(Xd({auto:1},e),Xd({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function GD(t,e){var n=t.l+e,r=t.read_shift(2),i=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:i}}function tT(t,e,n){n||(n=ce(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var r=0;return n.write_shift(1,r),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function Bl(t,e){return e||(e=ce(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var XD=pa;function KD(t,e){return e||(e=ce(51)),e.write_shift(1,0),Bl(null,e),Bl(null,e),Bl(null,e),Bl(null,e),Bl(null,e),e.length>e.l?e.slice(0,e.l):e}function qD(t,e){return e||(e=ce(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),Gd(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function YD(t,e,n){var r=ce(2052);return r.write_shift(4,t),Gd(e,r),Gd(n,r),r.length>r.l?r.slice(0,r.l):r}function QD(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++n}),n!=0&&(ge(t,615,Li(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&ge(t,44,UD(i,e[i]))}),ge(t,616))}}function JD(t){var e=1;ge(t,611,Li(e)),ge(t,43,HD({sz:12,color:{theme:1},name:"Calibri",family:2})),ge(t,612)}function ZD(t){var e=2;ge(t,603,Li(e)),ge(t,45,rw({patternType:"none"})),ge(t,45,rw({patternType:"gray125"})),ge(t,604)}function eO(t){var e=1;ge(t,613,Li(e)),ge(t,46,KD()),ge(t,614)}function tO(t){var e=1;ge(t,626,Li(e)),ge(t,47,tT({numFmtId:0},65535)),ge(t,627)}function nO(t,e){ge(t,617,Li(e.length)),e.forEach(function(n){ge(t,47,tT(n,0))}),ge(t,618)}function rO(t){var e=1;ge(t,619,Li(e)),ge(t,48,qD({xfId:0,name:"Normal"})),ge(t,620)}function iO(t){var e=0;ge(t,505,Li(e)),ge(t,506)}function aO(t){var e=0;ge(t,508,YD(e,"TableStyleMedium9","PivotStyleMedium4")),ge(t,509)}function oO(t,e){var n=Rr();return ge(n,278),QD(n,t.SSF),JD(n),ZD(n),eO(n),tO(n),nO(n,e.cellXfs),rO(n),iO(n),aO(n),ge(n,279),n.end()}function nT(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[on];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function sO(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:ir(t)}}function uO(t){var e=ce(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Rn(t.name,e),e.slice(0,e.l)}function lO(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function cO(t){var e=ce(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function fO(t,e){var n=ce(8+2*e.length);return n.write_shift(4,t),Rn(e,n),n.slice(0,n.l)}function hO(t){return t.l+=4,t.read_shift(4)!=0}function dO(t,e){var n=ce(8);return n.write_shift(4,t),n.write_shift(4,1),n}function pO(){var t=Rr();return ge(t,332),ge(t,334,Li(1)),ge(t,335,uO({name:"XLDAPR",version:12e4,flags:3496657072})),ge(t,336),ge(t,339,fO(1,"XLDAPR")),ge(t,52),ge(t,35,Li(514)),ge(t,4096,Li(0)),ge(t,4097,li(1)),ge(t,36),ge(t,53),ge(t,340),ge(t,337,dO(1)),ge(t,51,cO([[1,0]])),ge(t,338),ge(t,333),t.end()}function rT(){var t=[on];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function vO(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=_t(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var Du=1024;function iT(t,e){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),i=[Ee("xml",null,{"xmlns:v":jr.v,"xmlns:o":jr.o,"xmlns:x":jr.x,"xmlns:mv":jr.mv}).replace(/\/>/,">"),Ee("o:shapelayout",Ee("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Ee("v:shapetype",[Ee("v:stroke",null,{joinstyle:"miter"}),Ee("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];Du<t*1e3;)Du+=1e3;return e.forEach(function(a){var o=In(a[0]),s={color2:"#BEFF82",type:"gradient"};s.type=="gradient"&&(s.angle="-180");var u=s.type=="gradient"?Ee("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,l=Ee("v:fill",u,s),c={on:"t",obscured:"t"};++Du,i=i.concat(["<v:shape"+Kc({id:"_x0000_s"+Du,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",l,Ee("v:shadow",null,c),Ee("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Hn("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Hn("x:AutoFill","False"),Hn("x:Row",String(o.r)),Hn("x:Column",String(o.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function aT(t){var e=[on,Ee("comments",null,{xmlns:gl[0]})],n=[];return e.push("<authors>"),t.forEach(function(r){r[1].forEach(function(i){var a=yt(i.a);n.indexOf(a)==-1&&(n.push(a),e.push("<author>"+a+"</author>")),i.T&&i.ID&&n.indexOf("tc="+i.ID)==-1&&(n.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(r){var i=0,a=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=n.indexOf("tc="+r[1][0].ID):r[1].forEach(function(u){u.a&&(i=n.indexOf(yt(u.a))),a.push(u.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),a.length<=1)e.push(Hn("t",yt(a[0]||"")));else{for(var o=`Comment:
    `+a[0]+`
`,s=1;s<a.length;++s)o+=`Reply:
    `+a[s]+`
`;e.push(Hn("t",yt(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function mO(t,e,n){var r=[on,Ee("ThreadedComments",null,{xmlns:kn.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var a="";(i[1]||[]).forEach(function(o,s){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var u={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};s==0?a=u.id:u.parentId=a,o.ID=u.id,o.a&&(u.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),r.push(Ee("threadedComment",Hn("text",o.t||""),u))})}),r.push("</ThreadedComments>"),r.join("")}function gO(t){var e=[on,Ee("personList",null,{xmlns:kn.TCMNT,"xmlns:x":gl[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,r){e.push(Ee("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function xO(t){var e={};e.iauthor=t.read_shift(4);var n=qs(t);return e.rfx=n.s,e.ref=_t(n.s),t.l+=16,e}function yO(t,e){return e==null&&(e=ce(36)),e.write_shift(4,t[1].iauthor),yl(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var wO=ir;function _O(t){return Rn(t.slice(0,54))}function bO(t){var e=Rr(),n=[];return ge(e,628),ge(e,630),t.forEach(function(r){r[1].forEach(function(i){n.indexOf(i.a)>-1||(n.push(i.a.slice(0,54)),ge(e,632,_O(i.a)))})}),ge(e,631),ge(e,633),t.forEach(function(r){r[1].forEach(function(i){i.iauthor=n.indexOf(i.a);var a={s:In(r[0]),e:In(r[0])};ge(e,635,yO([a,i])),i.t&&i.t.length>0&&ge(e,637,SF(i)),ge(e,636),delete i.iauthor})}),ge(e,634),ge(e,629),e.end()}function EO(t,e){e.FullPaths.forEach(function(n,r){if(r!=0){var i=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&bt.utils.cfb_add(t,i,e.FileIndex[r].content)}})}var oT=["xlsb","xlsm","xlam","biff8","xla"],SO=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,i,a,o){var s=!1,u=!1;a.length==0?u=!0:a.charAt(0)=="["&&(u=!0,a=a.slice(1,-1)),o.length==0?s=!0:o.charAt(0)=="["&&(s=!0,o=o.slice(1,-1));var l=a.length>0?parseInt(a,10)|0:0,c=o.length>0?parseInt(o,10)|0:0;return s?c+=e.c:--c,u?l+=e.r:--l,i+(s?"":"$")+rr(c)+(u?"":"$")+jn(l)}return function(i,a){return e=a,i.replace(t,n)}}(),L1=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,B1=function(){return function(e,n){return e.replace(L1,function(r,i,a,o,s,u){var l=F1(o)-(a?0:n.c),c=R1(u)-(s?0:n.r),f=c==0?"":s?c+1:"["+c+"]",h=l==0?"":a?l+1:"["+l+"]";return i+"R"+f+"C"+h})}}();function CO(t,e){return t.replace(L1,function(n,r,i,a,o,s){return r+(i=="$"?i+a:rr(F1(a)+e.c))+(o=="$"?o+s:jn(R1(s)+e.r))})}function TO(t){return t.length!=1}function en(t){t.l+=1}function Vo(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function sT(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return uT(t);n.biff==12&&(r=4)}var i=t.read_shift(r),a=t.read_shift(r),o=Vo(t),s=Vo(t);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:a,c:s[0],cRel:s[1],rRel:s[2]}}}function uT(t){var e=Vo(t),n=Vo(t),r=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function kO(t,e,n){if(n.biff<8)return uT(t);var r=t.read_shift(n.biff==12?4:2),i=t.read_shift(n.biff==12?4:2),a=Vo(t),o=Vo(t);return{s:{r,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function lT(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return AO(t);var r=t.read_shift(n&&n.biff==12?4:2),i=Vo(t);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function AO(t){var e=Vo(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function IO(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function RO(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return FO(t);var i=t.read_shift(r>=12?4:2),a=t.read_shift(2),o=(a&16384)>>14,s=(a&32768)>>15;if(a&=16383,s==1)for(;i>524287;)i-=1048576;if(o==1)for(;a>8191;)a=a-16384;return{r:i,c:a,cRel:o,rRel:s}}function FO(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:i,rRel:r}}function DO(t,e,n){var r=(t[t.l++]&96)>>5,i=sT(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,i]}function OO(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),a=8;if(n)switch(n.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}var o=sT(t,a,n);return[r,i,o]}function PO(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function NO(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),a=8;if(n)switch(n.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}return t.l+=a,[r,i]}function MO(t,e,n){var r=(t[t.l++]&96)>>5,i=kO(t,e-1,n);return[r,i]}function LO(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function iw(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function BO(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),i=[],a=0;a<=r;++a)i.push(t.read_shift(n&&n.biff==2?1:2));return i}function WO(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function zO(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function UO(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function VO(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function cT(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function HO(t){return t.read_shift(2),cT(t)}function $O(t){return t.read_shift(2),cT(t)}function jO(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=lT(t,0,n);return[r,i]}function GO(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=RO(t,0,n);return[r,i]}function XO(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var a=lT(t,0,n);return[r,i,a]}function KO(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(n&&n.biff<=3?1:2);return[KP[i],dT[i],r]}function qO(t,e,n){var r=t[t.l++],i=t.read_shift(1),a=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:YO(t);return[i,(a[0]===0?dT:XP)[a[1]]]}function YO(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function QO(t,e,n){t.l+=n&&n.biff==2?3:4}function JO(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function ZO(t){return t.l++,_f[t.read_shift(1)]}function eP(t){return t.l++,t.read_shift(2)}function tP(t){return t.l++,t.read_shift(1)!==0}function nP(t){return t.l++,wl(t)}function rP(t,e,n){return t.l++,GC(t,e-1,n)}function iP(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=XF(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=_f[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=wl(t);break;case 2:n[1]=QF(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function aP(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),i=[],a=0;a!=r;++a)i.push((n.biff==12?qs:eD)(t));return i}function oP(t,e,n){var r=0,i=0;n.biff==12?(r=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--i==0&&(i=256));for(var a=0,o=[];a!=r&&(o[a]=[]);++a)for(var s=0;s!=i;++s)o[a][s]=iP(t,n.biff);return o}function sP(t,e,n){var r=t.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,a=t.read_shift(i);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,a]}function uP(t,e,n){if(n.biff==5)return lP(t);var r=t.read_shift(1)>>>5&3,i=t.read_shift(2),a=t.read_shift(4);return[r,i,a]}function lP(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function cP(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function fP(t,e,n){var r=t.read_shift(1)>>>5&3,i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function hP(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function dP(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),a=4;if(n)switch(n.biff){case 5:a=15;break;case 12:a=6;break}return t.l+=a,[r,i]}var pP=pa,vP=pa,mP=pa;function bf(t,e,n){return t.l+=2,[IO(t)]}function W1(t){return t.l+=6,[]}var gP=bf,xP=W1,yP=W1,wP=bf;function fT(t){return t.l+=2,[$C(t),t.read_shift(2)&1]}var _P=bf,bP=fT,EP=W1,SP=bf,CP=bf,TP=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function kP(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),i=t.read_shift(2),a=t.read_shift(2),o=TP[n>>2&31];return{ixti:e,coltype:n&3,rt:o,idx:r,c:i,C:a}}function AP(t){return t.l+=2,[t.read_shift(4)]}function IP(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function RP(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function FP(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function DP(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function OP(t){return t.l+=4,[0,0]}var aw={1:{n:"PtgExp",f:JO},2:{n:"PtgTbl",f:mP},3:{n:"PtgAdd",f:en},4:{n:"PtgSub",f:en},5:{n:"PtgMul",f:en},6:{n:"PtgDiv",f:en},7:{n:"PtgPower",f:en},8:{n:"PtgConcat",f:en},9:{n:"PtgLt",f:en},10:{n:"PtgLe",f:en},11:{n:"PtgEq",f:en},12:{n:"PtgGe",f:en},13:{n:"PtgGt",f:en},14:{n:"PtgNe",f:en},15:{n:"PtgIsect",f:en},16:{n:"PtgUnion",f:en},17:{n:"PtgRange",f:en},18:{n:"PtgUplus",f:en},19:{n:"PtgUminus",f:en},20:{n:"PtgPercent",f:en},21:{n:"PtgParen",f:en},22:{n:"PtgMissArg",f:en},23:{n:"PtgStr",f:rP},26:{n:"PtgSheet",f:IP},27:{n:"PtgEndSheet",f:RP},28:{n:"PtgErr",f:ZO},29:{n:"PtgBool",f:tP},30:{n:"PtgInt",f:eP},31:{n:"PtgNum",f:nP},32:{n:"PtgArray",f:LO},33:{n:"PtgFunc",f:KO},34:{n:"PtgFuncVar",f:qO},35:{n:"PtgName",f:sP},36:{n:"PtgRef",f:jO},37:{n:"PtgArea",f:DO},38:{n:"PtgMemArea",f:cP},39:{n:"PtgMemErr",f:pP},40:{n:"PtgMemNoMem",f:vP},41:{n:"PtgMemFunc",f:fP},42:{n:"PtgRefErr",f:hP},43:{n:"PtgAreaErr",f:PO},44:{n:"PtgRefN",f:GO},45:{n:"PtgAreaN",f:MO},46:{n:"PtgMemAreaN",f:FP},47:{n:"PtgMemNoMemN",f:DP},57:{n:"PtgNameX",f:uP},58:{n:"PtgRef3d",f:XO},59:{n:"PtgArea3d",f:OO},60:{n:"PtgRefErr3d",f:dP},61:{n:"PtgAreaErr3d",f:NO},255:{}},PP={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},NP={1:{n:"PtgElfLel",f:fT},2:{n:"PtgElfRw",f:SP},3:{n:"PtgElfCol",f:gP},6:{n:"PtgElfRwV",f:CP},7:{n:"PtgElfColV",f:wP},10:{n:"PtgElfRadical",f:_P},11:{n:"PtgElfRadicalS",f:EP},13:{n:"PtgElfColS",f:xP},15:{n:"PtgElfColSV",f:yP},16:{n:"PtgElfRadicalLel",f:bP},25:{n:"PtgList",f:kP},29:{n:"PtgSxName",f:AP},255:{}},MP={0:{n:"PtgAttrNoop",f:OP},1:{n:"PtgAttrSemi",f:VO},2:{n:"PtgAttrIf",f:zO},4:{n:"PtgAttrChoose",f:BO},8:{n:"PtgAttrGoto",f:WO},16:{n:"PtgAttrSum",f:QO},32:{n:"PtgAttrBaxcel",f:iw},33:{n:"PtgAttrBaxcel",f:iw},64:{n:"PtgAttrSpace",f:HO},65:{n:"PtgAttrSpaceSemi",f:$O},128:{n:"PtgAttrIfError",f:UO},255:{}};function LP(t,e,n,r){if(r.biff<8)return pa(t,e);for(var i=t.l+e,a=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=oP(t,0,r),a.push(n[o][1]);break;case"PtgMemArea":n[o][2]=aP(t,n[o][1],r),a.push(n[o][2]);break;case"PtgExp":r&&r.biff==12&&(n[o][1][1]=t.read_shift(4),a.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return e=i-t.l,e!==0&&a.push(pa(t,e)),a}function BP(t,e,n){for(var r=t.l+e,i,a,o=[];r!=t.l;)e=r-t.l,a=t[t.l],i=aw[a]||aw[PP[a]],(a===24||a===25)&&(i=(a===24?NP:MP)[t[t.l+1]]),!i||!i.f?pa(t,e):o.push([i.n,i.f(t,e,n)]);return o}function WP(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],i=[],a=0;a<r.length;++a){var o=r[a];if(o)switch(o[0]){case 2:i.push('"'+o[1].replace(/"/g,'""')+'"');break;default:i.push(o[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var zP={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function UP(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function hT(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(t[r[0]][0]){case 357:return i=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return t[r[0]][0][3]?(i=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function ow(t,e,n){var r=hT(t,e,n);return r=="#REF"?r:UP(r,n)}function ol(t,e,n,r,i){var a=i&&i.biff||8,o={s:{c:0,r:0}},s=[],u,l,c,f=0,h=0,d,v="";if(!t[0]||!t[0][0])return"";for(var p=-1,m="",g=0,x=t[0].length;g<x;++g){var y=t[0][g];switch(y[0]){case"PtgUminus":s.push("-"+s.pop());break;case"PtgUplus":s.push("+"+s.pop());break;case"PtgPercent":s.push(s.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(u=s.pop(),l=s.pop(),p>=0){switch(t[0][p][1][0]){case 0:m=jt(" ",t[0][p][1][1]);break;case 1:m=jt("\r",t[0][p][1][1]);break;default:if(m="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}l=l+m,p=-1}s.push(l+zP[y[0]]+u);break;case"PtgIsect":u=s.pop(),l=s.pop(),s.push(l+" "+u);break;case"PtgUnion":u=s.pop(),l=s.pop(),s.push(l+","+u);break;case"PtgRange":u=s.pop(),l=s.pop(),s.push(l+":"+u);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":c=gc(y[1][1],o,i),s.push(xc(c,a));break;case"PtgRefN":c=n?gc(y[1][1],n,i):y[1][1],s.push(xc(c,a));break;case"PtgRef3d":f=y[1][1],c=gc(y[1][2],o,i),v=ow(r,f,i),s.push(v+"!"+xc(c,a));break;case"PtgFunc":case"PtgFuncVar":var w=y[1][0],_=y[1][1];w||(w=0),w&=127;var b=w==0?[]:s.slice(-w);s.length-=w,_==="User"&&(_=b.shift()),s.push(_+"("+b.join(",")+")");break;case"PtgBool":s.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":s.push(y[1]);break;case"PtgNum":s.push(String(y[1]));break;case"PtgStr":s.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgErr":s.push(y[1]);break;case"PtgAreaN":d=$2(y[1][1],n?{s:n}:o,i),s.push(nv(d,i));break;case"PtgArea":d=$2(y[1][1],o,i),s.push(nv(d,i));break;case"PtgArea3d":f=y[1][1],d=y[1][2],v=ow(r,f,i),s.push(v+"!"+nv(d,i));break;case"PtgAttrSum":s.push("SUM("+s.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=y[1][2];var E=(r.names||[])[h-1]||(r[0]||[])[h],S=E?E.Name:"SH33TJSNAME"+String(h);S&&S.slice(0,6)=="_xlfn."&&!i.xlfn&&(S=S.slice(6)),s.push(S);break;case"PtgNameX":var C=y[1][1];h=y[1][2];var T;if(i.biff<=5)C<0&&(C=-C),r[C]&&(T=r[C][h]);else{var A="";if(((r[C]||[])[0]||[])[0]==14849||(((r[C]||[])[0]||[])[0]==1025?r[C][h]&&r[C][h].itab>0&&(A=r.SheetNames[r[C][h].itab-1]+"!"):A=r.SheetNames[h-1]+"!"),r[C]&&r[C][h])A+=r[C][h].Name;else if(r[0]&&r[0][h])A+=r[0][h].Name;else{var I=(hT(r,C,i)||"").split(";;");I[h-1]?A=I[h-1]:A+="SH33TJSERRX"}s.push(A);break}T||(T={Name:"SH33TJSERRY"}),s.push(T.Name);break;case"PtgParen":var V="(",J=")";if(p>=0){switch(m="",t[0][p][1][0]){case 2:V=jt(" ",t[0][p][1][1])+V;break;case 3:V=jt("\r",t[0][p][1][1])+V;break;case 4:J=jt(" ",t[0][p][1][1])+J;break;case 5:J=jt("\r",t[0][p][1][1])+J;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}s.push(V+s.pop()+J);break;case"PtgRefErr":s.push("#REF!");break;case"PtgRefErr3d":s.push("#REF!");break;case"PtgExp":c={c:y[1][1],r:y[1][0]};var K={c:n.c,r:n.r};if(r.sharedf[_t(c)]){var ae=r.sharedf[_t(c)];s.push(ol(ae,o,K,r,i))}else{var ie=!1;for(u=0;u!=r.arrayf.length;++u)if(l=r.arrayf[u],!(c.c<l[0].s.c||c.c>l[0].e.c)&&!(c.r<l[0].s.r||c.r>l[0].e.r)){s.push(ol(l[1],o,K,r,i)),ie=!0;break}ie||s.push(y[1])}break;case"PtgArray":s.push("{"+WP(y[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=g;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":s.push("");break;case"PtgAreaErr":s.push("#REF!");break;case"PtgAreaErr3d":s.push("#REF!");break;case"PtgList":s.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(y));default:throw new Error("Unrecognized Formula Token: "+String(y))}var G=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&p>=0&&G.indexOf(t[0][g][0])==-1){y=t[0][p];var Q=!0;switch(y[1][0]){case 4:Q=!1;case 0:m=jt(" ",y[1][1]);break;case 5:Q=!1;case 1:m=jt("\r",y[1][1]);break;default:if(m="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}s.push((Q?m:"")+s.pop()+(Q?"":m)),p=-1}}if(s.length>1&&i.WTF)throw new Error("bad formula stack");return s[0]}function VP(t){if(t==null){var e=ce(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Bs(t);return Bs(0)}function HP(t,e,n,r,i){var a=Ws(e,n,i),o=VP(t.v),s=ce(6),u=33;s.write_shift(2,u),s.write_shift(4,0);for(var l=ce(t.bf.length),c=0;c<t.bf.length;++c)l[c]=t.bf[c];var f=Vn([a,o,s,l]);return f}function Yp(t,e,n){var r=t.read_shift(4),i=BP(t,r,n),a=t.read_shift(4),o=a>0?LP(t,a,i,n):null;return[i,o]}var $P=Yp,Qp=Yp,jP=Yp,GP=Yp,XP={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},dT={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},KP={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function qP(t){var e="of:="+t.replace(L1,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function YP(t){return t.replace(/\./,"!")}var yc=typeof Map<"u";function z1(t,e,n){var r=0,i=t.length;if(n){if(yc?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var a=yc?n.get(e):n[e];r<a.length;++r)if(t[a[r]].t===e)return t.Count++,a[r]}}else for(;r<i;++r)if(t[r].t===e)return t.Count++,r;return t[i]={t:e},t.Count++,t.Unique++,n&&(yc?(n.has(e)||n.set(e,[]),n.get(e).push(i)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(i))),i}function Jp(t,e){var n={min:t+1,max:t+1},r=-1;return e.MDW&&(Ua=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?r=Yd(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(n.width=Km(r),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function pT(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function Yo(t,e,n){var r=n.revssf[e.z!=null?e.z:"General"],i=60,a=t.length;if(r==null&&n.ssf){for(;i<392;++i)if(n.ssf[i]==null){lC(e.z,i),n.ssf[i]=e.z,n.revssf[e.z]=r=i;break}}for(i=0;i!=a;++i)if(t[i].numFmtId===r)return i;return t[a]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function QP(t,e,n){if(t&&t["!ref"]){var r=Ft(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function JP(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+an(t[n])+'"/>';return e+"</mergeCells>"}function ZP(t,e,n,r,i){var a=!1,o={},s=null;if(r.bookType!=="xlsx"&&e.vbaraw){var u=e.SheetNames[n];try{e.Workbook&&(u=e.Workbook.Sheets[n].CodeName||u)}catch{}a=!0,o.codeName=Xc(yt(u))}if(t&&t["!outline"]){var l={summaryBelow:1,summaryRight:1};t["!outline"].above&&(l.summaryBelow=0),t["!outline"].left&&(l.summaryRight=0),s=(s||"")+Ee("outlinePr",null,l)}!a&&!s||(i[i.length]=Ee("sheetPr",s,o))}var eN=["objects","scenarios","selectLockedCells","selectUnlockedCells"],tN=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function nN(t){var e={sheet:1};return eN.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),tN.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=QC(t.password).toString(16).toUpperCase()),Ee("sheetProtection",null,e)}function rN(t){return pT(t),Ee("pageMargins",null,t)}function iN(t,e){for(var n=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(n[n.length]=Ee("col",null,Jp(i,r)));return n[n.length]="</cols>",n.join("")}function aN(t,e,n,r){var i=typeof t.ref=="string"?t.ref:an(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var a=n.Workbook.Names,o=ni(i);o.s.r==o.e.r&&(o.e.r=ni(e["!ref"]).e.r,i=an(o));for(var s=0;s<a.length;++s){var u=a[s];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+n.SheetNames[r]+"'!"+i;break}}return s==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),Ee("autoFilter",null,{ref:i})}function oN(t,e,n,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Ee("sheetViews",Ee("sheetView",null,i),{})}function sN(t,e,n,r){if(t.c&&n["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",a=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=_f[t.v];break;case"d":r&&r.cellDates?i=mr(t.v,-1).toISOString():(t=Or(t),t.t="n",i=""+(t.v=Dr(mr(t.v)))),typeof t.z>"u"&&(t.z=Gt[14]);break;default:i=t.v;break}var s=Hn("v",yt(i)),u={r:e},l=Yo(r.cellXfs,t,r);switch(l!==0&&(u.s=l),t.t){case"n":break;case"d":u.t="d";break;case"b":u.t="b";break;case"e":u.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){s=Hn("v",""+z1(r.Strings,t.v,r.revStrings)),u.t="s";break}u.t="str";break}if(t.t!=a&&(t.t=a,t.v=o),typeof t.f=="string"&&t.f){var c=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;s=Ee("f",yt(t.f),c)+(t.v!=null?s:"")}return t.l&&n["!links"].push([e,t.l]),t.D&&(u.cm=1),Ee("c",s,u)}function uN(t,e,n,r){var i=[],a=[],o=Ft(t["!ref"]),s="",u,l="",c=[],f=0,h=0,d=t["!rows"],v=Array.isArray(t),p={r:l},m,g=-1;for(h=o.s.c;h<=o.e.c;++h)c[h]=rr(h);for(f=o.s.r;f<=o.e.r;++f){for(a=[],l=jn(f),h=o.s.c;h<=o.e.c;++h){u=c[h]+l;var x=v?(t[f]||[])[h]:t[u];x!==void 0&&(s=sN(x,u,t,e))!=null&&a.push(s)}(a.length>0||d&&d[f])&&(p={r:l},d&&d[f]&&(m=d[f],m.hidden&&(p.hidden=1),g=-1,m.hpx?g=Qd(m.hpx):m.hpt&&(g=m.hpt),g>-1&&(p.ht=g,p.customHeight=1),m.level&&(p.outlineLevel=m.level)),i[i.length]=Ee("row",a.join(""),p))}if(d)for(;f<d.length;++f)d&&d[f]&&(p={r:f+1},m=d[f],m.hidden&&(p.hidden=1),g=-1,m.hpx?g=Qd(m.hpx):m.hpt&&(g=m.hpt),g>-1&&(p.ht=g,p.customHeight=1),m.level&&(p.outlineLevel=m.level),i[i.length]=Ee("row","",p));return i.join("")}function vT(t,e,n,r){var i=[on,Ee("worksheet",null,{xmlns:gl[0],"xmlns:r":kn.r})],a=n.SheetNames[t],o=0,s="",u=n.Sheets[a];u==null&&(u={});var l=u["!ref"]||"A1",c=Ft(l);if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+l+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575),l=an(c)}r||(r={}),u["!comments"]=[];var f=[];ZP(u,n,t,e,i),i[i.length]=Ee("dimension",null,{ref:l}),i[i.length]=oN(u,e,t,n),e.sheetFormat&&(i[i.length]=Ee("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),u["!cols"]!=null&&u["!cols"].length>0&&(i[i.length]=iN(u,u["!cols"])),i[o=i.length]="<sheetData/>",u["!links"]=[],u["!ref"]!=null&&(s=uN(u,e),s.length>0&&(i[i.length]=s)),i.length>o+1&&(i[i.length]="</sheetData>",i[o]=i[o].replace("/>",">")),u["!protect"]&&(i[i.length]=nN(u["!protect"])),u["!autofilter"]!=null&&(i[i.length]=aN(u["!autofilter"],u,n,t)),u["!merges"]!=null&&u["!merges"].length>0&&(i[i.length]=JP(u["!merges"]));var h=-1,d,v=-1;return u["!links"].length>0&&(i[i.length]="<hyperlinks>",u["!links"].forEach(function(p){p[1].Target&&(d={ref:p[0]},p[1].Target.charAt(0)!="#"&&(v=gt(r,-1,yt(p[1].Target).replace(/#.*$/,""),lt.HLINK),d["r:id"]="rId"+v),(h=p[1].Target.indexOf("#"))>-1&&(d.location=yt(p[1].Target.slice(h+1))),p[1].Tooltip&&(d.tooltip=yt(p[1].Tooltip)),i[i.length]=Ee("hyperlink",null,d))}),i[i.length]="</hyperlinks>"),delete u["!links"],u["!margins"]!=null&&(i[i.length]=rN(u["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=Hn("ignoredErrors",Ee("ignoredError",null,{numberStoredAsText:1,sqref:l}))),f.length>0&&(v=gt(r,-1,"../drawings/drawing"+(t+1)+".xml",lt.DRAW),i[i.length]=Ee("drawing",null,{"r:id":"rId"+v}),u["!drawing"]=f),u["!comments"].length>0&&(v=gt(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",lt.VML),i[i.length]=Ee("legacyDrawing",null,{"r:id":"rId"+v}),u["!legacy"]=v),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function lN(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var a=t.read_shift(1);return t.l=r,a&7&&(n.level=a&7),a&16&&(n.hidden=!0),a&32&&(n.hpt=i/20),n}function cN(t,e,n){var r=ce(145),i=(n["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var a=320;i.hpx?a=Qd(i.hpx)*20:i.hpt&&(a=i.hpt*20),r.write_shift(2,a),r.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),r.write_shift(1,o),r.write_shift(1,0);var s=0,u=r.l;r.l+=4;for(var l={r:t,c:0},c=0;c<16;++c)if(!(e.s.c>c+1<<10||e.e.c<c<<10)){for(var f=-1,h=-1,d=c<<10;d<c+1<<10;++d){l.c=d;var v=Array.isArray(n)?(n[l.r]||[])[l.c]:n[_t(l)];v&&(f<0&&(f=d),h=d)}f<0||(++s,r.write_shift(4,f),r.write_shift(4,h))}var p=r.l;return r.l=u,r.write_shift(4,s),r.l=p,r.length>r.l?r.slice(0,r.l):r}function fN(t,e,n,r){var i=cN(r,n,e);(i.length>17||(e["!rows"]||[])[r])&&ge(t,0,i)}var hN=qs,dN=yl;function pN(){}function vN(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=CF(t),n}function mN(t,e,n){n==null&&(n=ce(84+4*t.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),n.write_shift(1,r);for(var i=1;i<3;++i)n.write_shift(1,0);return Xd({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),RC(t,n),n.slice(0,n.l)}function gN(t){var e=wi(t);return[e]}function xN(t,e,n){return n==null&&(n=ce(8)),Gs(e,n)}function yN(t){var e=Xs(t);return[e]}function wN(t,e,n){return n==null&&(n=ce(4)),Ks(e,n)}function _N(t){var e=wi(t),n=t.read_shift(1);return[e,n,"b"]}function bN(t,e,n){return n==null&&(n=ce(9)),Gs(e,n),n.write_shift(1,t.v?1:0),n}function EN(t){var e=Xs(t),n=t.read_shift(1);return[e,n,"b"]}function SN(t,e,n){return n==null&&(n=ce(5)),Ks(e,n),n.write_shift(1,t.v?1:0),n}function CN(t){var e=wi(t),n=t.read_shift(1);return[e,n,"e"]}function TN(t,e,n){return n==null&&(n=ce(9)),Gs(e,n),n.write_shift(1,t.v),n}function kN(t){var e=Xs(t),n=t.read_shift(1);return[e,n,"e"]}function AN(t,e,n){return n==null&&(n=ce(8)),Ks(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function IN(t){var e=wi(t),n=t.read_shift(4);return[e,n,"s"]}function RN(t,e,n){return n==null&&(n=ce(12)),Gs(e,n),n.write_shift(4,e.v),n}function FN(t){var e=Xs(t),n=t.read_shift(4);return[e,n,"s"]}function DN(t,e,n){return n==null&&(n=ce(8)),Ks(e,n),n.write_shift(4,e.v),n}function ON(t){var e=wi(t),n=wl(t);return[e,n,"n"]}function PN(t,e,n){return n==null&&(n=ce(16)),Gs(e,n),Bs(t.v,n),n}function NN(t){var e=Xs(t),n=wl(t);return[e,n,"n"]}function MN(t,e,n){return n==null&&(n=ce(12)),Ks(e,n),Bs(t.v,n),n}function LN(t){var e=wi(t),n=FC(t);return[e,n,"n"]}function BN(t,e,n){return n==null&&(n=ce(12)),Gs(e,n),DC(t.v,n),n}function WN(t){var e=Xs(t),n=FC(t);return[e,n,"n"]}function zN(t,e,n){return n==null&&(n=ce(8)),Ks(e,n),DC(t.v,n),n}function UN(t){var e=wi(t),n=D1(t);return[e,n,"is"]}function VN(t){var e=wi(t),n=ir(t);return[e,n,"str"]}function HN(t,e,n){return n==null&&(n=ce(12+4*t.v.length)),Gs(e,n),Rn(t.v,n),n.length>n.l?n.slice(0,n.l):n}function $N(t){var e=Xs(t),n=ir(t);return[e,n,"str"]}function jN(t,e,n){return n==null&&(n=ce(8+4*t.v.length)),Ks(e,n),Rn(t.v,n),n.length>n.l?n.slice(0,n.l):n}function GN(t,e,n){var r=t.l+e,i=wi(t);i.r=n["!row"];var a=t.read_shift(1),o=[i,a,"b"];if(n.cellFormula){t.l+=2;var s=Qp(t,r-t.l,n);o[3]=ol(s,null,i,n.supbooks,n)}else t.l=r;return o}function XN(t,e,n){var r=t.l+e,i=wi(t);i.r=n["!row"];var a=t.read_shift(1),o=[i,a,"e"];if(n.cellFormula){t.l+=2;var s=Qp(t,r-t.l,n);o[3]=ol(s,null,i,n.supbooks,n)}else t.l=r;return o}function KN(t,e,n){var r=t.l+e,i=wi(t);i.r=n["!row"];var a=wl(t),o=[i,a,"n"];if(n.cellFormula){t.l+=2;var s=Qp(t,r-t.l,n);o[3]=ol(s,null,i,n.supbooks,n)}else t.l=r;return o}function qN(t,e,n){var r=t.l+e,i=wi(t);i.r=n["!row"];var a=ir(t),o=[i,a,"str"];if(n.cellFormula){t.l+=2;var s=Qp(t,r-t.l,n);o[3]=ol(s,null,i,n.supbooks,n)}else t.l=r;return o}var YN=qs,QN=yl;function JN(t,e){return e==null&&(e=ce(4)),e.write_shift(4,t),e}function ZN(t,e){var n=t.l+e,r=qs(t),i=O1(t),a=ir(t),o=ir(t),s=ir(t);t.l=n;var u={rfx:r,relId:i,loc:a,display:s};return o&&(u.Tooltip=o),u}function eM(t,e){var n=ce(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));yl({s:In(t[0]),e:In(t[0])},n),P1("rId"+e,n);var r=t[1].Target.indexOf("#"),i=r==-1?"":t[1].Target.slice(r+1);return Rn(i||"",n),Rn(t[1].Tooltip||"",n),Rn("",n),n.slice(0,n.l)}function tM(){}function nM(t,e,n){var r=t.l+e,i=OC(t),a=t.read_shift(1),o=[i];if(o[2]=a,n.cellFormula){var s=$P(t,r-t.l,n);o[1]=s}else t.l=r;return o}function rM(t,e,n){var r=t.l+e,i=qs(t),a=[i];if(n.cellFormula){var o=GP(t,r-t.l,n);a[1]=o,t.l=r}else t.l=r;return a}function iM(t,e,n){n==null&&(n=ce(18));var r=Jp(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(r.width||10)*256),n.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),n.write_shift(2,i),n}var mT=["left","right","top","bottom","header","footer"];function aM(t){var e={};return mT.forEach(function(n){e[n]=wl(t)}),e}function oM(t,e){return e==null&&(e=ce(6*8)),pT(t),mT.forEach(function(n){Bs(t[n],e)}),e}function sM(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function uM(t,e,n){n==null&&(n=ce(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function lM(t){var e=ce(24);return e.write_shift(4,4),e.write_shift(4,1),yl(t,e),e}function cM(t,e){return e==null&&(e=ce(16*4+2)),e.write_shift(2,t.password?QC(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function fM(){}function hM(){}function dM(t,e,n,r,i,a,o){if(e.v===void 0)return!1;var s="";switch(e.t){case"b":s=e.v?"1":"0";break;case"d":e=Or(e),e.z=e.z||Gt[14],e.v=Dr(mr(e.v)),e.t="n";break;case"n":case"e":s=""+e.v;break;default:s=e.v;break}var u={r:n,c:r};switch(u.s=Yo(i.cellXfs,e,i),e.l&&a["!links"].push([_t(u),e.l]),e.c&&a["!comments"].push([_t(u),e.c]),e.t){case"s":case"str":return i.bookSST?(s=z1(i.Strings,e.v,i.revStrings),u.t="s",u.v=s,o?ge(t,18,DN(e,u)):ge(t,7,RN(e,u))):(u.t="str",o?ge(t,17,jN(e,u)):ge(t,6,HN(e,u))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?ge(t,13,zN(e,u)):ge(t,2,BN(e,u)):o?ge(t,16,MN(e,u)):ge(t,5,PN(e,u)),!0;case"b":return u.t="b",o?ge(t,15,SN(e,u)):ge(t,4,bN(e,u)),!0;case"e":return u.t="e",o?ge(t,14,AN(e,u)):ge(t,3,TN(e,u)),!0}return o?ge(t,12,wN(e,u)):ge(t,1,xN(e,u)),!0}function pM(t,e,n,r){var i=Ft(e["!ref"]||"A1"),a,o="",s=[];ge(t,145);var u=Array.isArray(e),l=i.e.r;e["!rows"]&&(l=Math.max(i.e.r,e["!rows"].length-1));for(var c=i.s.r;c<=l;++c){o=jn(c),fN(t,e,i,c);var f=!1;if(c<=i.e.r)for(var h=i.s.c;h<=i.e.c;++h){c===i.s.r&&(s[h]=rr(h)),a=s[h]+o;var d=u?(e[c]||[])[h]:e[a];if(!d){f=!1;continue}f=dM(t,d,c,h,r,e,f)}}ge(t,146)}function vM(t,e){!e||!e["!merges"]||(ge(t,177,JN(e["!merges"].length)),e["!merges"].forEach(function(n){ge(t,176,QN(n))}),ge(t,178))}function mM(t,e){!e||!e["!cols"]||(ge(t,390),e["!cols"].forEach(function(n,r){n&&ge(t,60,iM(r,n))}),ge(t,391))}function gM(t,e){!e||!e["!ref"]||(ge(t,648),ge(t,649,lM(Ft(e["!ref"]))),ge(t,650))}function xM(t,e,n){e["!links"].forEach(function(r){if(r[1].Target){var i=gt(n,-1,r[1].Target.replace(/#.*$/,""),lt.HLINK);ge(t,494,eM(r,i))}}),delete e["!links"]}function yM(t,e,n,r){if(e["!comments"].length>0){var i=gt(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",lt.VML);ge(t,551,P1("rId"+i)),e["!legacy"]=i}}function wM(t,e,n,r){if(e["!autofilter"]){var i=e["!autofilter"],a=typeof i.ref=="string"?i.ref:an(i.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var o=n.Workbook.Names,s=ni(a);s.s.r==s.e.r&&(s.e.r=ni(e["!ref"]).e.r,a=an(s));for(var u=0;u<o.length;++u){var l=o[u];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+a;break}}u==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+a}),ge(t,161,yl(Ft(a))),ge(t,162)}}function _M(t,e,n){ge(t,133),ge(t,137,uM(e,n)),ge(t,138),ge(t,134)}function bM(t,e){e["!protect"]&&ge(t,535,cM(e["!protect"]))}function EM(t,e,n,r){var i=Rr(),a=n.SheetNames[t],o=n.Sheets[a]||{},s=a;try{n&&n.Workbook&&(s=n.Workbook.Sheets[t].CodeName||s)}catch{}var u=Ft(o["!ref"]||"A1");if(u.e.c>16383||u.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],ge(i,129),(n.vbaraw||o["!outline"])&&ge(i,147,mN(s,o["!outline"])),ge(i,148,dN(u)),_M(i,o,n.Workbook),mM(i,o),pM(i,o,t,e),bM(i,o),wM(i,o,n,t),vM(i,o),xM(i,o,r),o["!margins"]&&ge(i,476,oM(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&gM(i,o),yM(i,o,t,r),ge(i,130),i.end()}function SM(t,e){t.l+=10;var n=ir(t);return{name:n}}var CM=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function TM(t){return!t.Workbook||!t.Workbook.WBProps?"false":rF(t.Workbook.WBProps.date1904)?"true":"false"}var kM="][*?/\\".split("");function gT(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return kM.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function AM(t,e,n){t.forEach(function(r,i){gT(r);for(var a=0;a<i;++a)if(r==t[a])throw new Error("Duplicate Sheet Name: "+r);if(n){var o=e&&e[i]&&e[i].CodeName||r;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function IM(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];AM(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)QP(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n)}function xT(t){var e=[on];e[e.length]=Ee("workbook",null,{xmlns:gl[0],"xmlns:r":kn.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(CM.forEach(function(s){t.Workbook.WBProps[s[0]]!=null&&t.Workbook.WBProps[s[0]]!=s[1]&&(r[s[0]]=t.Workbook.WBProps[s[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=Ee("workbookPr",null,r);var i=t.Workbook&&t.Workbook.Sheets||[],a=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",a=0;a!=t.SheetNames.length&&!(!i[a]||!i[a].Hidden);++a);a==t.SheetNames.length&&(a=0),e[e.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",a=0;a!=t.SheetNames.length;++a){var o={name:yt(t.SheetNames[a].slice(0,31))};if(o.sheetId=""+(a+1),o["r:id"]="rId"+(a+1),i[a])switch(i[a].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=Ee("sheet",null,o)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(s){var u={name:s.Name};s.Comment&&(u.comment=s.Comment),s.Sheet!=null&&(u.localSheetId=""+s.Sheet),s.Hidden&&(u.hidden="1"),s.Ref&&(e[e.length]=Ee("definedName",yt(s.Ref),u))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function RM(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=Xm(t),n.name=ir(t),n}function FM(t,e){return e||(e=ce(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),P1(t.strRelID,e),Rn(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function DM(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var i=e>8?ir(t):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function OM(t,e){e||(e=ce(72));var n=0;return t&&t.filterPrivacy&&(n|=8),e.write_shift(4,n),e.write_shift(4,0),RC(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function PM(t,e,n){var r=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),a=TF(t),o=jP(t,0,n),s=O1(t);t.l=r;var u={Name:a,Ptg:o};return i<268435455&&(u.Sheet=i),s&&(u.Comment=s),u}function NM(t,e){ge(t,143);for(var n=0;n!=e.SheetNames.length;++n){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,i={Hidden:r,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};ge(t,156,FM(i))}ge(t,144)}function MM(t,e){e||(e=ce(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return Rn("SheetJS",e),Rn(Wd.version,e),Rn(Wd.version,e),Rn("7262",e),e.length>e.l?e.slice(0,e.l):e}function LM(t,e){e||(e=ce(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function BM(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,r=0,i=-1,a=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&i==-1?i=r:n[r].Hidden==1&&a==-1&&(a=r);a>i||(ge(t,135),ge(t,158,LM(i)),ge(t,136))}}function WM(t,e){var n=Rr();return ge(n,131),ge(n,128,MM()),ge(n,153,OM(t.Workbook&&t.Workbook.WBProps||null)),BM(n,t),NM(n,t),ge(n,132),n.end()}function zM(t,e,n){return(e.slice(-4)===".bin"?WM:xT)(t)}function UM(t,e,n,r,i){return(e.slice(-4)===".bin"?EM:vT)(t,n,r,i)}function VM(t,e,n){return(e.slice(-4)===".bin"?oO:eT)(t,n)}function HM(t,e,n){return(e.slice(-4)===".bin"?OD:YC)(t,n)}function $M(t,e,n){return(e.slice(-4)===".bin"?bO:aT)(t)}function jM(t){return(t.slice(-4)===".bin"?pO:rT)()}function GM(t,e){var n=[];return t.Props&&n.push(VF(t.Props,e)),t.Custprops&&n.push(HF(t.Props,t.Custprops)),n.join("")}function XM(){return""}function KM(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var a=[];a.push(Ee("NumberFormat",null,{"ss:Format":yt(Gt[r.numFmtId])}));var o={"ss:ID":"s"+(21+i)};n.push(Ee("Style",a.join(""),o))}),Ee("Styles",n.join(""))}function yT(t){return Ee("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+B1(t.Ref,{r:0,c:0})})}function qM(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||n.push(yT(i)))}return Ee("Names",n.join(""))}function YM(t,e,n,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,a=[],o=0;o<i.length;++o){var s=i[o];s.Sheet==n&&(s.Name.match(/^_xlfn\./)||a.push(yT(s)))}return a.join("")}function QM(t,e,n,r){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(Ee("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(Ee("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(Ee("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)i.push(Ee("Visible",r.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<n&&!(r.Workbook.Sheets[a]&&!r.Workbook.Sheets[a].Hidden);++a);a==n&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(Hn("ProtectContents","True")),t["!protect"].objects&&i.push(Hn("ProtectObjects","True")),t["!protect"].scenarios&&i.push(Hn("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(Hn("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(Hn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&i.push("<"+o[1]+"/>")})),i.length==0?"":Ee("WorksheetOptions",i.join(""),{xmlns:jr.x})}function JM(t){return t.map(function(e){var n=nF(e.t||""),r=Ee("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ee("Comment",r,{"ss:Author":e.a})}).join("")}function ZM(t,e,n,r,i,a,o){if(!t||t.v==null&&t.f==null)return"";var s={};if(t.f&&(s["ss:Formula"]="="+yt(B1(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var u=In(t.F.slice(e.length+1));s["ss:ArrayRange"]="RC:R"+(u.r==o.r?"":"["+(u.r-o.r)+"]")+"C"+(u.c==o.c?"":"["+(u.c-o.c)+"]")}if(t.l&&t.l.Target&&(s["ss:HRef"]=yt(t.l.Target),t.l.Tooltip&&(s["x:HRefScreenTip"]=yt(t.l.Tooltip))),n["!merges"])for(var l=n["!merges"],c=0;c!=l.length;++c)l[c].s.c!=o.c||l[c].s.r!=o.r||(l[c].e.c>l[c].s.c&&(s["ss:MergeAcross"]=l[c].e.c-l[c].s.c),l[c].e.r>l[c].s.r&&(s["ss:MergeDown"]=l[c].e.r-l[c].s.r));var f="",h="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":f="Number",h=String(t.v);break;case"b":f="Boolean",h=t.v?"1":"0";break;case"e":f="Error",h=_f[t.v];break;case"d":f="DateTime",h=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Gt[14]);break;case"s":f="String",h=tF(t.v||"");break}var d=Yo(r.cellXfs,t,r);s["ss:StyleID"]="s"+(21+d),s["ss:Index"]=o.c+1;var v=t.v!=null?h:"",p=t.t=="z"?"":'<Data ss:Type="'+f+'">'+v+"</Data>";return(t.c||[]).length>0&&(p+=JM(t.c)),Ee("Cell",p,s)}function eL(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=ZC(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function tL(t,e,n,r){if(!t["!ref"])return"";var i=Ft(t["!ref"]),a=t["!merges"]||[],o=0,s=[];t["!cols"]&&t["!cols"].forEach(function(m,g){M1(m);var x=!!m.width,y=Jp(g,m),w={"ss:Index":g+1};x&&(w["ss:Width"]=qd(y.width)),m.hidden&&(w["ss:Hidden"]="1"),s.push(Ee("Column",null,w))});for(var u=Array.isArray(t),l=i.s.r;l<=i.e.r;++l){for(var c=[eL(l,(t["!rows"]||[])[l])],f=i.s.c;f<=i.e.c;++f){var h=!1;for(o=0;o!=a.length;++o)if(!(a[o].s.c>f)&&!(a[o].s.r>l)&&!(a[o].e.c<f)&&!(a[o].e.r<l)){(a[o].s.c!=f||a[o].s.r!=l)&&(h=!0);break}if(!h){var d={r:l,c:f},v=_t(d),p=u?(t[l]||[])[f]:t[v];c.push(ZM(p,v,t,e,n,r,d))}}c.push("</Row>"),c.length>2&&s.push(c.join(""))}return s.join("")}function nL(t,e,n){var r=[],i=n.SheetNames[t],a=n.Sheets[i],o=a?YM(a,e,t,n):"";return o.length>0&&r.push("<Names>"+o+"</Names>"),o=a?tL(a,e,t,n):"",o.length>0&&r.push("<Table>"+o+"</Table>"),r.push(QM(a,e,t,n)),r.join("")}function rL(t,e){e||(e={}),t.SSF||(t.SSF=Or(Gt)),t.SSF&&(Xp(),Gp(t.SSF),e.revssf=Kp(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Yo(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(GM(t,e)),n.push(XM()),n.push(""),n.push("");for(var r=0;r<t.SheetNames.length;++r)n.push(Ee("Worksheet",nL(r,e,t),{"ss:Name":yt(t.SheetNames[r])}));return n[2]=KM(t,e),n[3]=qM(t),on+Ee("Workbook",n.join(""),{xmlns:jr.ss,"xmlns:o":jr.o,"xmlns:x":jr.x,"xmlns:ss":jr.ss,"xmlns:dt":jr.dt,"xmlns:html":jr.html})}var av={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function iL(t,e){var n=[],r=[],i=[],a=0,o,s=O2(G2,"n"),u=O2(X2,"n");if(t.Props)for(o=Xn(t.Props),a=0;a<o.length;++a)(Object.prototype.hasOwnProperty.call(s,o[a])?n:Object.prototype.hasOwnProperty.call(u,o[a])?r:i).push([o[a],t.Props[o[a]]]);if(t.Custprops)for(o=Xn(t.Custprops),a=0;a<o.length;++a)Object.prototype.hasOwnProperty.call(t.Props||{},o[a])||(Object.prototype.hasOwnProperty.call(s,o[a])?n:Object.prototype.hasOwnProperty.call(u,o[a])?r:i).push([o[a],t.Custprops[o[a]]]);var l=[];for(a=0;a<i.length;++a)HC.indexOf(i[a][0])>-1||zC.indexOf(i[a][0])>-1||i[a][1]!=null&&l.push(i[a]);r.length&&bt.utils.cfb_add(e,"/SummaryInformation",J2(r,av.SI,u,X2)),(n.length||l.length)&&bt.utils.cfb_add(e,"/DocumentSummaryInformation",J2(n,av.DSI,s,G2,l.length?l:null,av.UDI))}function aL(t,e){var n=e||{},r=bt.utils.cfb_new({root:"R"}),i="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":i="/Workbook",n.biff=8;break;case"biff5":i="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return bt.utils.cfb_add(r,i,wT(t,n)),n.biff==8&&(t.Props||t.Custprops)&&iL(t,r),n.biff==8&&t.vbaraw&&EO(r,bt.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var oL={0:{f:lN},1:{f:gN},2:{f:LN},3:{f:CN},4:{f:_N},5:{f:ON},6:{f:VN},7:{f:IN},8:{f:qN},9:{f:KN},10:{f:GN},11:{f:XN},12:{f:yN},13:{f:WN},14:{f:kN},15:{f:EN},16:{f:NN},17:{f:$N},18:{f:FN},19:{f:D1},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:PM},40:{},42:{},43:{f:VD},44:{f:zD},45:{f:jD},46:{f:XD},47:{f:GD},48:{},49:{f:yF},50:{},51:{f:lO},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:wD},62:{f:UN},63:{f:vO},64:{f:fM},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:pa,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:sM},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:vN},148:{f:hN,p:16},151:{f:tM},152:{},153:{f:DM},154:{},155:{},156:{f:RM},157:{},158:{},159:{T:1,f:RD},160:{T:-1},161:{T:1,f:qs},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:YN},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:sO},336:{T:-1},337:{f:hO,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Xm},357:{},358:{},359:{},360:{T:1},361:{},362:{f:pD},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:nM},427:{f:rM},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:aM},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:pN},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:ZN},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Xm},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:wO},633:{T:1},634:{T:-1},635:{T:1,f:xO},636:{T:-1},637:{f:EF},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:SM},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:hM},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Se(t,e,n,r){var i=e;if(!isNaN(i)){var a=r||(n||[]).length||0,o=t.next(4);o.write_shift(2,i),o.write_shift(2,a),a>0&&I1(n)&&t.push(n)}}function sL(t,e,n,r){var i=(n||[]).length||0;if(i<=8224)return Se(t,e,n,i);var a=e;if(!isNaN(a)){for(var o=n.parts||[],s=0,u=0,l=0;l+(o[s]||8224)<=8224;)l+=o[s]||8224,s++;var c=t.next(4);for(c.write_shift(2,a),c.write_shift(2,l),t.push(n.slice(u,u+l)),u+=l;u<i;){for(c=t.next(4),c.write_shift(2,60),l=0;l+(o[s]||8224)<=8224;)l+=o[s]||8224,s++;c.write_shift(2,l),t.push(n.slice(u,u+l)),u+=l}}}function Ef(t,e,n){return t||(t=ce(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function uL(t,e,n,r){var i=ce(9);return Ef(i,t,e),jC(n,r||"b",i),i}function lL(t,e,n){var r=ce(8+2*n.length);return Ef(r,t,e),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function cL(t,e,n,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Dr(mr(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?Se(t,2,SD(n,r,i)):Se(t,3,ED(n,r,i));return;case"b":case"e":Se(t,5,uL(n,r,e.v,e.t));return;case"s":case"str":Se(t,4,lL(n,r,(e.v||"").slice(0,255)));return}Se(t,1,Ef(null,n,r))}function fL(t,e,n,r){var i=Array.isArray(e),a=Ft(e["!ref"]||"A1"),o,s="",u=[];if(a.e.c>255||a.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),o=an(a)}for(var l=a.s.r;l<=a.e.r;++l){s=jn(l);for(var c=a.s.c;c<=a.e.c;++c){l===a.s.r&&(u[c]=rr(c)),o=u[c]+s;var f=i?(e[l]||[])[c]:e[o];f&&cL(t,f,l,c)}}}function hL(t,e){for(var n=e||{},r=Rr(),i=0,a=0;a<t.SheetNames.length;++a)t.SheetNames[a]==n.sheet&&(i=a);if(i==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return Se(r,n.biff==4?1033:n.biff==3?521:9,N1(t,16,n)),fL(r,t.Sheets[t.SheetNames[i]],i,n),Se(r,10),r.end()}function dL(t,e,n){Se(t,49,oD({sz:12,name:"Arial"},n))}function pL(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&Se(t,1054,lD(i,e[i],n))})}function vL(t,e){var n=ce(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),Se(t,2151,n),n=ce(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),KC(Ft(e["!ref"]||"A1"),n),n.write_shift(4,4),Se(t,2152,n)}function mL(t,e){for(var n=0;n<16;++n)Se(t,224,ew({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){Se(t,224,ew(r,0,e))})}function gL(t,e){for(var n=0;n<e["!links"].length;++n){var r=e["!links"][n];Se(t,440,gD(r)),r[1].Tooltip&&Se(t,2048,xD(r))}delete e["!links"]}function xL(t,e){if(e){var n=0;e.forEach(function(r,i){++n<=256&&r&&Se(t,125,_D(Jp(i,r),i))})}}function yL(t,e,n,r,i){var a=16+Yo(i.cellXfs,e,i);if(e.v==null&&!e.bf){Se(t,513,Ws(n,r,a));return}if(e.bf)Se(t,6,HP(e,n,r,i,a));else switch(e.t){case"d":case"n":var o=e.t=="d"?Dr(mr(e.v)):e.v;Se(t,515,dD(n,r,o,a));break;case"b":case"e":Se(t,517,hD(n,r,e.v,a,i,e.t));break;case"s":case"str":if(i.bookSST){var s=z1(i.Strings,e.v,i.revStrings);Se(t,253,sD(n,r,s,a))}else Se(t,516,uD(n,r,(e.v||"").slice(0,255),a,i));break;default:Se(t,513,Ws(n,r,a))}}function wL(t,e,n){var r=Rr(),i=n.SheetNames[t],a=n.Sheets[i]||{},o=(n||{}).Workbook||{},s=(o.Sheets||[])[t]||{},u=Array.isArray(a),l=e.biff==8,c,f="",h=[],d=Ft(a["!ref"]||"A1"),v=l?65536:16384;if(d.e.c>255||d.e.r>=v){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");d.e.c=Math.min(d.e.c,255),d.e.r=Math.min(d.e.c,v-1)}Se(r,2057,N1(n,16,e)),Se(r,13,li(1)),Se(r,12,li(100)),Se(r,15,pr(!0)),Se(r,17,pr(!1)),Se(r,16,Bs(.001)),Se(r,95,pr(!0)),Se(r,42,pr(!1)),Se(r,43,pr(!1)),Se(r,130,li(1)),Se(r,128,fD()),Se(r,131,pr(!1)),Se(r,132,pr(!1)),l&&xL(r,a["!cols"]),Se(r,512,cD(d,e)),l&&(a["!links"]=[]);for(var p=d.s.r;p<=d.e.r;++p){f=jn(p);for(var m=d.s.c;m<=d.e.c;++m){p===d.s.r&&(h[m]=rr(m)),c=h[m]+f;var g=u?(a[p]||[])[m]:a[c];g&&(yL(r,g,p,m,e),l&&g.l&&a["!links"].push([c,g.l]))}}var x=s.CodeName||s.name||i;return l&&Se(r,574,aD((o.Views||[])[0])),l&&(a["!merges"]||[]).length&&Se(r,229,mD(a["!merges"])),l&&gL(r,a),Se(r,442,XC(x)),l&&vL(r,a),Se(r,10),r.end()}function _L(t,e,n){var r=Rr(),i=(t||{}).Workbook||{},a=i.Sheets||[],o=i.WBProps||{},s=n.biff==8,u=n.biff==5;if(Se(r,2057,N1(t,5,n)),n.bookType=="xla"&&Se(r,135),Se(r,225,s?li(1200):null),Se(r,193,GF(2)),u&&Se(r,191),u&&Se(r,192),Se(r,226),Se(r,92,tD("SheetJS",n)),Se(r,66,li(s?1200:1252)),s&&Se(r,353,li(0)),s&&Se(r,448),Se(r,317,bD(t.SheetNames.length)),s&&t.vbaraw&&Se(r,211),s&&t.vbaraw){var l=o.CodeName||"ThisWorkbook";Se(r,442,XC(l))}Se(r,156,li(17)),Se(r,25,pr(!1)),Se(r,18,pr(!1)),Se(r,19,li(0)),s&&Se(r,431,pr(!1)),s&&Se(r,444,li(0)),Se(r,61,iD()),Se(r,64,pr(!1)),Se(r,141,li(0)),Se(r,34,pr(TM(t)=="true")),Se(r,14,pr(!0)),s&&Se(r,439,pr(!1)),Se(r,218,li(0)),dL(r,t,n),pL(r,t.SSF,n),mL(r,n),s&&Se(r,352,pr(!1));var c=r.end(),f=Rr();s&&Se(f,140,yD()),s&&n.Strings&&sL(f,252,rD(n.Strings)),Se(f,10);var h=f.end(),d=Rr(),v=0,p=0;for(p=0;p<t.SheetNames.length;++p)v+=(s?12:11)+(s?2:1)*t.SheetNames[p].length;var m=c.length+v+h.length;for(p=0;p<t.SheetNames.length;++p){var g=a[p]||{};Se(d,133,nD({pos:m,hs:g.Hidden||0,dt:0,name:t.SheetNames[p]},n)),m+=e[p].length}var x=d.end();if(v!=x.length)throw new Error("BS8 "+v+" != "+x.length);var y=[];return c.length&&y.push(c),x.length&&y.push(x),h.length&&y.push(h),Vn(y)}function bL(t,e){var n=e||{},r=[];t&&!t.SSF&&(t.SSF=Or(Gt)),t&&t.SSF&&(Xp(),Gp(t.SSF),n.revssf=Kp(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,U1(n),n.cellXfs=[],Yo(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)r[r.length]=wL(i,n,t);return r.unshift(_L(t,r,n)),Vn(r)}function wT(t,e){for(var n=0;n<=t.SheetNames.length;++n){var r=t.Sheets[t.SheetNames[n]];if(!(!r||!r["!ref"])){var i=ni(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var a=e||{};switch(a.biff||2){case 8:case 5:return bL(t,e);case 4:case 3:case 2:return hL(t,e)}throw new Error("invalid type "+a.bookType+" for BIFF")}function EL(t,e,n,r){for(var i=t["!merges"]||[],a=[],o=e.s.c;o<=e.e.c;++o){for(var s=0,u=0,l=0;l<i.length;++l)if(!(i[l].s.r>n||i[l].s.c>o)&&!(i[l].e.r<n||i[l].e.c<o)){if(i[l].s.r<n||i[l].s.c<o){s=-1;break}s=i[l].e.r-i[l].s.r+1,u=i[l].e.c-i[l].s.c+1;break}if(!(s<0)){var c=_t({r:n,c:o}),f=r.dense?(t[n]||[])[o]:t[c],h=f&&f.v!=null&&(f.h||eF(f.w||(Xa(f),f.w)||""))||"",d={};s>1&&(d.rowspan=s),u>1&&(d.colspan=u),r.editable?h='<span contenteditable="true">'+h+"</span>":f&&(d["data-t"]=f&&f.t||"z",f.v!=null&&(d["data-v"]=f.v),f.z!=null&&(d["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),d.id=(r.id||"sjs")+"-"+c,a.push(Ee("td",h,d))}}var v="<tr>";return v+a.join("")+"</tr>"}var SL='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',CL="</body></html>";function TL(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function _T(t,e){var n=e||{},r=n.header!=null?n.header:SL,i=n.footer!=null?n.footer:CL,a=[r],o=ni(t["!ref"]);n.dense=Array.isArray(t),a.push(TL(t,o,n));for(var s=o.s.r;s<=o.e.r;++s)a.push(EL(t,o,s,n));return a.push("</table>"+i),a.join("")}function bT(t,e,n){var r=n||{},i=0,a=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var o=typeof r.origin=="string"?In(r.origin):r.origin;i=o.r,a=o.c}var s=e.getElementsByTagName("tr"),u=Math.min(r.sheetRows||1e7,s.length),l={s:{r:0,c:0},e:{r:i,c:a}};if(t["!ref"]){var c=ni(t["!ref"]);l.s.r=Math.min(l.s.r,c.s.r),l.s.c=Math.min(l.s.c,c.s.c),l.e.r=Math.max(l.e.r,c.e.r),l.e.c=Math.max(l.e.c,c.e.c),i==-1&&(l.e.r=i=c.e.r+1)}var f=[],h=0,d=t["!rows"]||(t["!rows"]=[]),v=0,p=0,m=0,g=0,x=0,y=0;for(t["!cols"]||(t["!cols"]=[]);v<s.length&&p<u;++v){var w=s[v];if(sw(w)){if(r.display)continue;d[p]={hidden:!0}}var _=w.children;for(m=g=0;m<_.length;++m){var b=_[m];if(!(r.display&&sw(b))){var E=b.hasAttribute("data-v")?b.getAttribute("data-v"):b.hasAttribute("v")?b.getAttribute("v"):iF(b.innerHTML),S=b.getAttribute("data-z")||b.getAttribute("z");for(h=0;h<f.length;++h){var C=f[h];C.s.c==g+a&&C.s.r<p+i&&p+i<=C.e.r&&(g=C.e.c+1-a,h=-1)}y=+b.getAttribute("colspan")||1,((x=+b.getAttribute("rowspan")||1)>1||y>1)&&f.push({s:{r:p+i,c:g+a},e:{r:p+i+(x||1)-1,c:g+a+(y||1)-1}});var T={t:"s",v:E},A=b.getAttribute("data-t")||b.getAttribute("t")||"";E!=null&&(E.length==0?T.t=A||"z":r.raw||E.trim().length==0||A=="s"||(E==="TRUE"?T={t:"b",v:!0}:E==="FALSE"?T={t:"b",v:!1}:isNaN(za(E))?isNaN(Gc(E).getDate())||(T={t:"d",v:mr(E)},r.cellDates||(T={t:"n",v:Dr(T.v)}),T.z=r.dateNF||Gt[14]):T={t:"n",v:za(E)})),T.z===void 0&&S!=null&&(T.z=S);var I="",V=b.getElementsByTagName("A");if(V&&V.length)for(var J=0;J<V.length&&!(V[J].hasAttribute("href")&&(I=V[J].getAttribute("href"),I.charAt(0)!="#"));++J);I&&I.charAt(0)!="#"&&(T.l={Target:I}),r.dense?(t[p+i]||(t[p+i]=[]),t[p+i][g+a]=T):t[_t({c:g+a,r:p+i})]=T,l.e.c<g+a&&(l.e.c=g+a),g+=y}}++p}return f.length&&(t["!merges"]=(t["!merges"]||[]).concat(f)),l.e.r=Math.max(l.e.r,p-1+i),t["!ref"]=an(l),p>=u&&(t["!fullref"]=an((l.e.r=s.length-v+p-1+i,l))),t}function ET(t,e){var n=e||{},r=n.dense?[]:{};return bT(r,t,e)}function kL(t,e){return js(ET(t,e),e)}function sw(t){var e="",n=AL(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function AL(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var IL=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Kc({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return on+e}}(),uw=function(){var t=function(a){return yt(a).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,r=function(a,o,s){var u=[];u.push('      <table:table table:name="'+yt(o.SheetNames[s])+`" table:style-name="ta1">
`);var l=0,c=0,f=ni(a["!ref"]||"A1"),h=a["!merges"]||[],d=0,v=Array.isArray(a);if(a["!cols"])for(c=0;c<=f.e.c;++c)u.push("        <table:table-column"+(a["!cols"][c]?' table:style-name="co'+a["!cols"][c].ods+'"':"")+`></table:table-column>
`);var p="",m=a["!rows"]||[];for(l=0;l<f.s.r;++l)p=m[l]?' table:style-name="ro'+m[l].ods+'"':"",u.push("        <table:table-row"+p+`></table:table-row>
`);for(;l<=f.e.r;++l){for(p=m[l]?' table:style-name="ro'+m[l].ods+'"':"",u.push("        <table:table-row"+p+`>
`),c=0;c<f.s.c;++c)u.push(e);for(;c<=f.e.c;++c){var g=!1,x={},y="";for(d=0;d!=h.length;++d)if(!(h[d].s.c>c)&&!(h[d].s.r>l)&&!(h[d].e.c<c)&&!(h[d].e.r<l)){(h[d].s.c!=c||h[d].s.r!=l)&&(g=!0),x["table:number-columns-spanned"]=h[d].e.c-h[d].s.c+1,x["table:number-rows-spanned"]=h[d].e.r-h[d].s.r+1;break}if(g){u.push(n);continue}var w=_t({r:l,c}),_=v?(a[l]||[])[c]:a[w];if(_&&_.f&&(x["table:formula"]=yt(qP(_.f)),_.F&&_.F.slice(0,w.length)==w)){var b=ni(_.F);x["table:number-matrix-columns-spanned"]=b.e.c-b.s.c+1,x["table:number-matrix-rows-spanned"]=b.e.r-b.s.r+1}if(!_){u.push(e);continue}switch(_.t){case"b":y=_.v?"TRUE":"FALSE",x["office:value-type"]="boolean",x["office:boolean-value"]=_.v?"true":"false";break;case"n":y=_.w||String(_.v||0),x["office:value-type"]="float",x["office:value"]=_.v||0;break;case"s":case"str":y=_.v==null?"":_.v,x["office:value-type"]="string";break;case"d":y=_.w||mr(_.v).toISOString(),x["office:value-type"]="date",x["office:date-value"]=mr(_.v).toISOString(),x["table:style-name"]="ce1";break;default:u.push(e);continue}var E=t(y);if(_.l&&_.l.Target){var S=_.l.Target;S=S.charAt(0)=="#"?"#"+YP(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),E=Ee("text:a",E,{"xlink:href":S.replace(/&/g,"&amp;")})}u.push("          "+Ee("table:table-cell",Ee("text:p",E,{}),x)+`
`)}u.push(`        </table:table-row>
`)}return u.push(`      </table:table>
`),u.join("")},i=function(a,o){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var s=0;o.SheetNames.map(function(l){return o.Sheets[l]}).forEach(function(l){if(l&&l["!cols"]){for(var c=0;c<l["!cols"].length;++c)if(l["!cols"][c]){var f=l["!cols"][c];if(f.width==null&&f.wpx==null&&f.wch==null)continue;M1(f),f.ods=s;var h=l["!cols"][c].wpx+"px";a.push('  <style:style style:name="co'+s+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),a.push(`  </style:style>
`),++s}}});var u=0;o.SheetNames.map(function(l){return o.Sheets[l]}).forEach(function(l){if(l&&l["!rows"]){for(var c=0;c<l["!rows"].length;++c)if(l["!rows"][c]){l["!rows"][c].ods=u;var f=l["!rows"][c].hpx+"px";a.push('  <style:style style:name="ro'+u+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),a.push(`  </style:style>
`),++u}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(o,s){var u=[on],l=Kc({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),c=Kc({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});s.bookType=="fods"?(u.push("<office:document"+l+c+`>
`),u.push(BC().replace(/office:document-meta/g,"office:meta"))):u.push("<office:document-content"+l+`>
`),i(u,o),u.push(`  <office:body>
`),u.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)u.push(r(o.Sheets[o.SheetNames[f]],o,f));return u.push(`    </office:spreadsheet>
`),u.push(`  </office:body>
`),s.bookType=="fods"?u.push("</office:document>"):u.push("</office:document-content>"),u.join("")}}();function ST(t,e){if(e.bookType=="fods")return uw(t,e);var n=C1(),r="",i=[],a=[];return r="mimetype",tt(n,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",tt(n,r,uw(t,e)),i.push([r,"text/xml"]),a.push([r,"ContentFile"]),r="styles.xml",tt(n,r,IL(t,e)),i.push([r,"text/xml"]),a.push([r,"StylesFile"]),r="meta.xml",tt(n,r,on+BC()),i.push([r,"text/xml"]),a.push([r,"MetadataFile"]),r="manifest.rdf",tt(n,r,UF(a)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",tt(n,r,WF(i)),n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Jd(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function RL(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Fi(Xc(t))}function FL(t,e){e:for(var n=0;n<=t.length-e.length;++n){for(var r=0;r<e.length;++r)if(t[n+r]!=e[r])continue e;return!0}return!1}function Ho(t){var e=t.reduce(function(i,a){return i+a.length},0),n=new Uint8Array(e),r=0;return t.forEach(function(i){n.set(i,r),r+=i.length}),n}function DL(t,e,n){var r=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,i=n/Math.pow(10,r-6176);t[e+15]|=r>>7,t[e+14]|=(r&127)<<1;for(var a=0;i>=1;++a,i/=256)t[e+a]=i&255;t[e+15]|=n>=0?0:128}function qc(t,e){var n=e?e[0]:0,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e&&(e[0]=n),r}function mt(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e.slice(0,n)}function Vu(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function hn(t){for(var e=[],n=[0];n[0]<t.length;){var r=n[0],i=qc(t,n),a=i&7;i=Math.floor(i/8);var o=0,s;if(i==0)break;switch(a){case 0:{for(var u=n[0];t[n[0]++]>=128;);s=t.slice(u,n[0])}break;case 5:o=4,s=t.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,s=t.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=qc(t,n),s=t.slice(n[0],n[0]+o),n[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(i," at offset ").concat(r))}var l={data:s,type:a};e[i]==null?e[i]=[l]:e[i].push(l)}return e}function Mn(t){var e=[];return t.forEach(function(n,r){n.forEach(function(i){i.data&&(e.push(mt(r*8+i.type)),i.type==2&&e.push(mt(i.data.length)),e.push(i.data))})}),Ho(e)}function Ci(t){for(var e,n=[],r=[0];r[0]<t.length;){var i=qc(t,r),a=hn(t.slice(r[0],r[0]+i));r[0]+=i;var o={id:Vu(a[1][0].data),messages:[]};a[2].forEach(function(s){var u=hn(s.data),l=Vu(u[3][0].data);o.messages.push({meta:u,data:t.slice(r[0],r[0]+l)}),r[0]+=l}),(e=a[3])!=null&&e[0]&&(o.merge=Vu(a[3][0].data)>>>0>0),n.push(o)}return n}function uu(t){var e=[];return t.forEach(function(n){var r=[];r[1]=[{data:mt(n.id),type:0}],r[2]=[],n.merge!=null&&(r[3]=[{data:mt(+!!n.merge),type:0}]);var i=[];n.messages.forEach(function(o){i.push(o.data),o.meta[3]=[{type:0,data:mt(o.data.length)}],r[2].push({data:Mn(o.meta),type:2})});var a=Mn(r);e.push(mt(a.length)),e.push(a),i.forEach(function(o){return e.push(o)})}),Ho(e)}function OL(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n=[0],r=qc(e,n),i=[];n[0]<e.length;){var a=e[n[0]]&3;if(a==0){var o=e[n[0]++]>>2;if(o<60)++o;else{var s=o-59;o=e[n[0]],s>1&&(o|=e[n[0]+1]<<8),s>2&&(o|=e[n[0]+2]<<16),s>3&&(o|=e[n[0]+3]<<24),o>>>=0,o++,n[0]+=s}i.push(e.slice(n[0],n[0]+o)),n[0]+=o;continue}else{var u=0,l=0;if(a==1?(l=(e[n[0]]>>2&7)+4,u=(e[n[0]++]&224)<<3,u|=e[n[0]++]):(l=(e[n[0]++]>>2)+1,a==2?(u=e[n[0]]|e[n[0]+1]<<8,n[0]+=2):(u=(e[n[0]]|e[n[0]+1]<<8|e[n[0]+2]<<16|e[n[0]+3]<<24)>>>0,n[0]+=4)),i=[Ho(i)],u==0)throw new Error("Invalid offset 0");if(u>i[0].length)throw new Error("Invalid offset beyond length");if(l>=u)for(i.push(i[0].slice(-u)),l-=u;l>=i[i.length-1].length;)i.push(i[i.length-1]),l-=i[i.length-1].length;i.push(i[0].slice(-u,-u+l))}}var c=Ho(i);if(c.length!=r)throw new Error("Unexpected length: ".concat(c.length," != ").concat(r));return c}function Ti(t){for(var e=[],n=0;n<t.length;){var r=t[n++],i=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push(OL(r,t.slice(n,n+i))),n+=i}if(n!==t.length)throw new Error("data is not a valid framed stream!");return Ho(e)}function lu(t){for(var e=[],n=0;n<t.length;){var r=Math.min(t.length-n,268435455),i=new Uint8Array(4);e.push(i);var a=mt(r),o=a.length;e.push(a),r<=60?(o++,e.push(new Uint8Array([r-1<<2]))):r<=256?(o+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(o+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(o+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(o+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(t.slice(n,n+r)),o+=r,i[0]=0,i[1]=o&255,i[2]=o>>8&255,i[3]=o>>16&255,n+=r}return Ho(e)}function ov(t,e){var n=new Uint8Array(32),r=Jd(n),i=12,a=0;switch(n[0]=5,t.t){case"n":n[1]=2,DL(n,i,t.v),a|=1,i+=16;break;case"b":n[1]=6,r.setFloat64(i,t.v?1:0,!0),a|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[1]=3,r.setUint32(i,e.indexOf(t.v),!0),a|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,a,!0),n.slice(0,i)}function sv(t,e){var n=new Uint8Array(32),r=Jd(n),i=12,a=0;switch(n[0]=3,t.t){case"n":n[2]=2,r.setFloat64(i,t.v,!0),a|=32,i+=8;break;case"b":n[2]=6,r.setFloat64(i,t.v?1:0,!0),a|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[2]=3,r.setUint32(i,e.indexOf(t.v),!0),a|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,a,!0),n.slice(0,i)}function so(t){var e=hn(t);return qc(e[1][0].data)}function PL(t,e,n){var r,i,a,o;if(!((r=t[6])!=null&&r[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var s=((o=(a=t[8])==null?void 0:a[0])==null?void 0:o.data)&&Vu(t[8][0].data)>0||!1;if(s)throw"Math only works with normal offsets";for(var u=0,l=Jd(t[7][0].data),c=0,f=[],h=Jd(t[4][0].data),d=0,v=[],p=0;p<e.length;++p){if(e[p]==null){l.setUint16(p*2,65535,!0),h.setUint16(p*2,65535);continue}l.setUint16(p*2,c,!0),h.setUint16(p*2,d,!0);var m,g;switch(typeof e[p]){case"string":m=ov({t:"s",v:e[p]},n),g=sv({t:"s",v:e[p]},n);break;case"number":m=ov({t:"n",v:e[p]},n),g=sv({t:"n",v:e[p]},n);break;case"boolean":m=ov({t:"b",v:e[p]},n),g=sv({t:"b",v:e[p]},n);break;default:throw new Error("Unsupported value "+e[p])}f.push(m),c+=m.length,v.push(g),d+=g.length,++u}for(t[2][0].data=mt(u);p<t[7][0].data.length/2;++p)l.setUint16(p*2,65535,!0),h.setUint16(p*2,65535,!0);return t[6][0].data=Ho(f),t[3][0].data=Ho(v),u}function NL(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=ni(n["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(an(r)));var a=Zd(n,{range:r,header:1}),o=["~Sh33tJ5~"];a.forEach(function(j){return j.forEach(function(U){typeof U=="string"&&o.push(U)})});var s={},u=[],l=bt.read(e.numbers,{type:"base64"});l.FileIndex.map(function(j,U){return[j,l.FullPaths[U]]}).forEach(function(j){var U=j[0],z=j[1];if(U.type==2&&U.name.match(/\.iwa/)){var Z=U.content,xe=Ti(Z),we=Ci(xe);we.forEach(function(ee){u.push(ee.id),s[ee.id]={deps:[],location:z,type:Vu(ee.messages[0].meta[1][0].data)}})}}),u.sort(function(j,U){return j-U});var c=u.filter(function(j){return j>1}).map(function(j){return[j,mt(j)]});l.FileIndex.map(function(j,U){return[j,l.FullPaths[U]]}).forEach(function(j){var U=j[0];if(j[1],!!U.name.match(/\.iwa/)){var z=Ci(Ti(U.content));z.forEach(function(Z){Z.messages.forEach(function(xe){c.forEach(function(we){Z.messages.some(function(ee){return Vu(ee.meta[1][0].data)!=11006&&FL(ee.data,we[1])})&&s[we[0]].deps.push(Z.id)})})})}});for(var f=bt.find(l,s[1].location),h=Ci(Ti(f.content)),d,v=0;v<h.length;++v){var p=h[v];p.id==1&&(d=p)}var m=so(hn(d.messages[0].data)[1][0].data);for(f=bt.find(l,s[m].location),h=Ci(Ti(f.content)),v=0;v<h.length;++v)p=h[v],p.id==m&&(d=p);for(m=so(hn(d.messages[0].data)[2][0].data),f=bt.find(l,s[m].location),h=Ci(Ti(f.content)),v=0;v<h.length;++v)p=h[v],p.id==m&&(d=p);for(m=so(hn(d.messages[0].data)[2][0].data),f=bt.find(l,s[m].location),h=Ci(Ti(f.content)),v=0;v<h.length;++v)p=h[v],p.id==m&&(d=p);var g=hn(d.messages[0].data);{g[6][0].data=mt(r.e.r+1),g[7][0].data=mt(r.e.c+1);var x=so(g[46][0].data),y=bt.find(l,s[x].location),w=Ci(Ti(y.content));{for(var _=0;_<w.length&&w[_].id!=x;++_);if(w[_].id!=x)throw"Bad ColumnRowUIDMapArchive";var b=hn(w[_].messages[0].data);b[1]=[],b[2]=[],b[3]=[];for(var E=0;E<=r.e.c;++E){var S=[];S[1]=S[2]=[{type:0,data:mt(E+420690)}],b[1].push({type:2,data:Mn(S)}),b[2].push({type:0,data:mt(E)}),b[3].push({type:0,data:mt(E)})}b[4]=[],b[5]=[],b[6]=[];for(var C=0;C<=r.e.r;++C)S=[],S[1]=S[2]=[{type:0,data:mt(C+726270)}],b[4].push({type:2,data:Mn(S)}),b[5].push({type:0,data:mt(C)}),b[6].push({type:0,data:mt(C)});w[_].messages[0].data=Mn(b)}y.content=lu(uu(w)),y.size=y.content.length,delete g[46];var T=hn(g[4][0].data);{T[7][0].data=mt(r.e.r+1);var A=hn(T[1][0].data),I=so(A[2][0].data);y=bt.find(l,s[I].location),w=Ci(Ti(y.content));{if(w[0].id!=I)throw"Bad HeaderStorageBucket";var V=hn(w[0].messages[0].data);for(C=0;C<a.length;++C){var J=hn(V[2][0].data);J[1][0].data=mt(C),J[4][0].data=mt(a[C].length),V[2][C]={type:V[2][0].type,data:Mn(J)}}w[0].messages[0].data=Mn(V)}y.content=lu(uu(w)),y.size=y.content.length;var K=so(T[2][0].data);y=bt.find(l,s[K].location),w=Ci(Ti(y.content));{if(w[0].id!=K)throw"Bad HeaderStorageBucket";for(V=hn(w[0].messages[0].data),E=0;E<=r.e.c;++E)J=hn(V[2][0].data),J[1][0].data=mt(E),J[4][0].data=mt(r.e.r+1),V[2][E]={type:V[2][0].type,data:Mn(J)};w[0].messages[0].data=Mn(V)}y.content=lu(uu(w)),y.size=y.content.length;var ae=so(T[4][0].data);(function(){for(var j=bt.find(l,s[ae].location),U=Ci(Ti(j.content)),z,Z=0;Z<U.length;++Z){var xe=U[Z];xe.id==ae&&(z=xe)}var we=hn(z.messages[0].data);{we[3]=[];var ee=[];o.forEach(function(Re,He){ee[1]=[{type:0,data:mt(He)}],ee[2]=[{type:0,data:mt(1)}],ee[3]=[{type:2,data:RL(Re)}],we[3].push({type:2,data:Mn(ee)})})}z.messages[0].data=Mn(we);var de=uu(U),Fe=lu(de);j.content=Fe,j.size=j.content.length})();var ie=hn(T[3][0].data);{var G=ie[1][0];delete ie[2];var Q=hn(G.data);{var te=so(Q[2][0].data);(function(){for(var j=bt.find(l,s[te].location),U=Ci(Ti(j.content)),z,Z=0;Z<U.length;++Z){var xe=U[Z];xe.id==te&&(z=xe)}var we=hn(z.messages[0].data);{delete we[6],delete ie[7];var ee=new Uint8Array(we[5][0].data);we[5]=[];for(var de=0,Fe=0;Fe<=r.e.r;++Fe){var Re=hn(ee);de+=PL(Re,a[Fe],o),Re[1][0].data=mt(Fe),we[5].push({data:Mn(Re),type:2})}we[1]=[{type:0,data:mt(r.e.c+1)}],we[2]=[{type:0,data:mt(r.e.r+1)}],we[3]=[{type:0,data:mt(de)}],we[4]=[{type:0,data:mt(r.e.r+1)}]}z.messages[0].data=Mn(we);var He=uu(U),Ve=lu(He);j.content=Ve,j.size=j.content.length})()}G.data=Mn(Q)}T[3][0].data=Mn(ie)}g[4][0].data=Mn(T)}d.messages[0].data=Mn(g);var pe=uu(h),P=lu(pe);return f.content=P,f.size=f.content.length,l}function ML(t){return function(n){for(var r=0;r!=t.length;++r){var i=t[r];n[i[0]]===void 0&&(n[i[0]]=i[1]),i[2]==="n"&&(n[i[0]]=Number(n[i[0]]))}}}function U1(t){ML([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function LL(t,e){return e.bookType=="ods"?ST(t,e):e.bookType=="numbers"?NL(t,e):e.bookType=="xlsb"?BL(t,e):WL(t,e)}function BL(t,e){Du=1024,t&&!t.SSF&&(t.SSF=Or(Gt)),t&&t.SSF&&(Xp(),Gp(t.SSF),e.revssf=Kp(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,yc?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n=e.bookType=="xlsb"?"bin":"xml",r=oT.indexOf(e.bookType)>-1,i=NC();U1(e=e||{});var a=C1(),o="",s=0;if(e.cellXfs=[],Yo(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",tt(a,o,WC(t.Props,e)),i.coreprops.push(o),gt(e.rels,2,o,lt.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var u=[],l=0;l<t.SheetNames.length;++l)(t.Workbook.Sheets[l]||{}).Hidden!=2&&u.push(t.SheetNames[l]);t.Props.SheetNames=u}for(t.Props.Worksheets=t.Props.SheetNames.length,tt(a,o,UC(t.Props)),i.extprops.push(o),gt(e.rels,3,o,lt.EXT_PROPS),t.Custprops!==t.Props&&Xn(t.Custprops||{}).length>0&&(o="docProps/custom.xml",tt(a,o,VC(t.Custprops)),i.custprops.push(o),gt(e.rels,4,o,lt.CUST_PROPS)),s=1;s<=t.SheetNames.length;++s){var c={"!id":{}},f=t.Sheets[t.SheetNames[s-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+s+"."+n,tt(a,o,UM(s-1,o,e,t,c)),i.sheets.push(o),gt(e.wbrels,-1,"worksheets/sheet"+s+"."+n,lt.WS[0])}if(f){var d=f["!comments"],v=!1,p="";d&&d.length>0&&(p="xl/comments"+s+"."+n,tt(a,p,$M(d,p)),i.comments.push(p),gt(c,-1,"../comments"+s+"."+n,lt.CMNT),v=!0),f["!legacy"]&&v&&tt(a,"xl/drawings/vmlDrawing"+s+".vml",iT(s,f["!comments"])),delete f["!comments"],delete f["!legacy"]}c["!id"].rId1&&tt(a,LC(o),zu(c))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,tt(a,o,HM(e.Strings,o,e)),i.strs.push(o),gt(e.wbrels,-1,"sharedStrings."+n,lt.SST)),o="xl/workbook."+n,tt(a,o,zM(t,o)),i.workbooks.push(o),gt(e.rels,1,o,lt.WB),o="xl/theme/theme1.xml",tt(a,o,nT(t.Themes,e)),i.themes.push(o),gt(e.wbrels,-1,"theme/theme1.xml",lt.THEME),o="xl/styles."+n,tt(a,o,VM(t,o,e)),i.styles.push(o),gt(e.wbrels,-1,"styles."+n,lt.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",tt(a,o,t.vbaraw),i.vba.push(o),gt(e.wbrels,-1,"vbaProject.bin",lt.VBA)),o="xl/metadata."+n,tt(a,o,jM(o)),i.metadata.push(o),gt(e.wbrels,-1,"metadata."+n,lt.XLMETA),tt(a,"[Content_Types].xml",MC(i,e)),tt(a,"_rels/.rels",zu(e.rels)),tt(a,"xl/_rels/workbook."+n+".rels",zu(e.wbrels)),delete e.revssf,delete e.ssf,a}function WL(t,e){Du=1024,t&&!t.SSF&&(t.SSF=Or(Gt)),t&&t.SSF&&(Xp(),Gp(t.SSF),e.revssf=Kp(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,yc?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",r=oT.indexOf(e.bookType)>-1,i=NC();U1(e=e||{});var a=C1(),o="",s=0;if(e.cellXfs=[],Yo(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",tt(a,o,WC(t.Props,e)),i.coreprops.push(o),gt(e.rels,2,o,lt.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var u=[],l=0;l<t.SheetNames.length;++l)(t.Workbook.Sheets[l]||{}).Hidden!=2&&u.push(t.SheetNames[l]);t.Props.SheetNames=u}t.Props.Worksheets=t.Props.SheetNames.length,tt(a,o,UC(t.Props)),i.extprops.push(o),gt(e.rels,3,o,lt.EXT_PROPS),t.Custprops!==t.Props&&Xn(t.Custprops||{}).length>0&&(o="docProps/custom.xml",tt(a,o,VC(t.Custprops)),i.custprops.push(o),gt(e.rels,4,o,lt.CUST_PROPS));var c=["SheetJ5"];for(e.tcid=0,s=1;s<=t.SheetNames.length;++s){var f={"!id":{}},h=t.Sheets[t.SheetNames[s-1]],d=(h||{})["!type"]||"sheet";switch(d){case"chart":default:o="xl/worksheets/sheet"+s+"."+n,tt(a,o,vT(s-1,e,t,f)),i.sheets.push(o),gt(e.wbrels,-1,"worksheets/sheet"+s+"."+n,lt.WS[0])}if(h){var v=h["!comments"],p=!1,m="";if(v&&v.length>0){var g=!1;v.forEach(function(x){x[1].forEach(function(y){y.T==!0&&(g=!0)})}),g&&(m="xl/threadedComments/threadedComment"+s+"."+n,tt(a,m,mO(v,c,e)),i.threadedcomments.push(m),gt(f,-1,"../threadedComments/threadedComment"+s+"."+n,lt.TCMNT)),m="xl/comments"+s+"."+n,tt(a,m,aT(v)),i.comments.push(m),gt(f,-1,"../comments"+s+"."+n,lt.CMNT),p=!0}h["!legacy"]&&p&&tt(a,"xl/drawings/vmlDrawing"+s+".vml",iT(s,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&tt(a,LC(o),zu(f))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,tt(a,o,YC(e.Strings,e)),i.strs.push(o),gt(e.wbrels,-1,"sharedStrings."+n,lt.SST)),o="xl/workbook."+n,tt(a,o,xT(t)),i.workbooks.push(o),gt(e.rels,1,o,lt.WB),o="xl/theme/theme1.xml",tt(a,o,nT(t.Themes,e)),i.themes.push(o),gt(e.wbrels,-1,"theme/theme1.xml",lt.THEME),o="xl/styles."+n,tt(a,o,eT(t,e)),i.styles.push(o),gt(e.wbrels,-1,"styles."+n,lt.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",tt(a,o,t.vbaraw),i.vba.push(o),gt(e.wbrels,-1,"vbaProject.bin",lt.VBA)),o="xl/metadata."+n,tt(a,o,rT()),i.metadata.push(o),gt(e.wbrels,-1,"metadata."+n,lt.XLMETA),c.length>1&&(o="xl/persons/person.xml",tt(a,o,gO(c)),i.people.push(o),gt(e.wbrels,-1,"persons/person.xml",lt.PEOPLE)),tt(a,"[Content_Types].xml",MC(i,e)),tt(a,"_rels/.rels",zu(e.rels)),tt(a,"xl/_rels/workbook."+n+".rels",zu(e.wbrels)),delete e.revssf,delete e.ssf,a}function zL(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=Ga(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function CT(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return yf(e.file,bt.write(t,{type:ft?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return bt.write(t,e)}function UL(t,e){var n=Or(e||{}),r=LL(t,n);return VL(r,n)}function VL(t,e){var n={},r=ft?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=r;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?bt.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(jp(i))}return e.password&&typeof encrypt_agile<"u"?CT(encrypt_agile(i,e.password),e):e.type==="file"?yf(e.file,i):e.type=="string"?vc(i):i}function HL(t,e){var n=e||{},r=aL(t,n);return CT(r,n)}function Yi(t,e,n){n||(n="");var r=n+t;switch(e.type){case"base64":return jc(Xc(r));case"binary":return Xc(r);case"string":return t;case"file":return yf(e.file,r,"utf8");case"buffer":return ft?Ya(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):Yi(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function $L(t,e){switch(e.type){case"base64":return jc(t);case"binary":return t;case"string":return t;case"file":return yf(e.file,t,"binary");case"buffer":return ft?Ya(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function yh(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return e.type=="base64"?jc(n):e.type=="string"?vc(n):n;case"file":return yf(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function TT(t,e){xR(),IM(t);var n=Or(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var r=TT(t,n);return n.type="array",jp(r)}var i=0;if(n.sheet&&(typeof n.sheet=="number"?i=n.sheet:i=t.SheetNames.indexOf(n.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return Yi(rL(t,n),n);case"slk":case"sylk":return Yi(TD.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"htm":case"html":return Yi(_T(t.Sheets[t.SheetNames[i]],n),n);case"txt":return $L(kT(t.Sheets[t.SheetNames[i]],n),n);case"csv":return Yi(V1(t.Sheets[t.SheetNames[i]],n),n,"\uFEFF");case"dif":return Yi(kD.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"dbf":return yh(CD.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"prn":return Yi(AD.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"rtf":return Yi(ND.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"eth":return Yi(qC.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"fods":return Yi(ST(t,n),n);case"wk1":return yh(tw.sheet_to_wk1(t.Sheets[t.SheetNames[i]],n),n);case"wk3":return yh(tw.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),yh(wT(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),HL(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return UL(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function jL(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function GL(t,e,n){var r={};return r.type="file",r.file=e,jL(r),TT(t,r)}function XL(t,e,n,r,i,a,o,s){var u=jn(n),l=s.defval,c=s.raw||!Object.prototype.hasOwnProperty.call(s,"raw"),f=!0,h=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:n,enumerable:!1})}catch{h.__rowNum__=n}else h.__rowNum__=n;if(!o||t[n])for(var d=e.s.c;d<=e.e.c;++d){var v=o?t[n][d]:t[r[d]+u];if(v===void 0||v.t===void 0){if(l===void 0)continue;a[d]!=null&&(h[a[d]]=l);continue}var p=v.v;switch(v.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(a[d]!=null){if(p==null)if(v.t=="e"&&p===null)h[a[d]]=null;else if(l!==void 0)h[a[d]]=l;else if(c&&p===null)h[a[d]]=null;else continue;else h[a[d]]=c&&(v.t!=="n"||v.t==="n"&&s.rawNumbers!==!1)?p:Xa(v,p,s);p!=null&&(f=!1)}}return{row:h,isempty:f}}function Zd(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,i=1,a=[],o=0,s="",u={s:{r:0,c:0},e:{r:0,c:0}},l=e||{},c=l.range!=null?l.range:t["!ref"];switch(l.header===1?r=1:l.header==="A"?r=2:Array.isArray(l.header)?r=3:l.header==null&&(r=0),typeof c){case"string":u=Ft(c);break;case"number":u=Ft(t["!ref"]),u.s.r=c;break;default:u=c}r>0&&(i=0);var f=jn(u.s.r),h=[],d=[],v=0,p=0,m=Array.isArray(t),g=u.s.r,x=0,y={};m&&!t[g]&&(t[g]=[]);var w=l.skipHidden&&t["!cols"]||[],_=l.skipHidden&&t["!rows"]||[];for(x=u.s.c;x<=u.e.c;++x)if(!(w[x]||{}).hidden)switch(h[x]=rr(x),n=m?t[g][x]:t[h[x]+f],r){case 1:a[x]=x-u.s.c;break;case 2:a[x]=h[x];break;case 3:a[x]=l.header[x-u.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),s=o=Xa(n,null,l),p=y[o]||0,!p)y[o]=1;else{do s=o+"_"+p++;while(y[s]);y[o]=p,y[s]=1}a[x]=s}for(g=u.s.r+i;g<=u.e.r;++g)if(!(_[g]||{}).hidden){var b=XL(t,u,g,h,r,a,m,l);(b.isempty===!1||(r===1?l.blankrows!==!1:l.blankrows))&&(d[v++]=b.row)}return d.length=v,d}var lw=/"/g;function KL(t,e,n,r,i,a,o,s){for(var u=!0,l=[],c="",f=jn(n),h=e.s.c;h<=e.e.c;++h)if(r[h]){var d=s.dense?(t[n]||[])[h]:t[r[h]+f];if(d==null)c="";else if(d.v!=null){u=!1,c=""+(s.rawNumbers&&d.t=="n"?d.v:Xa(d,null,s));for(var v=0,p=0;v!==c.length;++v)if((p=c.charCodeAt(v))===i||p===a||p===34||s.forceQuotes){c='"'+c.replace(lw,'""')+'"';break}c=="ID"&&(c='"ID"')}else d.f!=null&&!d.F?(u=!1,c="="+d.f,c.indexOf(",")>=0&&(c='"'+c.replace(lw,'""')+'"')):c="";l.push(c)}return s.blankrows===!1&&u?null:l.join(o)}function V1(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";var i=Ft(t["!ref"]),a=r.FS!==void 0?r.FS:",",o=a.charCodeAt(0),s=r.RS!==void 0?r.RS:`
`,u=s.charCodeAt(0),l=new RegExp((a=="|"?"\\|":a)+"+$"),c="",f=[];r.dense=Array.isArray(t);for(var h=r.skipHidden&&t["!cols"]||[],d=r.skipHidden&&t["!rows"]||[],v=i.s.c;v<=i.e.c;++v)(h[v]||{}).hidden||(f[v]=rr(v));for(var p=0,m=i.s.r;m<=i.e.r;++m)(d[m]||{}).hidden||(c=KL(t,i,m,f,o,u,a,r),c!=null&&(r.strip&&(c=c.replace(l,"")),(c||r.blankrows!==!1)&&n.push((p++?s:"")+c)));return delete r.dense,n.join("")}function kT(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=V1(t,e);return n}function qL(t){var e="",n,r="";if(t==null||t["!ref"]==null)return[];var i=Ft(t["!ref"]),a="",o=[],s,u=[],l=Array.isArray(t);for(s=i.s.c;s<=i.e.c;++s)o[s]=rr(s);for(var c=i.s.r;c<=i.e.r;++c)for(a=jn(c),s=i.s.c;s<=i.e.c;++s)if(e=o[s]+a,n=l?(t[c]||[])[s]:t[e],r="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;r=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)r=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)r=""+n.v;else if(n.t=="b")r=n.v?"TRUE":"FALSE";else if(n.w!==void 0)r="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?r="'"+n.v:r=""+n.v}}u[u.length]=e+"="+r}return u}function AT(t,e,n){var r=n||{},i=+!r.skipHeader,a=t||{},o=0,s=0;if(a&&r.origin!=null)if(typeof r.origin=="number")o=r.origin;else{var u=typeof r.origin=="string"?In(r.origin):r.origin;o=u.r,s=u.c}var l,c={s:{c:0,r:0},e:{c:s,r:o+e.length-1+i}};if(a["!ref"]){var f=Ft(a["!ref"]);c.e.c=Math.max(c.e.c,f.e.c),c.e.r=Math.max(c.e.r,f.e.r),o==-1&&(o=f.e.r+1,c.e.r=o+e.length-1+i)}else o==-1&&(o=0,c.e.r=e.length-1+i);var h=r.header||[],d=0;e.forEach(function(p,m){Xn(p).forEach(function(g){(d=h.indexOf(g))==-1&&(h[d=h.length]=g);var x=p[g],y="z",w="",_=_t({c:s+d,r:o+m+i});l=Yc(a,_),x&&typeof x=="object"&&!(x instanceof Date)?a[_]=x:(typeof x=="number"?y="n":typeof x=="boolean"?y="b":typeof x=="string"?y="s":x instanceof Date?(y="d",r.cellDates||(y="n",x=Dr(x)),w=r.dateNF||Gt[14]):x===null&&r.nullError&&(y="e",x=0),l?(l.t=y,l.v=x,delete l.w,delete l.R,w&&(l.z=w)):a[_]=l={t:y,v:x},w&&(l.z=w))})}),c.e.c=Math.max(c.e.c,s+h.length-1);var v=jn(o);if(i)for(d=0;d<h.length;++d)a[rr(d+s)+v]={t:"s",v:h[d]};return a["!ref"]=an(c),a}function YL(t,e){return AT(null,t,e)}function Yc(t,e,n){if(typeof e=="string"){if(Array.isArray(t)){var r=In(e);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Yc(t,_t(e)):Yc(t,_t({r:e,c:n||0}))}function QL(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function JL(){return{SheetNames:[],Sheets:{}}}function ZL(t,e,n,r){var i=1;if(!n)for(;i<=65535&&t.SheetNames.indexOf(n="Sheet"+i)!=-1;++i,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var a=n.match(/(^.*?)(\d+)$/);i=a&&+a[2]||0;var o=a&&a[1]||n;for(++i;i<=65535&&t.SheetNames.indexOf(n=o+i)!=-1;++i);}if(gT(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function eB(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=QL(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function tB(t,e){return t.z=e,t}function IT(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function nB(t,e,n){return IT(t,"#"+e,n)}function rB(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function iB(t,e,n,r){for(var i=typeof e!="string"?e:Ft(e),a=typeof e=="string"?e:an(e),o=i.s.r;o<=i.e.r;++o)for(var s=i.s.c;s<=i.e.c;++s){var u=Yc(t,o,s);u.t="n",u.F=a,delete u.v,o==i.s.r&&s==i.s.c&&(u.f=n,r&&(u.D=!0))}return t}var uv={encode_col:rr,encode_row:jn,encode_cell:_t,encode_range:an,decode_col:F1,decode_row:R1,split_cell:xF,decode_cell:In,decode_range:ni,format_cell:Xa,sheet_add_aoa:IC,sheet_add_json:AT,sheet_add_dom:bT,aoa_to_sheet:xl,json_to_sheet:YL,table_to_sheet:ET,table_to_book:kL,sheet_to_csv:V1,sheet_to_txt:kT,sheet_to_json:Zd,sheet_to_html:_T,sheet_to_formulae:qL,sheet_to_row_object_array:Zd,sheet_get_cell:Yc,book_new:JL,book_append_sheet:ZL,book_set_sheet_visibility:eB,cell_set_number_format:tB,cell_set_hyperlink:IT,cell_set_internal_link:nB,cell_add_comment:rB,sheet_set_array_formula:iB,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function aB({rows:t,headers:e,filename:n="data.xlsx"}){const r=uv.book_new(),i=[e,...t],a=uv.aoa_to_sheet(i);uv.book_append_sheet(r,a,"Sheet1"),GL(r,n)}const oB="modulepreload",sB=function(t,e){return new URL(t,e).href},cw={},fw=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),u=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=sB(l,r),l in cw)return;cw[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(!!r)for(let v=o.length-1;v>=0;v--){const p=o[v];if(p.href===l&&(!c||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${f}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":oB,c||(d.as="script"),d.crossOrigin="",d.href=l,u&&d.setAttribute("nonce",u),document.head.appendChild(d),c)return new Promise((v,p)=>{d.addEventListener("load",v),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};async function uB({rows:t,headers:e,filename:n="data.pdf",title:r=""}){const i=await fw(()=>import("./jspdf.es.min-DF78csj3.js").then(s=>s.j),[],import.meta.url),a=(await fw(async()=>{const{default:s}=await import("./jspdf.plugin.autotable-81Htps2Y.js");return{default:s}},[],import.meta.url)).default,o=new i.jsPDF;r&&(o.setFontSize(16),o.text(r,14,18)),a(o,{head:[e],body:t,startY:r?24:10,styles:{fontSize:10},headStyles:{fillColor:[37,99,235]}}),o.save(n)}function Wl({label:t="No data",style:e={}}){return R.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:32,color:"#bbb",...e}},R.createElement("svg",{width:"80",height:"80",viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginBottom:12}},R.createElement("rect",{x:"10",y:"20",width:"60",height:"40",rx:"8",fill:"#f3f3f3",stroke:"#e0e0e0",strokeWidth:"2"}),R.createElement("circle",{cx:"40",cy:"40",r:"8",fill:"#e0e0e0"}),R.createElement("rect",{x:"24",y:"54",width:"32",height:"4",rx:"2",fill:"#e0e0e0"})),R.createElement("div",{style:{fontSize:16,fontWeight:500}},t))}const RT=ve.createContext({push:()=>{}});function lB({children:t}){const[e,n]=ve.useState([]),r=ve.useMemo(()=>({push(i,a="info",o=3500){const s=Date.now()+Math.random();n(u=>[...u,{id:s,message:i,type:a}]),setTimeout(()=>n(u=>u.filter(l=>l.id!==s)),o)}}),[]);return R.createElement(RT.Provider,{value:r},t,R.createElement("div",{style:{position:"fixed",bottom:20,left:0,right:0,display:"grid",placeItems:"center",pointerEvents:"none",zIndex:9999}},R.createElement("div",{style:{display:"grid",gap:8}},e.map(i=>{let a="#333",o="",s="#1976d2";return i.type==="error"?(a="#f44336",o="",s="#b71c1c"):i.type==="success"?(a="#43a047",o="",s="#1b5e20"):i.type==="warning"&&(a="#ffa000",o="",s="#ff6f00"),R.createElement("div",{key:i.id,role:"status","aria-live":i.type==="error"?"assertive":"polite",style:{pointerEvents:"auto",background:a,color:"white",padding:"10px 18px",borderRadius:8,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",minWidth:260,textAlign:"center",display:"flex",alignItems:"center",gap:10,borderLeft:`5px solid ${s}`,fontSize:16}},R.createElement("span",{style:{fontSize:20}},o),R.createElement("span",{style:{flex:1}},i.message))}))))}function H1(){return ve.useContext(RT)}function hw({size:t=40,color:e="#2563eb",style:n={}}){return R.createElement("div",{style:{display:"inline-block",...n}},R.createElement("svg",{width:t,height:t,viewBox:"0 0 50 50"},R.createElement("circle",{cx:"25",cy:"25",r:"20",fill:"none",stroke:e,strokeWidth:"5",strokeDasharray:"31.4 31.4",strokeLinecap:"round",style:{transformOrigin:"center",animation:"spin 1s linear infinite"}}),R.createElement("style",null,`
          @keyframes spin {
            100% { transform: rotate(360deg); }
          }
        `)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var FT=function(t,e){return(FT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])})(t,e)};function Ui(t,e){function n(){this.constructor=t}FT(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Pe(t,e,n,r){return new(n||(n=Promise))(function(i,a){function o(l){try{u(r.next(l))}catch(c){a(c)}}function s(l){try{u(r.throw(l))}catch(c){a(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(o,s)}u((r=r.apply(t,[])).next())})}function Ne(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){o=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(c[0]===6&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(f){c=[6,f],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var cB=function(){function t(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(e,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=e,this.platform=n},t.prototype.registerFlag=function(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){var i=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+i+"."),this.set(e,i)}},t.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},t.prototype.getNumber=function(e){return this.get(e)},t.prototype.getBool=function(e){return this.get(e)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(e,n){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)},t.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},t.prototype.setFlags=function(e){this.flags=Object.assign({},e)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,i=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(a){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return fB(r,o[0],o[1]),o.join("=")}),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(a){var o=a.split(":"),s=o[0],u=o[1];e.urlFlags[s]=function(l,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+l+".")}(s,u)})}},t}();function fB(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function fe(){return DT}var DT=null,ep=new Map,qm=new Map;function OT(t,e){var n=NT(t,e);return ep.get(n)}function hB(t){return qm.get(t)}function dw(t){for(var e=ep.entries(),n=[];;){var r=e.next(),i=r.done,a=r.value;if(i)break;var o=a[0],s=a[1];o.split("_")[0]===t&&n.push(s)}return n}function PT(t){var e=t.kernelName,n=t.backendName,r=NT(e,n);if(ep.has(r))throw new Error("The kernel '"+e+"' for backend '"+n+"' is already registered");ep.set(r,t)}function dB(t){var e=t.kernelName;qm.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),qm.set(e,t)}function NT(t,e){return e+"_"+t}function Ym(t,e,n){return Math.max(t,Math.min(e,n))}function MT(t){return t%2==0?t:t+1}function pB(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function M(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function pt(t,e,n){n===void 0&&(n=""),M(Dn(t,e),function(){return n+" Shapes "+t+" and "+e+" must match"})}function _l(t){M(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function sl(t,e,n){if(e===void 0&&(e=[]),n===void 0&&(n=!1),e==null&&(e=[]),Array.isArray(t)||la(t)&&!n)for(var r=0;r<t.length;++r)sl(t[r],e,n);else e.push(t);return e}function Be(t){if(t.length===0)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function Dn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Jt(t){return t%1==0}function vB(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function Qm(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Hu(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function pw(t,e,n){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,i){var a=0,o=function(){if(t())r();else{a++;var s=e(a);n!=null&&a>=n?i():setTimeout(o,s)}};o()})}function mB(t,e){for(var n=1,r=-1,i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(t[i]<0)throw Error("Shapes can not be < 0. Found "+t[i]+" at dim "+i);if(r===-1){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(n===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var a=t.slice();return a[r]=e/n,a}function _n(t,e){var n=e.length;return M((t=t==null?e.map(function(r,i){return i}):[].concat(t)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t}),M(t.every(function(r){return Jt(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?n+r:r})}function gs(t,e){for(var n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||i?null:_n(e,t).sort(),o=0,s=0;s<t.length;++s){if(a!=null){if(a[o]===s&&t[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(a[o]==null||a[o]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),a[o]<=s&&o++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function Qc(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else{if(t!=="bool")throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function tp(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else{if(t!=="string")throw new Error("Unknown data type "+t);n=new Array(e)}return n}function gB(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function xB(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function yB(t,e){return e!=="complex64"&&(e!=="float32"||t==="complex64")&&(e!=="int32"||t==="float32"||t==="complex64")&&(e!=="bool"||t!=="bool")}function la(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function LT(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function wB(t){if(t==null)return 0;var e=0;return t.forEach(function(n){return e+=n.length}),e}function $1(t){return typeof t=="string"||t instanceof String}function _B(t){return typeof t=="boolean"}function bB(t){return typeof t=="number"}function Sf(t){return Array.isArray(t)?Sf(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":bB(t)?"float32":$1(t)?"string":_B(t)?"bool":"float32"}function Jm(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Zm(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function ca(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function BT(t,e,n){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=sl(t)),n&&gB(t,e),function(a,o){return a instanceof Float32Array&&o==="float32"||a instanceof Int32Array&&o==="int32"||a instanceof Uint8Array&&o==="bool"}(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){for(var r=new Uint8Array(t.length),i=0;i<r.length;++i)Math.round(t[i])!==0&&(r[i]=1);return r}throw new Error("Unknown data type "+e)}function vw(t,e){if(t.length===0)return e[0];var n=t.reduce(function(r,i){return r*i});if(n===0)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return function r(i,a,o){var s=new Array;if(a.length===1)for(var u=a[0],l=0;l<u;l++)s[l]=o[i+l];else{u=a[0];var c=a.slice(1),f=c.reduce(function(h,d){return h*d});for(l=0;l<u;l++)s[l]=r(i+l*f,c,o)}return s}(0,t,e)}function WT(t,e){for(var n=Cf(t,e),r=0;r<n.length;r++)n[r]=1;return n}function Cf(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+e)}function ta(){return fe().platform.now()}function zT(t){t.forEach(function(e){M(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function EB(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",fe().platform.encode(t,e)}function np(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",fe().platform.decode(t,e)}function mw(t,e,n){if(e===0)return 0;if(e===1)return t[0];for(var r=t[t.length-1],i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function SB(t,e,n){if(e===0)return[];if(e===1)return[t];for(var r=new Array(e),i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}var CB=function(){function t(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new TB)}return t.prototype.profileKernel=function(e,n,r){var i,a=this,o=this.backendTimer.time(function(){i=r()});return i.forEach(function(s){s.data().then(function(u){(function(l,c,f){if(c!=="float32")return!1;for(var h=0;h<l.length;h++){var d=l[h];if(isNaN(d)||!isFinite(d))return console.warn("Found "+d+" in the result of '"+f+"'"),!0}})(u,s.dtype,e),o.then(function(l){var c="";l.getExtraProfileInfo!=null&&(c=l.getExtraProfileInfo()),a.logger.logKernelProfile(e,s,u,l.kernelMs,n,c)})})}),i},t}(),TB=function(){function t(){}return t.prototype.logKernelProfile=function(e,n,r,i,a,o){var s=typeof i=="number"?Hu(i+"ms",9):i.error,u=Hu(e,25),l=n.rank,c=n.size,f=Hu(n.shape.toString(),14),h="";for(var d in a){var v=a[d].shape||n.shape,p=v.length;h+=d+": "+p+"D "+(p>0?v:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+l+"D "+f+"	%c"+c+"	%c"+h+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),gw=20,zl=3,lv=7;function kB(t,e,n,r){var i=ca(e),a=function(l,c,f,h){var d=Be(c),v=h[h.length-1],p=new Array(v).fill(0),m=c.length,g=f==="complex64"?Vl(l):l;if(m>1)for(var x=0;x<d/v;x++)for(var y=x*v,w=0;w<v;w++)p[w]=Math.max(p[w],Ul(g[y+w],0,f).length);return p}(t,e,n,i),o=e.length,s=function l(c,f,h,d,v,p){p===void 0&&(p=!0);var m=h==="complex64"?2:1,g=f[0],x=f.length;if(x===0)return h==="complex64"?[Ul(Vl(c)[0],0,h)]:h==="bool"?[UT(c[0])]:[c[0].toString()];if(x===1){if(g>gw){var y=zl*m,w=Array.from(c.slice(0,y)),_=Array.from(c.slice((g-zl)*m,g*m));return h==="complex64"&&(w=Vl(w),_=Vl(_)),["["+w.map(function(K,ae){return Ul(K,v[ae],h)}).join(", ")+", ..., "+_.map(function(K,ae){return Ul(K,v[g-zl+ae],h)}).join(", ")+"]"]}return["["+(h==="complex64"?Vl(c):Array.from(c)).map(function(K,ae){return Ul(K,v[ae],h)}).join(", ")+"]"]}var b=f.slice(1),E=d.slice(1),S=d[0]*m,C=[];if(g>gw){for(var T=0;T<zl;T++){var A=(I=T*S)+S;C.push.apply(C,l(c.slice(I,A),b,h,E,v,!1))}for(C.push("..."),T=g-zl;T<g;T++)A=(I=T*S)+S,C.push.apply(C,l(c.slice(I,A),b,h,E,v,T===g-1))}else for(T=0;T<g;T++){var I;A=(I=T*S)+S,C.push.apply(C,l(c.slice(I,A),b,h,E,v,T===g-1))}var V=x===2?",":"";for(C[0]="["+C[0]+V,T=1;T<C.length-1;T++)C[T]=" "+C[T]+V;var J=`,
`;for(T=2;T<x;T++)J+=`
`;return C[C.length-1]=" "+C[C.length-1]+"]"+(p?"":J),C}(t,e,n,i,a),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+o),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function Ul(t,e,n){return Hu(Array.isArray(t)?parseFloat(t[0].toFixed(lv))+" + "+parseFloat(t[1].toFixed(lv))+"j":$1(t)?"'"+t+"'":n==="bool"?UT(t):parseFloat(t.toFixed(lv)).toString(),e)}function UT(t){return t===0?"false":"true"}function Vl(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var Jc=function(){function t(e,n,r){var i=this;if(this.dtype=n,this.shape=e.slice(),this.size=Be(e),r!=null){var a=r.length;M(a===this.size,function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+i.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||tp(n,this.size),this.strides=ca(e)}return t.prototype.set=function(e){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.length===0&&(r=[0]),M(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var a=this.locToIndex(r);this.values[a]=e},t.prototype.get=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length===0&&(e=[0]);for(var r=0,i=0,a=e;i<a.length;i++){var o=a[i];if(o<0||o>=this.shape[r]){var s="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=e[e.length-1],l=0;l<e.length-1;++l)u+=this.strides[l]*e[l];return this.values[u]},t.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n},t.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return ra().makeTensor(this.values,this.shape,this.dtype)},t}(),ra=null,le=null,VT=null,Mt=function(){function t(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Be(e),this.strides=ca(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),M(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(e,n){return this.throwIfDisposed(),this.reshape([e,n])},t.prototype.as3D=function(e,n,r){return this.throwIfDisposed(),this.reshape([e,n,r])},t.prototype.as4D=function(e,n,r,i){return this.throwIfDisposed(),this.reshape([e,n,r,i])},t.prototype.as5D=function(e,n,r,i,a){return this.throwIfDisposed(),this.reshape([e,n,r,i,a])},t.prototype.asType=function(e){return this.throwIfDisposed(),le.cast(this,e)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return Pe(this,void 0,void 0,function(){var e;return Ne(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,le.buffer(this.shape,this.dtype,e)]}})})},t.prototype.bufferSync=function(){return le.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return Pe(this,void 0,void 0,function(){var e;return Ne(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,vw(this.shape,e)]}})})},t.prototype.arraySync=function(){return vw(this.shape,this.dataSync())},t.prototype.data=function(){return Pe(this,void 0,void 0,function(){var e,n;return Ne(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=ra().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:n=r.sent();try{return[2,n.map(function(i){return np(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var e=ra().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(n){return np(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},t.prototype.bytes=function(){return Pe(this,void 0,void 0,function(){var e;return Ne(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,ra().read(this.dataId)];case 1:return e=n.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(ra().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(e){return e===void 0&&(e=!1),le.print(this,e)},t.prototype.reshape=function(e){return this.throwIfDisposed(),le.reshape(this,e)},t.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},t.prototype.expandDims=function(e){return e===void 0&&(e=0),le.expandDims(this,e)},t.prototype.cumsum=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1),le.cumsum(this,e,n,r)},t.prototype.squeeze=function(e){return this.throwIfDisposed(),le.squeeze(this,e)},t.prototype.clone=function(){return this.throwIfDisposed(),le.clone(this)},t.prototype.oneHot=function(e,n,r){return this.throwIfDisposed(),le.oneHot(this,e,n,r)},t.prototype.toString=function(e){return e===void 0&&(e=!1),kB(this.dataSync(),this.shape,this.dtype,e)},t.prototype.tile=function(e){return this.throwIfDisposed(),le.tile(this,e)},t.prototype.gather=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),le.gather(this,e,n)},t.prototype.matMul=function(e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),le.matMul(this,e,n,r)},t.prototype.dot=function(e){return this.throwIfDisposed(),le.dot(this,e)},t.prototype.norm=function(e,n,r){return e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),le.norm(this,e,n,r)},t.prototype.slice=function(e,n){return this.throwIfDisposed(),le.slice(this,e,n)},t.prototype.reverse=function(e){return this.throwIfDisposed(),le.reverse(this,e)},t.prototype.concat=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),le.concat([this].concat(e),n)},t.prototype.split=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),le.split(this,e,n)},t.prototype.stack=function(e,n){return n===void 0&&(n=0),le.stack([this,e],n)},t.prototype.unstack=function(e){return e===void 0&&(e=0),le.unstack(this,e)},t.prototype.pad=function(e,n){return n===void 0&&(n=0),le.pad(this,e,n)},t.prototype.batchNormalization=function(e,n,r,i,a){return r===void 0&&(r=.001),VT("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,n,a,i,r)},t.prototype.batchNorm=function(e,n,r,i,a){return a===void 0&&(a=.001),this.throwIfDisposed(),le.batchNorm(this,e,n,r,i,a)},t.prototype.all=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),le.all(this,e,n)},t.prototype.any=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),le.any(this,e,n)},t.prototype.logSumExp=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),le.logSumExp(this,e,n)},t.prototype.sum=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),le.sum(this,e,n)},t.prototype.prod=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),le.prod(this,e,n)},t.prototype.mean=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),le.mean(this,e,n)},t.prototype.min=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),le.min(this,e,n)},t.prototype.max=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),le.max(this,e,n)},t.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),le.argMin(this,e)},t.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),le.argMax(this,e)},t.prototype.cast=function(e){return this.throwIfDisposed(),le.cast(this,e)},t.prototype.add=function(e){return this.throwIfDisposed(),le.add(this,e)},t.prototype.addStrict=function(e){return this.throwIfDisposed(),le.addStrict(this,e)},t.prototype.atan2=function(e){return this.throwIfDisposed(),le.atan2(this,e)},t.prototype.sub=function(e){return this.throwIfDisposed(),le.sub(this,e)},t.prototype.subStrict=function(e){return this.throwIfDisposed(),le.subStrict(this,e)},t.prototype.pow=function(e){return this.throwIfDisposed(),le.pow(this,e)},t.prototype.powStrict=function(e){return this.throwIfDisposed(),le.powStrict(this,e)},t.prototype.mul=function(e){return this.throwIfDisposed(),le.mul(this,e)},t.prototype.mulStrict=function(e){return this.throwIfDisposed(),le.mulStrict(this,e)},t.prototype.div=function(e){return this.throwIfDisposed(),le.div(this,e)},t.prototype.divNoNan=function(e){return this.throwIfDisposed(),le.divNoNan(this,e)},t.prototype.floorDiv=function(e){return this.throwIfDisposed(),le.floorDiv(this,e)},t.prototype.divStrict=function(e){return this.throwIfDisposed(),le.divStrict(this,e)},t.prototype.minimum=function(e){return this.throwIfDisposed(),le.minimum(this,e)},t.prototype.minimumStrict=function(e){return this.throwIfDisposed(),le.minimumStrict(this,e)},t.prototype.maximum=function(e){return this.throwIfDisposed(),le.maximum(this,e)},t.prototype.maximumStrict=function(e){return this.throwIfDisposed(),le.maximumStrict(this,e)},t.prototype.mod=function(e){return this.throwIfDisposed(),le.mod(this,e)},t.prototype.modStrict=function(e){return this.throwIfDisposed(),le.modStrict(this,e)},t.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),le.squaredDifferenceStrict(this,e)},t.prototype.transpose=function(e){return this.throwIfDisposed(),le.transpose(this,e)},t.prototype.notEqual=function(e){return this.throwIfDisposed(),le.notEqual(this,e)},t.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),le.notEqualStrict(this,e)},t.prototype.less=function(e){return this.throwIfDisposed(),le.less(this,e)},t.prototype.lessStrict=function(e){return this.throwIfDisposed(),le.lessStrict(this,e)},t.prototype.equal=function(e){return this.throwIfDisposed(),le.equal(this,e)},t.prototype.equalStrict=function(e){return this.throwIfDisposed(),le.equalStrict(this,e)},t.prototype.lessEqual=function(e){return this.throwIfDisposed(),le.lessEqual(this,e)},t.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),le.lessEqualStrict(this,e)},t.prototype.greater=function(e){return this.throwIfDisposed(),le.greater(this,e)},t.prototype.greaterStrict=function(e){return this.throwIfDisposed(),le.greaterStrict(this,e)},t.prototype.greaterEqual=function(e){return this.throwIfDisposed(),le.greaterEqual(this,e)},t.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),le.greaterEqualStrict(this,e)},t.prototype.logicalAnd=function(e){return this.throwIfDisposed(),le.logicalAnd(this,e)},t.prototype.logicalOr=function(e){return this.throwIfDisposed(),le.logicalOr(this,e)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),le.logicalNot(this)},t.prototype.logicalXor=function(e){return this.throwIfDisposed(),le.logicalXor(this,e)},t.prototype.where=function(e,n){return this.throwIfDisposed(),le.where(e,this,n)},t.prototype.neg=function(){return this.throwIfDisposed(),le.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),le.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),le.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),le.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),le.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),le.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),le.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),le.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),le.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),le.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),le.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),le.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),le.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),le.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),le.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),le.abs(this)},t.prototype.clipByValue=function(e,n){return this.throwIfDisposed(),le.clipByValue(this,e,n)},t.prototype.relu=function(){return this.throwIfDisposed(),le.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),le.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),le.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),le.selu(this)},t.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),le.leakyRelu(this,e)},t.prototype.prelu=function(e){return this.throwIfDisposed(),le.prelu(this,e)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),le.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),le.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),le.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),le.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),le.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),le.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),le.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),le.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),le.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),le.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),le.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),le.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),le.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),le.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),le.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),le.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),le.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),le.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),le.round(this)},t.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),le.step(this,e)},t.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),le.softmax(this,e)},t.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),le.logSoftmax(this,e)},t.prototype.resizeBilinear=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),le.image.resizeBilinear(this,e,n)},t.prototype.resizeNearestNeighbor=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),le.image.resizeNearestNeighbor(this,e,n)},t.prototype.conv1d=function(e,n,r,i,a,o){return i===void 0&&(i="NWC"),a===void 0&&(a=1),this.throwIfDisposed(),le.conv1d(this,e,n,r,i,a,o)},t.prototype.conv2d=function(e,n,r,i,a,o){return i===void 0&&(i="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),le.conv2d(this,e,n,r,i,a,o)},t.prototype.conv2dTranspose=function(e,n,r,i,a){return this.throwIfDisposed(),le.conv2dTranspose(this,e,n,r,i,a)},t.prototype.depthwiseConv2D=function(e,n,r,i,a,o){return i===void 0&&(i="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),le.depthwiseConv2d(this,e,n,r,i,a,o)},t.prototype.separableConv2d=function(e,n,r,i,a,o){return a===void 0&&(a=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),le.separableConv2d(this,e,n,r,i,a,o)},t.prototype.avgPool=function(e,n,r,i){return this.throwIfDisposed(),le.avgPool(this,e,n,r,i)},t.prototype.maxPool=function(e,n,r,i){return this.throwIfDisposed(),le.maxPool(this,e,n,r,i)},t.prototype.localResponseNormalization=function(e,n,r,i){return e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),i===void 0&&(i=.5),le.localResponseNormalization(this,e,n,r,i)},t.prototype.pool=function(e,n,r,i,a){return this.throwIfDisposed(),le.pool(this,e,n,r,i,a)},t.prototype.variable=function(e,n,r){return e===void 0&&(e=!0),this.throwIfDisposed(),ra().makeVariable(this,e,n,r)},t.prototype.unsortedSegmentSum=function(e,n){return this.throwIfDisposed(),le.unsortedSegmentSum(this,e,n)},t.prototype.batchToSpaceND=function(e,n){return this.throwIfDisposed(),le.batchToSpaceND(this,e,n)},t.prototype.spaceToBatchND=function(e,n){return this.throwIfDisposed(),le.spaceToBatchND(this,e,n)},t.prototype.topk=function(e,n){return e===void 0&&(e=1),n===void 0&&(n=!0),this.throwIfDisposed(),le.topk(this,e,n)},t.prototype.stridedSlice=function(e,n,r,i,a,o,s,u){return i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),le.stridedSlice(this,e,n,r,i,a,o,s,u)},t.prototype.depthToSpace=function(e,n){return this.throwIfDisposed(),le.depthToSpace(this,e,n)},t.prototype.fft=function(){return this.throwIfDisposed(),le.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),le.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),le.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),le.spectral.irfft(this)},t}();Object.defineProperty(Mt,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var xw,eg,tg,ng,rg,ul=function(t){function e(n,r,i,a){var o=t.call(this,n.shape,n.dtype,n.dataId,a)||this;return o.trainable=r,o.name=i,o}return Ui(e,t),e.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!Dn(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");ra().disposeTensor(this),this.dataId=n.dataId,ra().incRef(this,null)},e.prototype.dispose=function(){ra().disposeVariable(this),this.isDisposedInternal=!0},e}(Mt);Object.defineProperty(ul,Symbol.hasInstance,{value:function(t){return t instanceof Mt&&t.assign!=null&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(xw||(xw={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(eg||(eg={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(tg||(tg={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(ng||(ng={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(rg||(rg={}));var AB={float32:ng,int32:eg,bool:tg,complex64:rg};function zn(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error("Can not upcast "+t+" with "+e)}return AB[t][e]}function cv(t){return zn(t,"int32")}function zt(t,e){if(t.dtype===e.dtype)return[t,e];var n=zn(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function IB(t,e){M(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"})}function HT(t){var e=[];return function n(r,i,a){if(r!=null){if(r instanceof Mt)return void i.push(r);if(o=r,!(!Array.isArray(o)&&typeof o!="object")){var o,s=r;for(var u in s){var l=s[u];a.has(l)||(a.add(l),n(l,i,a))}}}}(t,e,new Set),e}var fv,yw=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},t}(),RB=function(){function t(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new yw}return t.prototype.ready=function(){return Pe(this,void 0,void 0,function(){var e,n,r;return Ne(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),n=0,i.label=1;case 1:return n<e.length?(r=e[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),n=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},t.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},t.prototype.registerBackend=function(e,n,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:n,priority:r},!0)},t.prototype.setBackend=function(e){return Pe(this,void 0,void 0,function(){var n,r,i;return Ne(this,function(a){switch(a.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(e),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return i=a.sent(),[3,3];case 2:i=r,a.label=3;case 3:if(!i)return[2,!1];a.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new CB(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var e=this;dw(this.backendName).forEach(function(n){n.setupFunc!=null&&n.setupFunc(e.backendInstance)})},t.prototype.disposeRegisteredKernels=function(e){var n=this;dw(e).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[e])})},t.prototype.initializeBackend=function(e){var n=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var a=++this.pendingBackendInitId,o=i.then(function(s){return!(a<n.pendingBackendInitId)&&(n.registry[e]=s,n.pendingBackendInit=null,!0)}).catch(function(s){return!(a<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[e]=i,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return e.registryFactory[r].priority-e.registryFactory[n].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),n=0;n<e.length;n++){var r=e[n],i=this.initializeBackend(r),a=i.success,o=i.asyncInit;if(o||a)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(e,n){var r=this.state.tensorInfo.get(n),i=r.backend,a=this.readSync(n);i.disposeData(n),r.backend=e,e.move(n,a,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(e,n){var r,i=this,a=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun(function(){return i.startScope(a)},function(){return i.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(e,n,r){e();try{var i=r();return n(),i}catch(a){throw n(),a}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(e){var n=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[n],function(i){return{x:function(){return i.toFloat()}}},[]),n},t.prototype.runKernel=function(e,n,r,i,a){return this.runKernelFunc(null,n,null,e,r,i,a)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(e,n,r){var i=this.backend.numDataIds(),a=0;r.forEach(function(u){a+=u.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-n-a-o;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+e+"'")},t.prototype.runKernelFunc=function(e,n,r,i,a,o,s){var u,l=this;o===void 0&&(o=[]),s===void 0&&(s=[]);var c=[],f=this.isTapeOn();i==null&&(i=this.state.activeScope!=null?this.state.activeScope.name:"");var h,d=function(x){f&&(c=x.map(function(y){return l.keep(l.clone(y))}))},v=this.state.numBytes,p=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,g=OT(i,this.backendName);return h=g!=null?function(){var x=l.backend.numDataIds();m=g.kernelFunc({inputs:n,attrs:a,backend:l.backend});var y=Array.isArray(m)?m:[m];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,x,y);var w=y.map(function(b){var E=b.dataId,S=b.shape,C=b.dtype;return l.makeTensorFromDataId(E,S,C)}),_=w.filter(function(b,E){return s[E]});return d((o||[]).slice().concat(_)),w}:function(){var x=l.backend.numDataIds();m=l.tidy(function(){return e(l.backend,d)});var y=Array.isArray(m)?m:[m];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,x,y),y},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(i,n,function(){return h()}):h()}),f&&this.addTapeNode(i,n,u,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:i,bytesAdded:this.state.numBytes-v,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-p,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(x){return n[x].shape}),outputShapes:u.map(function(x){return x.shape})}),Array.isArray(m)?u:u[0]},t.prototype.makeTensor=function(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;var a=e;r==="string"&&$1(e[0])&&(a=e.map(function(c){return EB(c)}));var o=i.write(a,n,r),s=new Mt(n,r,o,this.nextTensorId());if(this.incRef(s,i),r==="string"){var u=this.state.tensorInfo.get(o),l=wB(a);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},t.prototype.makeTensorFromDataId=function(e,n,r,i){var a=new Mt(n,r=r||"float32",e,this.nextTensorId());return this.incRef(a,i),a},t.prototype.makeVariable=function(e,n,r,i){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.asType(i));var a=new ul(e,n,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error("Variable with name "+a.name+" was already registered");return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},t.prototype.incRef=function(e,n){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var i=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(i=e.size*LT(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof ul||this.track(e)},t.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(e.dataId);n.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var n=this.state.registeredVariables[e];this.disposeVariable(n)}},t.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},t.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},t.prototype.profile=function(e){return Pe(this,void 0,void 0,function(){var n,r;return Ne(this,function(i){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(a){return a.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(e,n,r,i,a){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:a},u=hB(e);u!=null&&(i=u.gradFunc),i!=null&&(s.gradient=function(l){return l=l.map(function(c,f){if(c==null){var h=r[f],d=Cf(h.size,h.dtype);return o.makeTensor(d,h.shape,h.dtype)}return c}),i(l.length>1?l:l[0],a)}),this.state.activeTape.push(s)},t.prototype.keep=function(e){return e.kept=!0,e},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(e){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n},t.prototype.endScope=function(e){for(var n=this,r=HT(e),i=new Set(r.map(function(u){return u.id})),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||i.has(o.id)||o.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||n.track(u)})},t.prototype.gradients=function(e,n,r,i){var a=this;if(i===void 0&&(i=!1),M(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var o=this.scopedRun(function(){return a.startTape()},function(){return a.endTape()},function(){return a.tidy("forward",e)});M(o instanceof Mt,function(){return"The result y returned by f() must be a tensor."});var s=function(u,l,c){for(var f={},h={},d=0;d<l.length;d++)f[l[d].id]=!0;for(d=0;d<u.length;d++){var v=(b=u[d]).inputs;for(var p in v){for(var m=v[p],g=!1,x=0;x<l.length;x++)if(f[m.id]){b.outputs.forEach(function(T){return f[T.id]=!0}),g=!0,h[b.id]=!0;break}if(g)break}}var y={};y[c.id]=!0;var w={};for(d=u.length-1;d>=0;d--)for(v=(b=u[d]).inputs,x=0;x<b.outputs.length;x++)if(y[b.outputs[x].id]){for(var p in v)y[v[p].id]=!0,w[b.id]=!0;break}var _=[];for(d=0;d<u.length;d++){var b;if(h[(b=u[d]).id]&&w[b.id]){var E={};for(var p in b.inputs){var S=b.inputs[p];f[S.id]&&(E[p]=S)}var C=Object.assign({},b);C.inputs=E,C.outputs=b.outputs,_.push(C)}}return _}(this.state.activeTape,n,o);if(!i&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,l,c={};c[o.id]=r??(u=o.shape,l=WT(Be(u),"float32"),X.makeTensor(l,u,"float32")),function(h,d,v){for(var p=function(g){var x=d[g],y=[];if(x.outputs.forEach(function(E){var S=h[E.id];S!=null?y.push(S):y.push(null)}),x.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+x.kernelName+".");var w=x.gradient(y),_=function(E){if(!(E in w))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(w)+".");var S=v(function(){return w[E]()});if(S.dtype!=="float32")throw new Error("Error in gradient for op "+x.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+S.dtype+"'");var C=x.inputs[E];if(!Dn(S.shape,C.shape))throw new Error("Error in gradient for op "+x.kernelName+". The gradient of input '"+E+"' has shape '"+S.shape+"', which does not match the shape of the input '"+C.shape+"'");if(h[C.id]==null)h[C.id]=S;else{var T=h[C.id];h[C.id]=T.add(S),T.dispose()}};for(var b in x.inputs)_(b)},m=d.length-1;m>=0;m--)p(m)}(c,s,function(h){return a.tidy(h)});var f=n.map(function(h){return c[h.id]});return a.state.gradientDepth===0&&(a.state.activeTape.forEach(function(h){for(var d=0,v=h.saved;d<v.length;d++)v[d].dispose()}),a.state.activeTape=null),{value:o,grads:f}})},t.prototype.customGrad=function(e){var n=this;return M(Jm(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];M(i.every(function(s){return s instanceof Mt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return i.forEach(function(s,u){o[u]=s}),n.runKernelFunc(function(s,u){return M((r=e.apply(void 0,i.concat([u]))).value instanceof Mt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),M(Jm(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},o,function(s,u){var l=r.gradFunc(s,u),c=Array.isArray(l)?l:[l];M(c.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),M(c.every(function(h){return h instanceof Mt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return c.forEach(function(h,d){f[d]=function(){return h}}),f})}},t.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},t.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},t.prototype.time=function(e){return Pe(this,void 0,void 0,function(){var n,r;return Ne(this,function(i){switch(i.label){case 0:return n=ta(),[4,this.backend.time(e)];case 1:return(r=i.sent()).wallMs=ta()-n,[2,r]}})})},t.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new yw,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),X=function(){var t=function(){if(fv==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}fv=n}return fv}();if(t._tfengine==null){var e=new cB(t);t._tfengine=new RB(e)}return function(n){DT=n}(t._tfengine.ENV),ra=function(){return t._tfengine},t._tfengine}();function $T(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Ca=fe();Ca.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Ca.registerFlag("IS_BROWSER",function(){return $T()}),Ca.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Ca.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Ca.registerFlag("PROD",function(){return!1}),Ca.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Ca.getBool("DEBUG")}),Ca.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Ca.registerFlag("IS_TEST",function(){return!1});var Zc,qr,Xr,fs={},hv={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function FB(t,e){fs[t]=e}function ma(t){t in fs||(fs[t]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(i){if(typeof OffscreenCanvas<"u"&&i===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(n);return r.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete fs[n]},!1),n===1?r.getContext("webgl",hv)||r.getContext("experimental-webgl",hv):r.getContext("webgl2",hv)}(t));var e=fs[t];return e.isContextLost()?(delete fs[t],ma(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),fs[t])}function Zp(t,e){return[e,t]}function wc(t){var e=Be(t);return Qm(Math.ceil(e/4))}function Tf(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function j1(t,e){var n,r,i,a,o,s,u,l,c,f=t;return fe().getNumber("WEBGL_VERSION")===2?(n=f.R32F,r=f.R16F,i=f.RGBA16F,a=f.RGBA32F,o=f.RED,s=4,u=1,l=f.HALF_FLOAT,c=f.FLOAT):(n=t.RGBA,r=t.RGBA,i=t.RGBA,a=f.RGBA,o=t.RGBA,s=4,u=4,l=e!=null?e.HALF_FLOAT_OES:null,c=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function We(t,e,n){var r=n();return e&&function(i){var a=i.getError();if(a!==i.NO_ERROR)throw new Error("WebGL Error: "+NB(i,a))}(t),r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Zc||(Zc={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(qr||(qr={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Xr||(Xr={}));var DB=596e-10,OB=65504;function PB(t){return!!(fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||DB<Math.abs(t)&&Math.abs(t)<OB)}function NB(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function wh(t,e,n){return Qa(t,e,function(){return t.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function MB(t,e,n){var r=Qa(t,e,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(We(t,e,function(){return t.shaderSource(r,n)}),We(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function LB(t,e,n){var r=Qa(t,e,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(We(t,e,function(){return t.shaderSource(r,n)}),We(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw function(i,a){var o=BB.exec(a);if(o==null)return console.log("Couldn't parse line number in error: "+a),void console.log(i);for(var s=+o[1],u=i.split(`
`),l=u.length.toString().length+2,c=u.map(function(m,g){return Hu((g+1).toString(),l)+m}),f=0,h=0;h<c.length;h++)f=Math.max(c[h].length,f);var d=c.slice(0,s-1),v=c.slice(s-1,s),p=c.slice(s);console.log(d.join(`
`)),console.log(a.split(`
`)[0]),console.log("%c "+Hu(v[0],f),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(p.join(`
`))}(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var dv,pv,BB=/ERROR: [0-9]+:([0-9]+):/g;function WB(t,e){return Qa(t,e,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function zB(t,e,n){if(We(t,e,function(){return t.linkProgram(n)}),t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function vv(t,e,n){if(We(t,e,function(){return t.validateProgram(n)}),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function UB(t,e,n){var r=Qa(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return We(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),We(t,e,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function VB(t,e,n){var r=Qa(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return We(t,e,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),We(t,e,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function HB(t,e){return Qa(t,e,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function $B(t,e){var n=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function jB(t,e){return Qa(t,e,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function ww(t,e,n,r,i,a,o,s){var u=t.getAttribLocation(n,r);return u!==-1&&(We(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,i)}),We(t,e,function(){return t.vertexAttribPointer(u,a,t.FLOAT,!1,o,s)}),We(t,e,function(){return t.enableVertexAttribArray(u)}),!0)}function GB(t,e,n,r){QB(t,r),We(t,e,function(){return t.activeTexture(t.TEXTURE0+r)}),We(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function XB(t,e,n,r){return Qa(t,e,function(){return t.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function KB(t,e,n){return t.getUniformLocation(e,n)}function qB(t,e,n,r,i,a){We(t,e,function(){return GB(t,e,r,a)}),We(t,e,function(){return t.uniform1i(i,a)})}function mv(t,e,n,r){We(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),We(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function _w(t,e,n){We(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),We(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function _h(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+YB(t,e))}function YB(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Qa(t,e,n,r){var i=We(t,e,function(){return n()});if(i==null)throw new Error(r);return i}function QB(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function rp(t,e){return e===void 0&&(e=2),Be(t.slice(0,t.length-e))}function ip(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function gv(t){var e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[rp(t)].concat(ip(t))),e}function JB(t,e){var n;e===void 0&&(e=!1);var r=fe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(t=t.map(function(l,c){return c>=t.length-2?MT(t[c]):t[c]})).length===1&&(t=[2,t[0]])),t.length!==2){var i=gs(t);t=i.newShape}var a=Be(t);if(t.length<=1&&a<=r)return[1,a];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var o=rp(t),s=2,u=2;return t.length&&(s=(n=ip(t))[0],u=n[1]),Qm(a=o*(s/2)*(u/2)).map(function(l){return 2*l})}return Qm(a)}function bh(t){return t%2==0}function Eh(t,e){if(Dn(t=t.slice(-2),e=e.slice(-2))||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||bh(n)&&bh(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&bh(t[0])&&bh(e[0])}function ZB(t){if(dv==null){var e=ma(t);dv=e.getParameter(e.MAX_TEXTURE_SIZE)}return dv}function e6(t){if(pv==null){var e=ma(t);pv=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,pv)}function t6(t){if(t===0)return 0;var e=ma(t);return vi(e,"EXT_disjoint_timer_query_webgl2")&&t===2?2:vi(e,"EXT_disjoint_timer_query")?1:0}function vi(t,e){return t.getExtension(e)!=null}function bw(t){try{if(ma(t)!=null)return!0}catch{return!1}return!1}function n6(t){if(t===0)return!1;var e=ma(t);if(t===1){if(!vi(e,"OES_texture_float"))return!1}else if(!vi(e,"EXT_color_buffer_float"))return!1;return ig(e)}function r6(t){if(t===0)return!1;var e=ma(t);if(t!==1){if(vi(e,"EXT_color_buffer_float"))return ig(e);if(vi(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return function(r,i){var a=j1(r,i),o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,a.internalFormatHalfFloat,1,1,0,a.textureFormatFloat,a.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(o),r.deleteFramebuffer(s),u}(e,n)}return!1}return!!vi(e,"OES_texture_float")&&!!vi(e,"WEBGL_color_buffer_float")&&ig(e)}function ig(t){var e=j1(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),i}function i6(t){return t===2&&ma(t).fenceSync!=null}var je=fe();function jT(t){fe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function De(t,e){return X.tidy(t,e)}function Fr(t){HT(t).forEach(function(e){return e.dispose()})}function a6(t){return X.keep(t)}function ap(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];fe().getBool("IS_TEST")||console.warn.apply(console,t)}function Qo(t,e){var n=t;if(la(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||la(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&fe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(a,o,s){if(s=s||[],!Array.isArray(a)&&!la(a))return void M(o.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});M(o.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+a.length+" elements"}),M(a.length===o[0],function(){return"Element arr["+s.join("][")+"] should have "+o[0]+" elements, but has "+a.length+" elements"});for(var u=o.slice(1),l=0;l<a.length;++l)i(a[l],u,s.concat(l))}(t,r,[]),r}function Ew(t,e,n,r){if(t!=null&&(t!=="numeric"&&t!==e||t==="numeric"&&e==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function F(t,e,n,r){if(r===void 0&&(r="numeric"),t instanceof Mt)return Ew(r,t.dtype,e,n),t;var i=Sf(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),Ew(r,i,e,n),t==null||!la(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var a=t==null?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var o=Qo(t,i);la(t)||Array.isArray(t)||(t=[t]);var s=i!=="string"?BT(t,i,fe().getBool("DEBUG")):sl(t,[],!0);return X.makeTensor(s,o,i)}function op(t,e,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(i,a){return F(i,e+"["+a+"]",n)},r)}function GT(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function o6(t,e,n){for(var r=t.length+e.length,i=[],a=0,o=0,s=0;s<r;s++)n.indexOf(s)===-1?i.push(t[a++]):i.push(e[o++]);return i}function Qn(t,e){for(var n=[],r=t.length,i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);return[n,e.map(function(a){return t[a]})]}function Pr(t,e){return o6(t,e.map(function(n){return 1}),e)}function $r(t,e,n){M(GT(e,n),function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."})}function ga(t,e){if(GT(t,e))return null;for(var n=[],r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(function(i){return n.push(i)}),n}function G1(t){return t.map(function(e,n){return[n,e]}).sort(function(e,n){return e[1]-n[1]}).map(function(e){return e[0]})}function xa(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function s6(t,e){var n=t[0].length;t.forEach(function(i,a){M(i.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+a+"] must be the same as the rank of the rest ("+n+")"})}),M(e>=0&&e<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=t[0];t.forEach(function(i,a){for(var o=0;o<n;o++)M(o===e||i[o]===r[o],function(){return"Error in concat"+n+"D: Shape of tensors["+a+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."})})}function ll(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function H(t){var e=Object.keys(t);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var i=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];X.startScope(n);try{var s=r.apply(void 0,a);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),X.endScope(s),s}catch(u){throw X.endScope(null),u}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}je.registerFlag("HAS_WEBGL",function(){return je.getNumber("WEBGL_VERSION")>0}),je.registerFlag("WEBGL_VERSION",function(){return bw(2)?2:bw(1)?1:0}),je.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return je.get("WEBGL_VERSION")===2}),je.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),je.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),je.registerFlag("WEBGL_PACK",function(){return je.getBool("HAS_WEBGL")}),je.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_CLIP",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),je.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_REDUCE",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_LAZILY_UNPACK",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_CONV_IM2COL",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return ZB(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return e6(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=je.getNumber("WEBGL_VERSION");return t===0?0:t6(t)}),je.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return je.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),je.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return n6(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!je.getBool("WEBGL_FORCE_F16_TEXTURES")&&je.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),je.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return r6(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return i6(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return je.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),VT=jT;var Wn=H({complex_:function(t,e){var n=F(t,"real","complex"),r=F(e,"imag","complex");return pt(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),X.runKernelFunc(function(i){return i.complex(n,r)},{$real:n,$imag:r})}}),di=H({real_:function(t){var e=F(t,"input","real");return X.runKernelFunc(function(n){return n.real(e)},{$input:e})}}),ia=H({imag_:function(t){var e=F(t,"input","imag");return X.runKernelFunc(function(n){return n.imag(e)},{$input:e})}});function Un(t,e,n){return Jo(t,e,Qo(t,n),n)}function Jo(t,e,n,r){if(r==null&&(r=Sf(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!la(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){zT(e);var i=Be(e),a=Be(n);M(i===a,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+i+" values but has "+a});for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==Be(e.slice(o));M(n[o]===e[o]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+e+"). "})}}return la(t)||Array.isArray(t)||(t=[t]),e=e||n,t=r!=="string"?BT(t,r,fe().getBool("DEBUG")):sl(t,[],!0),X.makeTensor(t,e,r)}function Ie(t,e){if((la(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&la(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Jo(t,[],[],e)}function rn(t,e){_l(t);var n=Qo(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Jo(t,null,n,e)}function No(t,e,n){if(_l(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Qo(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Jo(t,e,r,n)}function X1(t,e,n){if(_l(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Qo(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Jo(t,e,r,n)}function br(t,e,n){if(_l(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Qo(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Jo(t,e,r,n)}function u6(t,e,n){if(_l(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Qo(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Jo(t,e,r,n)}function l6(t,e,n){if(_l(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Qo(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Jo(t,e=e||r,r,n)}function c6(t,e,n,r){return e===void 0&&(e=!0),X.makeVariable(t,e,n,r)}function bl(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=bl(t,"float32"),r=At(t,"float32");return Wn(n,r)}var i=WT(Be(t),e);return X.makeTensor(i,t,e)}function At(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=At(t,"float32"),r=At(t,"float32");return Wn(n,r)}var i=Cf(Be(t),e);return X.makeTensor(i,t,e)}function fa(t,e,n){return X.runKernelFunc(function(r){return r.fill(t,e,n)},{})}function f6(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return X.runKernelFunc(function(r){return r.linspace(t,e,n)},{})}function sp(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return At([0],r);var i=Cf(Math.abs(Math.ceil((e-t)/n)),r);e<t&&n===1&&(n=-1),i[0]=t;for(var a=1;a<i.length;a++)i[a]=i[a-1]+n;return rn(i,r)}var XT=H({onesLike_:function(t){var e=F(t,"x","onesLike");if(e.dtype==="complex64"){var n=XT(di(e)),r=st(ia(e));return Wn(n,r)}return X.runKernelFunc(function(i){return i.onesLike(e)},{$x:e},function(i,a){return{$x:function(){return st(i)}}})}}),st=H({zerosLike_:function(t){var e=F(t,"x","zerosLike");return X.runKernelFunc(function(n){return n.zerosLike(e)},{$x:e},function(n,r){return{$x:function(){return st(n)}}})}}),mn=H({concat_:function(t,e){e===void 0&&(e=0),M(t.length>=1,function(){return"Pass at least one tensor to concat"});var n=op(t,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),e=_n(e,n[0].shape)[0];var r=ll(n.map(function(s){return s.shape}),e);if(Be(r)===0)return Un([],r);if((n=n.filter(function(s){return s.size>0})).length===1)return n[0];var i=n.map(function(s){return s.shape});s6(i,e);var a=n,o={axis:e};return X.runKernelFunc(function(s){return s.concat(n,e)},a,function(s){var u=i.map(function(l){return l[e]});return K1(s,u,e).map(function(l){return function(){return l}})},"Concat",o)}}),h6=H({concat1d_:function(t){return mn(t,0)}}),d6=H({concat2d_:function(t,e){return mn(t,e)}}),p6=H({concat3d_:function(t,e){return mn(t,e)}}),v6=H({concat4d_:function(t,e){return mn(t,e)}}),K1=H({split_:function(t,e,n){n===void 0&&(n=0);var r,i=F(t,"x","split");return n=_n(n,i.shape)[0],typeof e=="number"?(M(i.shape[n]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(i.shape[n]/e)):(M(i.shape[n]===e.reduce(function(a,o){return a+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),X.runKernelFunc(function(a){return a.split(i,r,n)},{$x:i},function(a){return{$x:function(){return mn(a,n)}}})}});function Ys(t,e){return t(e={exports:{}},e.exports),e.exports}var m6=Ys(function(t){(function(e,n,r){function i(s){var u,l=this,c=(u=4022871197,function(f){f=f.toString();for(var h=0;h<f.length;h++){var d=.02519603282416938*(u+=f.charCodeAt(h));d-=u=d>>>0,u=(d*=u)>>>0,u+=4294967296*(d-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var f=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=0|f)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(s),l.s0<0&&(l.s0+=1),l.s1-=c(s),l.s1<0&&(l.s1+=1),l.s2-=c(s),l.s2<0&&(l.s2+=1),c=null}function a(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function o(s,u){var l=new i(s),c=u&&u.state,f=l.next;return f.int32=function(){return 4294967296*l.next()|0},f.double=function(){return f()+11102230246251565e-32*(2097152*f()|0)},f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.alea=o})(0,t)}),g6=Ys(function(t){(function(e,n,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xor128=o})(0,t)}),x6=Ys(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^f^f<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xorwow=o})(0,t)}),y6=Ys(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var l,c,f=u.x,h=u.i;return l=f[h],c=(l^=l>>>7)^l<<24,c^=(l=f[h+1&7])^l>>>10,c^=(l=f[h+3&7])^l>>>3,c^=(l=f[h+4&7])^l<<7,l=f[h+7&7],c^=(l^=l<<13)^l<<9,f[h]=c,u.i=h+1&7,c},function(l,c){var f,h=[];if(c===(0|c))h[0]=c;else for(c=""+c,f=0;f<c.length;++f)h[7&f]=h[7&f]<<15^c.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],l.x=h,l.i=0,f=256;f>0;--f)l.next()}(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(c.x&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xorshift7=o})(0,t)}),w6=Ys(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var l,c,f=u.w,h=u.X,d=u.i;return u.w=f=f+1640531527|0,c=h[d+34&127],l=h[d=d+1&127],c^=c<<13,l^=l<<17,c^=c>>>15,l^=l>>>12,c=h[d]=c^l,u.i=d,c+(f^f>>>16)|0},function(l,c){var f,h,d,v,p,m=[],g=128;for(c===(0|c)?(h=c,c=null):(c+="\0",h=0,g=Math.max(g,c.length)),d=0,v=-32;v<g;++v)c&&(h^=c.charCodeAt((v+32)%c.length)),v===0&&(p=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(p=p+1640531527|0,d=(f=m[127&v]^=h+p)==0?d+1:0);for(d>=128&&(m[127&(c&&c.length||0)]=-1),d=127,v=512;v>0;--v)h=m[d+34&127],f=m[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,m[d]=h^f;l.w=p,l.X=m,l.i=d}(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(c.X&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.xor4096=o})(0,t)}),_6=Ys(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.b,h=u.c,d=u.d,v=u.a;return f=f<<25^f>>>7^h,h=h-d|0,d=d<<24^d>>>8^v,v=v-f|0,u.b=f=f<<20^f>>>12^h,u.c=h=h-d|0,u.d=d<<16^h>>>16^v,u.a=v-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):l+=s;for(var c=0;c<l.length+20;c++)u.b^=0|l.charCodeAt(c),u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:this.tychei=o})(0,t)}),hs=Ys(function(t){(function(e,n){var r,i=this,a=256,o=6,s="random",u=n.pow(a,o),l=n.pow(2,52),c=2*l,f=a-1;function h(g,x,y){var w=[],_=p(function S(C,T){var A,I=[],V=typeof C;if(T&&V=="object")for(A in C)try{I.push(S(C[A],T-1))}catch{}return I.length?I:V=="string"?C:C+"\0"}((x=x==1?{entropy:!0}:x||{}).entropy?[g,m(e)]:g??function(){try{var S;return r&&(S=r.randomBytes)?S=S(a):(S=new Uint8Array(a),(i.crypto||i.msCrypto).getRandomValues(S)),m(S)}catch{var C=i.navigator,T=C&&C.plugins;return[+new Date,i,T,i.screen,m(e)]}}(),3),w),b=new d(w),E=function(){for(var S=b.g(o),C=u,T=0;S<l;)S=(S+T)*a,C*=a,T=b.g(1);for(;S>=c;)S/=2,C/=2,T>>>=1;return(S+T)/C};return E.int32=function(){return 0|b.g(4)},E.quick=function(){return b.g(4)/4294967296},E.double=E,p(m(b.S),e),(x.pass||y||function(S,C,T,A){return A&&(A.S&&v(A,b),S.state=function(){return v(b,{})}),T?(n[s]=S,C):S})(E,_,"global"in x?x.global:this==n,x.state)}function d(g){var x,y=g.length,w=this,_=0,b=w.i=w.j=0,E=w.S=[];for(y||(g=[y++]);_<a;)E[_]=_++;for(_=0;_<a;_++)E[_]=E[b=f&b+g[_%y]+(x=E[_])],E[b]=x;(w.g=function(S){for(var C,T=0,A=w.i,I=w.j,V=w.S;S--;)C=V[A=f&A+1],T=T*a+V[f&(V[A]=V[I=f&I+C])+(V[I]=C)];return w.i=A,w.j=I,T})(a)}function v(g,x){return x.i=g.i,x.j=g.j,x.S=g.S.slice(),x}function p(g,x){for(var y,w=g+"",_=0;_<w.length;)x[f&_]=f&(y^=19*x[f&_])+w.charCodeAt(_++);return m(x)}function m(g){return String.fromCharCode.apply(0,g)}if(n["seed"+s]=h,p(n.random(),e),t.exports){t.exports=h;try{r=require("crypto")}catch{}}})([],Math)});hs.alea=m6,hs.xor128=g6,hs.xorwow=x6,hs.xorshift7=y6,hs.xor4096=w6,hs.tychei=_6;var e0=hs.alea,q1=function(){function t(e,n,r,i,a){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=a||Math.random();this.random=e0(o.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var n,r,i=!1;!i;){var a=void 0,o=void 0,s=void 0;do s=(a=2*this.random()-1)*a+(o=2*this.random()-1)*o;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*a*u,r=this.mean+this.stdDev*o*u,this.truncated&&!this.isValidTruncated(n)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},t.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},t.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},t}(),b6=function(){function t(e,n,r,i){this.alpha=e,this.beta=1/n,this.dtype=r;var a=i||Math.random();this.randu=e0(a.toString()),this.randn=new q1(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var e,n,r,i,a,o;;){do i=this.randn.nextValue(),o=1+this.c*i;while(o<=0);if(o*=o*o,n=1-.331*(e=i*i)*e,r=.5*e+this.d*(1-o+Math.log(o)),(a=this.randu())<n||Math.log(a)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},t.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},t}(),E6=function(){function t(e,n,r,i){var a=this;if(e===void 0&&(e=0),n===void 0&&(n=1),this.canReturnFloat=function(){return a.dtype==null||a.dtype==="float32"},this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+n+" <= 1 and dtype is not float");this.random=e0(i)}return t.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function Ye(t,e,n){return e===void 0&&(e="float32"),e=e||"float32",zT(t),new Jc(t,e,n)}function S6(t,e){e===void 0&&(e=!1),console.log(t.toString(e))}var KT=H({batchToSpaceND_:function(t,e,n){var r=F(t,"x","batchToSpaceND"),i=e.reduce(function(a,o){return a*o});return M(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),M(n.length===e.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length}),M(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+i}),X.runKernelFunc(function(a){return a.batchToSpaceND(r,e,n)},{$x:r},function(a){return{$x:function(){return a.spaceToBatchND(e,n)}}})}}),C6=H({broadcastTo_:function(t,e){var n=F(t,"broadcastTo","x"),r=n.shape;if(e.some(function(u){return!(u>0)||u%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<n.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+n.rank+".");if(e.length>n.rank){for(var i=n.shape.slice();i.length<e.length;)i.unshift(1);n=n.reshape(i)}for(var a=Array.from(e),o=e.length-1;o>=0;o--)if(n.shape[o]===e[o])a[o]=1;else if(n.shape[o]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var s=a.map(function(u,l){return u>1?l:-1}).filter(function(u){return u>=0});return s.length===0?n.clone():X.runKernelFunc(function(u){return u.tile(n,a)},{input:n},function(u){return{input:function(){return u.sum(s,!0)}}})}}),T6=H({cast_:function(t,e){var n=F(t,"x","cast");if(!xB(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return X.runKernelFunc(function(i){return i.cast(n,e)},{x:n},function(i){return{x:function(){return i.clone()}}},"Cast",r)}}),k6=H({clone_:function(t){var e=F(t,"x","clone",null);return X.runKernelFunc(function(){return X.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{$x:e},function(n){return{$x:function(){return n.toFloat()}}})}}),A6=H({cumsum_:function(t,e,n,r){e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var i=F(t,"x","cumsum"),a=ga([e|=0],i.rank),o=i;a!=null&&(o=i.transpose(a));var s=xa(1,i.rank)[0],u=X.runKernelFunc(function(l){return l.cumsum(o,s,n,r)},{permutedX:o},function(l){return{permutedX:function(){return l.cumsum(e,n,!r)}}});return a!=null&&(u=u.transpose(a)),u}}),I6=H({depthToSpace_:function(t,e,n){n===void 0&&(n="NHWC");var r=F(t,"x","depthToSpace"),i=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];return M(i*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+e+`  for depthToSpace with input shape
      `+r.shape}),M(a*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+e+` for depthToSpace with input shape
          `+r.shape}),M(o%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+o+" for depthToSpace with input shape "+r.shape}),X.runKernelFunc(function(s){return s.depthToSpace(r,e,n)},{$x:r})}}),hi=H({expandDims_:function(t,e){e===void 0&&(e=0);var n=F(t,"x","expandDims",null);M(e<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return e<0&&(M(-(n.rank+1)<=e,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),e=n.rank+e+1),r.splice(e,0,1),Oi(n,r)}}),qT=H({eye_:function(t,e,n,r){r===void 0&&(r="float32"),e==null&&(e=t);for(var i=Ye([t,e],r),a=t<=e?t:e,o=0;o<a;++o)i.set(1,o,o);var s=i.toTensor().as2D(t,e);if(n==null)return s;if(n.length===1)return $u(hi(s,0),[n[0],1,1]);if(n.length===2)return $u(hi(hi(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return $u(hi(hi(hi(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),R6=H({multinomial_:function(t,e,n,r){r===void 0&&(r=!1);var i=F(t,"logits","multinomial"),a=i.size,o=i.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var s=o===1?i.as2D(1,-1):i,u=X.runKernelFunc(function(l){return l.multinomial(s,r,e,n)},{logits2D:s});return o===1?u.as1D():u}}),ag=H({oneHot_:function(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var i=F(t,"indices","oneHot","int32"),a=i.shape.concat([e]);return i=i.flatten(),X.runKernelFunc(function(o){return o.oneHot(i,e,n,r)},{$indices:i},function(o){return{$indices:function(){return At(i.shape,"float32")}}}).reshape(a)}}),Qs=H({pad_:function(t,e,n){n===void 0&&(n=0);var r=F(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:e,constantValue:n};return X.runKernelFunc(function(a){return a.pad(r,e,n)},{x:r},function(a){var o=e.map(function(s){return s[0]});return{x:function(){return a.slice(o,r.shape)}}},"PadV2",i)}}),F6=H({pad1d_:function(t,e,n){return n===void 0&&(n=0),M(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Qs(t,[e],n)}}),D6=H({pad2d_:function(t,e,n){return n===void 0&&(n=0),M(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Qs(t,e,n)}}),O6=H({pad3d_:function(t,e,n){return n===void 0&&(n=0),M(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Qs(t,e,n)}}),P6=H({pad4d_:function(t,e,n){return n===void 0&&(n=0),M(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Qs(t,e,n)}}),N6=H({rand_:function(t,e,n){var r=Be(t),i=null;if(n==null||n==="float32")i=new Float32Array(r);else if(n==="int32")i=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(var a=0;a<r;a++)i[a]=e();return X.makeTensor(i,t,n)}}),M6=H({randomNormal_:function(t,e,n,r,i){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new q1(e,n,r,!1,i),o=Ye(t,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),L6=H({randomGamma_:function(t,e,n,r,i){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var a=new b6(e,n,r,i),o=Ye(t,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),YT=H({randomUniform_:function(t,e,n,r,i){e===void 0&&(e=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var a=Ye(t,r),o=new E6(e,n,null,i),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),Oi=H({reshape_:function(t,e){var n=F(t,"x","reshape",null);e=mB(e,n.size),M(n.size===Be(e),function(){return"new shape and old shape must have the same number of elements."});var r={shape:e};return X.runKernelFunc(function(i){return i.reshape(n,e)},{x:n},function(i){return{x:function(){return i.reshape(n.shape)}}},"Reshape",r)}}),QT=H({spaceToBatchND_:function(t,e,n){var r=F(t,"x","spaceToBatchND");return M(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),M(n.length===e.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length}),M(r.shape.reduce(function(i,a,o){return o>0&&o<=e.length?i&&(a+n[o-1][0]+n[o-1][1])%e[o-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()}),X.runKernelFunc(function(i){return i.spaceToBatchND(r,e,n)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(e,n)}}})}}),JT=H({squeeze_:function(t,e){var n=F(t,"x","squeeze");return Oi(n,gs(n.shape,e).newShape)}}),ei=H({stack_:function(t,e){e===void 0&&(e=0);var n=op(t,"tensors","stack");if(M(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(e);var r=n[0].rank,i=n[0].shape,a=n[0].dtype;M(e<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(s){pt(i,s.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(s){M(a===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=n.map(function(s){return s.expandDims(e)});return mn(o,e)}}),$u=H({tile_:function(t,e){var n=F(t,"x","tile",null);M(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."});var r=[n],i={reps:e};return X.runKernelFunc(function(a,o){var s=a.tile(n,e);return o([n]),s},{x:n},function(a,o){var s=o[0];return{x:function(){var u=st(s);if(s.rank===1)for(var l=0;l<e[0];++l)u=u.add(a.slice([l*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(l=0;l<e[0];++l)for(var c=0;c<e[1];++c)u=u.add(a.slice([l*s.shape[0],c*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(l=0;l<e[0];++l)for(c=0;c<e[1];++c)for(var f=0;f<e[2];++f)u=u.add(a.slice([l*s.shape[0],c*s.shape[1],f*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(l=0;l<e[0];++l)for(c=0;c<e[1];++c)for(f=0;f<e[2];++f)for(var h=0;h<e[3];++h)u=u.add(a.slice([l*s.shape[0],c*s.shape[1],f*s.shape[2],h*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return u}}},"Tile",i,r)}}),B6=H({truncatedNormal_:function(t,e,n,r,i){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new q1(e,n,r,!0,i),o=Ye(t,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),gn=H({unstack_:function(t,e){e===void 0&&(e=0),e=e||0;var n=F(t,"x","unstack");M(e>=-n.shape.length&&e<n.shape.length,function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),e<0&&(e+=n.shape.length);var r={axis:e};return X.runKernelFunc(function(i){return i.unstack(n,e)},{x:n},function(i){return{x:function(){return ei(i,e)}}},"Unpack",r)}}),W6=function(t,e){return Pe(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,c,f;return Ne(this,function(h){switch(h.label){case 0:return n=F(t,"x","setdiff1d"),r=F(e,"y","setdiff1d"),M(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),M(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),M(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return i=h.sent(),[4,r.data()];case 2:for(a=h.sent(),o=new Set(a),s=0,c=0;c<i.length;c++)o.has(i[c])||s++;for(u=new Jc([s],n.dtype),l=new Jc([s],"int32"),c=0,f=0;c<i.length;c++)o.has(i[c])||(u.values[f]=i[c],l.values[f]=c,f++);return[2,[u.toTensor(),l.toTensor()]]}})})};function up(t,e,n,r){r===void 0&&(r=!0);var i=[];if(r)(i=i.concat(e.slice(0))).push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);for(var a=e.length,o=0;o<a;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(a+1))}return i}function lp(t,e,n){n===void 0&&(n=!0);var r=[];if(n){r.push(e);for(var i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{var a=[],o=[];for(i=1;i<t;++i)i>=2*e+1||i%2==1?o.push(i):a.push(i);r.push.apply(r,a),r.push(0),r.push.apply(r,o)}return r}function cp(t,e,n,r){r===void 0&&(r=!0);var i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(var a=1;a<t.length;++a)a<=e.length?r?i.push(e[a-1]*t[a]):i.push(t[a]/e[a-1]):i.push(t[a]);return i}function ZT(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function ek(t,e,n){for(var r=t.slice(0,1),i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}function tk(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],i=1,a=0;a<n.length-1;++a)i*=n[a];var o=t.shape,s=n.slice();s.pop();var u=1;for(a=r;a<t.rank;++a)u*=o[a],s.push(o[a]);var l=ca(t.shape).map(function(c){return c/u}).concat([1]).slice(0,r);return[s,i,u,l]}var nk=30;function xv(t){return t<=nk?t:Zm(t,Math.floor(Math.sqrt(t)))}function z6(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+i+".";if(n.rank<i)throw new Error(a+" update.rank < "+i+". ");if(t.length<r+(n.rank-i))throw new Error(a+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+t.length-r)throw new Error(a+" update.rank != "+(i+t.length-r));for(var o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(a+" updates.shape["+o+"] ("+n.shape[o]+") != indices.shape["+o+"] ("+e.shape[o]+").");for(o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(a+" updates.shape["+(o+i)+"] ("+n.shape[o+i]+") != shape["+(o+i)+"] ("+t[o+i]+")")}function U6(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}z6(n,e,t)}function fp(t,e,n){for(var r=e.shape.length,i=r>1?e.shape[r-1]:1,a=n.length,o=1,s=i;s<a;++s)o*=n[s];var u=i<1?1:i;return{sliceRank:i,numUpdates:Be(e.shape)/u,sliceSize:o,strides:ca(n.slice(0,i)).concat([1]),outputSize:Be(n)}}function V6(t,e,n){M(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."}),M(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."});for(var r=function(a){M(e[a]+n[a]<=t.shape[a],function(){return"Error in slice"+t.rank+"D: begin["+a+"] + size["+a+"] ("+(e[a]+n[a])+") would overflow input.shape["+a+"] ("+t.shape[a]+")"})},i=0;i<t.rank;++i)r(i)}function Sw(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function Y1(t,e,n){for(var r=[],i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function H6(t,e,n,r,i){var a=e[i],o=n[i]||1;(t&1<<i||a==null)&&(a=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[i];return a<0&&(a+=s),a=Ym(0,a,s-1)}function $6(t,e,n,r,i){var a=e[i],o=n[i]||1;(t&1<<i||a==null)&&(a=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return a<0&&(a+=s),a=o>0?Ym(0,a,s):Ym(-1,a,s-1)}function rk(t,e,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function ik(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function j6(t,e){M(Jm(t),function(){return"The f passed in variableGrads(f) must be a function"}),M(e==null||Array.isArray(e)&&e.every(function(c){return c instanceof ul}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=e!=null;if(!n)for(var r in e=[],X.registeredVariables)e.push(X.registeredVariables[r]);var i=n?e.filter(function(c){return!c.trainable}):null,a=e.length;M((e=e.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."});var o=X.gradients(t,e,null,!0),s=o.value,u=o.grads;M(u.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),M(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var l={};return e.forEach(function(c,f){u[f]!=null&&(l[c.name]=u[f])}),i!=null&&i.forEach(function(c){return l[c.name]=null}),{value:s,grads:l}}function t0(t){return X.customGrad(t)}var Ja=H({softmax_:function(t,e){e===void 0&&(e=-1);var n=F(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return X.runKernelFunc(function(r,i){var a=r.softmax(n,e);return i([a]),a},{logits:n},function(r,i){var a=i[0],o=r.mul(a);return{logits:function(){return o.sub(o.sum([e],!0).mul(a))}}},"Softmax",{dim:e},[],[!0])}}),G6=H({logSoftmax_:function(t,e){e===void 0&&(e=-1);var n=F(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return t0(function(r,i){var a=r.max(e,!0),o=r.sub(a),s=o.toFloat().sub(o.exp().sum(e,!0).log());return i([s]),{value:s,gradFunc:function(u,l){var c=l[0].exp();return u.sub(u.sum(e,!0).mul(c))}}})(n)}}),ak=function(){function t(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},t.prototype.set=function(e,n){this.dataIdsCount++,this.data.set(e,n)},t.prototype.has=function(e){return this.data.has(e)},t.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),ok=function(){function t(){}return t.prototype.time=function(e){return se("time")},t.prototype.read=function(e){return se("read")},t.prototype.readSync=function(e){return se("readSync")},t.prototype.numDataIds=function(){return se("numDataIds")},t.prototype.disposeData=function(e){return se("disposeData")},t.prototype.write=function(e,n,r){return se("write")},t.prototype.move=function(e,n,r,i){return se("move")},t.prototype.memory=function(){return se("memory")},t.prototype.floatPrecision=function(){return se("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(e,n,r,i){return se("batchMatMul")},t.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,se("fusedBatchMatMul")},t.prototype.slice=function(e,n,r){return se("slice")},t.prototype.stridedSlice=function(e,n,r,i){return se("stridedSlice")},t.prototype.unstack=function(e,n){return se("unstack")},t.prototype.reverse=function(e,n){return se("reverse")},t.prototype.concat=function(e,n){return se("concat")},t.prototype.neg=function(e){return se("neg")},t.prototype.add=function(e,n){return se("add")},t.prototype.addN=function(e){return se("addN")},t.prototype.subtract=function(e,n){return se("subtract")},t.prototype.multiply=function(e,n){return se("multiply")},t.prototype.realDivide=function(e,n){return se("realDivide")},t.prototype.floorDiv=function(e,n){return se("floorDiv")},t.prototype.sum=function(e,n){return se("sum")},t.prototype.prod=function(e,n){return se("prod")},t.prototype.unsortedSegmentSum=function(e,n,r){return se("unsortedSegmentSum")},t.prototype.argMin=function(e,n){return se("argMin")},t.prototype.argMax=function(e,n){return se("argMax")},t.prototype.equal=function(e,n){return se("equal")},t.prototype.notEqual=function(e,n){return se("notEqual")},t.prototype.less=function(e,n){return se("less")},t.prototype.lessEqual=function(e,n){return se("lessEqual")},t.prototype.greater=function(e,n){return se("greater")},t.prototype.greaterEqual=function(e,n){return se("greaterEqual")},t.prototype.logicalNot=function(e){return se("logicalNot")},t.prototype.logicalAnd=function(e,n){return se("logicalAnd")},t.prototype.logicalOr=function(e,n){return se("logicalOr")},t.prototype.where=function(e){return se("where")},t.prototype.select=function(e,n,r){return se("select")},t.prototype.topk=function(e,n,r){return se("topk")},t.prototype.min=function(e,n){return se("min")},t.prototype.minimum=function(e,n){return se("minimum")},t.prototype.mod=function(e,n){return se("mod")},t.prototype.max=function(e,n){return se("max")},t.prototype.maximum=function(e,n){return se("maximum")},t.prototype.all=function(e,n){return se("all")},t.prototype.any=function(e,n){return se("any")},t.prototype.squaredDifference=function(e,n){return se("squaredDifference")},t.prototype.ceil=function(e){return se("ceil")},t.prototype.floor=function(e){return se("floor")},t.prototype.round=function(e){return se("round")},t.prototype.sign=function(e){return se("sign")},t.prototype.isNaN=function(e){return se("isNaN")},t.prototype.isInf=function(e){return se("isInf")},t.prototype.isFinite=function(e){return se("isFinite")},t.prototype.pow=function(e,n){return se("pow")},t.prototype.exp=function(e){return se("exp")},t.prototype.expm1=function(e){return se("expm1")},t.prototype.softmax=function(e,n){return se("softmax")},t.prototype.log=function(e){return se("log")},t.prototype.log1p=function(e){return se("log1p")},t.prototype.sqrt=function(e){return se("sqrt")},t.prototype.rsqrt=function(e){return se("rsqrt")},t.prototype.square=function(e){return se("square")},t.prototype.reciprocal=function(e){return se("reciprocal")},t.prototype.relu=function(e){return se("relu")},t.prototype.relu6=function(e){return se("relu6")},t.prototype.prelu=function(e,n){return se("prelu")},t.prototype.elu=function(e){return se("elu")},t.prototype.eluDer=function(e,n){return se("eluDer")},t.prototype.selu=function(e){return se("selu")},t.prototype.int=function(e){return se("int")},t.prototype.clip=function(e,n,r){return se("clip")},t.prototype.abs=function(e){return se("abs")},t.prototype.complexAbs=function(e){return se("complexAbs")},t.prototype.sigmoid=function(e){return se("sigmoid")},t.prototype.softplus=function(e){return se("softplus")},t.prototype.sin=function(e){return se("sin")},t.prototype.cos=function(e){return se("cos")},t.prototype.tan=function(e){return se("tan")},t.prototype.asin=function(e){return se("asin")},t.prototype.acos=function(e){return se("acos")},t.prototype.atan=function(e){return se("atan")},t.prototype.atan2=function(e,n){return se("atan2")},t.prototype.sinh=function(e){return se("sinh")},t.prototype.cosh=function(e){return se("cosh")},t.prototype.tanh=function(e){return se("tanh")},t.prototype.asinh=function(e){return se("asinh")},t.prototype.acosh=function(e){return se("acosh")},t.prototype.atanh=function(e){return se("atanh")},t.prototype.erf=function(e){return se("erf")},t.prototype.step=function(e,n){return se("step")},t.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,se("fusedConv2d")},t.prototype.conv2d=function(e,n,r){return se("conv2d")},t.prototype.conv2dDerInput=function(e,n,r){return se("conv2dDerInput")},t.prototype.conv2dDerFilter=function(e,n,r){return se("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,se("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(e,n,r){return se("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(e,n,r){return se("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){return se("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(e,n,r){return se("conv3d")},t.prototype.conv3dDerInput=function(e,n,r){return se("conv3dDerInput")},t.prototype.conv3dDerFilter=function(e,n,r){return se("conv3dDerFilter")},t.prototype.maxPool=function(e,n){return se("maxPool")},t.prototype.maxPoolBackprop=function(e,n,r,i){return se("maxPoolBackprop")},t.prototype.avgPool=function(e,n){return se("avgPool")},t.prototype.avgPoolBackprop=function(e,n,r){return se("avgPoolBackprop")},t.prototype.avgPool3d=function(e,n){return se("avgPool3d")},t.prototype.avgPool3dBackprop=function(e,n,r){return se("avgPool3dBackprop")},t.prototype.maxPool3d=function(e,n){return se("maxPool3d")},t.prototype.maxPool3dBackprop=function(e,n,r,i){return se("maxPool3dBackprop")},t.prototype.reshape=function(e,n){return se("reshape")},t.prototype.cast=function(e,n){return se("cast")},t.prototype.tile=function(e,n){return se("tile")},t.prototype.pad=function(e,n,r){return se("pad")},t.prototype.transpose=function(e,n){return se("transpose")},t.prototype.gather=function(e,n,r){return se("gather")},t.prototype.gatherND=function(e,n){return se("gatherND")},t.prototype.scatterND=function(e,n,r){return se("scatterND")},t.prototype.batchToSpaceND=function(e,n,r){return se("batchToSpaceND")},t.prototype.spaceToBatchND=function(e,n,r){return se("spaceToBatchND")},t.prototype.resizeBilinear=function(e,n,r,i){return se("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(e,n,r){return se("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(e,n,r,i){return se("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){return se("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(e,n,r,i,a,o){return se("batchNormalization")},t.prototype.localResponseNormalization4D=function(e,n,r,i,a){return se("localResponseNormalization4D")},t.prototype.LRNGrad=function(e,n,r,i,a,o,s){return se("LRNGrad")},t.prototype.multinomial=function(e,n,r,i){return se("multinomial")},t.prototype.oneHot=function(e,n,r,i){return se("oneHot")},t.prototype.cumsum=function(e,n,r,i){return se("cumsum")},t.prototype.nonMaxSuppression=function(e,n,r,i,a){return se("nonMaxSuppression")},t.prototype.fft=function(e){return se("fft")},t.prototype.ifft=function(e){return se("ifft")},t.prototype.complex=function(e,n){return se("complex")},t.prototype.real=function(e){return se("real")},t.prototype.imag=function(e){return se("imag")},t.prototype.cropAndResize=function(e,n,r,i,a,o){return se("cropAndResize")},t.prototype.depthToSpace=function(e,n,r){return se("depthToSpace")},t.prototype.split=function(e,n,r){return se("split")},t.prototype.sparseToDense=function(e,n,r,i){return se("sparseToDense")},t.prototype.diag=function(e){return se("diag")},t.prototype.fill=function(e,n,r){return se("fill")},t.prototype.onesLike=function(e){return se("onesLike")},t.prototype.zerosLike=function(e){return se("zerosLike")},t.prototype.linspace=function(e,n,r){return se("linspace")},t.prototype.dispose=function(){return se("dispose")},t}();function se(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function _o(t,e){for(var n=t.length,r=[],i=0;i<n;i++){var a=n-1-i,o=t[a]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(a)}return r}function xn(t,e){for(var n=[],r=0;r<e.length;r++){var i=t[t.length-r-1],a=e.length-r-1,o=e[a];(i==null||i===1&&o>1)&&n.unshift(a)}return n}function at(t,e){for(var n=[],r=Math.max(t.length,e.length),i=0;i<r;i++){var a=t[t.length-i-1];a==null&&(a=1);var o=e[e.length-i-1];if(o==null&&(o=1),a===1)n.unshift(o);else if(o===1)n.unshift(a);else{if(a!==o)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(a)}}return n}function ef(t,e,n,r,i,a,o){o===void 0&&(o="channelsLast");var s,u=pp(e),l=u[0],c=u[1];if(o==="channelsLast")s=[l,c,t[3],t[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);s=[l,c,t[1],t[1]]}return Js(t,s,n,r,i,a,!1,o)}function hp(t,e,n,r,i,a,o){o===void 0&&(o="NDHWC");var s,u,l=og(e),c=l[0],f=l[1],h=l[2];if(o==="NDHWC")u="channelsLast",s=[c,f,h,t[4],t[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);u="channelsFirst",s=[c,f,h,t[1],t[1]]}return dp(t,s,n,r,i,!1,u,a)}function Js(t,e,n,r,i,a,o,s){o===void 0&&(o=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],h=u[3];if(s==="channelsLast")l=t[0],c=t[1],f=t[2],h=t[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=t[0],h=t[1],c=t[2],f=t[3]}var d,v=e[0],p=e[1],m=e[3],g=pp(n),x=g[0],y=g[1],w=pp(r),_=w[0],b=w[1],E=ju(v,_),S=ju(p,b),C=function(J,K,ae,ie,G,Q,te,pe){var P,j,U;if(typeof J=="number"){P={top:J,bottom:J,left:J,right:J,type:J===0?"VALID":"NUMBER"};var z=function(Fe,Re,He,Ve,Me){Ve==null&&(Ve=sk(Fe,Re,He));var $e=Fe[0],Te=Fe[1],Et=_c(($e-Re+2*Ve)/He+1,Me);M(Jt(Et),function(){return"The output # of rows ("+Et+") must be an integer. Change the stride and/or zero pad parameters"});var vt=_c((Te-Re+2*Ve)/He+1,Me);return M(Jt(vt),function(){return"The output # of columns ("+vt+") must be an integer. Change the stride and/or zero pad parameters"}),[Et,vt]}([K,ae],Q,ie,J,pe);j=z[0],U=z[1]}else if(J==="same"){j=Math.ceil(K/ie),U=Math.ceil(ae/G);var Z=Math.max(0,(j-1)*ie+Q-K),xe=Math.max(0,(U-1)*G+te-ae),we=Math.floor(Z/2),ee=Z-we,de=Math.floor(xe/2);P={top:we,bottom:ee,left:de,right:xe-de,type:"SAME"}}else{if(J!=="valid")throw Error("Unknown padding parameter: "+J);P={top:0,bottom:0,left:0,right:0,type:"VALID"},j=Math.ceil((K-Q+1)/ie),U=Math.ceil((ae-te+1)/G)}return{padInfo:P,outHeight:j,outWidth:U}}(i,c,f,x,y,E,S,a),T=C.padInfo,A=C.outHeight,I=C.outWidth,V=o?m*h:m;return s==="channelsFirst"?d=[l,V,A,I]:s==="channelsLast"&&(d=[l,A,I,V]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:f,inChannels:h,outHeight:A,outWidth:I,outChannels:V,padInfo:T,strideHeight:x,strideWidth:y,filterHeight:v,filterWidth:p,effectiveFilterHeight:E,effectiveFilterWidth:S,dilationHeight:_,dilationWidth:b,inShape:t,outShape:d,filterShape:e}}function dp(t,e,n,r,i,a,o,s){a===void 0&&(a=!1),o===void 0&&(o="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],h=u[3],d=u[4];if(o==="channelsLast")l=t[0],c=t[1],f=t[2],h=t[3],d=t[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);l=t[0],d=t[1],c=t[2],f=t[3],h=t[4]}var v,p=e[0],m=e[1],g=e[2],x=e[4],y=og(n),w=y[0],_=y[1],b=y[2],E=og(r),S=E[0],C=E[1],T=E[2],A=ju(p,S),I=ju(m,C),V=ju(g,T),J=function(te,pe,P,j,U,z,Z,xe,we,ee,de){var Fe,Re,He,Ve;if(typeof te=="number"){Fe={top:te,bottom:te,left:te,right:te,front:te,back:te,type:te===0?"VALID":"NUMBER"};var Me=function(Ut,Pn,$i,Mr,Kt,qt){Kt==null&&(Kt=sk(Ut,Pn,Mr));var ro=Ut[0],Vt=Ut[1],io=Ut[2],ai=_c((ro-Pn+2*Kt)/Mr+1,qt);M(Jt(ai),function(){return"The output # of depths ("+ai+") must be an integer. Change the stride and/or zero pad parameters"});var Kn=_c((Vt-Pn+2*Kt)/Mr+1,qt);M(Jt(Kn),function(){return"The output # of rows ("+Kn+") must be an integer. Change the stride and/or zero pad parameters"});var ji=_c((io-Pn+2*Kt)/Mr+1,qt);return M(Jt(ji),function(){return"The output # of columns ("+ji+") must be an integer. Change the stride and/or zero pad parameters"}),[ai,Kn,ji,$i]}([pe,P,j,1],xe,1,U,te,de);Re=Me[0],He=Me[1],Ve=Me[2]}else if(te==="same"){Re=Math.ceil(pe/U),He=Math.ceil(P/z),Ve=Math.ceil(j/Z);var $e=(Re-1)*U+xe-pe,Te=(He-1)*z+we-P,Et=(Ve-1)*Z+ee-j,vt=Math.floor($e/2),bn=$e-vt,Xt=Math.floor(Te/2),ur=Te-Xt,St=Math.floor(Et/2);Fe={top:Xt,bottom:ur,left:St,right:Et-St,front:vt,back:bn,type:"SAME"}}else{if(te!=="valid")throw Error("Unknown padding parameter: "+te);Fe={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Re=Math.ceil((pe-xe+1)/U),He=Math.ceil((P-we+1)/z),Ve=Math.ceil((j-ee+1)/Z)}return{padInfo:Fe,outDepth:Re,outHeight:He,outWidth:Ve}}(i,c,f,h,w,_,b,A,I,V,s),K=J.padInfo,ae=J.outDepth,ie=J.outHeight,G=J.outWidth,Q=a?x*d:x;return o==="channelsFirst"?v=[l,Q,ae,ie,G]:o==="channelsLast"&&(v=[l,ae,ie,G,Q]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:f,inWidth:h,inChannels:d,outDepth:ae,outHeight:ie,outWidth:G,outChannels:Q,padInfo:K,strideDepth:w,strideHeight:_,strideWidth:b,filterDepth:p,filterHeight:m,filterWidth:g,effectiveFilterDepth:A,effectiveFilterHeight:I,effectiveFilterWidth:V,dilationDepth:S,dilationHeight:C,dilationWidth:T,inShape:t,outShape:v,filterShape:e}}function sk(t,e,n,r){r===void 0&&(r=1);var i=ju(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function pp(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function og(t){return typeof t=="number"?[t,t,t]:t}function ju(t,e){return e<=1?t:t+(t-1)*(e-1)}function _c(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function cl(t){var e=pp(t),n=e[0],r=e[1],i=e[2];return n===1&&r===1&&i===1}function Nr(t,e){return cl(t)||cl(e)}function Q1(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function uk(t,e,n){if(e==="complex64"){if(t.dtype==="complex64")return t.clone();var r=At(t.shape),i=t.toFloat(),a=n.complex(i,r);return r.dispose(),i.dispose(),a}if(!yB(t.dtype,e))return X.makeTensorFromDataId(t.dataId,t.shape,e);if(t.dtype==="complex64"){var o=n.real(t);return a=o.cast(e),o.dispose(),a}if(e==="int32")return n.int(t);if(e==="bool"){var s=Ie(0,t.dtype);return a=n.notEqual(t,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function sg(t,e){return X.makeTensorFromDataId(t.dataId,e,t.dtype)}function lk(t,e,n){var r=(e-t)/(n-1),i=Cf(n,"float32");i[0]=t;for(var a=1;a<i.length;a++)i[a]=i[a-1]+r;return rn(i,"float32")}function ug(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Cw(t,e){return{real:t[2*e],imag:t[2*e+1]}}function X6(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function K6(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function q6(t,e,n){var r=function(a,o,s){return function(u,l,c){for(var f=0,h=u.length,d=0,v=!1;f<h;){var p=c(l,u[d=f+(h-f>>>1)]);p>0?f=d+1:(h=d,v=!p)}return v?f:-f-1}(a,o,s||Y6)}(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function Y6(t,e){return t>e?1:t<e?-1:0}function J1(t,e,n,r,i){return ck(t,e,n,r,i,0).selectedIndices}function Z1(t,e,n,r,i,a){var o=ck(t,e,n,r,i,a);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function ck(t,e,n,r,i,a,o,s){s===void 0&&(s=!1);for(var u=Array.from(e).map(function(w,_){return{score:w,boxIndex:_,suppressBeginIndex:0}}).filter(function(w){return w.score>i}).sort(Tw),l=a>0?-.5/a:0,c=[],f=[];c.length<n&&u.length>0;){var h=u.pop(),d=h.score,v=h.boxIndex,p=h.suppressBeginIndex;if(d<i)break;for(var m=!1,g=c.length-1;g>=p;--g){var x=Q6(t,v,c[g]);if(x>=r){m=!0;break}if(h.score=h.score*J6(r,l,x),h.score<=i)break}h.suppressBeginIndex=c.length,m||(h.score===d?(c.push(v),f.push(h.score)):h.score>i&&q6(u,h,Tw))}var y=c.length;return s&&(c.fill(0,y),f.fill(0,y)),{selectedIndices:rn(c,"int32"),selectedScores:rn(f,"float32"),numValidOutputs:Ie(y,"int32")}}function Q6(t,e,n){var r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),d=(s-a)*(u-o),v=(f-l)*(h-c);if(d<=0||v<=0)return 0;var p=Math.max(a,l),m=Math.max(o,c),g=Math.min(s,f),x=Math.min(u,h),y=Math.max(g-p,0)*Math.max(x-m,0);return y/(d+v-y)}function J6(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function Tw(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function fk(t,e,n){var r=new Array(t.rank).fill(0),i=t.shape.slice();return e.map(function(a){i[n]=a;var o=t.slice(r,i);return r[n]+=a,o})}function hk(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var i=Ye(n,t.dtype);for(r=0;r<i.values.length;++r){for(var a=i.indexToLoc(r),o=new Array(t.rank),s=0;s<o.length;s++)o[s]=a[s]%t.shape[s];var u=t.locToIndex(o);i.values[r]=t.values[u]}return i.toTensor()}function dk(t,e,n,r,i){for(var a=e[e.length-1],o=[t.length/a,a],s=o[0],u=o[1],l=Qc(n,s*r),c=Qc("int32",s*r),f=0;f<s;f++){for(var h=f*u,d=t.subarray(h,h+u),v=[],p=0;p<d.length;p++)v.push({value:d[p],index:p});v.sort(function(w,_){return _.value-w.value});var m=f*r,g=l.subarray(m,m+r),x=c.subarray(m,m+r);for(p=0;p<r;p++)g[p]=v[p].value,x[p]=v[p].index}var y=e.slice();return y[y.length-1]=r,[Un(l,y,n),Un(c,y,"int32")]}function ex(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var i=Ye(t,"int32"),a=Ye([n.length,t.length],"int32");for(r=0;r<n.length;r++){var o=i.indexToLoc(n[r]),s=r*t.length;a.values.set(o,s)}return a.toTensor()}var Z6=function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map(function(i,a){return"T"+a});var n=[];this.variableNames.forEach(function(i){n.push("float v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},e5=function(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map(function(i,a){return"T"+a});var n=[];this.variableNames.forEach(function(i){n.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},t5=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,a=t.inSize,o=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s=e==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function pk(t,e){return["x","y","z","w","u","v"].slice(0,e).map(function(n){return t+"."+n})}function Er(t,e){return e===1?[t]:pk(t,e)}function er(){var t,e,n,r,i,a,o,s,u,l;return fe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function _s(t,e,n){n===void 0&&(n="index");var r=ca(e);return r.map(function(i,a){return"int "+t[a]+" = "+n+" / "+i+"; "+(a===r.length-1?"int "+t[a+1]+" = "+n+" - "+t[a]+" * "+i:"index -= "+t[a]+" * "+i)+";"}).join("")}function tx(t){var e=ca(t).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var vk=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function n5(t,e,n,r){var i=[];t.forEach(function(d){var v=Be(d.shapeInfo.logicalShape);d.shapeInfo.isUniform?i.push("uniform float "+d.name+(v>1?"["+v+"]":"")+";"):(i.push("uniform sampler2D "+d.name+";"),i.push("uniform int offset"+d.name+";"))});var a,o,s=i.join(`
`),u=t.map(function(d){return function(v,p,m){m===void 0&&(m=!1);var g="";g+=m?mk(v):mu(v);var x=v.shapeInfo.logicalShape,y=p.logicalShape;return x.length<=y.length&&(g+=m?function(w,_){var b,E=w.name,S=E.charAt(0).toUpperCase()+E.slice(1),C="get"+S+"AtOutCoords",T=w.shapeInfo.logicalShape.length,A=_.logicalShape.length,I=_o(w.shapeInfo.logicalShape,_.logicalShape),V=Tt(A),J=A-T,K=["x","y","z","w","u","v"];b=T===0?"":A<2&&I.length>=1?"coords = 0;":I.map(function(P){return"coords."+K[P+J]+" = 0;"}).join(`
`);var ae="";ae=A<2&&T>0?"coords":w.shapeInfo.logicalShape.map(function(P,j){return"coords."+K[j+J]}).join(", ");var ie="return outputValue;",G=Be(w.shapeInfo.logicalShape)===1,Q=Be(_.logicalShape)===1;if(T!==1||G||Q){if(G&&!Q)ie=A===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(I.length){var te=T-2,pe=T-1;I.indexOf(te)>-1&&I.indexOf(pe)>-1?ie="return vec4(outputValue.x);":I.indexOf(te)>-1?ie="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":I.indexOf(pe)>-1&&(ie="return vec4(outputValue.xx, outputValue.zz);")}}else ie=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+C+`() {
      `+V+` coords = getOutputCoords();
      `+b+`
      vec4 outputValue = get`+S+"("+ae+`);
      `+ie+`
    }
  `}(v,p):function(w,_){var b=w.name,E=b.charAt(0).toUpperCase()+b.slice(1),S="get"+E+"AtOutCoords",C=_.texShape,T=w.shapeInfo.texShape,A=w.shapeInfo.logicalShape.length,I=_.logicalShape.length;if(!w.shapeInfo.isUniform&&A===I&&w.shapeInfo.flatOffset==null&&Dn(T,C))return`
      float `+S+`() {
        return sampleTexture(`+b+`, resultUV);
      }
    `;var V,J=Tt(I),K=_o(w.shapeInfo.logicalShape,_.logicalShape),ae=I-A,ie=["x","y","z","w","u","v"];V=A===0?"":I<2&&K.length>=1?"coords = 0;":K.map(function(Q){return"coords."+ie[Q+ae]+" = 0;"}).join(`
`);var G="";return G=I<2&&A>0?"coords":w.shapeInfo.logicalShape.map(function(Q,te){return"coords."+ie[te+ae]}).join(", "),`
    float `+S+`() {
      `+J+` coords = getOutputCoords();
      `+V+`
      return get`+E+"("+G+`);
    }
  `}(v,p)),g}(d,e,r)}).join(`
`),l=e.texShape,c=er(),f=function(d){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+d.texture2D+`(textureSampler, uv).r;
    }
  `}(c),h=function(d){return d.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+d.varyingFs+` vec2 resultUV;
    `+d.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+d.defineSpecialNaN+`
    `+d.defineSpecialInf+`
    `+d.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+r5+`
    `+i5+`
    `+a5+`
  `}(c);return e.isPacked?(a=function(d,v){switch(d.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(w,_){var b=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)];return b[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+b[1]+`.0);
      }
    `:b[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+b[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+b[0]+", "+b[1]+`));
      return 2 * (resTexRC.x * `+b[1]+` + resTexRC.y);
    }
  `}(0,v);case 2:return function(w,_){var b=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)];if(Dn(w,_))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+b[0]+", "+b[1]+`));
      }
    `;var E=Math.ceil(w[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+b[0]+", "+b[1]+`));

      int index = resTexRC.x * `+b[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(d,v);case 3:return p=d,m=v,g=[Math.ceil(m[0]/2),Math.ceil(m[1]/2)],x=Math.ceil(p[2]/2),y=x*Math.ceil(p[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;

      int b = index / `+y+`;
      index -= b * `+y+`;

      int r = 2 * (index / `+x+`);
      int c = imod(index, `+x+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(w,_){for(var b=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)],E=Math.ceil(w[w.length-1]/2),S=E*Math.ceil(w[w.length-2]/2),C=S,T="",A="b, r, c",I=2;I<w.length-1;I++)C*=w[w.length-I-1],T=`
      int b`+I+" = index / "+C+`;
      index -= b`+I+" * "+C+`;
    `+T,A="b"+I+", "+A;return`
    ivec`+w.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+b[0]+", "+b[1]+`));
      int index = resTexRC.x * `+b[1]+` + resTexRC.y;

      `+T+`

      int b = index / `+S+`;
      index -= b * `+S+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+w.length+"("+A+`);
    }
  `}(d,v)}var p,m,g,x,y}(e.logicalShape,l),o=function(d){return`
    void setOutput(vec4 val) {
      `+d.output+` = val;
    }
  `}(c)):(a=function(d,v){switch(d.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(g,x){return x[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+x[1]+`.0);
      }
    `:x[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+x[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      return resTexRC.x * `+x[1]+` + resTexRC.y;
    }
  `}(0,v);case 2:return function(g,x){return Dn(g,x)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+x[0]+", "+x[1]+`));
      }
    `:g[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+x[0]+", "+x[1]+`));
        int index = resTexRC.x * `+x[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:g[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+x[0]+", "+x[1]+`));
        int index = resTexRC.x * `+x[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      int r = index / `+g[1]+`;
      int c = index - r * `+g[1]+`;
      return ivec2(r, c);
    }
  `}(d,v);case 3:return p=v,m=_s(["r","c","d"],d),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+p[0]+", "+p[1]+`));
      int index = resTexRC.x * `+p[1]+` + resTexRC.y;
      `+m+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(g,x){var y=_s(["r","c","d","d2"],g);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      `+y+`
      return ivec4(r, c, d, d2);
    }
  `}(d,v);case 5:return function(g,x){var y=_s(["r","c","d","d2","d3"],g);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+x[0]+`,
                             `+x[1]+`));

      int index = resTexRC.x * `+x[1]+` + resTexRC.y;

      `+y+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(d,v);case 6:return function(g,x){var y=_s(["r","c","d","d2","d3","d4"],g);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;

      `+y+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(d,v);default:throw new Error(d.length+"-D output sampling is not yet supported")}var p,m}(e.logicalShape,l),o=function(d){return`
    void setOutput(float val) {
      `+d.output+` = vec4(val, 0, 0, 0);
    }
  `}(c)),r&&(h+=o5),[h,f,o,s,a,u,n].join(`
`)}function mu(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(n){var r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var a=n.shapeInfo.texShape,o=a[0],s=a[1];if(o===1&&s===1)return`
      float `+i+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=n.shapeInfo.texShape,l=u[0],c=u[1],f=as(r);return`
    float `+i+`() {
      vec2 uv = uvFromFlat(`+l+", "+c+", "+f+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 1:return function(n){var r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+i+`(int index) {
        `+cu(n)+`
      }
    `;var a=n.shapeInfo.texShape,o=a[0],s=a[1];if(s===1&&o===1)return`
      float `+i+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=as(r);return s===1?`
      float `+i+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+o+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:o===1?`
      float `+i+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+i+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 2:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=n.shapeInfo.texShape;if(o!=null&&Dn(r,o)){var s=o[0],u=o[1];return`
    float `+a+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `}var l=gs(r),c=l.newShape,f=l.keptDims,h=c;if(h.length<r.length){var d=gu(n,h);return`
      `+mu(d)+`
      float `+a+`(int row, int col) {
        return `+a+"("+xu(["row","col"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+cu(n)+`
      }
    `;var v=o[0],p=o[1],m=as(i);return p===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+m+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+v+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `:v===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+m+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+p+`.0, 0.5);
      return sampleTexture(`+i+`, uv);
    }
  `:`
  float `+a+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+m+`;
    vec2 uv = uvFromFlat(`+v+", "+p+`, index);
    return sampleTexture(`+i+`, uv);
  }
`}(t);case 3:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r[1]*r[2],s=r[2],u=gs(r),l=u.newShape,c=u.keptDims,f=l;if(f.length<r.length){var h=gu(n,f);return`
        `+mu(h)+`
        float `+a+`(int row, int col, int depth) {
          return `+a+"("+xu(["row","col","depth"],c)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+s+`, 1)));
        `+cu(n)+`
      }
    `;var d=n.shapeInfo.texShape,v=d[0],p=d[1],m=n.shapeInfo.flatOffset;if(p===o&&m==null)return`
        float `+a+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+p+".0, "+v+`.0);
          return sampleTexture(`+i+`, uv);
        }
      `;if(p===s&&m==null)return`
    float `+a+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+p+".0, "+v+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `;var g=as(i);return`
      float `+a+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+s+" + depth + "+g+`;
        vec2 uv = uvFromFlat(`+v+", "+p+`, index);
        return sampleTexture(`+i+`, uv);
      }
  `}(t);case 4:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r[3],s=r[2]*o,u=r[1]*s,l=gs(r),c=l.newShape,f=l.keptDims;if(c.length<r.length){var h=gu(n,c);return`
      `+mu(h)+`
      float `+a+`(int row, int col, int depth, int depth2) {
        return `+a+"("+xu(["row","col","depth","depth2"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+o+`, 1)));
        `+cu(n)+`
      }
    `;var d=n.shapeInfo.flatOffset,v=n.shapeInfo.texShape,p=v[0],m=v[1];if(m===u&&d==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+m+".0, "+p+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(m===o&&d==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+m+".0, "+p+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var g=as(i);return`
    float `+a+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+p+", "+m+", index + "+g+`);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 5:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=r[4],s=r[3]*o,u=r[2]*s,l=r[1]*u,c=gs(r),f=c.newShape,h=c.keptDims;if(f.length<r.length){var d=gu(n,f);return`
      `+mu(d)+`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        return `+a+"("+xu(["row","col","depth","depth2","depth3"],h)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+s+", "+o+`)) +
          depth3;
        `+cu(n)+`
      }
    `;var v=n.shapeInfo.flatOffset,p=n.shapeInfo.texShape,m=p[0],g=p[1];if(g===l&&v==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(g===o&&v==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var x=as(i);return`
    float `+a+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+s+` +
          depth2 * `+o+" + depth3 + "+x+`;
      vec2 uv = uvFromFlat(`+m+", "+g+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 6:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),o=gs(r),s=o.newShape,u=o.keptDims;if(s.length<r.length){var l=gu(n,s);return`
      `+mu(l)+`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+a+"("+xu(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var c=r[5],f=r[4]*c,h=r[3]*f,d=r[2]*h,v=r[1]*d;if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+v+", "+d+", "+h+", "+f+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+cu(n)+`
      }
    `;var p=n.shapeInfo.flatOffset,m=n.shapeInfo.texShape,g=m[0],x=m[1];if(x===v&&p==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+d+", "+h+", "+f+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+x+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(x===c&&p==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+x+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var y=as(i);return`
    float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+v+" + col * "+d+" + depth * "+h+` +
          depth2 * `+f+" + depth3 * "+c+" + depth4 + "+y+`;
      vec2 uv = uvFromFlat(`+g+", "+x+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function mk(t){var e,n,r;switch(t.shapeInfo.logicalShape.length){case 0:return e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=er(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return function(i){var a=i.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),s=i.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=er();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+a+`, uv);
    }
  `}(t);case 2:return function(i){var a=i.shapeInfo.logicalShape,o=i.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),u=i.shapeInfo.texShape,l=u[0],c=u[1],f=er();if(u!=null&&Dn(a,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);

        return `+f.texture2D+"("+o+`, uv);
      }
    `;var h=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],d=Math.ceil(a[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+d+", "+h[0]+", "+h[1]+`, row, col);
      return `+f.texture2D+"("+o+`, uv);
    }
  `}(t);case 3:return function(i){var a=i.shapeInfo.logicalShape,o=i.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),u=i.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(a[0]===1){var c=a.slice(1),f=gu(i,c);return`
        `+mk(f)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+xu(["b","row","col"],[1,2])+`);
        }
      `}var h=l[0],d=l[1],v=Math.ceil(a[2]/2),p=v*Math.ceil(a[1]/2),m=er();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+h+", "+d+", "+p+", "+v+`, b, row, col);
      return `+m.texture2D+"("+o+`, uv);
    }
  `}(t);default:return function(i){for(var a=i.shapeInfo.logicalShape,o=a.length,s=i.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),l=i.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],f=c[0],h=c[1],d=Math.ceil(a[o-1]/2),v=d*Math.ceil(a[o-2]/2),p="int b, int row, int col",m="b * "+v+" + (row / 2) * "+d+" + (col / 2)",g=2;g<o-1;g++)p="int b"+g+", "+p,v*=a[o-g-1],m="b"+g+" * "+v+" + "+m;var x=er();return`
    vec4 `+u+"("+p+`) {
      int index = `+m+`;
      int texR = index / `+h+`;
      int texC = index - texR * `+h+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+h+", "+f+`);
      return `+x.texture2D+"("+s+`, uv);
    }
  `}(t)}}var r5=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,i5=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,a5=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,o5=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function as(t){return"offset"+t}function cu(t){var e=t.name,n=Be(t.shapeInfo.logicalShape);return n<2?"return "+e+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function Tt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function gu(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function xu(t,e){return e.map(function(n){return t[n]}).join(", ")}var s5=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,M(t.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var i=t[t.length-1],a=Math.ceil(i/e);this.outputShape=t.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var o,s,u=this.outputShape,l=u.length,c=Tt(l),f=Er("coords",l);if(a===1){var h=Tt(s=l+1);o=`
        `+h+" sourceLocR = "+h+"("+f.join()+`, 0);
        ++`+f[l-1]+`;
        `+h+" sourceLocG = "+h+"("+f.join()+`, 0);
        ++`+f[l-2]+`;
        `+h+" sourceLocA = "+h+"("+f.join()+`, 0);
        --`+f[l-1]+`;
        `+h+" sourceLocB = "+h+"("+f.join()+`, 0);
        --`+f[l-2]+";"}else s=l,o=`
        `+c+` sourceLocR = coords;
        ++`+f[l-1]+`;
        `+c+` sourceLocG = coords;
        ++`+f[l-2]+`;
        `+c+` sourceLocA = coords;
        --`+f[l-1]+`;
        `+c+` sourceLocB = coords;
        --`+f[l-2]+";";var d=["x","y","z","w","u","v"].slice(0,s),v="."+d[s-1],p=d.map(function(S){return"int "+S}),m=Er("sourceLocR",s-1).concat("inIdx.r"),g=Er("sourceLocG",s-1).concat("inIdx.g"),x=Er("sourceLocB",s-1).concat("inIdx.b"),y=Er("sourceLocA",s-1).concat("inIdx.a"),w=n==="max"?"greaterThan":"lessThan",_=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+m.join()+`),
                             getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+x.join()+`),
                             getBestIndicesAChannel(`+y.join()+")));",b=`vec4(
            getAChannel(`+m.join()+`),
            hasNextCol ? getAChannel(`+g.join()+`) : 0.,
            hasNextRow ? getAChannel(`+x.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+y.join()+") : 0.)",E=r?"":`
      float getBestIndicesAChannel(`+p.join()+`) {
        return getChannel(getBestIndicesA(`+d.join()+`),
                                          vec2(`+d.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+p.join()+`) {
        return getChannel(getA(`+d.join()+`),
                               vec2(`+d.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+f[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+f[l-2]+" < "+(u[l-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+v+", sourceLocG"+v+`,
          sourceLocB`+v+", sourceLocA"+v+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+b+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+_+`
          vec4 candidate = `+b+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+w+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},u5=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=s-1-t.padInfo.top,c=u-1-t.padInfo.left,f=1/(e*n);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+c+`);
      const float avgMultiplier = float(`+f+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+a+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},l5=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=c-1-t.padInfo.front,v=f-1-t.padInfo.top,p=h-1-t.padInfo.left,m=1/(e*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+v+", "+p+`);
      const float avgMultiplier = float(`+m+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+i+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+f+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+h+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},c5=function(t,e,n,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],at(t,e),at(t,n);var o="0.0";r!=null&&(at(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";i!=null&&(at(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+a+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},f5=function(t,e,n,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],at(t,e),at(t,n);var o="vec4(0.0)";r!=null&&(at(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="vec4(1.0)";i!=null&&(at(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+a+`));

        setOutput((x - mean) * inv + offset);
      }
    `},h5="return areal * breal - aimag * bimag;",d5="return areal * bimag + aimag * breal;",kw=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=at(e,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},yv="return a + b;",wv="return a - b;",Aw="return a * b;",gk="return (a < 0.) ? b * a : a;",Ht=function(t,e,n){this.variableNames=["A","B"],this.outputShape=at(e,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},xk=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Aa=function(t,e,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=at(e,n);var i=this.outputShape.length,a="";if(r)if(i===0||Be(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          `+Tt(i)+` coords = getOutputCoords();
        `,i===1)a+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=Er("coords",i);a+=`
            bool nextRowOutOfBounds =
              (`+o[i-2]+" + 1) >= "+this.outputShape[i-2]+`;
            bool nextColOutOfBounds =
              (`+o[i-1]+" + 1) >= "+this.outputShape[i-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+a+`

        setOutput(result);
      }
    `},p5=function(){function t(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(i,a){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(a,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,n)}},t}(),v5=function(){function t(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(i,a){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(a,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,n)}},t}(),m5=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},g5=function(t){this.outputShape=[],this.outputShape=ll(t,1),this.variableNames=t.map(function(s,u){return"T"+u});var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){var i=e[n-1];r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+i+"));")}var a=e.length,o=e[e.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},x5=function(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ll(t,e);var n=this.outputShape,r=n.length,i=Tt(r),a=Er("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(m,g){return"T"+g});var s=new Array(t.length-1);s[0]=t[0][e];for(var u=1;u<s.length;u++)s[u]=s[u-1]+t[u][e];var l=o[e],c=o.slice(-2),f=o.join(),h="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+f+"), vec2("+c.join()+`));
        }`;for(u=1;u<s.length;u++){var d=s[u-1];h+=`
        if (`+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+Sh(o,l,d)+`),
            vec2(`+Sh(c,l,d)+`));
        }`}var v=s.length,p=s[s.length-1];h+=`
        return getChannel(
          getT`+v+"("+Sh(o,l,p)+`),
          vec2(`+Sh(c,l,p)+"));",this.userCode=`
      float getValue(`+o.map(function(m){return"int "+m})+`) {
        `+h+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+a+`), 0., 0., 0.);

        `+a[r-1]+" = "+a[r-1]+` + 1;
        if (`+a[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+a+`);
        }

        `+a[r-2]+" = "+a[r-2]+` + 1;
        if (`+a[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+a+`);
        }

        `+a[r-1]+" = "+a[r-1]+` - 1;
        if (`+a[r-2]+" < "+n[r-2]+` &&
            `+a[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+a+`);
        }
        setOutput(result);
      }
    `};function Sh(t,e,n){var r=t.indexOf(e);return t.map(function(i,a){return a===r?i+" - "+n:i}).join()}var y5=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,a=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+a+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},w5=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=t.dataFormat==="channelsLast",o=e-1-t.padInfo.top,s=n-1-t.padInfo.left,u=a?1:2,l=a?2:3,c=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+a+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},_5=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,a=t.padInfo.top,o=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+i+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+a+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+o+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},b5=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=e-1-t.padInfo.front,u=n-1-t.padInfo.top,l=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},E5=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+a+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},S5=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=e-1-t.padInfo.top,o=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Iw=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,a=t.padInfo.left,o=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterHeight,f=t.filterWidth,h=4*Math.floor(t.inChannels/4),d=t.inChannels%4,v=t.dataFormat==="channelsLast",p=v?1:2,m=v?2:3,g=v?3:1,x="",y="";n&&(x=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,y="result = activation(result);");var w=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+o+", "+s+`);
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+g+`];

        ivec2 xRCCorner =
            ivec2(coords[`+p+"], coords["+m+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+f+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+h+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+v+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(d===1)+`) {

              if (`+v+`) {
                dotProd +=
                    getX(batch, xR, xC, `+h+`) *
                    getW(wR, wC, `+h+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+h+`, xR, xC) *
                    getW(wR, wC, `+h+`, d2);
              }

            } else if (`+(d===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2)
              );

              if (`+v+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(d===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2),
                getW(wR, wC, `+h+` + 2, d2)
              );

              if (`+v+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1),
                  getX(batch, xR, xC, `+h+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC),
                  getX(batch, `+h+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+w+`
        `+y+`
        setOutput(result);
      }
    `},C5=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterDepth,f=t.filterHeight,h=t.filterWidth,d=4*Math.floor(t.inChannels/4),v=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+a+", "+o+`);
      const ivec3 pads = ivec3(`+e+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+h+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+d+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(v===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+d+`) *
                  getW(wF, wR, wC, `+d+`, d2);
              } else if (`+(v===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+d+`),
                  getX(batch, xF, xR, xC, `+d+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+d+`, d2),
                  getW(wF, wR, wC, `+d+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(v===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+d+`),
                  getX(batch, xF, xR, xC, `+d+` + 1),
                  getX(batch, xF, xR, xC, `+d+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+d+`, d2),
                  getW(wF, wR, wC, `+d+` + 1, d2),
                  getW(wF, wR, wC, `+d+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Rw=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,a=t.inWidth,o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,v=t.outChannels/t.inChannels,p="",m="";n&&(p=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,m="result = activation(result);");var g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+p+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+v+`;
        int q = d2 - d1 * `+v+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+h+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+i+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+a+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+g+`
        `+m+`
        setOutput(result);
      }
    `},Fw=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var i=t.inHeight,a=t.inWidth,o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,v=d,p="int xR; int xC; int xCOffset;",m=0;m<h;m++)for(var g=0;g<d;g++)p+=`
          vec4 xTexelR`+m+"C"+2*g+` = vec4(0.);
          vec4 wR`+m+"C"+g+` = vec4(0.);
          vec4 xR`+m+"C"+g+" = vec4(0.);";for(m=0;m<h;m++)for(var x=0;x<v;x++){if(p+=`
          xR = xRCorner + `+m*c+`;
          xC = xCCorner + `+(g=2*x)*f+`;
        `,l===1){if(g<d&&(p+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    xTexelR`+m+"C"+g+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+m+"C"+g+" = vec4(previous.zw, xTexelR"+m+"C"+g+`.xy);
                } else {
                  xR`+m+"C"+g+" = vec4(0, 0, xTexelR"+m+"C"+g+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+i+" && xC >= 0 && xC < "+a+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                xR`+m+"C"+g+" = xTexelR"+m+"C"+g+`;
              `,g+1<d)){var y=s%2==0?MT(f):f;f%2==0&&s%2==1||f%2!=0&&s%2!=1?(p+=`
                  xCOffset = xC + `+s%2+" + "+y+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,f>1&&(p+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+i+` &&
                      xCOffset >= 0 && xCOffset < `+a+`) {
                      xTexelR`+m+"C"+g+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+m+"C"+g+` = vec4(0.);
                    }
                  `),p+=`
                  xR`+m+"C"+(g+1)+` = vec4(
                    xTexelR`+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+`.xy);
                `):p+=`
                  xCOffset = xC + `+y+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+m+"C"+(g+1)+" = xTexelR"+m+"C"+(g+2)+`;
                `}}else g<d&&(p+=`
              if(xR >= 0 && xR < `+i+`) {
            `,s%2==1?(p+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+a+`) {
                  xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+m+"C"+(g+2)+` = vec4(0.);
                }

                xR`+m+"C"+g+` = vec4(
                  xTexelR`+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+`.zw);
              `,g+1<d&&(p+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+a+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+m+"C"+(g+1)+" = vec4(xTexelR"+m+"C"+(g+2)+`.xy, final.xy);
                `)):(p+=`
                if(xC >= 0 && xC < `+a+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+m+"C"+(g+2)+` = vec4(0.);
                }

                xR`+m+"C"+g+` = vec4(
                  xTexelR`+m+"C"+g+".xy, xTexelR"+m+"C"+(g+2)+`.xy);
              `,g+1<d&&(p+=`
                  xR`+m+"C"+(g+1)+` = vec4(
                    xTexelR`+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+`.zw);
                `)),p+="}");g<d&&(p+=`
            vec4 wTexelR`+m+"C"+g+" = getW("+m+", "+g+`, d1, q);
            wR`+m+"C"+g+" = vec4(wTexelR"+m+"C"+g+".xz, wTexelR"+m+"C"+g+`.xz);
          `,g+1<d&&(p+=`
              vec4 wTexelR`+m+"C"+(g+1)+" = getW("+m+", "+(g+1)+`, d1, q);
              wR`+m+"C"+(g+1)+` =
                vec4(wTexelR`+m+"C"+(g+1)+".xz, wTexelR"+m+"C"+(g+1)+".xz);"))}for(m=0;m<h;m++)for(g=0;g<d;g++)p+="dotProd += xR"+m+"C"+g+" * wR"+m+"C"+g+";";var w="",_="";n&&(w=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,_="result = activation(result);");var b=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+w+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+p+`

        vec4 result = dotProd;
        `+b+`
        `+_+`
        setOutput(result);
      }
    `},T5=function(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=t[0],o=t[1],s=t[2],u=t[3],l=e[0],c=n[0],f=n[1];this.outputShape=[l,c,f,u];var h=r==="bilinear"?1:0,d=[o-1+".0",s-1+".0"],v=d[0],p=d[1],m=c>1?[""+(o-1)/(c-1),"(y2-y1) * height_ratio","y1*"+v+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+v],g=m[0],x=m[1],y=m[2],w=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+p+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+p],_=w[0],b=w[1],E=w[2];this.userCode=`
      const float height_ratio = float(`+g+`);
      const float width_ratio = float(`+_+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+a+`) {
          return;
        }

        float height_scale = `+x+`;
        float width_scale = `+b+`;

        float in_y = `+y+`;
        if( in_y < 0.0 || in_y > `+v+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+p+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+h+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},k5=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=t[t.length-1],a=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Tt(r)+` coords = getOutputCoords();
        int end = `+Dw(r,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+a+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+Dw(r,"coords")+` = idx;
          val += getX(`+function(o,s){if(o===1)return""+s;if(o===2)return s+".x, "+s+".y";if(o===3)return s+".x, "+s+".y, "+s+".z";if(o===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function Dw(t,e){if(t===1)return""+e;if(t===2)return e+".y";if(t===3)return e+".z";if(t===4)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var A5=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Zc.DENSE;var e=wc(t),n=er();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+_s(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},I5=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Zc.DENSE;var e=wc(t),n=er();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+_s(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},R5=function(){function t(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),F5=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},D5=function(t){this.variableNames=["A"],this.outTexUsage=qr.DOWNLOAD;var e=er();this.outputShape=t,this.userCode=`
      `+vk+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},O5=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=qr.DOWNLOAD;var e=er();this.outputShape=t,this.userCode=`
      `+vk+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},P5=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=er(),i=e[0],a=e[1];this.outputShape=t;var o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+tx(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+a+`;
        int c = imod(flatIndex, `+a+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+i+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},N5=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=er(),i=e[0],a=e[1];this.outputShape=t;var o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;o+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+t[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+t[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+a+`;
              c = imod(flatIndex, `+a+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+i+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+tx(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+r.output+" = "+s+`;
      }
    `},M5="return real * expR - imag * expI;",L5="return real * expI + imag * expR;",Ow=function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+a+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},B5=function(){function t(e,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,i){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(n.valueLoc,e)}},t}(),W5=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var i=Tt(this.rank),a=function(o,s){var u=o.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],f=0;f<o.length;f++)f===s?c.push("int(getIndices("+l[f]+"))"):c.push(""+l[f]);return c.join()}(t,n);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},z5=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=Tt(e.length),i=Tt(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+a+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function U5(t,e){var n=er();return MB(t,e,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function V5(t,e){return UB(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function H5(t,e){return VB(t,e,new Uint16Array([0,1,2,2,1,3]))}function kf(t,e,n,r,i,a,o){$B(n,r);var s=HB(t,e),u=t.TEXTURE_2D;return We(t,e,function(){return t.bindTexture(u,s)}),We(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),We(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),We(t,e,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),We(t,e,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),We(t,e,function(){return t.texImage2D(u,0,i,n,r,0,a,o,null)}),We(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function $5(t,e,n,r,i){var a=Zp(n,r);return kf(t,e,a[0],a[1],i.internalFormatFloat,i.textureFormatFloat,t.FLOAT)}function j5(t,e,n,r,i){var a=Zp(n,r);return kf(t,e,a[0],a[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function G5(t,e,n,r,i){var a=Zp(n,r);return kf(t,e,a[0],a[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function X5(t,e,n,r,i){var a=Tf(n,r);return kf(t,e,a[0],a[1],i.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function K5(t,e,n,r,i){var a=Tf(n,r);return kf(t,e,a[0],a[1],i.internalFormatPackedHalfFloat,t.RGBA,i.textureTypeHalfFloat)}function q5(t,e,n,r){return We(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),ww(t,e,n,"clipSpacePos",r,3,20,0)&&ww(t,e,n,"uv",r,2,20,12)}function Y5(t,e,n,r,i,a,o){var s,u,l;We(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),a instanceof Uint8Array?(s=new Uint8Array(r*i*4),u=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(r*i*4),u=t.FLOAT,l=o.internalFormatPackedFloat),s.set(a),We(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,l,r,i,0,t.RGBA,u,s)}),We(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function Q5(t,e,n,r){We(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),r.data instanceof Uint8Array?We(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):We(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),We(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function J5(t,e,n,r,i){var a=t.createBuffer();We(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,a)});var o=16*n*r;return We(t,e,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)}),We(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)}),We(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),a}function Z5(t,e,n){var r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function e8(t,e,n,r,i){var a=Zp(n,r),o=a[0],s=a[1],u=new Uint8Array(n*r*4);return We(t,e,function(){return t.readPixels(0,0,o,s,i.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function t8(t,e,n,r,i,a,o,s){var u=t,l=new Float32Array(function(c,f){var h=Tf(c,f);return h[0]*h[1]*4}(a,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function n8(t,e,n,r){var i=new Float32Array(n*r*4);return We(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,i)}),i}var r8=function(){function t(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=fe().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,FB(n,e)):this.gl=ma(n);var r="WEBGL_color_buffer_float";if(fe().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=wh(this.gl,this.debug,"OES_texture_float"),vi(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=wh(this.gl,this.debug,"OES_texture_half_float");else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),vi(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=wh(this.gl,this.debug,"EXT_color_buffer_half_float");else if(fe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",vi(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!vi(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=V5(this.gl,this.debug),this.indexBuffer=H5(this.gl,this.debug),this.framebuffer=jB(this.gl,this.debug),this.textureConfig=j1(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return fe().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;We(n,this.debug,function(){return n.finish()}),We(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),We(n,this.debug,function(){return n.deleteFramebuffer(e.framebuffer)}),We(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),We(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),We(n,this.debug,function(){return n.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(e,n){return this.throwIfDisposed(),$5(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(e,n){return this.throwIfDisposed(),j5(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(e,n){return this.throwIfDisposed(),G5(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(e,n){this.throwIfDisposed(),Q5(this.gl,this.debug,e,n)},t.prototype.uploadDenseMatrixToTexture=function(e,n,r,i){this.throwIfDisposed(),Y5(this.gl,this.debug,e,n,r,i,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(e,n){return this.throwIfDisposed(),K5(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(e,n){return this.throwIfDisposed(),X5(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.deleteMatrixTexture=function(e){var n=this;this.throwIfDisposed(),this.outputTexture===e&&(_w(this.gl,this.debug,this.framebuffer),this.outputTexture=null),We(this.gl,this.debug,function(){return n.gl.deleteTexture(e)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,n,r){var i=this;return this.downloadMatrixDriver(e,function(){return e8(i.gl,i.debug,n,r,i.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(e,n,r,i,a,o){return t8(this.gl,e,0,0,0,a,o,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(e,n){return Z5(this.gl,e,n)},t.prototype.createBufferFromTexture=function(e,n,r){this.bindTextureToFrameBuffer(e);var i=J5(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},t.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},t.prototype.createFence=function(e){var n,r,i=this;if(fe().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var s=a.clientWaitSync(o,0,0);return s===a.ALREADY_SIGNALED||s===a.CONDITION_SATISFIED},n=o}else fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(n,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(e,n,r){var i=this;return this.downloadMatrixDriver(e,function(){return n8(i.gl,i.debug,n,r)})},t.prototype.createProgram=function(e){this.throwIfDisposed();var n=this.gl,r=LB(n,this.debug,e),i=U5(n,this.debug),a=WB(n,this.debug);return We(n,this.debug,function(){return n.attachShader(a,i)}),We(n,this.debug,function(){return n.attachShader(a,r)}),zB(n,this.debug,a),this.debug&&vv(n,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=q5(n,this.debug,this.program,this.vertexBuffer)),a},t.prototype.deleteProgram=function(e){var n=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&We(this.gl,this.debug,function(){return n.gl.deleteProgram(e)})},t.prototype.setProgram=function(e){var n=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&vv(this.gl,this.debug,this.program),We(this.gl,this.debug,function(){return n.gl.useProgram(e)})},t.prototype.getUniformLocation=function(e,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?XB(this.gl,this.debug,e,n):KB(this.gl,e,n)},t.prototype.getAttributeLocation=function(e,n){var r=this;return this.throwIfDisposed(),We(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,n)})},t.prototype.getUniformLocationNoThrow=function(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)},t.prototype.setInputMatrixTexture=function(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),qB(this.gl,this.debug,this.program,e,n,r)},t.prototype.setOutputMatrixTexture=function(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)},t.prototype.setOutputPackedMatrixTexture=function(e,n,r){this.throwIfDisposed();var i=Tf(n,r),a=i[0],o=i[1];this.setOutputMatrixTextureDriver(e,a,o)},t.prototype.setOutputMatrixWriteRegion=function(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)},t.prototype.setOutputPackedMatrixWriteRegion=function(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&vv(this.gl,this.debug,this.program),_h(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),We(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),We(this.gl,this.debug,function(){return e.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=wh(this.gl,this.debug,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(n.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),a=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,a),a},t.prototype.endQuery=function(){if(fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(e){return Pe(this,void 0,void 0,function(){var n=this;return Ne(this,function(r){switch(r.label){case 0:return[4,pw(function(){return n.disposed||n.isQueryAvailable(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(e,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(e,i.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(e,n){if(n===0)return!0;if(n===2){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint},t.prototype.pollFence=function(e){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var e=function(r){for(var i=0;i<r.length&&r[i]();++i);return i-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=e;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},t.prototype.addItemToPoll=function(e,n){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1||pw(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),mv(this.gl,this.debug,e,this.framebuffer),this.debug&&_h(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(mv(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&_h(this.gl)):_w(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(e,n){this.bindTextureToFrameBuffer(e);var r=n();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(e,n,r){this.throwIfDisposed();var i=this.gl;mv(i,this.debug,e,this.framebuffer),this.debug&&_h(i),this.outputTexture=e,We(i,this.debug,function(){return i.viewport(0,0,n,r)}),We(i,this.debug,function(){return i.scissor(0,0,n,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(e,n,r,i){var a=this;this.throwIfDisposed(),We(this.gl,this.debug,function(){return a.gl.scissor(e,n,r,i)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t}();function Pw(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(n,r){var i=n.logicalShape,a=e[r],o=a.shape;if(!Dn(i,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+o+" must match");if(!n.isUniform||!a.isUniform){var s=n.texShape,u=a.isUniform?null:a.texData.texShape;if(!Dn(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}var i8=function(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=n.filterWidth,i=n.inChannels,a=n.strideWidth,o=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,f=n.dataFormat,h=s.left,d=s.top,v=i*r,p=er(),m=f==="channelsLast",g=m?0:1,x=m?1:2,y="",w=0;w<=1;w++)for(var _=0;_<=1;_++)y+=`
          blockIndex = rc.y + `+_+`;
          pos = rc.x + `+w+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+o+" - "+d+`;
            d0 = offsetY + `+c+" * (pos / "+v+`);

            if(d0 < `+e[g]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+a+". - "+h+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+v+".) / "+i+`.));

              if(d1 < `+e[x]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+i+`.));

                if (`+m+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*w+_)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*w+_)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+y+`

        `+p.output+` = result;
      }
    `},a8=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];var a,o=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+a+`;
        setOutput(val);
      }
    `},o8=function(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},s8=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,o=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+a+`;
        setOutput(result);
      }
    `},u8=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,a=t.effectiveFilterWidth,o=i-1-t.padInfo.top,s=a-1-t.padInfo.left,u=i*a-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+a+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+a+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},l8=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,a=t.dilationHeight,o=t.dilationWidth,s=t.effectiveFilterDepth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=s-1-t.padInfo.front,f=u-1-t.padInfo.top,h=l-1-t.padInfo.left,d=s*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+f+", "+h+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+i+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+d+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},_v=function(t,e,n,r,i,a,o){n===void 0&&(n=!1),r===void 0&&(r=!1),i===void 0&&(i=!1),a===void 0&&(a=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var s=n?t[1]:t[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],d="",v="";a&&(d=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+a+`
        }`:`vec4 activation(vec4 x) {
          `+a+`
        }`,v="result = activation(result);");var p=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+d+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+f[0]+" * "+h[0]+`);
          result += (`+f[1]+" * "+h[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+p+`

        `+v+`

        setOutput(result);
      }
    `},c8=function(){function t(e,n,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,i){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(n.seedLoc,e)}},t}(),f8=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},h8=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var e=t.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=Er("rc",e),r=Tt(e),i=function(s,u,l){if(s===1)return"rc > "+u[0];for(var c="",f=s-2;f<s;f++)c+=l[f]+" >= "+u[f],f<s-1&&(c+="||");return c}(e,t,n),a=function(s,u,l,c){if(s===1)return"";var f=c.slice(-2);return`
    int r = `+f[0]+`;
    int c = `+f[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `}(e,t[t.length-1],t[t.length-2],n),o=function(s,u){var l=s.length,c=function(f,h){for(var d=[],v=0;v<=1;v++)for(var p=0;p<=1;p++){for(var m=(v===0?"r":"rp1")+", "+(p===0?"c":"cp1"),g=2;g<f;g++)m=h[h.length-1-g]+","+m;d.push(m)}return d}(l,u);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"}(t,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+a+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},d8=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(u,l){return u[0]+t[l]+u[1]});var r=t.length,i=Tt(r),a=e.map(function(u){return u[0]}).join(","),o=e.map(function(u,l){return u[0]+t[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+i+" start = "+i+"("+a+`);
      `+i+" end = "+i+"("+o+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+a+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},p8=function(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(m,g){return m[0]+t[g]+m[1]});for(var r=t.length,i=Tt(r),a=e.map(function(m){return m[0]}).join(","),o=e.map(function(m,g){return m[0]+t[g]}).join(","),s=Er("rc",r),u=Er("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+u.slice(-2).join()+")",f=[i+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],h=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",v=0,p=r===1?2:4;v<p;v++)d+=`
        `+f[v]+`
        if (`+h+`) {
          result[`+v+"] = float("+n+`);
        } else {
          `+i+` source = rc - start;
          result[`+v+"] = getChannel(getX("+u.join()+"), "+c+`);
        }
      `;d+=r===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+a+`);
      const `+i+" end = "+i+"("+o+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+d+`
        setOutput(result);
      }
    `},bv=function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideHeight,a=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,f=t.padInfo.left;this.outputShape=t.outShape;var h=e==="avg",d="0.0";if(h||(d="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+a+`);
        const ivec2 pads = ivec2(`+c+", "+f+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var v=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(v="avgValue / count");var p=4*Math.floor(r/4),m=r%4,g=`
      if (`+h+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+a+`);
      const ivec2 pads = ivec2(`+c+", "+f+`);
      const float initializationValue = `+d+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+d+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+g+`
          }

          int xC = xCCorner + `+p+`;
          if (`+(m===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(m===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(m===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+g+`
          }
        }
        setOutput(`+v+`);
      }
    `}},Ev=function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideDepth,a=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,v=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var m=e==="avg",g="0.0";if(m||(g="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+i+", "+a+", "+o+`);
        const ivec3 pads = ivec3(`+d+", "+v+", "+p+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+c+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+f+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+h+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+f+" * "+h+` +
                      wR * `+h+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var x=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(x="avgValue / count");var y=4*Math.floor(r/4),w=r%4,_=`
      if (`+m+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+i+", "+a+", "+o+`);
      const ivec3 pads = ivec3(`+d+", "+v+", "+p+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+y+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+_+`
            }

            int xC = xCCorner + `+y+`;
            if (`+(w===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+_+`
            } else if (`+(w===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+_+`
            } else if (`+(w===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+_+`
            }
          }
          setOutput(`+x+`);
        }
      }
    `}},v8=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,i=t.inSize,a=Math.ceil(i/n);this.outputShape=[r,a];var o="0.0",s="";e==="prod"?o="1.0":e==="min"?(o="1.0 / 1e-20",s="min"):e==="max"&&(o="-1.0 / 1e-20",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?u="sumValue":e==="prod"?u="prodValue":e==="all"?u="allValue":e==="any"&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,f=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,h="vec4";e==="all"?(o="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):e==="any"&&(o="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");var d="";i%n>0&&(d=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+f+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===2)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===3)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+f+`
        }
        setOutput(`+u+`);
      }
    `},m8=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+=`
        `+i+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+_s(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+tx(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+n+`

        setOutput(result);
      }
    `},g8=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],a=r[2],o=t.shape,s=o[1],u=o[2],l=[n&&s>1?i-1:i,n&&u>1?a-1:a],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],h=l[1]/c[1],d=1/f,v=1/h,p=2*Math.ceil(d)+2,m=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+d+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+p+`);
        const int winWidth = int(`+m+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(a-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},x8=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],a=t[1],o=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?o-1:o],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},y8=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=t[0],a=t[1],o=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?o-1:o],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+a+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},w8=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],a=r[2],o=t.shape,s=o[1],u=o[2],l=[n&&s>1?i-1:i,n&&u>1?a-1:a],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],h=l[1]/c[1],d=1/f,v=1/h,p=2*Math.ceil(d)+2,m=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+d+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+p+`);
        const int winWidth = int(`+m+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+a+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},_8=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],a=t[1],o=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?o-1:o],l=[r&&e>1?e-1:e,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},b8=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,n!==1){var r=t.map(function(a,o){return function(s){return e.indexOf(s)!==-1&&t[s]!==1?t[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(o)}).join(","),i=Tt(n);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `},E8=function(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=Er("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],o=Tt(n);function s(u){var l=t.map(function(c,f){return function(h,d){return e.indexOf(h)!==-1&&t[h]!==1?t[h]+" - "+d[h]+" - 1":""+d[h]}(f,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+i+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return s(u)}(r.slice())+`;
          if(`+i+`){
            result.g = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",s(u)}(r.slice())+`;
          }
          if(`+a+`) {
            result.b = `+function(u){return u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            if(`+i+`) {
              result.a = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},Nw=function(t,e,n,r,i,a,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=Tt(i.length),u=Tt(a.length),l="";n===1?l="i":n===2&&(l="i, j");var c="getIndices("+l+")",f="";r===1?f="i":r===2&&(f="i, coords[1]");var h="getUpdates("+f+")",d=e>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+i+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+d+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+h+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},S8=function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,i=t.inSize,a=t.numSegments,o=a*Math.ceil(i/n);this.outputShape=[r,o];var s=4*Math.floor(n/4),u=n%4,l=`
        sumValue += dot(values, segFilter);
    `,c="";i%n>0&&(c=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var f="";i%n>0&&(f=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+f+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+a+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+a+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},C8=function(t,e,n){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)i="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],u=0;u<e.length;u++)s.push(""+a[u]),u<t&&o.push(""+a[u]);r=o.join(),i=s.join()}var l=Tt(n);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `},T8=function(){function t(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var n,r=Tt(this.rank),i="uniform int start["+this.rank+"];",a=function(o){if(o===1)return"sourceLoc";if(o<=6)return Sv.slice(0,o).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map(function(o,s){return"sourceLoc."+Sv[s]+" = start["+s+"] + coords."+Sv[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+n+`
        setOutput(getSource(`+a+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(i,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),Sv=["x","y","z","w","u","v"],k8=function(){function t(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var n=Tt(this.rank),r=Er("coords",this.rank),i=Er("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",o="getChannel(getSource("+i.join()+"), "+a+")",s=`
      result.x = `+o+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+o+`;
        --`+i[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+n+"("+e.map(function(c,f){return"start["+f+"]"}).join()+");":e.map(function(c,f){return i[f]+" = "+r[f]+" + start["+f+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(i,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),A8=function(t,e,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=Tt(n.length),a=Tt(n.length),o="";if(r===1)o="coords * strides + begin";else{var s=0;o=n.map(function(u,l){return s++,n.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+t+`);
      `+i+" strides = "+i+"("+e+`);

      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},I8=function(){function t(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(e,n,r){var i,a=Mw(n,r),o=Lw(e,a,r);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[o].shift();return this.usedTextures[o].push(s),s}return this.numUsedTextures++,this.log(),a===Xr.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===Xr.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===Xr.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===Xr.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===Xr.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(i),i},t.prototype.releaseTexture=function(e,n,r,i){if(this.freeTextures!=null){var a=Lw(n,Mw(r,i),i);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(e),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[a],s=o.indexOf(e);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(i){e.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function Mw(t,e){if(t===qr.UPLOAD)return Xr.PACKED_2X2_FLOAT32;if(t===qr.RENDER||t==null)return function(n){return fe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?Xr.PACKED_2X2_FLOAT32:Xr.UNPACKED_FLOAT32:n?Xr.PACKED_2X2_FLOAT16:Xr.UNPACKED_FLOAT16}(e);if(t===qr.DOWNLOAD||t===qr.PIXELS)return Xr.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function Lw(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var R8=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var i=Tt(this.rank),a=function(o){var s=o.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+o[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],c=0;c<o.length;c++)l.push("imod("+u[c]+", "+o[c]+")");return l.join()}(t);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},F8=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var i=Tt(this.rank),a=function(o){var s=o.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),c=0;c<o.length;c++)l[o[c]]=u[c];return l.join()}(e);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+a+`));
    }
    `},D8=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=Tt(this.rank),a=pk("rc",this.rank),o=new Array(this.rank);for(r=0;r<e.length;r++)o[e[r]]=a[r];var s="vec2("+o.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+o.join()+"), "+s+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+a[this.rank-1]+`;
      if(++`+a[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `},nx=1.7580993408473768,rx=1.0507009873554805,et=function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Vi="if (isnan(x)) return x;",O8="return x;",Bw="return abs(x);",yk=Vi+`
  return (x < 0.0) ? 0.0 : x;
`,wk=Vi+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,_k="return (x >= 0.0) ? x : (exp(x) - 1.0);",P8=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+nx+`;
  float scale = `+rx+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Ww="return -x;",zw="return ceil(x);",Uw="return floor(x);",Vw="return exp(x);",Hw="return exp(x) - 1.0;",N8=Vi+`
  return sin(x);
`,M8=Vi+`
  return cos(x);
`,L8=Vi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,B8=Vi+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,W8=Vi+`
  return atan(x);
`,z8=Vi+"return log(x + sqrt(x * x + 1.0));",U8=Vi+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,V8=Vi+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Ch="return x;",H8="return x;",bk=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ek=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Sk=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Hl=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},$8=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var e=t.length,n=Er("rc",e),r=Tt(e),i=function(s,u){if(s===1)return"rc";for(var l="",c=0;c<s;c++)l+=u[c],c<s-1&&(l+=",");return l}(e,n),a=n.slice(-2),o=e<=1?"rc":"vec2("+a.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},Th={};function kh(t,e){if(e===void 0&&(e=!1),t==="linear")return e?H8:O8;if(t==="relu")return e?bk:yk;if(t==="elu")return e?Sk:_k;if(t==="relu6")return e?Ek:wk;if(t==="prelu")return e?xk:gk;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var j8=600,G8=function(t){function e(n){var r,i=t.call(this)||this;if(i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!fe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var a=ma(fe().getNumber("WEBGL_VERSION"));i.binaryCache=((r=fe().getNumber("WEBGL_VERSION"))in Th||(Th[r]={}),Th[r]),i.gpgpu=new r8(a),i.canvas=a.canvas,i.gpgpuCreatedLocally=!0}else i.gpgpu=n,i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=n.gl.canvas;return i.textureManager=new I8(i.gpgpu),i.numMBBeforeWarning=fe().global.screen==null?1024:fe().global.screen.height*fe().global.screen.width*window.devicePixelRatio*j8/1024/1024,i.texData=new ak(i,X),i}return Ui(e,t),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(n,r,i){if(fe().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var a={};return this.texData.set(a,{shape:r,dtype:i,values:n,usage:qr.UPLOAD}),a},e.prototype.move=function(n,r,i,a){if(fe().getBool("DEBUG")&&this.checkNumericalProblems(r),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:i,dtype:a,values:r,usage:qr.UPLOAD})},e.prototype.readSync=function(n){var r=this.texData.get(n),i=r.values,a=r.dtype,o=r.complexTensors,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var c=void 0;c=l?new Hl(u,Ch):new et(u,Ch);var f=this.runWebGLProgram(c,[{dataId:n,shape:u,dtype:a}],a),h=this.readSync(f.dataId);return this.disposeData(f.dataId),h}if(i!=null)return this.convertAndCacheOnCPU(n);if(a==="string")return i;var d,v,p=this.activeTimers!=null;return p&&(d=ta()),a==="complex64"?v=ug(o.real.dataSync(),o.imag.dataSync()):v=this.getValuesFromTexture(n),p&&(this.downloadWaitMs+=ta()-d),this.convertAndCacheOnCPU(n,v)},e.prototype.read=function(n){return Pe(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,h,d,v,p,m,g,x,y,w,_,b,E,S;return Ne(this,function(C){switch(C.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise(function(T){return r.push(T)})];if(i=this.texData.get(n),a=i.values,o=i.shape,s=i.slice,u=i.dtype,l=i.complexTensors,c=i.isPacked,s!=null)return f=void 0,f=c?new Hl(o,Ch):new et(o,Ch),h=this.runWebGLProgram(f,[{dataId:n,shape:o,dtype:u}],u),d=this.read(h.dataId),this.disposeData(h.dataId),[2,d];if(a!=null)return[2,this.convertAndCacheOnCPU(n)];if(!fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&fe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return v=null,u!=="complex64"&&fe().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(n),m=this.texData.get(p.dataId),v=(S=this.gpgpu).createBufferFromTexture.apply(S,[m.texture].concat(wc(o)))),this.pendingRead.set(n,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:C.sent(),C.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return x=C.sent(),y=x[0],w=x[1],g=ug(y,w),[3,5];case 4:v==null?g=this.getValuesFromTexture(n):(_=Be(o),g=this.gpgpu.downloadFloat32MatrixFromBuffer(v,_)),C.label=5;case 5:return p!=null&&this.disposeData(p.dataId),b=this.convertAndCacheOnCPU(n,g),E=this.pendingRead.get(n),this.pendingRead.delete(n),E.forEach(function(T){return T(b)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,b]}})})},e.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var i=n[r];if(!PB(i))throw fe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(n){var r,i=this.texData.get(n),a=i.shape,o=i.dtype,s=i.isPacked,u=Be(a);if(fe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(n),c=this.texData.get(l.dataId),f=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(wc(a))).subarray(0,u);return this.disposeData(l.dataId),f}var h=fe().getBool("WEBGL_PACK")&&s===!0,d=h?gv(a):a,v=h?new O5(d):new D5(d),p=this.runWebGLProgram(v,[{shape:d,dtype:o,dataId:n}],"float32"),m=this.texData.get(p.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(m.texture,m.texShape[0],m.texShape[1]).subarray(0,u);return this.disposeData(p.dataId),g},e.prototype.time=function(n){return Pe(this,void 0,void 0,function(){var r,i,a,o,s,u,l;return Ne(this,function(c){switch(c.label){case 0:return r=this.activeTimers,i=[],a=!1,this.programTimersStack==null?(this.programTimersStack=i,a=!0):this.activeTimers.push(i),this.activeTimers=i,n(),o=sl(this.activeTimers.map(function(f){return f.query})).filter(function(f){return f!=null}),s=sl(this.activeTimers.map(function(f){return f.name})).filter(function(f){return f!=null}),this.activeTimers=r,a&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return l=c.sent(),u.kernelMs=pB(l),u.getExtraProfileInfo=function(){return l.map(function(f,h){return{name:s[h],ms:f}}).map(function(f){return f.name+": "+f.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},c.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ta(),endMs:null}},e.prototype.endTimer=function(n){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=ta(),n)},e.prototype.getQueryTime=function(n){return Pe(this,void 0,void 0,function(){var r;return Ne(this,function(i){return fe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]})})},e.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},e.prototype.releaseGPUData=function(n){var r=this.texData.get(n),i=r.texture,a=r.dtype,o=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,c=l&&l.origDataId||n,f=this.dataRefCount.get(c);f>1?this.dataRefCount.set(c,f-1):(this.dataRefCount.delete(c),i!=null&&(this.numBytesInGPU-=this.computeBytes(o,a),this.textureManager.releaseTexture(i,o,s,u)));var h=this.texData.get(n);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null},e.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},e.prototype.getDataInfo=function(n){return this.texData.get(n)},e.prototype.getCPUBackend=function(){return fe().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=X.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(n,r){var i=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every(function(a){return i.texData.get(a.dataId).texture==null&&a.size<r})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(n,r){var i=this.makeOutput(n.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:X.keep(n.clone()),imag:X.keep(r.clone())},i},e.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,i){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,i);if(Be(i)===0)return Un([],i,n.dtype);var a=this.texData.get(n.dataId).isPacked,o=rk(n.shape,r,i);if(a||!o){var s=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new k8(i):new T8(i),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,u)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,i)},e.prototype.shallowSlice=function(n,r,i){var a=this.texData.get(n.dataId),o=this.makeOutput(i,n.dtype),s=this.texData.get(o.dataId);Object.assign(s,a),s.shape=i,s.dtype=n.dtype;var u=ik(r,n.strides);a.slice&&(u+=a.slice.flatOffset),s.slice={flatOffset:u,origDataId:a.slice&&a.slice.origDataId||n.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),o},e.prototype.stridedSlice=function(n,r,i,a){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,i,a);var o=Y1(r,i,a);if(o.some(function(u){return u===0}))return Un([],o);var s=new A8(r,a,o);return this.compileAndRun(s,[n])},e.prototype.reverse=function(n,r){var i=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new E8(n.shape,r):new b8(n.shape,r);return this.compileAndRun(i,[n])},e.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var i=n.map(function(d){return di(d)}),a=n.map(function(d){return ia(d)});return Wn(this.concat(i,r),this.concat(a,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>fe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(n.length/2),s=this.concat(n.slice(0,o),r),u=this.concat(n.slice(o),r);return this.concat([s,u],r)}if(fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var l=new x5(n.map(function(d){return d.shape}),r);return this.compileAndRun(l,n)}var c=ll(n.map(function(d){return d.shape}),r),f=n.map(function(d){return d.as2D(-1,Be(d.shape.slice(r)))}),h=new g5(f.map(function(d){return d.shape}));return this.compileAndRun(h,f).reshape(c)},e.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Ww,n.dtype);var r=new et(n.shape,Ww);return this.compileAndRun(r,[n])},e.prototype.batchMatMul=function(n,r,i,a){var o=i?n.shape[2]:n.shape[1],s=a?r.shape[1]:r.shape[2],u=i?n.shape[1]:n.shape[2],l=n.shape[0];if((o===1||s===1)&&u>1e3){i&&(n=n.transpose([0,2,1])),a&&(r=r.transpose([0,2,1]));var c=s===1?n:n.as3D(l,u,1),f=s===1?2:1,h=s===1?r.as3D(l,1,u):r;return this.multiply(c,h).sum(f,!0)}var d=zn(n.dtype,r.dtype),v=new _v(n.shape,[l,o,s],i,a);return this.compileAndRun(v,[n,r],d)},e.prototype.fusedBatchMatMul=function(n){var r=n.a,i=n.b,a=n.transposeA,o=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=a?r.shape[2]:r.shape[1],f=o?i.shape[1]:i.shape[2],h=r.shape[0],d=zn(r.dtype,i.dtype),v=s!=null,p=l!=null,m=u?kh(u,!0):null,g=new _v(r.shape,[h,c,f],a,o,v,m,p),x=[r,i];return s&&x.push(s),l&&x.push(l),this.compileAndRun(g,x,d)},e.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var i=this.texData.get(n.dataId),a=this.texData.get(r.dataId),o=new kw(h5,n.shape,r.shape),s=new kw(d5,n.shape,r.shape),u=[this.makeComplexComponentTensorInfo(n,i.complexTensors.real),this.makeComplexComponentTensorInfo(n,i.complexTensors.imag),this.makeComplexComponentTensorInfo(r,a.complexTensors.real),this.makeComplexComponentTensorInfo(r,a.complexTensors.imag)],l=this.compileAndRun(o,u),c=this.compileAndRun(s,u),f=this.complex(l,c);return l.dispose(),c.dispose(),f}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Aw,n.dtype);var h=new Ht(Aw,n.shape,r.shape);return this.compileAndRun(h,[n,r],n.dtype)},e.prototype.batchNormalization=function(n,r,i,a,o,s){var u=[n,r,i],l=null;s!=null&&(l=s.shape,u.push(s));var c=null;if(o!=null&&(c=o.shape,u.push(o)),fe().getBool("WEBGL_PACK_NORMALIZATION")){var f=new f5(n.shape,r.shape,i.shape,l,c,a);return this.compileAndRun(f,u)}var h=new c5(n.shape,r.shape,i.shape,l,c,a);return this.compileAndRun(h,u)},e.prototype.localResponseNormalization4D=function(n,r,i,a,o){var s=fe().getBool("WEBGL_PACK_NORMALIZATION")?new s8(n.shape,r,i,a,o):new a8(n.shape,r,i,a,o);return this.compileAndRun(s,[n])},e.prototype.LRNGrad=function(n,r,i,a,o,s,u){var l=new o8(r.shape,a,o,s,u);return this.compileAndRun(l,[r,i,n])},e.prototype.tile=function(n,r){if(n.dtype==="string"){var i=this.readSync(n.dataId).map(function(o){return np(o)});return hk(Ye(n.shape,n.dtype,i),r)}var a=new R8(n.shape,r);return this.compileAndRun(a,[n])},e.prototype.pad=function(n,r,i){var a=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new p8(n.shape,r,i):new d8(n.shape,r,i);return this.compileAndRun(a,[n])},e.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var i=fe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new D8(n.shape,r):new F8(n.shape,r);return this.compileAndRun(i,[n])},e.prototype.gather=function(n,r,i){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,i);var a=new W5(n.shape,r.size,i);return this.compileAndRun(a,[n,r])},e.prototype.batchToSpaceND=function(n,r,i){M(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var a=r.reduce(function(f,h){return f*h}),o=up(n.shape,r,a),s=lp(o.length,r.length),u=cp(n.shape,r,a),l=ZT(i,r.length),c=ek(u,i,r.length);return n.reshape(o).transpose(s).reshape(u).slice(l,c)},e.prototype.spaceToBatchND=function(n,r,i){M(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var a=r.reduce(function(h,d){return h*d}),o=[[0,0]];o.push.apply(o,i);for(var s=1+r.length;s<n.shape.length;++s)o.push([0,0]);var u=n.pad(o),l=up(u.shape,r,a,!1),c=lp(l.length,r.length,!1),f=cp(u.shape,r,a,!1);return u.reshape(l).transpose(c).reshape(f)},e.prototype.reduce=function(n,r,i){var a=n.shape[0],o=n.shape[1],s=xv(o),u=new v8({windowSize:s,inSize:o,batchSize:a},r),l=this.compileAndRun(u,[n],i);return l.shape[1]===1?l:this.reduce(l,r,i)},e.prototype.argReduce=function(n,r,i){i===void 0&&(i=null);var a=n.shape[0],o=n.shape[1];i!=null&&(a=i.shape[0],o=i.shape[1]);var s=xv(o),u=new t5({windowSize:s,inSize:o,batchSize:a},r,i==null),l=[n];i!=null&&l.push(i);var c=this.compileAndRun(u,l,"int32");return c.shape[1]===1?c:this.argReduce(n,r,c)},e.prototype.argReducePacked=function(n,r,i){i===void 0&&(i=null);var a=i!=null?i.shape:n.shape,o=xv(a[a.length-1]),s=new s5(a,o,r,i==null),u=i==null?[n]:[n,i],l=this.compileAndRun(s,u,"int32");return l.rank===n.rank?this.argReducePacked(n,r,l):l},e.prototype.sum=function(n,r){$r("sum",r,n.rank);var i=Qn(n.shape,r),a=i[0],o=Be(i[1]),s=n.as2D(-1,o),u=cv(n.dtype);return this.reduce(s,"sum",u).reshape(a)},e.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var i=Qn(n.shape,r),a=i[0],o=Be(i[1]),s=n.as2D(-1,o),u=cv(n.dtype);return this.reduce(s,"prod",u).reshape(a)},e.prototype.unsortedSegmentSum=function(n,r,i){var a=0,o=ga([a],n.rank),s=n;o!=null&&(s=n.transpose(o),a=xa(1,n.rank)[0]);var u=function(d,v,p){for(var m=[],g=d.length,x=0;x<g;x++)x!==v?m.push(d[x]):m.push(p);return m}(s.shape,a,i),l=Be([s.shape[a]]),c=s.as2D(-1,l),f=cv(n.dtype),h=this.segOpCompute(c,"unsortedSegmentSum",r,f,i).reshape(u);return o!=null&&(h=h.transpose(G1(o))),h},e.prototype.segOpCompute=function(n,r,i,a,o){var s=n.shape[0],u=n.shape[1],l=function(h,d){var v,p=!1;for(h<=nk?(v=h,p=!0):v=Zm(h,Math.floor(Math.sqrt(h)));!p;)v>d||v===h?p=!0:v=Zm(h,v+1);return v}(u,o),c=new S8({windowSize:l,inSize:u,batchSize:s,numSegments:o}),f=this.compileAndRun(c,[n,i],a);return f.shape[1]===o?f:(i=sp(0,o).tile([u/l]),this.segOpCompute(f,r,i,a,o))},e.prototype.argMinMaxReduce=function(n,r,i){var a=[r];if($r("arg"+i.charAt(0).toUpperCase()+i.slice(1),a,n.rank),!fe().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var o=Qn(n.shape,a),s=o[0],u=Be(o[1]),l=n.as2D(-1,u);return this.argReduce(l,i).reshape(s)}return this.argReducePacked(n,i)},e.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},e.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},e.prototype.cumsum=function(n,r,i,a){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var o=new k5(n.shape,i,a);return this.compileAndRun(o,[n])},e.prototype.equal=function(n,r){if(fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var i=new Ht("return float(a == b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.notEqual=function(n,r){if(fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var i=new Ht("return float(a != b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var i=new Ht("return float(a < b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.lessEqual=function(n,r){if(fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var i=new Ht("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var i=new Ht("return float(a > b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.greaterEqual=function(n,r){if(fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var i=new Ht("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.logicalNot=function(n){var r=new et(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},e.prototype.logicalAnd=function(n,r){if(fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var i=new Ht("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.logicalOr=function(n,r){if(fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var i=new Ht("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.select=function(n,r,i){var a=new C8(n.rank,r.shape,r.rank);return this.compileAndRun(a,[n,r,i],zn(r.dtype,i.dtype))},e.prototype.where=function(n){ap("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return ex(n.shape,r)},e.prototype.topk=function(n,r,i){return dk(n.dataSync(),n.shape,n.dtype,r)},e.prototype.min=function(n,r){$r("min",r,n.rank);var i=Qn(n.shape,r),a=i[0],o=Be(i[1]),s=n.as2D(-1,o);return this.reduce(s,"min",s.dtype).reshape(a)},e.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Aa(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Ht(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.mod=function(n,r){var i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Aa(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Ht(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);$r("max",r,n.rank);var i=Qn(n.shape,r),a=i[0],o=Be(i[1]),s=n.as2D(-1,o);return this.reduce(s,"max",s.dtype).reshape(a)},e.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Aa(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Ht(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.all=function(n,r){$r("all",r,n.rank);var i=Qn(n.shape,r),a=i[0],o=Be(i[1]),s=n.as2D(-1,o);return this.reduce(s,"all",s.dtype).reshape(a)},e.prototype.any=function(n,r){$r("any",r,n.rank);var i=Qn(n.shape,r),a=i[0],o=Be(i[1]),s=n.as2D(-1,o);return this.reduce(s,"any",s.dtype).reshape(a)},e.prototype.realDivide=function(n,r){if(fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var i=new Ht(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(i,[n,r],"float32")},e.prototype.floorDiv=function(n,r){if(fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var i=new Ht(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(i,[n,r],"int32")},e.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,yv);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var i=zn(n.dtype,r.dtype);if(fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,yv,i);var a=new Ht(yv,n.shape,r.shape);return this.compileAndRun(a,[n,r],i)},e.prototype.packedUnaryOp=function(n,r,i){var a=new Hl(n.shape,r);return this.compileAndRun(a,[n],i)},e.prototype.packedBinaryOp=function(n,r,i,a,o){o===void 0&&(o=!1);var s=new Aa(i,n.shape,r.shape,o);return this.compileAndRun(s,[n,r],a)},e.prototype.complexSeparableBinaryOp=function(n,r,i){var a=this,o=this.texData.get(n.dataId),s=this.texData.get(r.dataId),u=[[o.complexTensors.real,s.complexTensors.real],[o.complexTensors.imag,s.complexTensors.imag]].map(function(h){var d=h[0],v=h[1],p=a.makeComplexComponentTensorInfo(n,d),m=a.makeComplexComponentTensorInfo(r,v),g=new Ht(i,n.shape,r.shape);return a.compileAndRun(g,[p,m],zn(d.dtype,v.dtype))}),l=u[0],c=u[1],f=this.complex(l,c);return l.dispose(),c.dispose(),f},e.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},e.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>fe().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),i=this.addN(n.slice(0,r)),a=this.addN(n.slice(r));return this.addN([i,a])}var o=n.map(function(l){return l.dtype}).reduce(function(l,c){return zn(l,c)}),s=n.map(function(l){return l.shape}),u=fe().getBool("WEBGL_PACK")?new e5(n[0].shape,s):new Z6(n[0].shape,s);return this.compileAndRun(u,n,o)},e.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,wv);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var i=zn(n.dtype,r.dtype);if(fe().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,wv,n.dtype);var a=new Ht(wv,n.shape,r.shape);return this.compileAndRun(a,[n,r],i)},e.prototype.pow=function(n,r){var i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Aa(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Ht(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),a=zn(n.dtype,r.dtype);return this.compileAndRun(i,[n,r],a)},e.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,zw,n.dtype);var r=new et(n.shape,zw);return this.compileAndRun(r,[n])},e.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Uw,n.dtype);var r=new et(n.shape,Uw);return this.compileAndRun(r,[n])},e.prototype.sign=function(n){var r=new et(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},e.prototype.isNaN=function(n){var r=new et(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isInf=function(n){var r=new et(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isFinite=function(n){var r=new et(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.round=function(n){var r=new et(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},e.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Vw,n.dtype);var r=new et(n.shape,Vw);return this.compileAndRun(r,[n])},e.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Hw,n.dtype);var r=new et(n.shape,Hw);return this.compileAndRun(r,[n])},e.prototype.softmax=function(n,r){var i=_n([r],n.shape),a=this.max(n,i),o=Pr(a.shape,i),s=this.subtract(n,a.reshape(o)),u=this.exp(s),l=this.sum(u,i).reshape(o);return this.realDivide(u,l)},e.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new et(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},e.prototype.log1p=function(n){var r=new et(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},e.prototype.sqrt=function(n){var r=new et(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},e.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new et(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},e.prototype.reciprocal=function(n){var r=new et(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},e.prototype.relu=function(n){var r;return r=fe().getBool("WEBGL_PACK")?new Hl(n.shape,bk):new et(n.shape,yk),this.compileAndRun(r,[n])},e.prototype.relu6=function(n){var r;return r=fe().getBool("WEBGL_PACK")?new Hl(n.shape,Ek):new et(n.shape,wk),this.compileAndRun(r,[n])},e.prototype.prelu=function(n,r){var i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Aa(xk,n.shape,r.shape):new Ht(gk,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.elu=function(n){if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Sk,n.dtype);var r=new et(n.shape,_k);return this.compileAndRun(r,[n])},e.prototype.eluDer=function(n,r){var i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Aa(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new Ht("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.selu=function(n){var r=new et(n.shape,P8);return this.compileAndRun(r,[n])},e.prototype.int=function(n){var r=new et(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},e.prototype.clip=function(n,r,i){var a,o=(a=fe().getBool("WEBGL_PACK_CLIP")?new v5(n.shape):new p5(n.shape)).getCustomSetupFunc(r,i);return this.compileAndRun(a,[n],null,o)},e.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(fe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Bw,n.dtype);var r=new et(n.shape,Bw);return this.compileAndRun(r,[n])},e.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),i=new m5(n.shape),a=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(i,a)},e.prototype.sigmoid=function(n){var r=new et(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},e.prototype.softplus=function(n){var r=new et(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},e.prototype.sin=function(n){var r=new et(n.shape,N8);return this.compileAndRun(r,[n])},e.prototype.cos=function(n){var r=new et(n.shape,M8);return this.compileAndRun(r,[n])},e.prototype.tan=function(n){var r=new et(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},e.prototype.asin=function(n){var r=new et(n.shape,L8);return this.compileAndRun(r,[n])},e.prototype.acos=function(n){var r=new et(n.shape,B8);return this.compileAndRun(r,[n])},e.prototype.atan=function(n){var r=new et(n.shape,W8);return this.compileAndRun(r,[n])},e.prototype.atan2=function(n,r){var i=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Aa(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Ht(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.sinh=function(n){var r=new et(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.cosh=function(n){var r=new et(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.tanh=function(n){var r=new et(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},e.prototype.asinh=function(n){var r=new et(n.shape,z8);return this.compileAndRun(r,[n])},e.prototype.acosh=function(n){var r=new et(n.shape,U8);return this.compileAndRun(r,[n])},e.prototype.atanh=function(n){var r=new et(n.shape,V8);return this.compileAndRun(r,[n])},e.prototype.erf=function(n){var r=new et(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},e.prototype.step=function(n,r){var i=new et(n.shape,function(a){return a===void 0&&(a=0),Vi+`
    return x > 0.0 ? 1.0 : float(`+a+`);
  `}(r));return this.compileAndRun(i,[n])},e.prototype.conv2dByMatMul=function(n,r,i,a,o,s){var u=n.shape,l=this.texData.get(n.dataId),c=i.inChannels,f=u[0]*u[1]*u[2],h=i.outChannels,d=i.dataFormat==="channelsLast",v=(f===1||h===1)&&c>1e3,p=u[2]%2!=0&&!!l.isPacked;if(v||!fe().getBool("WEBGL_LAZILY_UNPACK")||!fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!p){var m=d?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],g=this.reshape(n,[1,m,i.inChannels]),x=this.reshape(r,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:g,b:x,transposeA:!1,transposeB:!1,bias:a,activation:o,preluActivationWeights:s}),i.outShape)}var y=d?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),w={dataId:n.dataId,shape:[1,y,i.inChannels],dtype:n.dtype},_=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,M(Eh(l.shape,w.shape),function(){return"packed reshape "+l.shape+" to "+w.shape+" isn't free"});var b=this.reshape(r,[1,i.inChannels,i.outChannels]),E=this.fusedBatchMatMul({a:w,b,transposeA:!1,transposeB:!1,bias:a,activation:o,preluActivationWeights:s}),S=this.texData.get(E.dataId);return M(S.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=_,S.shape=i.outShape,X.makeTensorFromDataId(E.dataId,i.outShape,E.dtype)},e.prototype.conv2dWithIm2Row=function(n,r,i,a,o,s){var u=i.filterWidth,l=i.filterHeight,c=i.inChannels,f=i.outWidth,h=i.outHeight,d=i.dataFormat==="channelsLast",v=u*l*c,p=h*f,m=[v,p],g=n.squeeze([0]),x=r.reshape([1,v,-1]),y=new i8(m,g.shape,i),w=this.compileAndRun(y,[g]).reshape([1,m[0],m[1]]),_=a!=null,b=s!=null,E=o?kh(o,!0):null,S=new _v(w.shape,[1,p,i.outChannels],!0,!1,_,E,b),C=[w,x];a&&C.push(a),b&&C.push(s);var T=this.compileAndRun(S,C);return d?T.reshape([1,h,f,i.outChannels]):T.reshape([1,i.outChannels,h,f])},e.prototype.fusedConv2d=function(n){var r=n.input,i=n.filter,a=n.convInfo,o=n.bias,s=n.activation,u=n.preluActivationWeights;if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(r,i,a,o,s,u);if(fe().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,i,a,o,s,u);var l=o!=null,c=u!=null,f=s?kh(s,!1):null,h=new Iw(a,l,f,c),d=[r,i];return o&&d.push(o),u&&d.push(u),this.compileAndRun(h,d)},e.prototype.conv2d=function(n,r,i){if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,i);if(fe().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,i);var a=new Iw(i);return this.compileAndRun(a,[n,r])},e.prototype.conv2dDerInput=function(n,r,i){var a=new w5(i);return this.compileAndRun(a,[n,r])},e.prototype.conv2dDerFilter=function(n,r,i){var a=new y5(i);return this.compileAndRun(a,[n,r])},e.prototype.fusedDepthwiseConv2D=function(n){var r,i=n.input,a=n.filter,o=n.convInfo,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,f=u?kh(u,c):null,h=[i,a],d=s!=null,v=l!=null;return d&&h.push(s),v&&h.push(l),c?(r=new Fw(o,d,f,v),this.compileAndRun(r,h)):(r=new Rw(o,d,f,v),this.compileAndRun(r,h))},e.prototype.depthwiseConv2D=function(n,r,i){var a;return fe().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(a=new Fw(i),this.compileAndRun(a,[n,r])):(a=new Rw(i),this.compileAndRun(a,[n,r]))},e.prototype.depthwiseConv2DDerInput=function(n,r,i){var a=new S5(i);return this.compileAndRun(a,[n,r])},e.prototype.depthwiseConv2DDerFilter=function(n,r,i){var a=new E5(i);return this.compileAndRun(a,[n,r])},e.prototype.conv3d=function(n,r,i){var a=new C5(i);return this.compileAndRun(a,[n,r])},e.prototype.conv3dDerInput=function(n,r,i){var a=new b5(i);return this.compileAndRun(a,[n,r])},e.prototype.conv3dDerFilter=function(n,r,i){var a=new _5(i);return this.compileAndRun(a,[n,r])},e.prototype.maxPool=function(n,r){var i=new bv(r,"max",!1);return this.compileAndRun(i,[n])},e.prototype.avgPool=function(n,r){var i=new bv(r,"avg",!1);return this.compileAndRun(i,[n],"float32")},e.prototype.maxPoolBackprop=function(n,r,i,a){var o=new bv(a,"max",!0),s=this.compileAndRun(o,[r]),u=new u8(a),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.avgPoolBackprop=function(n,r,i){var a=new u5(i);return this.compileAndRun(a,[n],r.dtype)},e.prototype.cast=function(n,r){return uk(n,r,this)},e.prototype.unstack=function(n,r){for(var i=n.shape[r],a=new Array(n.rank-1),o=0,s=0;s<n.rank;s++)s!==r&&(a[o++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(a);return c},e.prototype.avgPool3d=function(n,r){var i=new Ev(r,"avg",!1);return this.compileAndRun(i,[n],"float32")},e.prototype.avgPool3dBackprop=function(n,r,i){var a=new l5(i);return this.compileAndRun(a,[n],r.dtype)},e.prototype.maxPool3d=function(n,r){var i=new Ev(r,"max",!1);return this.compileAndRun(i,[n],"float32")},e.prototype.maxPool3dBackprop=function(n,r,i,a){var o=new Ev(a,"max",!0),s=this.compileAndRun(o,[r]),u=new l8(a),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.reshape=function(n,r){var i=this.texData.get(n.dataId);if(i.isPacked&&!Eh(n.shape,r)&&(i.texture===null||!Eh(i.shape,r))){var a=this.packedReshape(n,r);return X.makeTensorFromDataId(a.dataId,a.shape,a.dtype)}return sg(n,r)},e.prototype.resizeBilinear=function(n,r,i,a){var o=fe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new y8(n.shape,r,i,a):new x8(n.shape,r,i,a);return this.compileAndRun(o,[n],"float32")},e.prototype.resizeBilinearBackprop=function(n,r,i){var a=new g8(n,r,i);return this.compileAndRun(a,[n])},e.prototype.resizeNearestNeighbor=function(n,r,i,a){var o=new _8(n.shape,r,i,a);return this.compileAndRun(o,[n])},e.prototype.resizeNearestNeighborBackprop=function(n,r,i){var a=new w8(n,r,i);return this.compileAndRun(a,[n])},e.prototype.multinomial=function(n,r,i,a){var o=r?n:Ja(n),s=o.shape[0],u=o.shape[1],l=new c8(s,u,i),c=l.getCustomSetupFunc(a);return this.compileAndRun(l,[o],"int32",c)},e.prototype.oneHot=function(n,r,i,a){var o=new f8(n.size,r,i,a);return this.compileAndRun(o,[n])},e.prototype.diag=function(n){var r=new F5(n.size);return this.compileAndRun(r,[n])},e.prototype.nonMaxSuppression=function(n,r,i,a,o){return ap("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),J1(n.dataSync(),r.dataSync(),i,a,o)},e.prototype.cropAndResize=function(n,r,i,a,o,s){var u=new T5(n.shape,r.shape,a,o,s);return this.compileAndRun(u,[n,r,i],"float32")},e.prototype.depthToSpace=function(n,r,i){M(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var a=n.shape[0],o=i==="NHWC"?n.shape[1]:n.shape[2],s=i==="NHWC"?n.shape[2]:n.shape[3],u=i==="NHWC"?n.shape[3]:n.shape[1],l=o*r,c=s*r,f=u/(r*r),h=new R5(i==="NHWC"?[a,l,c,f]:[a,f,l,c],r,i);return this.compileAndRun(h,[n])},e.prototype.split=function(n,r,i){return fk(n,r,i)},e.prototype.scatterND=function(n,r,i){var a=fp(0,n,i),o=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,c=a.outputSize,f=[c/u,u],h=n.reshape([s,o]),d=r.reshape([s,u]);if(c===0)return sg(Un([]),i);var v=Ie(0),p=new Nw(s,o,h.rank,d.rank,l,f);return this.compileAndRun(p,[d,h,v]).reshape(i)},e.prototype.sparseToDense=function(n,r,i,a){var o=fp(0,n,i),s=o.sliceRank,u=o.numUpdates,l=o.strides,c=o.outputSize,f=new Nw(u,s,n.rank,r.rank,l,[c,1]);return this.compileAndRun(f,[r,n,a]).reshape(i)},e.prototype.fft=function(n){return this.fftImpl(n,!1)},e.prototype.ifft=function(n){return this.fftImpl(n,!0)},e.prototype.fftImpl=function(n,r){var i=this.texData.get(n.dataId),a=new Ow(M5,n.shape,r),o=new Ow(L5,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,i.complexTensors.real),this.makeComplexComponentTensorInfo(n,i.complexTensors.imag)],u=this.compileAndRun(a,s),l=this.compileAndRun(o,s),c=this.complex(u,l).as2D(n.shape[0],n.shape[1]);return u.dispose(),l.dispose(),c},e.prototype.gatherND=function(n,r){var i=r.shape,a=i[i.length-1],o=tk(n,r),s=o[0],u=o[1],l=o[2],c=o[3],f=r.reshape([u,a]),h=n.reshape([n.size/l,l]),d=new z5(a,c,[u,l]);return this.compileAndRun(d,[h,f]).reshape(s)},e.prototype.fill=function(n,r,i){if((i=i||Sf(r))==="string"){var a=tp(i,Be(n));return a.fill(r),X.makeTensor(a,n,i,this)}var o=new B5(n,r),s=o.getCustomSetupFunc(r);return this.compileAndRun(o,[],i,s)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},e.prototype.linspace=function(n,r,i){return lk(n,r,i)},e.prototype.makeTensorInfo=function(n,r){var i=this.write(null,n,r);return this.texData.get(i).usage=null,{dataId:i,shape:n,dtype:r}},e.prototype.makeOutput=function(n,r){var i=this.makeTensorInfo(n,r).dataId;return X.makeTensorFromDataId(i,n,r,this)},e.prototype.unpackTensor=function(n){var r=new $8(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},e.prototype.packTensor=function(n){var r=new h8(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},e.prototype.packedReshape=function(n,r){var i=[rp(n.shape)].concat(ip(n.shape)),a={dtype:n.dtype,shape:i,dataId:n.dataId},o=[rp(r)].concat(ip(r)),s=new m8(o,i),u=this.runWebGLProgram(s,[a],n.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},e.prototype.decode=function(n){var r,i=this.texData.get(n),a=i.isPacked,o=i.shape,s=i.dtype,u=gv(o);return r=a?new I5(u):new A5(u),{dtype:s,shape:o,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:n}],s,null,!0).dataId}},e.prototype.runWebGLProgram=function(n,r,i,a,o){var s=this;o===void 0&&(o=!1);var u=this.makeTensorInfo(n.outputShape,i),l=this.texData.get(u.dataId);if(n.packedOutput&&(l.isPacked=!0),n.outPackingScheme===Zc.DENSE){var c=wc(n.outputShape);l.texShape=c.map(function(y){return 2*y})}if(n.outTexUsage!=null&&(l.usage=n.outTexUsage),Be(u.shape)===0)return l.values=Qc(u.dtype,0),u;var f=[],h=r.map(function(y){if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var w=s.texData.get(y.dataId);if(w.texture==null){if(!n.packedInputs&&Be(y.shape)<=fe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:w.values};n.packedInputs&&(w.isPacked=!0,w.shape=y.shape)}else if(!!w.isPacked!=!!n.packedInputs)y=w.isPacked?s.unpackTensor(y):s.packTensor(y),f.push(y),w=s.texData.get(y.dataId);else if(w.isPacked&&!Eh(w.shape,y.shape)){var _=y,b=y.shape;y.shape=w.shape,y=s.packedReshape(y,b),f.push(y),w=s.texData.get(y.dataId),_.shape=b}return s.uploadToGPU(y.dataId),{shape:y.shape,texData:w,isUniform:!1}});this.uploadToGPU(u.dataId);var d,v={shape:u.shape,texData:l,isUniform:!1},p=function(y,w,_){var b="";w.concat(_).forEach(function(C){var T=C.texData!=null&&C.texData.slice!=null&&C.texData.slice.flatOffset>0,A=C.isUniform?"uniform":C.texData.texShape;b+=C.shape+"_"+A+"_"+T});var E=y.userCode,S=y.constructor.name;return S+="_"+b+"_"+E}(n,h,v),m=this.getAndSaveBinary(p,function(){return function(y,w,_,b){var E=w.userCode,S=_.map(function(G,Q){var te={logicalShape:G.shape,texShape:G.isUniform?null:G.texData.texShape,isUniform:G.isUniform,isPacked:!G.isUniform&&G.texData.isPacked,flatOffset:null};return G.texData!=null&&G.texData.slice!=null&&G.texData.slice.flatOffset>0&&(te.flatOffset=G.texData.slice.flatOffset),{name:w.variableNames[Q],shapeInfo:te}}),C=S.map(function(G){return G.shapeInfo}),T={logicalShape:b.shape,texShape:b.texData.texShape,isUniform:!1,isPacked:b.texData.isPacked,flatOffset:null},A=n5(S,T,E,w.packedInputs),I=y.createProgram(A),V=null,J=y.getUniformLocation(I,"NAN",!1);fe().getNumber("WEBGL_VERSION")===1&&(V=y.getUniformLocation(I,"INFINITY",!1));for(var K={},ae=0;ae<w.variableNames.length;ae++){var ie=w.variableNames[ae];K[ie]=y.getUniformLocation(I,ie,!1),K["offset"+ie]=y.getUniformLocation(I,"offset"+ie,!1)}return{program:w,source:A,webGLProgram:I,uniformLocations:K,inShapeInfos:C,outShapeInfo:T,infLoc:V,nanLoc:J}}(s.gpgpu,n,h,v)}),g=this.activeTimers!=null;if(g&&(d=this.startTimer()),function(y,w,_,b,E){Pw(w.inShapeInfos,_),Pw([w.outShapeInfo],[b]);var S=b.texData.texture,C=b.texData.texShape;b.texData.isPacked?y.setOutputPackedMatrixTexture(S,C[0],C[1]):y.setOutputMatrixTexture(S,C[0],C[1]),y.setProgram(w.webGLProgram),fe().getNumber("WEBGL_VERSION")===1&&w.infLoc!==null&&y.gl.uniform1f(w.infLoc,1/0),w.nanLoc!==null&&y.gl.uniform1f(w.nanLoc,NaN),_.forEach(function(T,A){var I=w.program.variableNames[A],V=w.uniformLocations[I],J=w.uniformLocations["offset"+I];if(V!=null)if(T.isUniform)if(Be(T.shape)<2)y.gl.uniform1f(V,T.uniformValues[0]);else{var K=T.uniformValues;K instanceof Float32Array||(K=new Float32Array(K)),y.gl.uniform1fv(V,K)}else T.texData.slice!=null&&J!=null&&y.gl.uniform1i(J,T.texData.slice.flatOffset),y.setInputMatrixTexture(T.texData.texture,V,A)}),E!=null&&E(y,w.webGLProgram),y.executeProgram()}(this.gpgpu,m,h,v,a),f.forEach(function(y){return s.disposeData(y.dataId)}),g&&(d=this.endTimer(d),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(d)})),!fe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&o===!1){var x=this.unpackTensor(u);return this.disposeData(u.dataId),x}return u},e.prototype.compileAndRun=function(n,r,i,a,o){o===void 0&&(o=!1),i=i||r[0].dtype;var s=this.runWebGLProgram(n,r,i,a,o);return X.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},e.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var n=this;this.disposed||(fe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=De(function(){if(!fe().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=fe().getBool("DEBUG");fe().set("DEBUG",!1);var i=n.abs(Ie(1e-8)).dataSync()[0];if(fe().set("DEBUG",r),i>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(n){var r,i=this.texData.get(n),a=i.shape,o=i.dtype,s=i.values,u=i.texture,l=i.usage,c=i.isPacked;if(u==null){var f,h=this.activeTimers!=null;h&&(f=ta());var d=i.texShape;if(d==null&&(d=JB(a,c),i.texShape=d),s!=null){var v=gv(a),p=void 0,m=d[1],g=d[0],x=s instanceof Uint8Array;c?(m=(r=Tf(d[0],d[1]))[0],g=r[1],p=new N5(v,[g,m],x)):p=new P5(v,[g,m],x);var y=this.makeTensorInfo([g,m],o);this.texData.get(y.dataId).usage=x?qr.PIXELS:qr.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),m,g,s);var w=this.runWebGLProgram(p,[y],o,null,!0),_=this.texData.get(w.dataId);i.texture=_.texture,i.texShape=_.texShape,i.isPacked=_.isPacked,i.usage=_.usage,this.disposeData(y.dataId),this.texData.delete(w.dataId),i.values=null,h&&(this.uploadWaitMs+=ta()-f)}else{var b=this.acquireTexture(d,l,o,c);i.texture=b}}},e.prototype.convertAndCacheOnCPU=function(n,r){var i=this.texData.get(n),a=i.dtype;return this.releaseGPUData(n),r!=null&&(i.values=function(o,s){if(s==="float32"||s==="complex64")return o;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(o.length):new Uint8Array(o.length),l=0;l<u.length;++l)u[l]=Math.round(o[l]);return u}throw new Error("Unknown dtype "+s)}(r,a)),i.values},e.prototype.acquireTexture=function(n,r,i,a){if(this.numBytesInGPU+=this.computeBytes(n,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,a)},e.prototype.computeBytes=function(n,r){return n[0]*n[1]*LT(r)},e}(ok);$T()&&X.registerBackend("webgl",function(){return new G8},2);var X8=H({square_:function(t){var e=F(t,"x","square"),n=[e];return X.runKernelFunc(function(r,i){return i([e]),r.square(e)},{x:e},null,"Square",{},n,[])}}),tf="SquaredDifference",Ck=H({squaredDifference_:function(t,e){var n,r=F(t,"a","squaredDifference"),i=F(e,"b","squaredDifference");n=zt(r,i),r=n[0],i=n[1],at(r.shape,i.shape);var a={a:r,b:i},o=[r,i];return X.runKernelFunc(function(s,u){var l=s.squaredDifference(r,i);return u([r,i]),l},a,function(s,u){var l=u[0],c=u[1],f=Ie(2);return{a:function(){return s.mul(l.sub(c).mul(f))},b:function(){return s.mul(c.sub(l).mul(f))}}},tf,{},o,[])}}),K8=H({abs_:function(t){var e=F(t,"x","abs");return e.dtype==="complex64"?X.runKernelFunc(function(n){return n.complexAbs(e)},{$x:e}):X.runKernelFunc(function(n,r){var i=n.abs(e);return r([e]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.mul(i.toFloat().step(-1))}}},"Abs")}}),q8=H({acos_:function(t){var e=F(t,"x","acos");return X.runKernelFunc(function(n,r){var i=n.acos(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(Ie(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),Y8=H({acosh_:function(t){var e=F(t,"x","acosh");return X.runKernelFunc(function(n,r){var i=n.acosh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),Q8=H({asin_:function(t){var e=F(t,"x","asin");return X.runKernelFunc(function(n,r){var i=n.asin(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(Ie(1).sub(i.toFloat().square()).sqrt())}}})}}),J8=H({asinh_:function(t){var e=F(t,"x","asinh");return X.runKernelFunc(function(n,r){var i=n.asinh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(Ie(1).add(i.toFloat().square()).sqrt())}}})}}),Z8=H({atan_:function(t){var e=F(t,"x","atan");return X.runKernelFunc(function(n,r){var i=n.atan(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.toFloat().square().add(1))}}})}}),eW=H({atanh_:function(t){var e=F(t,"x","atanh");return X.runKernelFunc(function(n,r){var i=n.atanh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(Ie(1).sub(i.toFloat().square()))}}})}}),tW=H({ceil_:function(t){var e=F(t,"x","ceil");return X.runKernelFunc(function(n){return n.ceil(e)},{$x:e},function(n){return{$x:function(){return st(n)}}})}}),ix=H({clipByValue_:function(t,e,n){var r=F(t,"x","clipByValue");M(e<=n,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."});var i=[r],a={min:e,max:n};return X.runKernelFunc(function(o,s){var u=o.clip(r,e,n);return s([r]),u},{x:r},function(o,s){var u=s[0];return{x:function(){return o.where(u.greaterEqual(e).logicalAnd(u.lessEqual(n)),st(o))}}},"ClipByValue",a,i)}}),nW=H({cos_:function(t){var e=F(t,"x","cos"),n=[e];return X.runKernelFunc(function(r,i){var a=r.cos(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return a.toFloat().sin().neg().mul(r)}}},"Cos",{},n)}}),rW=H({cosh_:function(t){var e=F(t,"x","cosh");return X.runKernelFunc(function(n,r){var i=n.cosh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(n)}}})}}),iW=H({erf_:function(t){var e=F(t,"x","erf");return M(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),X.runKernelFunc(function(n,r){var i=n.erf(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),lg=H({exp_:function(t){var e=F(t,"x","exp");return X.runKernelFunc(function(n,r){var i=n.exp(e);return r([i]),i},{x:e},function(n,r){return{x:function(){return n.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),aW=H({expm1_:function(t){var e=F(t,"x","expm1");return X.runKernelFunc(function(n,r){var i=n.expm1(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.exp())}}})}}),oW=H({floor_:function(t){var e=F(t,"x","floor");return X.runKernelFunc(function(n){return n.floor(e)},{$x:e},function(n){return{$x:function(){return st(n)}}})}}),sW=H({log_:function(t){var e=F(t,"x","log"),n=[e];return X.runKernelFunc(function(r,i){var a=r.log(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return r.div(a.toFloat())}}},"Log",{},n)}}),uW=H({log1p_:function(t){var e=F(t,"x","log1p");return X.runKernelFunc(function(n,r){var i=n.log1p(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.add(1))}}})}}),lW=H({logSigmoid_:function(t){var e=F(t,"x","logSigmoid");return X.runKernelFunc(function(n,r){var i=n.softplus(e.neg()).neg();return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.neg().sigmoid())}}})}}),vp=H({neg_:function(t){var e=F(t,"x","neg"),n=[e];return X.runKernelFunc(function(r){return r.neg(e)},{x:e},function(r){return{x:function(){return r.neg()}}},"Neg",{},n)}}),cW=H({reciprocal_:function(t){var e=F(t,"x","reciprocal");return X.runKernelFunc(function(n,r){var i=n.reciprocal(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.square().neg())}}})}}),fW=H({round_:function(t){var e=F(t,"x","round");return X.runKernelFunc(function(n){return n.round(e)},{$x:e},function(n){return{$x:function(){return st(n)}}})}}),Tk=H({rsqrt_:function(t){var e=F(t,"x","rsqrt"),n=[e];return X.runKernelFunc(function(r,i){var a=r.rsqrt(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return r.div(a.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),kk=H({sigmoid_:function(t){var e=F(t,"x","sigmoid");return X.runKernelFunc(function(n,r){var i=n.sigmoid(e);return r([i]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.mul(i.mul(Ie(1).sub(i)))}}},"Sigmoid")}}),hW=H({sign_:function(t){var e=F(t,"x","sign");return X.runKernelFunc(function(n){return n.sign(e)},{$x:e},function(n){return{$x:function(){return st(n)}}})}}),dW=H({isNaN_:function(t){var e=F(t,"x","isNaN");return X.runKernelFunc(function(n){return n.isNaN(e)},{$x:e},function(n){return{$x:function(){return st(n)}}})}}),pW=H({isInf_:function(t){var e=F(t,"x","isInf");return X.runKernelFunc(function(n){return n.isInf(e)},{$x:e},function(n){return{$x:function(){return st(n)}}})}}),vW=H({isFinite_:function(t){var e=F(t,"x","isFinite");return X.runKernelFunc(function(n){return n.isFinite(e)},{$x:e},function(n){return{$x:function(){return st(n)}}})}}),mW=H({sin_:function(t){var e=F(t,"x","sin"),n=[e];return X.runKernelFunc(function(r,i){var a=r.sin(e);return i([e]),a},{x:e},function(r,i){var a=i[0];return{x:function(){return a.toFloat().cos().mul(r)}}},"Sin",{},n)}}),gW=H({sinh_:function(t){var e=F(t,"x","sinh");return X.runKernelFunc(function(n,r){var i=n.sinh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(n)}}})}}),xW=H({softplus_:function(t){var e=F(t,"x","softplus");return X.runKernelFunc(function(n,r){var i=n.softplus(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.sigmoid())}}})}}),yW=H({sqrt_:function(t){var e=F(t,"x","sqrt");return X.runKernelFunc(function(n,r){var i=n.sqrt(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.toFloat().sqrt().mul(2))}}})}}),wW=H({step_:function(t,e){e===void 0&&(e=0);var n=F(t,"x","step");return X.runKernelFunc(function(r){return r.step(n,e)},{$x:n},function(r){return{$x:function(){return st(r)}}})}}),_W=H({tan_:function(t){var e=F(t,"x","tan");return X.runKernelFunc(function(n,r){var i=n.tan(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.cos().square())}}})}}),bW=H({tanh_:function(t){var e=F(t,"x","tanh");return X.runKernelFunc(function(n,r){var i=n.tanh(e);return r([i]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return Ie(1).sub(i.square()).mulStrict(n)}}},"Tanh",{},null,[!0])}});function Ak(t,e,n,r,i,a){var o,s,u=F(t,"x","batchNorm"),l=F(e,"mean","batchNorm"),c=F(n,"variance","batchNorm");return i!=null&&(o=F(i,"scale","batchNorm")),r!=null&&(s=F(r,"offset","batchNorm")),M(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),M(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),M(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),o!=null&&M(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),s!=null&&M(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),Af(u,l,c,s,o,a)}function Ik(t,e,n,r,i,a){var o,s,u=F(t,"x","batchNorm"),l=F(e,"mean","batchNorm"),c=F(n,"variance","batchNorm");return i!=null&&(o=F(i,"scale","batchNorm")),r!=null&&(s=F(r,"offset","batchNorm")),M(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),M(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),M(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),o!=null&&M(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),s!=null&&M(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),Af(u,l,c,s,o,a)}function Rk(t,e,n,r,i,a){var o,s,u=F(t,"x","batchNorm"),l=F(e,"mean","batchNorm"),c=F(n,"variance","batchNorm");return i!=null&&(o=F(i,"scale","batchNorm")),r!=null&&(s=F(r,"offset","batchNorm")),M(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),M(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),M(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),o!=null&&M(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),s!=null&&M(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),Af(u,l,c,s,o,a)}function Af(t,e,n,r,i,a){a==null&&(a=.001);var o,s,u,l=F(t,"x","batchNorm"),c=F(e,"mean","batchNorm"),f=F(n,"variance","batchNorm");i!=null&&(o=F(i,"scale","batchNorm")),r!=null&&(s=F(r,"offset","batchNorm")),M(c.rank===f.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),M(s==null||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),M(o==null||c.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var h=[l,c,f,o];return X.runKernelFunc(function(d,v){var p=d.batchNormalization(u,Ah(c),Ah(f),a,Ah(o),Ah(s));return v([l,c,f,o]),p},{x:l,mean:c,variance:f,scale:o,offset:s},function(d,v){var p=v,m=p[0],g=p[1],x=p[2],y=p[3],w=y??Ie(1),_=xn(g.shape,u.shape),b=[];if(g.rank===1){for(var E=0;E<u.shape.length-1;++E)b.push(u.shape[E]);b.push(1)}var S=m.sub(g),C=d.mul(w),T=Tk(x.add(Ie(a))),A=T.mul(T).mul(T).mul(Ie(-.5));return{x:function(){return g.rank===1?d.mul($u(T.as4D(1,1,1,g.shape[0]),b)).mul(w).reshape(m.shape):d.mul(T).mul(w).reshape(m.shape)},mean:function(){var I=T.mul(Ie(-1)).mul(C);return g.rank===1&&(I=I.sum(_)),I.reshape(g.shape)},variance:function(){var I=A.mul(S).mul(C);return g.rank===1&&(I=I.sum(_)),I.reshape(g.shape)},scale:function(){var I=S.mul(T),V=d.mul(I);return g.rank===1&&(V=V.sum(_)),V.reshape(g.shape)},offset:function(){var I=d;return g.rank===1&&(I=I.sum(_)),I.reshape(g.shape)}}},"BatchNormalization",{varianceEpsilon:a},h).reshape(l.shape)}function Ah(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function n0(){jT("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var EW=H({batchNormalization2d_:function(t,e,n,r,i,a){return r===void 0&&(r=.001),n0(),Ak(t,e,n,a,i,r)}}),SW=H({batchNormalization3d_:function(t,e,n,r,i,a){return r===void 0&&(r=.001),n0(),Ik(t,e,n,a,i,r)}}),CW=H({batchNormalization4d_:function(t,e,n,r,i,a){return r===void 0&&(r=.001),n0(),Rk(t,e,n,a,i,r)}}),TW=H({batchNormalization_:function(t,e,n,r,i,a){return r===void 0&&(r=.001),n0(),Af(t,e,n,a,i,r)}}),Fk=H({batchNorm_:Af}),kW=H({batchNorm2d_:Ak}),AW=H({batchNorm3d_:Ik}),IW=H({batchNorm4d_:Rk}),r0=H({logicalAnd_:function(t,e){var n=F(t,"a","logicalAnd","bool"),r=F(e,"b","logicalAnd","bool");return at(n.shape,r.shape),X.runKernelFunc(function(i){return i.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),RW=H({logicalNot_:function(t){var e=F(t,"x","logicalNot","bool");return X.runKernelFunc(function(n){return n.logicalNot(e)},{$x:e})}}),Dk=H({logicalOr_:function(t,e){var n=F(t,"a","logicalOr","bool"),r=F(e,"b","logicalOr","bool");return at(n.shape,r.shape),X.runKernelFunc(function(i){return i.logicalOr(n,r)},{$a:n,$b:r})}}),FW=H({logicalXor_:function(t,e){var n=F(t,"a","logicalXor","bool"),r=F(e,"b","logicalXor","bool");return at(n.shape,r.shape),Dk(t,e).logicalAnd(r0(t,e).logicalNot())}}),zs=H({where_:function(t,e,n){var r=F(e,"a","where"),i=F(n,"b","where"),a=F(t,"condition","where","bool");return pt(r.shape,i.shape,"Error in where: "),a.rank===1?M(a.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):pt(a.shape,i.shape,"Error in where: "),X.runKernelFunc(function(o,s){var u=o.select(a,r,i);return s([a]),u},{$condition:a,$a:r,$b:i},function(o,s){var u=s[0];return{$condition:function(){return st(u).toFloat()},$a:function(){return o.mul(u.cast(o.dtype))},$b:function(){return o.mul(u.logicalNot().cast(o.dtype))}}})}}),Ok=function(t){return Pe(this,void 0,void 0,function(){var e,n,r;return Ne(this,function(i){switch(i.label){case 0:return[4,(e=F(t,"condition","whereAsync","bool")).data()];case 1:return n=i.sent(),r=ex(e.shape,n),t!==e&&e.dispose(),[2,r]}})})},rt=H({add_:function(t,e){var n,r=F(t,"a","add"),i=F(e,"b","add");n=zt(r,i),r=n[0],i=n[1];var a=at(r.shape,i.shape);return X.runKernelFunc(function(o){return o.add(r,i)},{a:r,b:i},function(o){return{a:function(){var s=o,u=xn(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=o,u=xn(i.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(i.shape)}}},"Add")}}),DW=H({addN_:function(t){M(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),M(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var e=t.map(function(i,a){return F(i,"tensors"+a,"addN")}),n=e[0];e.forEach(function(i){if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(i){if(!Dn(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return X.runKernelFunc(function(i){return i.addN(e)},r,function(i){var a={};return e.forEach(function(o,s){a[s]=function(){return i.clone()}}),a},"AddN")}}),OW=H({addStrict_:function(t,e){var n=F(t,"a","addStrict"),r=F(e,"b","addStrict");return pt(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),PW=H({atan2_:function(t,e){var n,r=F(t,"a","atan2"),i=F(e,"b","atan2");n=zt(r,i),r=n[0],i=n[1];var a=at(r.shape,i.shape);return X.runKernelFunc(function(o,s){var u=o.atan2(r,i);return s([r,i]),u},{$a:r,$b:i},function(o,s){var u=s[0],l=s[1];return{$a:function(){var c=rt(u.square(),l.square()),f=o.mul(l.div(c)),h=xn(u.shape,a);return h.length>0&&(f=f.sum(h)),f.reshape(u.shape)},$b:function(){var c=rt(u.square(),l.square()),f=vp(o.mul(u.div(c))),h=xn(l.shape,a);return h.length>0&&(f=f.sum(h)),f.reshape(l.shape)}}})}}),Ri=H({div_:function(t,e){var n,r=F(t,"a","div"),i=F(e,"b","div");if(n=zt(r,i),r=n[0],i=n[1],r.dtype==="int32"&&i.dtype==="int32")return Pk(r,i);var a=at(r.shape,i.shape);return X.runKernelFunc(function(o,s){var u=o.realDivide(r,i);return s([r,i]),u},{a:r,b:i},function(o,s){var u=s[0],l=s[1];return{a:function(){var c=o.div(l.toFloat()),f=xn(u.shape,a);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=o.mul(u.toFloat()),f=xn(l.shape,a);f.length>0&&(c=c.sum(f).reshape(l.shape));var h=l.square();return c.div(h.toFloat()).neg()}}},"Div")}}),NW=H({divNoNan_:function(t,e){var n,r=F(t,"a","div"),i=F(e,"b","div");r=(n=zt(r,i))[0],i=n[1];var a=Ri(r,i),o=st(a),s=i.equal(o);return zs(s,o,a)}}),MW=H({divStrict_:function(t,e){var n=F(t,"a","div"),r=F(e,"b","div");return pt(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),Pk=H({floorDiv_:function(t,e){var n,r=F(t,"a","floorDiv"),i=F(e,"b","floorDiv");n=zt(r,i),r=n[0],i=n[1];var a=at(r.shape,i.shape);return X.runKernelFunc(function(o,s){var u=o.floorDiv(r,i);return s([r,i]),u},{a:r,b:i},function(o,s){var u=s[0],l=s[1];return{a:function(){var c=o.div(l.toFloat()),f=xn(u.shape,a);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=o.mul(u.toFloat()),f=xn(l.shape,a);f.length>0&&(c=c.sum(f).reshape(l.shape));var h=l.square();return c.div(h.toFloat()).neg()}}},"FloorDiv")}}),ax=H({maximum_:function(t,e){var n,r=F(t,"a","maximum"),i=F(e,"b","maximum");return n=zt(r,i),r=n[0],i=n[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),at(r.shape,i.shape),X.runKernelFunc(function(a,o){var s=a.maximum(r,i);return o([r,i]),s},{a:r,b:i},function(a,o){var s=o[0],u=o[1];return{a:function(){return a.mul(s.greaterEqual(u).toFloat())},b:function(){return a.mul(s.less(u).toFloat())}}},"Maximum")}}),LW=H({maximumStrict_:function(t,e){var n=F(t,"a","maximumStrict"),r=F(e,"b","maximumStrict");return pt(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Nk=H({minimum_:function(t,e){var n,r=F(t,"a","minimum"),i=F(e,"b","minimum");return n=zt(r,i),r=n[0],i=n[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),at(r.shape,i.shape),X.runKernelFunc(function(a,o){var s=a.minimum(r,i);return o([r,i]),s},{a:r,b:i},function(a,o){var s=o[0],u=o[1];return{a:function(){return a.mul(s.lessEqual(u).toFloat())},b:function(){return a.mul(s.greater(u).toFloat())}}},"Minimum")}}),BW=H({minimumStrict_:function(t,e){var n=F(t,"a","minimumStrict"),r=F(e,"b","minimumStrict");return pt(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),WW=H({mod_:function(t,e){var n,r=F(t,"a","mod"),i=F(e,"b","mod");n=zt(r,i),r=n[0],i=n[1];var a=at(r.shape,i.shape);return X.runKernelFunc(function(o,s){var u=o.mod(r,i);return s([r,i]),u},{$a:r,$b:i},function(o,s){var u=s[0],l=s[1];return{$a:function(){var c=xn(u.shape,a);return c.length>0?o.sum(c).reshape(u.shape):o},$b:function(){var c=o.mul(u.div(l).floor().neg()),f=xn(l.shape,a);return f.length>0?c.sum(f).reshape(l.shape):c}}})}}),zW=H({modStrict_:function(t,e){var n=F(t,"a","modStrict"),r=F(e,"b","modStrict");return pt(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),nr=H({mul_:function(t,e){var n,r=F(t,"a","mul"),i=F(e,"b","mul");n=zt(r,i),r=n[0],i=n[1];var a=at(r.shape,i.shape);return X.runKernelFunc(function(o,s){var u=o.multiply(r,i);return s([r,i]),u},{a:r,b:i},function(o,s){var u=s[0],l=s[1];return{a:function(){var c=o.mul(l.toFloat()),f=xn(u.shape,a);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=o.mul(u.toFloat()),f=xn(l.shape,a);return f.length>0?c.sum(f).reshape(l.shape):c}}},"Mul")}}),UW=H({mulStrict_:function(t,e){var n=F(t,"a","mul"),r=F(e,"b","mul");return pt(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),mp=H({pow_:function(t,e){var n,r=F(t,"base","pow"),i=F(e,"exp","pow");n=zt(r,i),r=n[0],i=n[1];var a=at(r.shape,i.shape),o=[r,i];return X.runKernelFunc(function(s,u){var l=s.pow(r,i);return u([r,i,l]),l},{a:r,b:i},function(s,u){var l=u[0],c=u[1],f=u[2];return{a:function(){var h=c.toFloat(),d=s.mul(h.mul(l.pow(h.sub(Ie(1))))),v=xn(l.shape,a);return v.length>0&&(d=d.sum(v)),d.reshape(l.shape)},b:function(){var h=l.greater(0),d=l.log().where(h,st(l)),v=s.mul(f.mul(d)),p=xn(c.shape,a);return p.length>0&&(v=v.sum(p)),v.reshape(c.shape)}}},"Pow",{},o,[!0])}}),VW=H({powStrict_:function(t,e){return pt(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),HW=H({squaredDifferenceStrict_:function(t,e){var n=F(t,"a","squaredDifferenceStrict"),r=F(e,"b","squaredDifferenceStrict");return pt(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),yn=H({sub_:function(t,e){var n,r=F(t,"a","sub"),i=F(e,"b","sub");n=zt(r,i),r=n[0],i=n[1];var a=at(r.shape,i.shape);return X.runKernelFunc(function(o){return o.subtract(r,i)},{a:r,b:i},function(o){return{a:function(){var s=o,u=xn(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=o,u=xn(i.shape,a);return u.length>0&&(s=s.sum(u)),s.neg().reshape(i.shape)}}},"Sub")}}),$W=H({subStrict_:function(t,e){var n=F(t,"a","subStrict"),r=F(e,"b","subStrict");return pt(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Mk=H({equal_:function(t,e){var n,r=F(t,"a","equal"),i=F(e,"b","equal");return n=zt(r,i),r=n[0],i=n[1],at(r.shape,i.shape),X.runKernelFunc(function(a){return a.equal(r,i)},{$a:r,$b:i})}}),jW=H({equalStrict_:function(t,e){var n=F(t,"a","equalStrict"),r=F(e,"b","equalStrict");return pt(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),GW=H({greater_:function(t,e){var n,r=F(t,"a","greater"),i=F(e,"b","greater");return n=zt(r,i),r=n[0],i=n[1],at(r.shape,i.shape),X.runKernelFunc(function(a){return a.greater(r,i)},{a:r,b:i},null,"Greater")}}),Lk=H({greaterEqual_:function(t,e){var n,r=F(t,"a","greaterEqual"),i=F(e,"b","greaterEqual");return n=zt(r,i),r=n[0],i=n[1],at(r.shape,i.shape),X.runKernelFunc(function(a,o){var s=a.greaterEqual(r,i);return o([r,i]),s},{a:r,b:i},function(a,o){var s=o[0],u=o[1];return{a:function(){return st(s)},b:function(){return st(u)}}},"GreaterEqual")}}),XW=H({greaterEqualStrict_:function(t,e){var n=F(t,"a","greaterEqualStrict"),r=F(e,"b","greaterEqualStrict");return pt(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),KW=H({greaterStrict_:function(t,e){var n=F(t,"a","greaterStrict"),r=F(e,"b","greaterStrict");return pt(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),qW=H({less_:function(t,e){var n,r=F(t,"a","less"),i=F(e,"b","less");return n=zt(r,i),r=n[0],i=n[1],at(r.shape,i.shape),X.runKernelFunc(function(a){return a.less(r,i)},{a:r,b:i},null,"Less")}}),YW=H({lessEqual_:function(t,e){var n,r=F(t,"a","lessEqual"),i=F(e,"b","lessEqual");return n=zt(r,i),r=n[0],i=n[1],at(r.shape,i.shape),X.runKernelFunc(function(a,o){var s=a.lessEqual(r,i);return o([r,i]),s},{a:r,b:i},null,"LessEqual")}}),QW=H({lessEqualStrict_:function(t,e){var n=F(t,"a","lessEqualStrict"),r=F(e,"b","lessEqualStrict");return pt(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),JW=H({lessStrict_:function(t,e){var n=F(t,"a","lessStrict"),r=F(e,"b","lessStrict");return pt(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),ZW=H({notEqual_:function(t,e){var n,r=F(t,"a","notEqual"),i=F(e,"b","notEqual");return n=zt(r,i),r=n[0],i=n[1],at(r.shape,i.shape),X.runKernelFunc(function(a){return a.notEqual(r,i)},{a:r,b:i},null,"NotEqual")}}),ez=H({notEqualStrict_:function(t,e){var n=F(t,"a","notEqualStrict"),r=F(e,"b","notEqualStrict");return pt(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function $w(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function jw(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var ox=H({gather_:function(t,e,n){n===void 0&&(n=0);var r=F(t,"x","gather"),i=F(e,"indices","gather","int32");n=_n(n,r.shape)[0];var a=function(o,s,u){for(var l=o.shape[u],c=[],f=1,h=1,d=0;d<u;d++)c.push(o.shape[d]),f*=o.shape[d];for(d=0;d<s.rank;d++)c.push(s.shape[d]);for(d=u+1;d<o.rank;d++)c.push(o.shape[d]),h*=o.shape[d];return{batchSize:f,sliceSize:h,dimSize:l,outputShape:c}}(r,i,n);return X.runKernelFunc(function(o,s){var u=o.gather(r,i.flatten(),n);return s([i]),u},{x:r,indices:i},function(o,s){var u=s[0];return{x:function(){var l=r.shape,c=u.size,f=l.slice(0,n),h=f.length,d=l.slice(n,l.length).slice(1),v=d.length,p=$w(0,h),m=$w(h+1,h+1+v),g=jw([f,[c],d]),x=o.reshape(g),y=u.reshape([c]),w=jw([[h],p,m]),_=x.transpose(w),b=Bk(_,y,r.shape[n]),E=G1(w);return b=b.transpose(E)},indices:function(){return u}}},"Gather",{axis:n}).reshape(a.outputShape)}}),Bk=H({unsortedSegmentSum_:function(t,e,n){var r=F(t,"x","unsortedSegmentSum"),i=F(e,"segmentIds","unsortedSegmentSum","int32");return M(Jt(n),function(){return"numSegments must be of dtype int"}),X.runKernelFunc(function(a,o){var s=a.unsortedSegmentSum(r,i,n);return o([i]),s},{$x:r},function(a,o){var s=o[0];return{$x:function(){return function(u,l){for(var c=ax(l,st(l)),f=ox(u,c),h=Lk(l,Ie(0,"int32")),d=f.rank-h.rank,v=0;v<d;++v)h=hi(h,v+1);h=r0(h,bl(f.shape,"bool"));var p=st(f);return zs(h,f,p)}(a,s)}}})}}),tz=function(t,e,n){return Pe(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,h,d,v,p;return Ne(this,function(m){switch(m.label){case 0:for(r=F(t,"tensor","boolMask"),i=F(e,"mask","boolMask","bool"),a=n??0,o=i.rank,s=r.shape,M(o>0,function(){return"mask cannot be scalar"}),pt(s.slice(a,a+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=a;l<a+o;l++)u*=s[l];return c=s.slice(0,a).concat([u],s.slice(a+o)),f=r.reshape(c),h=i.reshape([-1]),[4,Ok(h)];case 1:return d=m.sent(),v=d.squeeze([1]),p=ox(f,v,a),t!==r&&r.dispose(),e!==i&&i.dispose(),v.dispose(),f.dispose(),h.dispose(),d.dispose(),[2,p]}})})};function Wk(t,e,n,r,i,a,o){a===void 0&&(a="NHWC"),M(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var s=t,u=e,l=!1;e.rank===3&&(l=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=[1,t[0],t[1],t[2]]),M(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),M(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),M(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var c=a==="NHWC"?s[3]:s[1],f=a==="NHWC"?u.shape[3]:u.shape[1];M(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."}),M(f===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."}),o!=null&&M(Jt(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var h=Q1(a),d=Js(s,n.shape,r,1,i,o,!1,h),v=X.runKernelFunc(function(p,m){var g=p.conv2dDerInput(u,n,d);return m([n,u]),g},{dy4D:u,filter:n},function(p,m){var g=m[0],x=m[1];return{dy4D:function(){return _i(p,g,r,i,a,1,o)},filter:function(){return sx(p,x,g.shape,r,i,a,o)}}});return l?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}function Cv(t){var e=function(a){return typeof a=="number"?[a,a,a]:a.length===2?[a[0],a[1],1]:a}(t),n=e[0],r=e[1],i=e[2];return n===1&&r===1&&i===1}function zk(t,e,n,r,i){M(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var a=t,o=e,s=!1;e.rank===4&&(s=!0,o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),a=[1,t[0],t[1],t[2],t[3]]);var u=a[4],l=o.shape[4];M(a.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."}),M(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),M(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),M(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),M(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."});var c=dp(a,n.shape,r,1,i),f=X.runKernelFunc(function(h){return h.conv3dDerInput(o,n,c)},{dy5D:o});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var nz=H({conv1d_:function(t,e,n,r,i,a,o){i===void 0&&(i="NWC"),a===void 0&&(a=1);var s=F(t,"x","conv1d"),u=F(e,"filter","conv1d"),l=s,c=!1;s.rank===2&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),M(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),M(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),o!=null&&M(Jt(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}),M(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),M(Nr(n,a),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"}),M(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),h=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),d=_i(h,f,[1,n],r,"NHWC",[1,a],o);return c?d.as2D(d.shape[2],d.shape[3]):d.as3D(d.shape[0],d.shape[2],d.shape[3])}}),_i=H({conv2d_:function(t,e,n,r,i,a,o){i===void 0&&(i="NHWC"),a===void 0&&(a=[1,1]);var s=F(t,"x","conv2d"),u=F(e,"filter","conv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),M(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),M(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),o!=null&&M(Jt(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var f=i==="NHWC"?l.shape[3]:l.shape[1];M(f===u.shape[2],function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."}),M(Nr(n,a),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"});var h=Q1(i),d=Js(l.shape,u.shape,n,a,r,o,!1,h),v=[u,l],p=X.runKernelFunc(function(m,g){var x=m.conv2d(l,u,d);return g([u,l]),x},{x:l,filter:u},function(m,g){var x=g,y=x[0],w=x[1];return M(cl(a),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}),{x:function(){return Uk(w.shape,m,y,n,r,i)},filter:function(){return sx(w,m,y.shape,n,r,i)}}},"Conv2D",d,v);return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),rz=H({conv3d_:function(t,e,n,r,i,a){i===void 0&&(i="NDHWC"),a===void 0&&(a=[1,1,1]);var o=F(t,"x","conv3d"),s=F(e,"filter","conv3d"),u=o,l=!1;o.rank===4&&(l=!0,u=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),M(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),M(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),M(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),M(function(h,d){return Cv(h)||Cv(d)}(n,a),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),M(i==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var c=dp(u.shape,s.shape,n,a,r),f=X.runKernelFunc(function(h,d){var v=h.conv3d(u,s,c);return d([u,s]),v},{x:u,$filter:s},function(h,d){M(Cv(a),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"});var v=d[0],p=d[1];return{x:function(){return zk(v.shape,h,p,n,r)},$filter:function(){return function(m,g,x,y,w){var _=m;m.rank===4&&(_=m.as5D(1,m.shape[0],m.shape[1],m.shape[2],m.shape[3]));var b=g;b.rank===4&&(b=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3])),M(_.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+_.shape+"."}),M(b.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+b.shape+"."}),M(x.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+x+"."}),M(_.shape[4]===x[3],function(){return"Error in conv3dDerFilter: depth of input "+_.shape[4]+") must match input depth in filter ("+x[3]+"."}),M(b.shape[4]===x[4],function(){return"Error in conv3dDerFilter: depth of dy ("+b.shape[4]+") must match output depth for filter ("+x[4]+")."});var E=dp(_.shape,x,y,1,w);return X.runKernelFunc(function(S){return S.conv3dDerFilter(_,b,E)},{x5D:_,dy5D:b})}(v,h,p.shape,n,r)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),sx=H({conv2dDerFilter_:function(t,e,n,r,i,a,o){a===void 0&&(a="NHWC");var s=t;t.rank===3&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=e;u.rank===3&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),M(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),M(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),M(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var l=a==="NHWC"?s.shape[3]:s.shape[1],c=a==="NHWC"?u.shape[3]:u.shape[1];M(l===n[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."}),M(c===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."}),o!=null&&M(Jt(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var f=Q1(a),h=Js(s.shape,n,r,1,i,o,!1,f);return X.runKernelFunc(function(d){return d.conv2dDerFilter(s,u,h)},{x4D:s,dy4D:u})}}),Uk=H({conv2dDerInput_:Wk}),i0=H({depthwiseConv2d_:function(t,e,n,r,i,a,o){a===void 0&&(a=[1,1]);var s=F(t,"x","depthwiseConv2d"),u=F(e,"filter","depthwiseConv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),M(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),M(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),M(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),a==null&&(a=[1,1]),M(Nr(n,a),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),o!=null&&M(Jt(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var f=Js(l.shape,u.shape,n,a,r,o,!0),h=[l,u],d=X.runKernelFunc(function(v,p){var m=v.depthwiseConv2D(l,u,f);return p([l,u]),m},{x:l,filter:u},function(v,p){M(cl(a),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"});var m=p[0],g=p[1];return{x:function(){return Vk(m.shape,v,g,f)},filter:function(){return Hk(m,v,g.shape,f)}}},"DepthwiseConv2dNative",f,h);return c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),Vk=H({depthwiseConv2dDerInput_:function(t,e,n,r){var i=e,a=!1;e.rank===3&&(a=!0,i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=X.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(i,n,r)},{dy4D:i});return a?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),Hk=H({depthwiseConv2dDerFilter_:function(t,e,n,r){var i=t;t.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=e;return a.rank===3&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),X.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(i,a,r)},{x4D:i,dy4D:a})}}),ux=H({separableConv2d_:function(t,e,n,r,i,a,o){a===void 0&&(a=[1,1]),o===void 0&&(o="NHWC");var s=F(t,"x","separableConv2d"),u=F(e,"depthwiseFilter","separableConv2d"),l=F(n,"pointwiseFilter","separableConv2d"),c=s,f=!1;if(s.rank===3&&(f=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");M(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),M(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),M(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),M(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),M(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var h=u.shape[2],d=u.shape[3];M(l.shape[2]===h*d,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*d+", but got "+l.shape[2]+"."});var v=i0(c,u,r,i,o,a),p=_i(v,l,1,"valid",o);return f?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),iz=H({conv2dTranspose_:function(t,e,n,r,i,a){return Wk(n,F(t,"x","conv2dTranspose"),F(e,"filter","conv2dTranspose"),r,i,"NHWC",a)}}),az=H({conv3dTranspose_:function(t,e,n,r,i){return zk(n,F(t,"x","conv3dTranspose"),F(e,"filter","conv3dTranspose"),r,i)}}),a0=H({matMul_:function(t,e,n,r){var i;n===void 0&&(n=!1),r===void 0&&(r=!1);var a=F(t,"a","matMul"),o=F(e,"b","matMul");i=zt(a,o),a=i[0],o=i[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?o.shape[o.rank-1]:o.shape[o.rank-2],l=n?a.shape[a.rank-1]:a.shape[a.rank-2],c=r?o.shape[o.rank-2]:o.shape[o.rank-1],f=a.shape.slice(0,-2),h=o.shape.slice(0,-2),d=Be(f),v=Be(h);M(a.rank>=2&&o.rank>=2&&a.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+o.rank+"."}),M(Dn(f,h),function(){return"Error in matMul: outer dimensions ("+f+") and ("+h+") of Tensors with shapes "+a.shape+" and "+o.shape+" must match."}),M(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+o.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var p=a.shape.slice(0,-2).concat([l,c]),m=n?a.as3D(d,s,l):a.as3D(d,l,s),g=r?o.as3D(v,c,u):o.as3D(v,u,c),x={transposeA:n,transposeB:r};return X.runKernelFunc(function(y,w){var _=y.batchMatMul(m,g,n,r);return w([m,g]),_},{a:m,b:g},function(y,w){var _=w,b=_[0],E=_[1];return n||r?!n&&r?{a:function(){return y.matMul(E,!1,!1)},b:function(){return y.matMul(b,!0,!1)}}:n&&!r?{a:function(){return E.matMul(y,!1,!0)},b:function(){return b.matMul(y,!1,!1)}}:{a:function(){return E.matMul(y,!0,!0)},b:function(){return y.matMul(b,!0,!0)}}:{a:function(){return y.matMul(E,!1,!0)},b:function(){return b.matMul(y,!0,!1)}}},"BatchMatMul",x).reshape(p)}}),oz=H({dot_:function(t,e){var n=F(t,"t1","dot"),r=F(e,"t2","dot");M(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var i=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];return M(i===a,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+a+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),sz=H({outerProduct_:function(t,e){var n=F(t,"v1","outerProduct"),r=F(e,"v2","outerProduct");return M(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),If=H({reverse_:function(t,e){var n=F(t,"x","reverse");if(n.rank===0)return n.clone();var r=_n(e,n.shape);return X.runKernelFunc(function(i){return i.reverse(n,r)},{$x:n},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(n)}}),uz=H({reverse1d_:function(t){var e=F(t,"x","reverse");return M(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),If(e,0)}}),lz=H({reverse2d_:function(t,e){var n=F(t,"x","reverse");return M(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),If(n,e)}}),cz=H({reverse3d_:function(t,e){var n=F(t,"x","reverse");return M(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),If(n,e)}}),fz=H({reverse4d_:function(t,e){var n=F(t,"x","reverse");return M(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),If(n,e)}});function $k(t,e,n,r,i,a){var o=F(t,"x","maxPool"),s=o,u=!1;o.rank===3&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),M(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),M(Nr(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),a!=null&&M(Jt(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var l=ef(s.shape,e,n,r,i,a);if(l.filterWidth===1&&l.filterHeight===1&&Dn(l.inShape,l.outShape))return o.clone();var c=[s],f=X.runKernelFunc(function(h,d){var v=h.maxPool(s,l);return d([s,v]),v},{x:s},function(h,d){var v=d[0],p=d[1];return{x:function(){return function(m,g,x,y,w,_,b,E){var S=F(m,"dy","maxPoolBackprop"),C=F(g,"input","maxPoolBackprop"),T=F(x,"output","maxPoolBackprop");M(C.rank===S.rank,function(){return"Rank of input ("+C.rank+") does not match rank of dy ("+S.rank+")"}),M(Nr(w,_),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+_+"'"}),M(S.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+S.rank+"."}),M(C.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+C.rank+"."});var A=ef(C.shape,y,w,_,b,E);return X.runKernelFunc(function(I){return I.maxPoolBackprop(S,C,T,A)},{$dy:S,$input:C})}(h,v,p,e,n,r,i)}}},"MaxPool",l,c);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function jk(t,e,n,r,i,a){var o=F(t,"x","avgPool","float32");M(Nr(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=o,u=!1;o.rank===3&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),M(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),a!=null&&M(Jt(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var l=ef(s.shape,e,n,r,i,a);if(l.filterWidth===1&&l.filterHeight===1&&Dn(l.inShape,l.outShape))return o.clone();var c=X.runKernelFunc(function(f){return f.avgPool(s,l)},{x:s},function(f){return{x:function(){return function(h,d,v,p,m,g){var x=F(h,"dy","avgPoolBackprop"),y=F(d,"input","avgPoolBackprop");M(y.rank===x.rank,function(){return"Rank of input ("+y.rank+") does not match rank of dy ("+x.rank+")"}),M(Nr(p,m),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+p+" and dilations '"+m+"'"});var w=y,_=x,b=!1;y.rank===3&&(b=!0,w=y.as4D(1,y.shape[0],y.shape[1],y.shape[2]),_=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),M(_.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+_.rank+"."}),M(w.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+w.rank+"."});var E=ef(w.shape,v,p,m,g),S=X.runKernelFunc(function(C){return C.avgPoolBackprop(_,w,E)},{dy4D:_,input4D:w});return b?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}(f,s,e,n,r,i)}}},"AvgPool",l);return c=c.cast(o.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Cn=H({maxPool_:function(t,e,n,r,i){return $k(t,e,n,1,r,i)}}),Rf=H({avgPool_:function(t,e,n,r,i){return jk(t,e,n,1,r,i)}}),hz=H({pool_:function(t,e,n,r,i,a){i==null&&(i=[1,1]),a==null&&(a=1),r===0&&(r="valid");var o=F(t,"x","maxPool"),s=o,u=!1;o.rank===3&&(u=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),M(Nr(a,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"});var l,c=ef(s.shape,e,a,i,r),f=[c.dilationHeight,c.dilationWidth];l=r==="same"?function(w,_){var b=w.map(function(C,T){return C+(C-1)*(_[T]-1)}).map(function(C){return C-1}),E=b.map(function(C){return Math.floor(C/2)}),S=b.map(function(C,T){return C-E[T]});return b.map(function(C,T){return[E[T],S[T]]})}([c.filterHeight,c.filterWidth],f):[[0,0],[0,0]];var h=f[0]===1&&f[1]===1,d=function(w,_,b){var E=b.map(function(J){return J[0]}),S=b.map(function(J){return J[1]}),C=w.concat(E,S),T=_.map(function(J,K){return(J-C[K]%J)%J}),A=S.map(function(J,K){return J+T[K]}),I=_.map(function(J,K){return[E[K],A[K]]}),V=_.map(function(J,K){return[0,T[K]]});return[I,V]}([c.inHeight,c.inWidth],f,l),v=d[0],p=d[1],m=h?r:"valid",g=h?s:QT(s,f,v),x=(n==="avg"?function(){return jk(g,e,a,1,m)}:function(){return $k(g,e,a,1,m)})(),y=h?x:KT(x,f,p);return u?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),dz=H({maxPool3d_:function(t,e,n,r,i,a,o){a===void 0&&(a="NDHWC");var s=F(t,"x","maxPool3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),M(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),M(a==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),M(Nr(n,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),i!=null&&M(Jt(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=hp(u.shape,e,n,o,r,i,a),f=X.runKernelFunc(function(h,d){var v=h.maxPool3d(u,c);return d([u,v]),v},{x:u},function(h,d){var v=d[0],p=d[1];return{x:function(){return function(m,g,x,y,w,_,b,E){var S=F(m,"dy","maxPool3dBackprop"),C=F(g,"input","maxPool3dBackprop"),T=F(x,"output","maxPool3dBackprop"),A=S,I=C,V=T,J=!1;C.rank===4&&(J=!0,A=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3]),I=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3]),V=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3])),M(A.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+A.rank+"."}),M(I.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+I.rank+"."}),M(V.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+V.rank+"."}),_==null&&(_=[1,1,1]),M(Nr(w,_),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+_+"'"}),E!=null&&M(Jt(b),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+b+"."});var K=hp(I.shape,y,w,_,b,E),ae=X.runKernelFunc(function(ie){return ie.maxPool3dBackprop(A,I,V,K)},{dy5D:A,input5D:I});return J?ae.as4D(ae.shape[1],ae.shape[2],ae.shape[3],ae.shape[4]):ae}(h,v,p,e,n,o,r,i)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),pz=H({avgPool3d_:function(t,e,n,r,i,a,o){a===void 0&&(a="NDHWC");var s=F(t,"x","avgPool3d","float32"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),o==null&&(o=[1,1,1]),M(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),M(a==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),M(Nr(n,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),i!=null&&M(Jt(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=hp(u.shape,e,n,o,r,i,a),f=X.runKernelFunc(function(h){return h.avgPool3d(u,c)},{x:u},function(h){return{x:function(){return function(d,v,p,m,g,x,y){var w=F(d,"dy","avgPool3dBackprop"),_=F(v,"input","avgPool3dBackprop"),b=w,E=_,S=!1;_.rank===4&&(S=!0,b=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3]),E=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3])),M(b.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+b.rank+"."}),M(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),g==null&&(g=[1,1,1]),M(Nr(m,g),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+g+"'"}),y!=null&&M(Jt(x),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+y+" but got pad "+x+"."});var C=hp(E.shape,p,m,g,x,y),T=X.runKernelFunc(function(A){return A.avgPool3dBackprop(b,E,C)},{dy5D:b,input5D:E});return S?T.as4D(T.shape[1],T.shape[2],T.shape[3],T.shape[4]):T}(h,u,e,n,o,r,i)}}});return f=f.cast(u.dtype),l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),va=H({slice_:function(t,e,n){var r,i,a=F(t,"x","slice");if(a.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(a.rank-1).fill(0)):e.length<a.rank?e.concat(new Array(a.rank-e.length).fill(0)):e.slice()).forEach(function(u){M(u!==-1,function(){return"slice() does not support negative begin indexing."})}),i=(i=n==null?new Array(a.rank).fill(-1):typeof n=="number"?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map(function(u,l){return u>=0?u:(M(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."}),a.shape[l]-r[l])}),V6(a,r,i);var o=a.shape,s={begin:r,size:i};return X.runKernelFunc(function(u){return u.slice(a,r,i)},{x:a},function(u){for(var l=[],c=0;c<u.rank;c++)l.push([r[c],o[c]-r[c]-i[c]]);return{x:function(){return u.pad(l)}}},"Slice",s)}}),vz=H({slice1d_:function(t,e,n){var r=F(t,"x","slice1d");return M(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),va(r,[e],[n])}}),mz=H({slice2d_:function(t,e,n){var r=F(t,"x","slice2d");return M(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),va(r,e,n)}}),Gk=H({slice3d_:function(t,e,n){var r=F(t,"x","slice3d");return M(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),va(r,e,n)}}),gz=H({slice4d_:function(t,e,n){var r=F(t,"x","slice4d");return M(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),va(r,e,n)}});function Xk(t,e,n,r,i){return e.rank<n.rank&&(e=e.reshape(Pr(e.shape,r))),t.rank<n.rank&&(t=t.reshape(Pr(t.shape,r))),{x:function(){var a=t.mul(n.equal(e).cast(t.dtype));return i==null?a:a.transpose(i)}}}var xz=H({all_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=F(t,"x","all","bool"),i=_n(e,r.shape),a=i,o=ga(a,r.rank);o!=null&&(r=r.transpose(o),a=xa(a.length,r.rank));var s=X.runKernelFunc(function(l){return l.all(r,a)},{$x:r});if(n){var u=Pr(s.shape,i);return s.reshape(u)}return s}}),yz=H({any_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=F(t,"x","any","bool"),i=_n(e,r.shape),a=i,o=ga(a,r.rank);o!=null&&(r=r.transpose(o),a=xa(a.length,r.rank));var s=X.runKernelFunc(function(l){return l.any(r,a)},{$x:r});if(n){var u=Pr(s.shape,i);return s.reshape(u)}return s}}),wz=H({argMax_:function(t,e){e===void 0&&(e=0);var n=F(t,"x","argMax");e==null&&(e=0);var r=_n(e,n.shape),i=ga(r,n.rank);i!=null&&(n=n.transpose(i),r=xa(r.length,n.rank));var a={axis:r[0]},o=[n];return X.runKernelFunc(function(s,u){var l=s.argMax(n,r[0]);return u([n]),l},{x:n},function(s,u){var l=u[0];return{x:function(){return st(l)}}},"ArgMax",a,o)}}),_z=H({argMin_:function(t,e){e===void 0&&(e=0);var n=F(t,"x","argMin");e==null&&(e=0);var r=_n(e,n.shape),i=ga(r,n.rank);return i!=null&&(n=n.transpose(i),r=xa(r.length,n.rank)),X.runKernelFunc(function(a,o){var s=a.argMin(n,r[0]);return o([n]),s},{$x:n},function(a,o){var s=o[0];return{$x:function(){return st(s)}}})}}),bz=H({logSumExp_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=F(t,"x","logSumExp"),i=_n(e,r.shape),a=r.max(i,!0),o=r.sub(a).exp().sum(i).log(),s=a.reshape(o.shape).add(o);if(n){var u=Pr(s.shape,i);return s.reshape(u)}return s}}),o0=H({max_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=F(t,"x","max"),i=r,a=_n(e,r.shape),o=a,s=ga(o,r.rank);s!=null&&(r=r.transpose(s),o=xa(o.length,r.rank));var u=[r],l=X.runKernelFunc(function(f,h){var d=f.max(r,o);return h([i,d]),d},{x:r},function(f,h){return Xk(f,h[1],h[0],a,s)},"Max",{axes:o},u,[!0]);if(n){var c=Pr(l.shape,a);l=l.reshape(c)}return l}}),Ez=H({mean_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=F(t,"x","mean"),i=_n(e,r.shape),a=Be(Qn(r.shape,i)[1]);return t0(function(o){var s=Ie(a);return{value:(s.dtype===o.dtype?o:o.cast(s.dtype)).div(s).sum(e,n),gradFunc:function(u){var l=o.shape.slice();return i.forEach(function(c){l[c]=1}),u.reshape(l).mul(bl(o.shape,"float32")).div(a)}}})(r)}}),Sz=H({min_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=F(t,"x","min"),i=r,a=_n(e,r.shape),o=a,s=ga(o,r.rank);s!=null&&(r=r.transpose(s),o=xa(o.length,r.rank));var u=[r],l=X.runKernelFunc(function(f,h){var d=f.min(r,o);return h([i,d]),d},{x:r},function(f,h){return Xk(f,h[1],h[0],a,s)},"Min",{axes:o},u,[!0]);if(n){var c=Pr(l.shape,a);l=l.reshape(c)}return l}}),Cz=H({moments_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=_n(e,(t=F(t,"x","moments")).shape),i=t.mean(r,n),a=i.shape;n||(a=Pr(i.shape,r));var o=t.toFloat().sub(i.reshape(a)).square();return{mean:i,variance:o.mean(r,n)}}}),Kk=H({sum_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=F(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var i=_n(e,r.shape);return t0(function(a){var o=ga(i,a.rank),s=i,u=a;o!=null&&(u=a.transpose(o),s=xa(s.length,a.rank));var l=function(d){var v=a.shape.slice();return i.forEach(function(p){v[p]=1}),d.reshape(v).mul(bl(a.shape,"float32"))},c={axes:s},f=X.runKernelFunc(function(d){return d.sum(u,s)},{x:u},function(d){return{x:function(){return l(d)}}},"Sum",c);if(n){var h=Pr(f.shape,i);f=f.reshape(h)}return{value:f,gradFunc:l}})(r)}}),Tz=H({prod_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=F(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var i=_n(e,r.shape),a=ga(i,r.rank),o=i,s=r;a!=null&&(s=r.transpose(a),o=xa(o.length,r.rank));var u=X.runKernelFunc(function(c){return c.prod(s,o)},{permutedX:s});if(n){var l=Pr(u.shape,i);u=u.reshape(l)}return u}}),qk=H({elu_:function(t){var e=F(t,"x","elu");return X.runKernelFunc(function(n,r){var i=n.elu(e);return r([i]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return X.runKernelFunc(function(a){return a.eluDer(n,i)},{dy:n,y:i})}}})}}),kz=H({leakyRelu_:function(t,e){e===void 0&&(e=.2);var n=F(t,"x","leakyRelu");return ax(Ie(e).mul(n),n)}}),Yk=H({prelu_:function(t,e){var n=F(t,"x","prelu"),r=F(e,"alpha","prelu");return X.runKernelFunc(function(i,a){var o=i.prelu(n,r);return a([n,r]),o},{x:n,alpha:r},function(i,a){var o=a[0],s=a[1],u=o.greater(0);return{x:function(){return zs(u,i,i.mul(s))},alpha:function(){var l=zs(u,st(i),i.mul(o)),c=xn(s.shape,i.shape);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Prelu")}}),Lt=H({relu_:function(t){var e=F(t,"x","relu");return e.dtype==="bool"?e.toInt():X.runKernelFunc(function(n,r){var i=n.relu(e);return r([e]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.mulStrict(i.step().toFloat())}}},"Relu")}}),Qk=H({relu6_:function(t){var e=F(t,"x","relu6");return e.dtype==="bool"?e.toInt():X.runKernelFunc(function(n,r){var i=n.relu6(e);return r([e]),i},{x:e},function(n,r){var i=r[0],a=i.lessEqual(6).mul(i.step());return{x:function(){return n.mulStrict(a.toFloat())}}},"Relu6")}}),Az=H({selu_:function(t){var e=F(t,"x","selu");return X.runKernelFunc(function(n,r){var i=n.selu(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){var a=i.greater(Ie(0)),o=Ie(nx),s=Ie(rx),u=n.mul(s),l=n.mul(o).mul(i.toFloat().exp());return zs(a,u,l)}}})}}),$o=H({transpose_:function(t,e){var n=F(t,"x","transpose");if(e==null&&(e=n.shape.map(function(i,a){return a}).reverse()),M(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."}),e.forEach(function(i){M(i>=0&&i<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e})}),n.rank<=1)return n.clone();var r={perm:e};return X.runKernelFunc(function(i){return i.transpose(n,e)},{x:n},function(i){var a=G1(e);return{x:function(){return i.transpose(a)}}},"Transpose",r)}}),Iz=H({localResponseNormalization_:function(t,e,n,r,i){e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),i===void 0&&(i=.5);var a=F(t,"x","localResponseNormalization");M(a.rank===4||a.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+a.rank+"."}),M(Jt(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var o=a,s=!1;a.rank===3&&(s=!0,o=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=X.runKernelFunc(function(l,c){var f=l.localResponseNormalization4D(o,e,n,r,i);return c([o,f]),f},{x4D:o},function(l,c){var f=c[0],h=c[1];return{x4D:function(){return X.runKernelFunc(function(d){return d.LRNGrad(l,f,h,e,n,r,i)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Jk=H({norm_:function(t,e,n,r){e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var i=function s(u,l,c){if(c===void 0&&(c=null),u.rank===0)return u.abs();if(u.rank!==1&&c===null)return s(u.reshape([-1]),l,c);if(u.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(l===1)return u.abs().sum(c);if(l===1/0)return u.abs().max(c);if(l===-1/0)return u.abs().min(c);if(l==="euclidean"||l===2)return u.abs().pow(Ie(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(c)&&c.length===2){if(l===1)return u.abs().sum(c[0]).max(c[1]-1);if(l===1/0)return u.abs().sum(c[1]).max(c[0]);if(l===-1/0)return u.abs().sum(c[1]).min(c[0]);if(l==="fro"||l==="euclidean")return u.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+c)}(t=F(t,"x","norm"),e,n),a=i.shape;if(r){var o=_n(n,t.shape);a=Pr(i.shape,o)}return i.reshape(a)}}),Rz=H({basicLSTMCell_:function(t,e,n,r,i,a){var o=F(t,"forgetBias","basicLSTMCell"),s=F(e,"lstmKernel","basicLSTMCell"),u=F(n,"lstmBias","basicLSTMCell"),l=F(r,"data","basicLSTMCell"),c=F(i,"c","basicLSTMCell"),f=F(a,"h","basicLSTMCell"),h=l.concat(f,1).matMul(s).add(u),d=h.shape[0],v=h.shape[1]/4,p=[d,v],m=h.slice([0,0],p),g=h.slice([0,v],p),x=h.slice([0,2*v],p),y=h.slice([0,3*v],p),w=m.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(o.add(x).sigmoid())),_=w.tanh().mulStrict(y.sigmoid());return[w,_]}}),Fz=H({multiRNNCell_:function(t,e,n,r){for(var i=F(e,"data","multiRNNCell"),a=op(n,"c","multiRNNCell"),o=op(r,"h","multiRNNCell"),s=i,u=[],l=0;l<t.length;l++){var c=t[l](s,a[l],o[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var f=[],h=[];for(l=0;l<u.length;l+=2)f.push(u[l]),h.push(u[l+1]);return[f,h]}}),Dz=H({movingAverage_:function(t,e,n,r,i){i===void 0&&(i=!0);var a=F(t,"v","movingAverage"),o=F(e,"x","movingAverage"),s=F(n,"decay","movingAverage");IB(a,o),M(Dn(a.shape,o.shape),function(){return"Shape mismatch in v and x"});var u=Ie(1),l=u.sub(s),c=o.sub(a).mul(l);if(i){M(r!=null,function(){return"When using zeroDebias: true, step is required."});var f=F(r,"step","movingAverage");c=c.div(u.sub(mp(s,f)))}return a.add(c)}}),Oz=H({stridedSlice_:function(t,e,n,r,i,a,o,s,u){if(i===void 0&&(i=0),a===void 0&&(a=0),o===void 0&&(o=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(e.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var l=F(t,"x","stridedSlice"),c=Sw(s),f=l.shape.slice();c.forEach(function(m){e[m]=0,n[m]=1,f.splice(m,0,1)}),l=l.reshape(f);for(var h=0;h<l.rank;h++)e[h]=H6(i,e,r,l.shape,h),n[h]=$6(a,n,r,l.shape,h),r[h]=r[h]||1;var d=Sw(u);d.forEach(function(m){n[m]=e[m]+1,r[m]=1});var v=Y1(e,n,r),p=v.filter(function(m,g){return d.indexOf(g)===-1});return r.every(function(m){return m===1})?va(l,e,v).reshape(p):X.runKernelFunc(function(m){return m.stridedSlice(l,e,n,r)},{$x:l}).reshape(p)}}),Pz=H({topk_:function(t,e,n){e===void 0&&(e=1),n===void 0&&(n=!0);var r=F(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(e>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+e);var a=X.runKernelFunc(function(o){return o.topk(r,e,n)},{$x:r});return{values:a[0],indices:a[1]}}}),Nz=H({scatterND_:function(t,e,n){var r=F(t,"indices","scatterND","int32"),i=F(e,"updates","scatterND");return U6(i,r,n),X.runKernelFunc(function(a){return a.scatterND(r,i,n)},{indices:r,updates:i},null,"ScatterNd",{shape:n})}}),lx=H({fft_:function(t){M(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return X.runKernelFunc(function(i){return i.fft(r)},{input:t}).reshape(t.shape)}}),gp=H({ifft_:function(t){M(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return X.runKernelFunc(function(i){return i.ifft(r)},{input:t}).reshape(t.shape)}}),cx=H({rfft_:function(t,e){M(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var n,r=t.shape[t.shape.length-1],i=t.size/r;if(e!=null&&e<r){var a=t.shape.map(function(g){return 0}),o=t.shape.map(function(g){return g});o[t.shape.length-1]=e,n=t.slice(a,o),r=e}else if(e!=null&&e>r){var s=t.shape.map(function(g){return g});s[t.shape.length-1]=e-r,n=t.concat(At(s),t.shape.length-1),r=e}else n=t;var u=n.zerosLike(),l=Wn(n,u).as2D(i,r),c=lx(l),f=Math.floor(r/2)+1,h=di(c),d=ia(c),v=h.split([f,r-f],h.shape.length-1),p=d.split([f,r-f],d.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=f,Wn(v[0],p[0]).reshape(m)}}),Zk=H({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),i=gp(r);return di(i)}var a=[n,2*(e-1)],o=di(t).as2D(n,e),s=ia(t).as2D(n,e),u=o.slice([0,1],[n,e-2]).reverse(1),l=s.slice([0,1],[n,e-2]).reverse(1).mul(Ie(-1)),c=o.concat(u,1),f=s.concat(l,1);return r=Wn(c,f).as2D(a[0],a[1]),i=gp(r),di(i)}}),Mz=Object.freeze({fft:lx,ifft:gp,rfft:cx,irfft:Zk}),Lz=H({sparseToDense_:function(t,e,n,r){r===void 0&&(r=0);var i=F(t,"sparseIndices","sparseToDense","int32"),a=F(e,"sparseValues","sparseToDense"),o=F(r,"defaultValue","sparseToDense",a.dtype);return function(s,u,l,c){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var f=s.rank>0?s.shape[0]:1,h=s.rank>1?s.shape[1]:1;if(l.length!==h)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+h+".");var d=u.size;if(u.rank!==0&&(u.rank!==1||d!==f))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+f+"]");if(u.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,a,n,o),X.runKernelFunc(function(s){return s.sparseToDense(i,a,n,o)},{$sparseIndices:i,$sparseValues:a,$defaultValue:o})}}),Bz=H({gatherND_:function(t,e){var n=F(e,"indices","gatherND","int32"),r=F(t,"x","gatherND");return X.runKernelFunc(function(i){return i.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),Wz=H({diag_:function(t){var e=F(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return X.runKernelFunc(function(r){return r.diag(e)},{$x:e}).reshape(n)}}),zz=H({dropout_:function(t,e,n,r){var i=F(t,"x","dropout");if(M(i.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),M(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return t instanceof Mt?i.clone():i;var a=function(u,l){if(l==null)return u.shape.slice();if(Dn(u.shape,l))return l;if(u.shape.length===l.length){for(var c=[],f=0;f<u.shape.length;f++)l[f]==null&&u.shape[f]!=null?c.push(u.shape[f]):c.push(l[f]);return c}return l}(i,n),o=1-e,s=YT(a,0,1,"float32",r).add(o).floor().div(o);return i.mul(s)}});function e4(t,e,n){for(var r=1-t%2,i=new Float32Array(t),a=0;a<t;++a){var o=2*Math.PI*a/(t+r-1);i[a]=e-n*Math.cos(o)}return rn(i,"float32")}var fx=H({hannWindow_:function(t){return e4(t,.5,.5)}}),t4=H({hammingWindow_:function(t){return e4(t,.54,.46)}}),hx=H({frame_:function(t,e,n,r,i){r===void 0&&(r=!1),i===void 0&&(i=0);for(var a=0,o=[];a+e<=t.size;)o.push(va(t,a,e)),a+=n;if(r)for(;a<t.size;){var s=a+e-t.size,u=mn([va(t,a,e-s),fa([s],i)]);o.push(u),a+=n}return o.length===0?No([],[0,e]):mn(o).as2D(o.length,e)}}),n4=H({stft_:function(t,e,n,r,i){var a;i===void 0&&(i=fx),r==null&&(a=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var o=hx(t,e,n),s=nr(o,i(e)),u=[],l=0;l<o.shape[0];l++)u.push(cx(s.slice([l,0],[1,e]),r));return mn(u)}}),Uz=Object.freeze({hannWindow:fx,hammingWindow:t4,frame:hx,stft:n4}),tr,Vz=function(t,e,n){return n===void 0&&(n=1),Pe(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,h,d,v,p,m;return Ne(this,function(g){switch(g.label){case 0:return r=F(t,"predictions","inTopK"),i=F(e,"targets","inTopK"),M(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),M(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),pt(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],M(n>0&&n<=a,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+n}),[4,r.data()];case 1:return o=g.sent(),[4,i.data()];case 2:for(s=g.sent(),u=[o.length/a,a],c=u[1],f=Qc("bool",l=u[0]),h=0;h<l;h++){for(d=h*c,v=o.subarray(d,d+c),p=[],m=0;m<v.length;m++)p.push({value:v[m],index:m});for(p.sort(function(x,y){return y.value-x.value}),f[h]=0,m=0;m<n;m++)if(p[m].index===s[h]){f[h]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),[2,Un(f,i.shape,"bool")]}})})};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(tr||(tr={}));var Hz=H({absoluteDifference_:function(t,e,n,r){r===void 0&&(r=tr.SUM_BY_NONZERO_WEIGHTS);var i=F(t,"labels","absoluteDifference"),a=F(e,"predictions","absoluteDifference"),o=null;n!=null&&(o=F(n,"weights","absoluteDifference")),pt(i.shape,a.shape,"Error in absoluteDifference: ");var s=i.sub(a).abs();return Za(s,o,r)}}),Za=H({computeWeightedLoss_:function(t,e,n){n===void 0&&(n=tr.SUM_BY_NONZERO_WEIGHTS);var r=F(t,"losses","computeWeightedLoss"),i=null;e!=null&&(i=F(e,"weights","computeWeightedLoss"));var a=i==null?r:r.mul(i);if(n===tr.NONE)return a;if(n===tr.SUM)return a.sum();if(n===tr.MEAN){if(i==null)return a.mean();var o=r.size/i.size,s=a.sum().div(i.sum());return o>1?s.div(Ie(o)):s}if(n===tr.SUM_BY_NONZERO_WEIGHTS){if(i==null)return a.sum().div(Ie(r.size));var u=i.mul(bl(r.shape)).notEqual(Ie(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+n)}}),$z=H({cosineDistance_:function(t,e,n,r,i){i===void 0&&(i=tr.SUM_BY_NONZERO_WEIGHTS);var a=F(t,"labels","cosineDistance"),o=F(e,"predictions","cosineDistance"),s=null;r!=null&&(s=F(r,"weights","cosineDistance")),pt(a.shape,o.shape,"Error in cosineDistance: ");var u=Ie(1).sub(a.mul(o).sum(n,!0));return Za(u,s,i)}}),jz=H({hingeLoss_:function(t,e,n,r){r===void 0&&(r=tr.SUM_BY_NONZERO_WEIGHTS);var i=F(t,"labels","hingeLoss"),a=F(e,"predictions","hingeLoss"),o=null;n!=null&&(o=F(n,"weights","hingeLoss")),pt(i.shape,a.shape,"Error in hingeLoss: ");var s=Ie(1);i=Ie(2).mul(i).sub(s);var u=s.sub(i.mul(a)).relu();return Za(u,o,r)}}),Gz=H({huberLoss_:function(t,e,n,r,i){r===void 0&&(r=1),i===void 0&&(i=tr.SUM_BY_NONZERO_WEIGHTS);var a=F(t,"labels","huberLoss"),o=F(e,"predictions","huberLoss"),s=null;n!=null&&(s=F(n,"weights","huberLoss")),pt(a.shape,o.shape,"Error in huberLoss: ");var u=Ie(r),l=o.sub(a).abs(),c=Nk(l,u),f=l.sub(c),h=Ie(.5).mul(c.square()).add(u.mul(f));return Za(h,s,i)}}),Xz=H({logLoss_:function(t,e,n,r,i){r===void 0&&(r=1e-7),i===void 0&&(i=tr.SUM_BY_NONZERO_WEIGHTS);var a=F(t,"labels","logLoss"),o=F(e,"predictions","logLoss"),s=null;n!=null&&(s=F(n,"weights","logLoss")),pt(a.shape,o.shape,"Error in logLoss: ");var u=Ie(1),l=Ie(r),c=a.mul(o.add(l).log()).neg().sub(u.sub(a).mul(u.sub(o).add(l).log()));return Za(c,s,i)}}),Kz=H({meanSquaredError_:function(t,e,n,r){r===void 0&&(r=tr.SUM_BY_NONZERO_WEIGHTS);var i=F(t,"labels","meanSquaredError"),a=F(e,"predictions","meanSquaredError"),o=null;n!=null&&(o=F(n,"weights","meanSquaredError")),pt(i.shape,a.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(a);return Za(s,o,r)}}),qz=H({sigmoidCrossEntropy_:function(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=tr.SUM_BY_NONZERO_WEIGHTS);var a=F(t,"multiClassLabels","sigmoidCrossEntropy"),o=F(e,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=F(n,"weights","sigmoidCrossEntropy")),pt(a.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Ie(r),l=Ie(1),c=Ie(.5);a=a.mul(l.sub(u)).add(c.mul(u))}var f=function(h,d){var v=F(h,"labels","sigmoidCrossEntropyWithLogits"),p=F(d,"logits","sigmoidCrossEntropyWithLogits");pt(v.shape,p.shape,"Error in sigmoidCrossEntropyWithLogits: ");var m=p.relu(),g=p.mul(v),x=p.abs().neg().exp().log1p();return m.sub(g).add(x)}(a,o);return Za(f,s,i)}}),Yz=H({softmaxCrossEntropy_:function(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=tr.SUM_BY_NONZERO_WEIGHTS);var a=F(t,"onehotLabels","softmaxCrossEntropy"),o=F(e,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=F(n,"weights","softmaxCrossEntropy")),pt(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Ie(r),l=Ie(1),c=Ie(a.shape[1]);a=a.mul(l.sub(u)).add(u.div(c))}var f=function(h,d,v){if(v===void 0&&(v=-1),v===-1&&(v=d.rank-1),v!==d.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+d.rank+" and dim was "+v);return t0(function(p,m,g){var x=m.logSumExp([v],!0),y=m.toFloat().sub(x);return g([p,y]),{value:y.mul(p).neg().sum([v]),gradFunc:function(w,_){var b=_[0],E=_[1],S=Pr(w.shape,[v]);return[w.reshape(S).mul(b.toFloat().sub(E.exp())),w.reshape(S).mul(E.exp().sub(b.toFloat()))]}}})(h,d)}(a,o);return Za(f,s,i)}}),Qz=Object.freeze({get Reduction(){return tr},absoluteDifference:Hz,computeWeightedLoss:Za,cosineDistance:$z,hingeLoss:jz,huberLoss:Gz,logLoss:Xz,meanSquaredError:Kz,sigmoidCrossEntropy:qz,softmaxCrossEntropy:Yz});function Gw(t,e){return e===void 0&&(e=!1),X.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],i=qT(n),a=t.clone(),o=No([[1]],[1,1]),s=o.clone(),u=n>=r?r:n,l=function(f){var h,d=a,v=s,p=i;h=X.tidy(function(){var m=a.slice([f,f],[n-f,1]),g=m.norm(),x=a.slice([f,f],[1,1]),y=No([[-1]]).where(x.greater(0),No([[1]])),w=x.sub(y.mul(g)),_=m.div(w);s=_.shape[0]===1?o.clone():o.concat(_.slice([1,0],[_.shape[0]-1,_.shape[1]]),0);var b=y.matMul(w).div(g).neg(),E=a.slice([f,0],[n-f,r]),S=b.mul(s);if(f===0)a=E.sub(S.matMul(s.transpose().matMul(E)));else{var C=E.sub(S.matMul(s.transpose().matMul(E)));a=a.slice([0,0],[f,r]).concat(C,0)}var T=i.slice([0,f],[n,i.shape[1]-f]);if(f===0)i=T.sub(T.matMul(s).matMul(S.transpose()));else{var A=T.sub(T.matMul(s).matMul(S.transpose()));i=i.slice([0,0],[n,f]).concat(A,1)}return[s,a,i]}),s=h[0],a=h[1],i=h[2],Fr([d,v,p])},c=0;c<u;++c)l(c);return!e&&n>r&&(i=i.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[i,a]})}var Jz=H({bandPart_:function(t,e,n){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=F(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,a=r.shape.slice(-2),o=a[0],s=a[1];if(!(e<=o))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+o+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");e<0&&(e=o),n<0&&(n=s);var u=sp(0,o,1,"int32").reshape([-1,1]),l=sp(0,s,1,"int32"),c=yn(u,l),f=r0(c.lessEqual(Ie(+e,"int32")),c.greaterEqual(Ie(-n,"int32"))),h=At([o,s],r.dtype);return ei(gn(r.reshape([-1,o,s])).map(function(d){return zs(f,d,h)})).reshape(i)}}),Zz=H({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,M(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=t[0].shape[0],r=function(u){M(t[u].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[u].shape[0]+" vs. "+n+")"})},i=1;i<t.length;++i)r(i)}else e=!0,t=K1(t,t.shape[0],0).map(function(u){return JT(u,[0])});M(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var a=[],o=t,s=function(u){a.push(X.tidy(function(){var l=o[u];if(u>0)for(var c=0;c<u;++c){var f=Kk(a[c].mulStrict(l)).mul(a[c]);l=l.sub(f)}return l.div(Jk(l,"euclidean"))}))};for(i=0;i<t.length;++i)s(i);return e?ei(a,0):a}}),eU=H({qr_:function(t,e){if(e===void 0&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return Gw(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(o,s){return o*s}),r=gn(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],a=[];return r.forEach(function(o){var s=Gw(o,e),u=s[0],l=s[1];i.push(u),a.push(l)}),[ei(i,0).reshape(t.shape),ei(a,0).reshape(t.shape)]}}),tU=Object.freeze({bandPart:Jz,gramSchmidt:Zz,qr:eU});function s0(t,e,n,r,i,a){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),a==null&&(a=0);var o=t.shape[0];return n=Math.min(n,o),M(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),M(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),M(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),M(e.rank===1,function(){return"scores must be a 1D tensor"}),M(e.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+e.shape[0]}),M(0<=a&&a<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}var nU=H({resizeBilinear_:function(t,e,n){n===void 0&&(n=!1);var r=F(t,"images","resizeBilinear");M(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),M(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var i=r,a=!1;r.rank===3&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],s=e[1],u=X.runKernelFunc(function(l,c){return c([i]),l.resizeBilinear(i,o,s,n)},{x:i},function(l,c){return{x:function(){return X.runKernelFunc(function(f){return f.resizeBilinearBackprop(l,c[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:o,newWidth:s});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),rU=H({resizeNearestNeighbor_:function(t,e,n){n===void 0&&(n=!1);var r=F(t,"images","resizeNearestNeighbor");M(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),M(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),M(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,a=!1;r.rank===3&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],s=e[1],u=X.runKernelFunc(function(l,c){return c([i]),l.resizeNearestNeighbor(i,o,s,n)},{batchImages:i},function(l,c){return{batchImages:function(){return X.runKernelFunc(function(f){return f.resizeNearestNeighborBackprop(l,c[0],n)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),iU=H({nonMaxSuppression_:function(t,e,n,r,i){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var a=F(t,"boxes","nonMaxSuppression"),o=F(e,"scores","nonMaxSuppression"),s=s0(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return X.runKernelFunc(function(l){return l.nonMaxSuppression(a,o,n,r,i)},{boxes:a,scores:o},null,"NonMaxSuppressionV3",u)}}),aU=function(t,e,n,r,i){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),Pe(this,void 0,void 0,function(){var a,o,s,u,l,c,f;return Ne(this,function(h){switch(h.label){case 0:return a=F(t,"boxes","nonMaxSuppressionAsync"),o=F(e,"scores","nonMaxSuppressionAsync"),s=s0(a,o,n,r,i),n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([a.data(),o.data()])];case 1:return u=h.sent(),l=u[0],c=u[1],f=J1(l,c,n,r,i),a!==t&&a.dispose(),o!==e&&o.dispose(),[2,f]}})})},oU=H({nonMaxSuppressionWithScore_:function(t,e,n,r,i,a){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),a===void 0&&(a=0);var o=F(t,"boxes","nonMaxSuppression"),s=F(e,"scores","nonMaxSuppression"),u=s0(o,s,n,r,i,a),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:i=u.scoreThreshold,softNmsSigma:a=u.softNmsSigma},c=X.runKernel("NonMaxSuppressionV5",{boxes:o,scores:s},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),sU=function(t,e,n,r,i,a){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),a===void 0&&(a=0),Pe(this,void 0,void 0,function(){var o,s,u,l,c,f,h;return Ne(this,function(d){switch(d.label){case 0:return o=F(t,"boxes","nonMaxSuppressionAsync"),s=F(e,"scores","nonMaxSuppressionAsync"),u=s0(o,s,n,r,i,a),n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,a=u.softNmsSigma,[4,Promise.all([o.data(),s.data()])];case 1:return l=d.sent(),c=l[0],f=l[1],h=Z1(c,f,n,r,i,a),o!==t&&o.dispose(),s!==e&&s.dispose(),[2,h]}})})},uU=H({cropAndResize_:function(t,e,n,r,i,a){var o=F(t,"image","cropAndResize"),s=F(e,"boxes","cropAndResize","float32"),u=F(n,"boxInd","cropAndResize","int32");i=i||"bilinear",a=a||0;var l=s.shape[0];return M(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),M(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),M(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),M(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),M(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),M(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),X.runKernelFunc(function(c,f){return c.cropAndResize(o,s,u,r,i,a)},{images:o,boxes:s,boxInd:u},null,"CropAndResize",{method:i,extrapolationValue:a,cropSize:r})}}),dx=Object.freeze({resizeBilinear:nU,resizeNearestNeighbor:rU,nonMaxSuppression:iU,nonMaxSuppressionAsync:aU,nonMaxSuppressionWithScore:oU,nonMaxSuppressionWithScoreAsync:sU,cropAndResize:uU}),px=function(t,e){return!(t>0)||e==="linear"},vx=function(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return t.mul(e.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},mx=function(t,e){var n=e,r=xn(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)},gx=function(t,e,n){if(e==="linear")return t;if(e==="relu")return Lt(t);if(e==="elu")return qk(t);if(e==="relu6")return Qk(t);if(e==="prelu")return Yk(t,n);throw new Error("Unknown fused activation "+e+".")},lU=H({fusedMatMul_:function(t){var e,n=t.a,r=t.b,i=t.transposeA,a=i!==void 0&&i,o=t.transposeB,s=o!==void 0&&o,u=t.bias,l=t.activation,c=l===void 0?"linear":l,f=t.preluActivationWeights;if(px(X.state.gradientDepth,c)===!1){var h=a0(n,r,a,s);return u!=null&&(h=rt(h,u)),gx(h,c,f)}var d=F(n,"a","fused matMul"),v=F(r,"b","fused matMul");e=zt(d,v),d=e[0],v=e[1];var p=a?d.shape[d.rank-2]:d.shape[d.rank-1],m=s?v.shape[v.rank-1]:v.shape[v.rank-2],g=a?d.shape[d.rank-1]:d.shape[d.rank-2],x=s?v.shape[v.rank-2]:v.shape[v.rank-1],y=d.shape.slice(0,-2),w=v.shape.slice(0,-2),_=Be(y),b=Be(w);M(d.rank>=2&&v.rank>=2&&d.rank===v.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+d.rank+" and "+v.rank+"."}),M(Dn(y,w),function(){return"Error in fused matMul: outer dimensions ("+y+") and ("+w+") of Tensors with shapes "+d.shape+" and "+v.shape+" must match."}),M(p===m,function(){return"Error in fused matMul: inner shapes ("+p+") and ("+m+") of Tensors with shapes "+d.shape+" and "+v.shape+" and transposeA="+a+" and transposeB="+s+" must match."});var E,S,C=d.shape.slice(0,-2).concat([g,x]),T=a?d.as3D(_,p,g):d.as3D(_,g,p),A=s?v.as3D(b,x,m):v.as3D(b,m,x);u!=null&&at(C,(E=zt(E=F(u,"bias","fused matMul"),d)[0]).shape),f!=null&&(S=F(f,"prelu weights","fused matMul"));var I={a:T,b:A};u!=null&&(I.bias=E),f!=null&&(I.preluActivationWeights=S);var V=[T,A];return X.runKernelFunc(function(J,K){var ae=J.fusedBatchMatMul({a:T,b:A,transposeA:a,transposeB:s,bias:E,activation:c,preluActivationWeights:S});return K([T,A,ae]),ae},I,function(J,K){var ae=K[0],ie=K[1],G=K[2],Q=vx(J,G,c),te={};return u!=null&&(te={bias:function(){return mx(E,Q)}}),Object.assign(a||s?!a&&s?{a:function(){return Q.matMul(ie,!1,!1)},b:function(){return Q.matMul(ae,!0,!1)}}:a&&!s?{a:function(){return ie.matMul(Q,!1,!0)},b:function(){return ae.matMul(Q,!1,!1)}}:{a:function(){return ie.matMul(Q,!0,!0)},b:function(){return Q.matMul(ae,!0,!0)}}:{a:function(){return Q.matMul(ie,!1,!0)},b:function(){return ae.matMul(Q,!0,!1)}},te)},"_FusedMatMul",{transposeA:a,transposeB:s,activation:c},V,[!0]).reshape(C)}}),cU=H({fusedConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,a=t.dataFormat,o=a===void 0?"NHWC":a,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,f=t.activation,h=f===void 0?"linear":f,d=t.preluActivationWeights;if(h=h||"linear",px(X.state.gradientDepth,h)===!1){var v=_i(e,n,r,i,o,u,l);return c!=null&&(v=rt(v,c)),gx(v,h,d)}var p=F(e,"x","conv2d"),m=F(n,"filter","conv2d"),g=p,x=!1;p.rank===3&&(x=!0,g=p.as4D(1,p.shape[0],p.shape[1],p.shape[2])),M(g.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."}),M(m.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+m.rank+"."}),l!=null&&M(Jt(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+i+"."}),M(g.shape[3]===m.shape[2],function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+m.shape[2]+"."}),M(Nr(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),M(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var y,w,_=Js(g.shape,m.shape,r,u,i,l);c!=null&&(y=zt(y=F(c,"bias","fused conv2d"),p)[0],at(_.outShape,y.shape)),d!=null&&(w=F(d,"prelu weights","fused conv2d"));var b={x:g,filter:m};c!=null&&(b.bias=y),d!=null&&(b.preluActivationWeights=w);var E=[m,g],S=X.runKernelFunc(function(C,T){var A=C.fusedConv2d({input:g,filter:m,convInfo:_,bias:y,activation:h,preluActivationWeights:w});return T([m,g,A]),A},b,function(C,T){var A=T,I=A[0],V=A[1],J=A[2],K=vx(C,J,h);M(cl(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var ae={};return c!=null&&(ae={bias:function(){return mx(y,K)}}),Object.assign({x:function(){return Uk(V.shape,K,I,r,i)},filter:function(){return sx(V,K,I.shape,r,i)}},ae)},"FusedConv2D",{convInfo:_,activation:h},E,[!0]);return x?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}}),fU=H({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,a=t.dataFormat,o=a===void 0?"NHWC":a,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,f=t.activation,h=f===void 0?"linear":f,d=t.preluActivationWeights;if(px(X.state.gradientDepth,h)===!1){var v=i0(e,n,r,i,o,u,l);return c!=null&&(v=rt(v,c)),gx(v,h,d)}var p=F(e,"x","depthwiseConv2d"),m=F(n,"filter","depthwiseConv2d"),g=p,x=!1;p.rank===3&&(x=!0,g=p.as4D(1,p.shape[0],p.shape[1],p.shape[2])),M(g.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."}),M(m.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+m.rank+"."}),M(g.shape[3]===m.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+m.shape[2]+"."}),u==null&&(u=[1,1]),M(Nr(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),l!=null&&M(Jt(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+i+"."});var y,w,_=Js(g.shape,m.shape,r,u,i,l,!0);c!=null&&(y=zt(y=F(c,"bias","fused conv2d"),p)[0],at(_.outShape,y.shape)),d!=null&&(w=F(d,"prelu weights","fused depthwiseConv2d"));var b={x:g,filter:m};c!=null&&(b.bias=y),d!=null&&(b.preluActivationWeights=w);var E=[m,g],S=X.runKernelFunc(function(C,T){var A=C.fusedDepthwiseConv2D({input:g,filter:m,convInfo:_,bias:y,activation:h,preluActivationWeights:w});return T([m,g,A]),A},b,function(C,T){M(cl(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var A=T[0],I=T[1],V=T[2],J=vx(C,V,h),K={};return c!=null&&(K={bias:function(){return mx(y,J)}}),Object.assign({x:function(){return Vk(I.shape,J,A,_)},filter:function(){return Hk(I,J,A.shape,_)}},K)},"FusedDepthwiseConv2D",{convInfo:_,activation:h},E,[!0]);return x?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}}),hU=Object.freeze({matMul:lU,conv2d:cU,depthwiseConv2d:fU}),dU=Object.freeze({image:dx,linalg:tU,losses:Qz,spectral:Mz,fused:hU,signal:Uz,square:X8,squaredDifference:Ck,conv1d:nz,conv2d:_i,conv3d:rz,depthwiseConv2d:i0,separableConv2d:ux,conv2dTranspose:iz,conv3dTranspose:az,op:H,batchNormalization2d:EW,batchNormalization3d:SW,batchNormalization4d:CW,batchNormalization:TW,batchNorm:Fk,batchNorm2d:kW,batchNorm3d:AW,batchNorm4d:IW,booleanMaskAsync:tz,complex:Wn,real:di,imag:ia,concat:mn,concat1d:h6,concat2d:d6,concat3d:p6,concat4d:v6,split:K1,matMul:a0,dot:oz,outerProduct:sz,reverse:If,reverse1d:uz,reverse2d:lz,reverse3d:cz,reverse4d:fz,maxPool:Cn,avgPool:Rf,pool:hz,maxPool3d:dz,avgPool3d:pz,slice:va,slice1d:vz,slice2d:mz,slice3d:Gk,slice4d:gz,abs:K8,acos:q8,acosh:Y8,asin:Q8,asinh:J8,atan:Z8,atanh:eW,ceil:tW,clipByValue:ix,cos:nW,cosh:rW,erf:iW,exp:lg,expm1:aW,floor:oW,log:sW,log1p:uW,logSigmoid:lW,neg:vp,reciprocal:cW,round:fW,rsqrt:Tk,sigmoid:kk,sign:hW,isNaN:dW,isInf:pW,isFinite:vW,sin:mW,sinh:gW,softplus:xW,sqrt:yW,step:wW,tan:_W,tanh:bW,all:xz,any:yz,argMax:wz,argMin:_z,logSumExp:bz,max:o0,mean:Ez,min:Sz,moments:Cz,sum:Kk,prod:Tz,equal:Mk,equalStrict:jW,greater:GW,greaterEqual:Lk,greaterEqualStrict:XW,greaterStrict:KW,less:qW,lessEqual:YW,lessEqualStrict:QW,lessStrict:JW,notEqual:ZW,notEqualStrict:ez,add:rt,addN:DW,addStrict:OW,atan2:PW,div:Ri,divNoNan:NW,divStrict:MW,floorDiv:Pk,maximum:ax,maximumStrict:LW,minimum:Nk,minimumStrict:BW,mod:WW,modStrict:zW,mul:nr,mulStrict:UW,pow:mp,powStrict:VW,squaredDifferenceStrict:HW,sub:yn,subStrict:$W,elu:qk,leakyRelu:kz,prelu:Yk,relu:Lt,relu6:Qk,selu:Az,logicalAnd:r0,logicalNot:RW,logicalOr:Dk,logicalXor:FW,where:zs,whereAsync:Ok,buffer:Ye,print:S6,batchToSpaceND:KT,broadcastTo:C6,cast:T6,clone:k6,cumsum:A6,depthToSpace:I6,expandDims:hi,eye:qT,multinomial:R6,oneHot:ag,pad:Qs,pad1d:F6,pad2d:D6,pad3d:O6,pad4d:P6,rand:N6,randomNormal:M6,randomGamma:L6,randomUniform:YT,reshape:Oi,spaceToBatchND:QT,squeeze:JT,stack:ei,tile:$u,truncatedNormal:B6,unstack:gn,setdiff1dAsync:W6,fill:fa,linspace:f6,ones:bl,range:sp,scalar:Ie,tensor:Un,tensor1d:rn,tensor2d:No,tensor3d:X1,tensor4d:br,tensor5d:u6,tensor6d:l6,variable:c6,zeros:At,onesLike:XT,zerosLike:st,transpose:$o,softmax:Ja,logSoftmax:G6,localResponseNormalization:Iz,norm:Jk,gather:ox,unsortedSegmentSum:Bk,basicLSTMCell:Rz,multiRNNCell:Fz,movingAverage:Dz,stridedSlice:Oz,topk:Pz,scatterND:Nz,fft:lx,ifft:gp,rfft:cx,irfft:Zk,sparseToDense:Lz,gatherND:Bz,diag:Wz,dropout:zz,hannWindow:fx,hammingWindow:t4,frame:hx,stft:n4,inTopKAsync:Vz});function me(t,e){Array.isArray(t)||(t=[t]),t.forEach(function(n){n!=null&&M(n.dtype!=="complex64",function(){return e+" does not support complex64 tensors."})})}function Tv(t,e,n,r){if(n==="linear")return t.linear(e);if(n==="relu")return t.relu(e);if(n==="elu")return t.elu(e);if(n==="relu6")return t.relu6(e);if(n==="prelu")return t.prelu(e,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var pU=function(t){function e(){var n=t.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new ak(n,X),n}return Ui(e,t),e.prototype.write=function(n,r,i){this.firstUse&&(this.firstUse=!1,fe().get("IS_NODE")&&ap(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var a={};return this.data.set(a,{values:n,dtype:i}),a},e.prototype.move=function(n,r,i,a){this.data.set(n,{values:r,dtype:a})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(n){return Pe(this,void 0,void 0,function(){return Ne(this,function(r){return[2,this.readSync(n)]})})},e.prototype.readSync=function(n){var r=this.data.get(n),i=r.dtype,a=r.complexTensors;return i==="complex64"?ug(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):this.data.get(n).values},e.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),i=r;if(n.dtype==="string")try{i=r.map(function(a){return np(a)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ye(n.shape,n.dtype,i)},e.prototype.makeOutput=function(n,r,i){var a=this.write(n,r,i);return X.makeTensorFromDataId(a,r,i,this)},e.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},e.prototype.time=function(n){return Pe(this,void 0,void 0,function(){var r;return Ne(this,function(i){return r=ta(),n(),[2,{kernelMs:ta()-r}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(n,r){var i=this.makeOutput(null,n.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:X.keep(n.clone()),imag:X.keep(r.clone())},i},e.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,i){if(me(n,"slice"),rk(n.shape,r,i)){var a=ik(r,n.strides),o=Be(i);return Un(this.readSync(n.dataId).subarray(a,a+o),i,n.dtype)}for(var s=Ye(i,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l).map(function(f,h){return f+r[h]});s.values[l]=u.get.apply(u,c)}return s.toTensor()},e.prototype.stridedSlice=function(n,r,i,a){me(n,"stridedSlice");var o=Y1(r,i,a);if(o.some(function(d){return d===0}))return Un([],o);for(var s=Ye(o,n.dtype),u=this.bufferSync(n),l=0;l<s.size;l++){for(var c=s.indexToLoc(l),f=new Array(c.length),h=0;h<f.length;h++)f[h]=c[h]*a[h]+r[h];s.set.apply(s,[u.get.apply(u,f)].concat(c))}return s.toTensor()},e.prototype.diag=function(n){for(var r=this.readSync(n.dataId),i=Ye([n.size,n.size],n.dtype),a=i.values,o=0;o<r.length;o++)a[o*n.size+o]=r[o];return i.toTensor()},e.prototype.unstack=function(n,r){for(var i=n.shape[r],a=new Array(n.rank-1),o=0,s=0;s<n.rank;s++)s!==r&&(a[o++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(a);return c},e.prototype.reverse=function(n,r){me(n,"reverse");for(var i=Ye(n.shape,n.dtype),a=this.bufferSync(n),o=function(u){var l=i.indexToLoc(u),c=l.slice();r.forEach(function(f){return c[f]=n.shape[f]-1-c[f]}),i.set.apply(i,[a.get.apply(a,c)].concat(l))},s=0;s<i.size;s++)o(s);return i.toTensor()},e.prototype.concat=function(n,r){var i=this;if(n[0].dtype==="complex64"){var a=n.map(function(d){return di(d)}),o=n.map(function(d){return ia(d)});return Wn(this.concat(a,r),this.concat(o,r))}var s=n.map(function(d){var v=Be(d.shape.slice(r));return d.as2D(-1,v)}),u=ll(s.map(function(d){return d.shape}),1),l=Ye(u,n[0].dtype).values;if(s[0].shape[0]===1){var c=0;s.forEach(function(d){l.set(i.readSync(d.dataId),c),c+=d.size})}else{var f=0;s.forEach(function(d){for(var v=i.readSync(d.dataId),p=0,m=0;m<d.shape[0];++m)for(var g=m*u[1]+f,x=0;x<d.shape[1];++x)l[g+x]=v[p++];f+=d.shape[1]})}var h=ll(n.map(function(d){return d.shape}),r);return Un(l,h,n[0].dtype)},e.prototype.neg=function(n){return me(n,"neg"),this.multiply(Ie(-1),n)},e.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(i,a,o,s){return{real:i+o,imag:a+s}}):this.broadcastedBinaryOp(n,r,zn(n.dtype,r.dtype),function(i,a){return i+a})},e.prototype.addN=function(n){var r=this;me(n,"addN");for(var i=n.map(function(c){return r.readSync(c.dataId)}),a=Ye(n[0].shape,n[0].dtype),o=a.values,s=0;s<n.length;s++)for(var u=i[s],l=0;l<o.length;l++)o[l]+=u[l];return a.toTensor()},e.prototype.softmax=function(n,r){var i=_n([r],n.shape),a=this.max(n,i),o=Pr(a.shape,i),s=this.subtract(n,a.reshape(o)),u=this.exp(s),l=this.sum(u,i).reshape(o);return this.realDivide(u,l)},e.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(i,a,o,s){return{real:i-o,imag:a-s}}):this.broadcastedBinaryOp(n,r,zn(n.dtype,r.dtype),function(i,a){return i-a})},e.prototype.pow=function(n,r){return me([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){return Math.pow(i,a)})},e.prototype.batchMatMul=function(n,r,i,a){me([n,r],"matMul");for(var o=i?n.shape[1]:n.shape[2],s=i?n.shape[2]:n.shape[1],u=a?r.shape[1]:r.shape[2],l=n.shape[0],c=this.readSync(n.dataId),f=this.readSync(r.dataId),h=i?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],d=h[0],v=h[1],p=h[2],m=a?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],g=m[0],x=m[1],y=m[2],w=s*u,_=Ye([l,s,u],n.dtype),b=_.values,E=this.blockSize,S=0;S<l;S++)for(var C=0;C<s;C+=E)for(var T=0;T<u;T+=E)for(var A=0;A<o;A+=E)for(var I=Math.min(C+E,s),V=Math.min(T+E,u),J=Math.min(A+E,o),K=C;K<I;K++)for(var ae=T;ae<V;ae++){for(var ie=0,G=A;G<J;G++)ie+=c[S*d+K*v+G*p]*f[G*g+ae*x+S*y];b[S*w+(K*u+ae)]+=ie}return _.toTensor()},e.prototype.fusedBatchMatMul=function(n){var r=n.a,i=n.b,a=n.transposeA,o=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=this.batchMatMul(r,i,a,o);return s&&(c=this.add(c,s)),u&&(c=Tv(this,c,u,l)),c},e.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(i,a,o,s){return{real:i*o-a*s,imag:i*s+a*o}}):this.broadcastedBinaryOp(n,r,zn(n.dtype,r.dtype),function(i,a){return i*a})},e.prototype.realDivide=function(n,r){return me([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",function(i,a){return i/a})},e.prototype.floorDiv=function(n,r){return me([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",function(i,a){return Math.floor(i/a)})},e.prototype.sum=function(n,r){me(n,"sum"),$r("sum",r,n.rank);for(var i=Qn(n.shape,r),a=i[0],o=i[1],s=At(a,zn(n.dtype,"int32")),u=Be(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=0,v=0;v<u;++v)d+=c[h+v];l[f]=d}return s},e.prototype.prod=function(n,r){me(n,"sum");for(var i=Qn(n.shape,r),a=i[0],o=i[1],s=At(a,zn(n.dtype,"int32")),u=Be(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=1,v=0;v<u;++v)d*=c[h+v];l[f]=d}return s},e.prototype.unsortedSegmentSum=function(n,r,i){me(n,"unsortedSegmentSum");for(var a=[],o=n.rank-r.rank,s=0;s<o;++s)r=r.expandDims(s+1);for(s=0;s<i;++s){var u=Ie(s,"int32"),l=Mk(u,r).asType("float32").mul(n).sum(0);a.push(l)}return ei(a)},e.prototype.argMin=function(n,r){me(n,"argMin");var i=[r];$r("argMin",i,n.rank);for(var a=Qn(n.shape,i),o=a[0],s=a[1],u=At(o,"int32"),l=Be(s),c=this.readSync(u.dataId),f=this.readSync(n.dataId),h=0;h<c.length;++h){for(var d=h*l,v=f[d],p=0,m=0;m<l;++m){var g=f[d+m];g<v&&(v=g,p=m)}c[h]=p}return u},e.prototype.argMax=function(n,r){me(n,"argMax");var i=[r];$r("argMax",i,n.rank);for(var a=Qn(n.shape,i),o=a[0],s=a[1],u=At(o,"int32"),l=Be(s),c=this.readSync(u.dataId),f=this.readSync(n.dataId),h=0;h<c.length;++h){for(var d=h*l,v=f[d],p=0,m=0;m<l;++m){var g=f[d+m];g>v&&(v=g,p=m)}c[h]=p}return u},e.prototype.cumsum=function(n,r,i,a){if(me(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var o=zn(n.dtype,"int32"),s=At(n.shape,o),u=this.readSync(s.dataId),l=this.readSync(n.dataId),c=n.shape[n.rank-1],f=a?function(m,g){return m+c-g-1}:function(m,g){return m+g},h=0;h<l.length;h+=c)for(var d=0;d<c;d++){var v=f(h,d);if(d===0)u[v]=i?0:l[v];else{var p=f(h,d-1);u[v]=i?l[p]+u[p]:l[v]+u[p]}}return s},e.prototype.equal=function(n,r){return me([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i===a?1:0})},e.prototype.notEqual=function(n,r){return me([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i!==a?1:0})},e.prototype.less=function(n,r){return me([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i<a?1:0})},e.prototype.lessEqual=function(n,r){return me([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i<=a?1:0})},e.prototype.greater=function(n,r){return me([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i>a?1:0})},e.prototype.greaterEqual=function(n,r){return me([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i>=a?1:0})},e.prototype.logicalNot=function(n){me(n,"logicalNot");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)i[a]=r[a]?0:1;return this.makeOutput(i,n.shape,"bool")},e.prototype.logicalAnd=function(n,r){return me([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i&&a})},e.prototype.logicalOr=function(n,r){return me([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",function(i,a){return i||a})},e.prototype.select=function(n,r,i){me([n,r,i],"select");for(var a=this.readSync(n.dataId),o=this.readSync(r.dataId),s=this.readSync(i.dataId),u=At(r.shape,zn(r.dtype,i.dtype)),l=this.readSync(u.dataId),c=0,f=n.rank===0||n.rank>1||r.rank===1?1:Be(r.shape.slice(1)),h=0;h<a.length;h++)for(var d=0;d<f;d++)a[h]===1?l[c++]=o[h]:l[c++]=s[h];return u},e.prototype.where=function(n){me([n],"where");var r=this.readSync(n.dataId);return ex(n.shape,r)},e.prototype.topk=function(n,r,i){return me(n,"topk"),dk(this.readSync(n.dataId),n.shape,n.dtype,r)},e.prototype.min=function(n,r){me(n,"min"),$r("min",r,n.rank);for(var i=Qn(n.shape,r),a=i[0],o=i[1],s=At(a,n.dtype),u=Be(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],v=0;v<u;++v){var p=c[h+v];p<d&&(d=p)}l[f]=d}return s},e.prototype.minimum=function(n,r){return me([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){return Math.min(i,a)})},e.prototype.mod=function(n,r){return me([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){var o=i%a;return i<0&&a<0||i>=0&&a>=0?o:(o+a)%a})},e.prototype.max=function(n,r){me(n,"max"),$r("max",r,n.rank);for(var i=Qn(n.shape,r),a=i[0],o=i[1],s=At(a,n.dtype),u=Be(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],v=0;v<u;++v){var p=c[h+v];p>d&&(d=p)}l[f]=d}return s},e.prototype.maximum=function(n,r){return me([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){return Math.max(i,a)})},e.prototype.all=function(n,r){me(n,"all"),$r("all",r,n.rank);for(var i=Qn(n.shape,r),a=i[0],o=i[1],s=At(a,n.dtype),u=Be(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],v=0;v<u;++v){var p=c[h+v];d=d&&p}l[f]=d}return s},e.prototype.any=function(n,r){me(n,"any"),$r("any",r,n.rank);for(var i=Qn(n.shape,r),a=i[0],o=i[1],s=At(a,n.dtype),u=Be(o),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],v=0;v<u;++v){var p=c[h+v];d=d||p}l[f]=d}return s},e.prototype.squaredDifference=function(n,r){return me([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){var o=i-a;return o*o})},e.prototype.ceil=function(n){me(n,"ceil");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.ceil(r[a]);return this.makeOutput(i,n.shape,"float32")},e.prototype.floor=function(n){me(n,"floor");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.floor(r[a]);return this.makeOutput(i,n.shape,"float32")},e.prototype.sign=function(n){me(n,"x");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)r[a]<0?i[a]=-1:r[a]>0?i[a]=1:i[a]=0;return this.makeOutput(i,n.shape,"float32")},e.prototype.isNaN=function(n){me(n,"x");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isNaN(r[a])&&(i[a]=1);return this.makeOutput(i,n.shape,"bool")},e.prototype.isInf=function(n){me(n,"x");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)Math.abs(r[a])===1/0&&(i[a]=1);return this.makeOutput(i,n.shape,"bool")},e.prototype.isFinite=function(n){me(n,"x");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isFinite(r[a])&&(i[a]=1);return this.makeOutput(i,n.shape,"bool")},e.prototype.round=function(n){me(n,"round");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=Math.floor(r[a]);r[a]-o<.5?i[a]=Math.floor(r[a]):r[a]-o>.5?i[a]=Math.ceil(r[a]):i[a]=o%2==0?o:o+1}return this.makeOutput(i,n.shape,"float32")},e.prototype.exp=function(n){me(n,"exp");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.exp(r[a]);return this.makeOutput(i,n.shape,"float32")},e.prototype.expm1=function(n){me(n,"expm1");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=Math.expm1(r[a]);return this.makeOutput(i,n.shape,"float32")},e.prototype.log=function(n){me(n,"log");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=Math.log(o)}return this.makeOutput(i,n.shape,"float32")},e.prototype.log1p=function(n){me(n,"log1p");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=Math.log1p(o)}return this.makeOutput(i,n.shape,"float32")},e.prototype.sqrt=function(n){me(n,"sqrt");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=Math.sqrt(o)}return this.makeOutput(i,n.shape,"float32")},e.prototype.rsqrt=function(n){me(n,"rsqrt");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a){var o=r[a];i[a]=1/Math.sqrt(o)}return this.makeOutput(i,n.shape,"float32")},e.prototype.reciprocal=function(n){me(n,"reciprocal");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),a=0;a<r.length;++a)i[a]=1/r[a];return this.makeOutput(i,n.shape,"float32")},e.prototype.linear=function(n){return n},e.prototype.relu=function(n){me(n,"relu");for(var r=At(n.shape,n.dtype),i=this.readSync(r.dataId),a=this.readSync(n.dataId),o=0;o<a.length;++o)i[o]=Math.max(0,a[o]);return r},e.prototype.relu6=function(n){me(n,"relu");for(var r=At(n.shape,n.dtype),i=this.readSync(r.dataId),a=this.readSync(n.dataId),o=0;o<a.length;++o)i[o]=Math.min(Math.max(0,a[o]),6);return r},e.prototype.prelu=function(n,r){return me([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){return i<0?a*i:i})},e.prototype.elu=function(n){me(n,"elu");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var o=i[a];r[a]=o>=0?o:Math.exp(o)-1}return this.makeOutput(r,n.shape,"float32")},e.prototype.eluDer=function(n,r){me([n,r],"eluDer");for(var i=new Float32Array(r.size),a=this.readSync(r.dataId),o=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];i[s]=u>=1?o[s]:o[s]*(u+1)}return this.makeOutput(i,r.shape,"float32")},e.prototype.selu=function(n){me(n,"selu");for(var r=nx,i=rx,a=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s){var u=o[s];a[s]=u>=0?i*u:r*(Math.exp(u)-1)}return this.makeOutput(a,n.shape,"float32")},e.prototype.clip=function(n,r,i){me(n,"clip");for(var a=new Float32Array(n.size),o=this.readSync(n.dataId),s=0;s<o.length;++s){var u=o[s];a[s]=u>i?i:u<r?r:u}return this.makeOutput(a,n.shape,"float32")},e.prototype.abs=function(n){for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.abs(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<n.size;++a){var o=i[2*a],s=i[2*a+1];r[a]=Math.hypot(o,s)}return this.makeOutput(r,n.shape,"float32")},e.prototype.int=function(n){me(n,"int");for(var r=new Int32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=i[a];return this.makeOutput(r,n.shape,"int32")},e.prototype.sigmoid=function(n){me(n,"sigmoid");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=1/(1+Math.exp(-i[a]));return this.makeOutput(r,n.shape,"float32")},e.prototype.softplus=function(n){me(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,i=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o){var s=a[o]>-r,u=a[o]<r,l=Math.exp(a[o]),c=void 0;c=u?l:s?a[o]:Math.log(1+l),i[o]=c}return this.makeOutput(i,n.shape,"float32")},e.prototype.sin=function(n){me(n,"sin");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.sin(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cos=function(n){me(n,"cos");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.cos(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tan=function(n){me(n,"tan");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.tan(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asin=function(n){me(n,"asin");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.asin(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acos=function(n){me(n,"acos");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.acos(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan=function(n){me(n,"atan");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.atan(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan2=function(n,r){return me([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,a){return Math.atan2(i,a)})},e.prototype.sinh=function(n){me(n,"sinh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.sinh(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cosh=function(n){me(n,"cosh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.cosh(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tanh=function(n){me(n,"tanh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=vB(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asinh=function(n){me(n,"asinh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.asinh(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acosh=function(n){me(n,"acosh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.acosh(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atanh=function(n){me(n,"atanh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a)r[a]=Math.atanh(i[a]);return this.makeOutput(r,n.shape,"float32")},e.prototype.erf=function(n){me(n,"erf");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var o=Math.sign(i[a]),s=Math.abs(i[a]),u=1/(1+.3275911*s);r[a]=o*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},e.prototype.step=function(n,r){r===void 0&&(r=0),me(n,"step");for(var i=new Float32Array(n.size),a=this.readSync(n.dataId),o=0;o<a.length;++o){var s=a[o];isNaN(s)?i[o]=NaN:i[o]=s>0?1:r}return this.makeOutput(i,n.shape,"float32")},e.prototype.fusedConv2d=function(n){var r=n.input,i=n.filter,a=n.convInfo,o=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.conv2d(r,i,a);return o&&(l=this.add(l,o)),s&&(l=Tv(this,l,s,u)),l},e.prototype.conv2d=function(n,r,i){me([n,r],"conv2d");for(var a=i.filterHeight,o=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,f=i.dataFormat==="channelsLast",h=Ye(i.outShape,n.dtype),d=n.strides[0],v=f?n.strides[1]:n.strides[2],p=f?n.strides[2]:1,m=f?1:n.strides[1],g=h.strides[0],x=f?h.strides[1]:h.strides[2],y=f?h.strides[2]:1,w=f?1:h.strides[1],_=this.readSync(n.dataId),b=this.readSync(r.dataId),E=h.values,S=0;S<i.batchSize;++S)for(var C=S*d,T=S*g,A=0;A<i.outHeight;++A)for(var I=T+A*x,V=A*i.strideHeight-c,J=0;J<a;J++){var K=V+J*s;if(!(K<0||K>=i.inHeight))for(var ae=J*r.strides[0],ie=C+K*v,G=0;G<i.outWidth;++G)for(var Q=I+G*y,te=G*i.strideWidth-l,pe=0;pe<o;pe++){var P=te+pe*u;if(!(P<0||P>=i.inWidth))for(var j=ie+P*p,U=ae+pe*r.strides[1],z=0;z<i.inChannels;++z){for(var Z=_[j+z*m],xe=0;xe<i.outChannels;++xe)E[Q+xe*w]+=Z*b[U+xe];U+=i.outChannels}}}return h.toTensor()},e.prototype.conv3d=function(n,r,i){for(var a=i.filterDepth,o=i.filterHeight,s=i.filterWidth,u=i.dilationDepth,l=i.dilationHeight,c=i.dilationWidth,f=i.padInfo.front,h=i.padInfo.left,d=i.padInfo.top,v=Ye(i.outShape,n.dtype),p=this.readSync(n.dataId),m=this.readSync(r.dataId),g=v.values,x=0;x<i.batchSize;++x)for(var y=x*n.strides[0],w=x*v.strides[0],_=0;_<i.outDepth;++_)for(var b=w+_*v.strides[1],E=_*i.strideDepth-f,S=0;S<a;S++){var C=E+S*u;if(!(C<0||C>=i.inDepth))for(var T=S*r.strides[0],A=y+C*n.strides[1],I=0;I<i.outHeight;++I)for(var V=b+I*v.strides[2],J=I*i.strideHeight-d,K=0;K<o;K++){var ae=J+K*l;if(!(ae<0||ae>=i.inHeight))for(var ie=T+K*r.strides[1],G=A+ae*n.strides[2],Q=0;Q<i.outWidth;++Q)for(var te=V+Q*i.outChannels,pe=Q*i.strideWidth-h,P=0;P<s;P++){var j=pe+P*c;if(!(j<0||j>=i.inWidth))for(var U=ie+P*r.strides[2],z=G+j*i.inChannels,Z=U,xe=0;xe<i.inChannels;++xe){for(var we=p[z+xe],ee=0;ee<i.outChannels;++ee)g[te+ee]+=we*m[Z+ee];Z+=i.outChannels}}}}return v.toTensor()},e.prototype.conv2dDerInput=function(n,r,i){me([n,r],"conv2dDerInput");for(var a=Ye(i.inShape,"float32"),o=a.values,s=this.readSync(n.dataId),u=this.readSync(r.dataId),l=r.strides,c=l[0],f=l[1],h=l[2],d=i.batchSize,v=i.filterHeight,p=i.filterWidth,m=i.inChannels,g=i.inHeight,x=i.inWidth,y=i.outChannels,w=i.outHeight,_=i.outWidth,b=i.strideHeight,E=i.strideWidth,S=i.dataFormat,C=v-1-i.padInfo.top,T=p-1-i.padInfo.left,A=S==="channelsLast",I=a.strides[0],V=A?a.strides[1]:a.strides[2],J=A?a.strides[2]:1,K=A?1:a.strides[1],ae=n.strides[0],ie=A?n.strides[1]:n.strides[2],G=A?n.strides[2]:1,Q=A?1:n.strides[1],te=0;te<d;++te)for(var pe=0;pe<m;++pe)for(var P=0;P<g;++P)for(var j=P-C,U=Math.max(0,Math.ceil(j/b)),z=Math.min(w,(v+j)/b),Z=0;Z<x;++Z){for(var xe=Z-T,we=Math.max(0,Math.ceil(xe/E)),ee=Math.min(_,(p+xe)/E),de=0,Fe=U;Fe<z;++Fe)for(var Re=Fe*b-j,He=we;He<ee;++He)for(var Ve=ae*te+ie*Fe+G*He,Me=c*(v-1-Re)+f*(p-1-(He*E-xe))+h*pe,$e=0;$e<y;++$e)de+=s[Ve+Q*$e]*u[Me+$e];o[I*te+V*P+J*Z+K*pe]=de}return a.toTensor()},e.prototype.conv3dDerInput=function(n,r,i){for(var a=Ye(i.inShape,"float32"),o=a.values,s=a.strides,u=s[0],l=s[1],c=s[2],f=s[3],h=this.readSync(n.dataId),d=n.strides,v=d[0],p=d[1],m=d[2],g=d[3],x=this.readSync(r.dataId),y=r.strides,w=y[0],_=y[1],b=y[2],E=y[3],S=i.batchSize,C=i.filterDepth,T=i.filterHeight,A=i.filterWidth,I=i.inChannels,V=i.inDepth,J=i.inHeight,K=i.inWidth,ae=i.outChannels,ie=i.outDepth,G=i.outHeight,Q=i.outWidth,te=i.strideDepth,pe=i.strideHeight,P=i.strideWidth,j=C-1-i.padInfo.front,U=T-1-i.padInfo.top,z=A-1-i.padInfo.left,Z=0;Z<S;++Z)for(var xe=0;xe<I;++xe)for(var we=0;we<V;++we)for(var ee=we-j,de=Math.max(0,Math.ceil(ee/te)),Fe=Math.min(ie,(C+ee)/te),Re=0;Re<J;++Re)for(var He=Re-U,Ve=Math.max(0,Math.ceil(He/pe)),Me=Math.min(G,(T+He)/pe),$e=0;$e<K;++$e){for(var Te=$e-z,Et=Math.max(0,Math.ceil(Te/P)),vt=Math.min(Q,(A+Te)/P),bn=0,Xt=de;Xt<Fe;++Xt)for(var ur=Xt*te-ee,St=Ve;St<Me;++St)for(var Ut=St*pe-He,Pn=Et;Pn<vt;++Pn)for(var $i=v*Z+p*Xt+m*St+g*Pn,Mr=w*(C-1-ur)+_*(T-1-Ut)+b*(A-1-(Pn*P-Te))+E*xe,Kt=0;Kt<ae;++Kt)bn+=h[$i+Kt]*x[Mr+Kt];o[u*Z+l*we+c*Re+f*$e+xe]=bn}return a.toTensor()},e.prototype.conv2dDerFilter=function(n,r,i){me([n,r],"conv2dDerFilter");for(var a=i.strideHeight,o=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dataFormat==="channelsLast",c=Ye(i.filterShape,"float32"),f=i.padInfo.left,h=i.padInfo.top,d=this.bufferSync(n),v=this.bufferSync(r),p=0;p<s;++p)for(var m=Math.max(0,Math.ceil((h-p)/a)),g=Math.min(i.outHeight,(i.inHeight+h-p)/a),x=0;x<u;++x)for(var y=Math.max(0,Math.ceil((f-x)/o)),w=Math.min(i.outWidth,(i.inWidth+f-x)/o),_=0;_<i.inChannels;++_)for(var b=0;b<i.outChannels;++b){for(var E=0,S=0;S<i.batchSize;++S)for(var C=m;C<g;++C)for(var T=p+C*a-h,A=y;A<w;++A){var I=x+A*o-f;E+=l?d.get(S,T,I,_)*v.get(S,C,A,b):d.get(S,_,T,I)*v.get(S,b,C,A)}c.set(E,p,x,_,b)}return c.toTensor()},e.prototype.conv3dDerFilter=function(n,r,i){for(var a=i.strideDepth,o=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,f=Ye(i.filterShape,"float32"),h=f.values,d=f.strides,v=d[0],p=d[1],m=d[2],g=d[3],x=this.readSync(r.dataId),y=r.strides,w=y[0],_=y[1],b=y[2],E=y[3],S=this.readSync(n.dataId),C=n.strides,T=C[0],A=C[1],I=C[2],V=C[3],J=i.padInfo.front,K=i.padInfo.left,ae=i.padInfo.top,ie=0;ie<u;++ie)for(var G=Math.max(0,Math.ceil((J-ie)/a)),Q=Math.min(i.outDepth,(i.inDepth+J-ie)/a),te=ie*v,pe=0;pe<l;++pe)for(var P=Math.max(0,Math.ceil((ae-pe)/o)),j=Math.min(i.outHeight,(i.inHeight+ae-pe)/o),U=pe*p+te,z=0;z<c;++z)for(var Z=Math.max(0,Math.ceil((K-z)/s)),xe=Math.min(i.outWidth,(i.inWidth+K-z)/s),we=z*m+U,ee=0;ee<i.inChannels;++ee)for(var de=ee*g+we,Fe=0;Fe<i.outChannels;++Fe){for(var Re=0,He=0;He<i.batchSize;++He)for(var Ve=He*T,Me=He*w,$e=G;$e<Q;++$e)for(var Te=(ie+$e*a-J)*A+Ve,Et=$e*_+Me,vt=P;vt<j;++vt)for(var bn=(pe+vt*o-ae)*I+Te,Xt=vt*b+Et,ur=Z;ur<xe;++ur){var St=ur*E+Xt;Re+=S[(z+ur*s-K)*V+bn+ee]*x[St+Fe]}h[de+Fe]=Re}return f.toTensor()},e.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,i=n.filter,a=n.convInfo,o=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.depthwiseConv2D(r,i,a);return o&&(l=this.add(l,o)),s&&(l=Tv(this,l,s,u)),l},e.prototype.depthwiseConv2D=function(n,r,i){me([n,r],"depthwiseConv2D");for(var a=i.filterHeight,o=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,f=i.outChannels/i.inChannels,h=Ye(i.outShape,n.dtype),d=this.readSync(n.dataId),v=this.readSync(r.dataId),p=h.values,m=0;m<i.batchSize;++m)for(var g=m*n.strides[0],x=m*h.strides[0],y=0;y<i.outHeight;++y)for(var w=x+y*h.strides[1],_=y*i.strideHeight-l,b=0;b<a;++b){var E=_+b*s;if(!(E<0||E>=i.inHeight))for(var S=b*r.strides[0],C=g+E*n.strides[1],T=0;T<i.outWidth;++T)for(var A=w+T*h.strides[2],I=T*i.strideWidth-c,V=0;V<o;++V){var J=I+V*u;if(!(J<0||J>=i.inWidth))for(var K=S+V*r.strides[1],ae=C+J*i.inChannels,ie=A,G=K,Q=0;Q<i.inChannels;++Q){for(var te=d[ae+Q],pe=0;pe<f;++pe)p[ie+pe]+=te*v[G+pe];ie+=f,G+=f}}}return h.toTensor()},e.prototype.depthwiseConv2DDerInput=function(n,r,i){me([n,r],"depthwiseConv2DDerInput");for(var a=Ye(i.inShape,"float32"),o=a.values,s=a.strides,u=s[0],l=s[1],c=s[2],f=this.readSync(n.dataId),h=n.strides,d=h[0],v=h[1],p=h[2],m=this.readSync(r.dataId),g=r.strides,x=g[0],y=g[1],w=g[2],_=i.batchSize,b=i.filterHeight,E=i.filterWidth,S=i.inChannels,C=i.inHeight,T=i.inWidth,A=i.outChannels,I=i.outHeight,V=i.outWidth,J=i.strideHeight,K=i.strideWidth,ae=b-1-i.padInfo.top,ie=E-1-i.padInfo.left,G=A/S,Q=0;Q<_;++Q)for(var te=0;te<S;++te)for(var pe=0;pe<C;++pe)for(var P=pe-ae,j=Math.max(0,Math.ceil(P/J)),U=Math.min(I,(b+P)/J),z=0;z<T;++z){for(var Z=z-ie,xe=Math.max(0,Math.ceil(Z/K)),we=Math.min(V,(E+Z)/K),ee=0,de=j;de<U;++de)for(var Fe=de*J-P,Re=xe;Re<we;++Re)for(var He=d*Q+v*de+p*Re,Ve=x*(b-1-Fe)+y*(E-1-(Re*K-Z))+w*te,Me=0;Me<G;++Me)ee+=f[He+(te*G+Me)]*m[Ve+Me];o[u*Q+l*pe+c*z+te]=ee}return a.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(n,r,i){me([n,r],"depthwiseConv2DDerFilter");for(var a=i.strideHeight,o=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=Ye(i.filterShape,"float32"),c=i.padInfo.left,f=i.padInfo.top,h=i.outChannels/i.inChannels,d=this.bufferSync(n),v=this.bufferSync(r),p=0;p<s;++p)for(var m=Math.max(0,Math.ceil((f-p)/a)),g=Math.min(i.outHeight,(i.inHeight+f-p)/a),x=0;x<u;++x)for(var y=Math.max(0,Math.ceil((c-x)/o)),w=Math.min(i.outWidth,(i.inWidth+c-x)/o),_=0;_<i.outChannels;++_){for(var b=Math.trunc(_/h),E=_%h,S=0,C=0;C<i.batchSize;++C)for(var T=m;T<g;++T)for(var A=p+T*a-f,I=y;I<w;++I){var V=x+I*o-c;S+=d.get(C,A,V,b)*v.get(C,T,I,_)}l.set(S,p,x,b,E)}return l.toTensor()},e.prototype.tile=function(n,r){return me(n,"tile"),hk(this.bufferSync(n),r)},e.prototype.pad=function(n,r,i){me(n,"pad");var a=r.map(function(h,d){return h[0]+n.shape[d]+h[1]}),o=r.map(function(h){return h[0]}),s=this.bufferSync(n),u=Ye(a,n.dtype);i!==0&&u.values.fill(i);for(var l=0;l<n.size;l++){var c=s.indexToLoc(l),f=c.map(function(h,d){return h+o[d]});u.set.apply(u,[s.get.apply(s,c)].concat(f))}return u.toTensor()},e.prototype.transpose=function(n,r){me(n,"transpose");for(var i=new Array(n.rank),a=0;a<i.length;a++)i[a]=n.shape[r[a]];var o=this.readSync(n.dataId),s=Ye(i,n.dtype),u=this.bufferSync(n);for(a=0;a<n.size;++a){for(var l=u.indexToLoc(a),c=new Array(l.length),f=0;f<c.length;f++)c[f]=l[r[f]];var h=s.locToIndex(c);s.values[h]=o[a]}return s.toTensor()},e.prototype.gather=function(n,r,i){me([n,r],"gather");var a=n.shape.slice(),o=this.readSync(r.dataId);a[i]=o.length;for(var s=Ye(a,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l),f=c.slice();f[i]=o[c[i]];var h=u.locToIndex(f);s.values[l]=u.values[h]}return s.toTensor()},e.prototype.batchToSpaceND=function(n,r,i){me([n],"batchToSpaceND");var a=r.reduce(function(f,h){return f*h}),o=up(n.shape,r,a),s=lp(o.length,r.length),u=cp(n.shape,r,a),l=ZT(i,r.length),c=ek(u,i,r.length);return n.reshape(o).transpose(s).reshape(u).slice(l,c)},e.prototype.spaceToBatchND=function(n,r,i){me([n],"spaceToBatchND");var a=r.reduce(function(h,d){return h*d}),o=[[0,0]];o.push.apply(o,i);for(var s=1+r.length;s<n.shape.length;++s)o.push([0,0]);var u=n.pad(o),l=up(u.shape,r,a,!1),c=lp(l.length,r.length,!1),f=cp(u.shape,r,a,!1);return u.reshape(l).transpose(c).reshape(f)},e.prototype.pool=function(n,r,i){me(n,"pool");for(var a=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,d=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(n.dataId),p=Ye(r.outShape,n.dtype),m=p.values,g=r.outShape[1]*r.outShape[2]*r.outShape[3],x=r.outShape[2]*r.outShape[3],y=r.outShape[3],w=0;w<r.batchSize;++w)for(var _=w*g,b=w*n.strides[0],E=0;E<r.inChannels;++E)for(var S=0;S<r.outHeight;++S)for(var C=S*a-f,T=Math.max(0,C),A=Math.min(r.inHeight,l+C),I=_+S*x,V=0;V<r.outWidth;++V){for(var J=V*o-h,K=Math.max(0,J),ae=Math.min(r.inWidth,c+J),ie=d,G=0,Q=0,te=T;te<A;te+=s){for(var pe=b+te*n.strides[1],P=K;P<ae;P+=u){var j=v[pe+P*n.strides[2]+E];i==="max"&&j>ie?ie=j:i==="avg"&&(G+=j,Q++)}if(isNaN(ie))break}m[I+V*y+E]=i==="avg"?G/Q:ie}return p.toTensor()},e.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},e.prototype.maxPoolPositions=function(n,r){for(var i=Ye(r.outShape,"int32"),a=r.strideHeight,o=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,d=this.bufferSync(n),v=0;v<r.batchSize;++v)for(var p=0;p<r.inChannels;++p)for(var m=0;m<r.outHeight;++m){for(var g=m*a-f,x=g;x<0;)x+=s;for(var y=Math.min(r.inHeight,l+g),w=0;w<r.outWidth;++w){for(var _=w*o-h,b=_;b<0;)b+=u;for(var E=Math.min(r.inWidth,c+_),S=Number.NEGATIVE_INFINITY,C=-1,T=x;T<y;T+=s)for(var A=T-g,I=b;I<E;I+=u){var V=I-_,J=d.get(v,T,I,p);J>S&&(S=J,C=A*c+V)}i.set(C,v,m,w,p)}}return i.toTensor()},e.prototype.maxPoolBackprop=function(n,r,i,a){me([r,i],"maxPoolBackprop");for(var o=this.maxPoolPositions(r,a),s=a.strideHeight,u=a.strideWidth,l=a.dilationHeight,c=a.dilationWidth,f=a.effectiveFilterHeight,h=a.effectiveFilterWidth,d=h-1-a.padInfo.left,v=f-1-a.padInfo.top,p=Ye(r.shape,"float32"),m=this.bufferSync(o),g=this.bufferSync(n),x=0;x<a.batchSize;++x)for(var y=0;y<a.inChannels;++y)for(var w=0;w<a.inHeight;++w)for(var _=0;_<a.inWidth;++_){for(var b=w-v,E=_-d,S=0,C=0;C<f;C+=l){var T=(b+C)/s;if(!(T<0||T>=a.outHeight||Math.floor(T)!==T))for(var A=0;A<h;A+=c){var I=(E+A)/u;if(!(I<0||I>=a.outWidth||Math.floor(I)!==I)){var V=f*h-1-m.get(x,T,I,y)===C*h+A?1:0;V!==0&&(S+=g.get(x,T,I,y)*V)}}}p.set(S,x,w,_,y)}return p.toTensor()},e.prototype.avgPoolBackprop=function(n,r,i){me([n,r],"avgPoolBackprop");for(var a=i.strideHeight,o=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dilationHeight,c=i.dilationWidth,f=i.effectiveFilterHeight,h=i.effectiveFilterWidth,d=h-1-i.padInfo.left,v=f-1-i.padInfo.top,p=Ye(r.shape,"float32"),m=1/(s*u),g=this.bufferSync(n),x=0;x<i.batchSize;++x)for(var y=0;y<i.inChannels;++y)for(var w=0;w<i.inHeight;++w)for(var _=0;_<i.inWidth;++_){for(var b=w-v,E=_-d,S=0,C=0;C<f;C+=l){var T=(b+C)/a;if(!(T<0||T>=i.outHeight||Math.floor(T)!==T))for(var A=0;A<h;A+=c){var I=(E+A)/o;I<0||I>=i.outWidth||Math.floor(I)!==I||(S+=g.get(x,T,I,y))}}p.set(S*m,x,w,_,y)}return p.toTensor()},e.prototype.pool3d=function(n,r,i){me(n,"pool3d");for(var a=r.strideDepth,o=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,v=r.padInfo.front,p=r.padInfo.top,m=r.padInfo.left,g=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=this.readSync(n.dataId),y=Ye(r.outShape,n.dtype),w=y.values,_=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],b=r.outShape[2]*r.outShape[3]*r.outShape[4],E=r.outShape[3]*r.outShape[4],S=r.outShape[4],C=0;C<r.batchSize;++C)for(var T=C*_,A=C*n.strides[0],I=0;I<r.inChannels;++I)for(var V=0;V<r.outDepth;++V){for(var J=V*a-v,K=J;K<0;)K+=u;for(var ae=Math.min(r.inDepth,f+J),ie=T+V*b,G=0;G<r.outHeight;++G){for(var Q=G*o-p,te=Q;te<0;)te+=l;for(var pe=Math.min(r.inHeight,h+Q),P=ie+G*E,j=0;j<r.outWidth;++j){for(var U=j*s-m,z=U;z<0;)z+=c;for(var Z=Math.min(r.inWidth,d+U),xe=P+j*S,we=g,ee=0,de=0,Fe=K;Fe<ae;Fe+=u){for(var Re=A+Fe*n.strides[1],He=te;He<pe;He+=l){for(var Ve=Re+He*n.strides[2],Me=z;Me<Z;Me+=c){var $e=x[Ve+Me*n.strides[3]+I];if(i==="max"&&$e>we?we=$e:i==="avg"&&(ee+=$e,de++),isNaN(we))break}if(isNaN(we))break}if(isNaN(we))break}w[xe+I]=i==="avg"?ee/de:we}}}return y.toTensor()},e.prototype.avgPool3d=function(n,r){return me(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(n,r,i){me([n,r],"avgPool3dBackprop");for(var a=i.strideDepth,o=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,f=i.dilationDepth,h=i.dilationHeight,d=i.dilationWidth,v=i.effectiveFilterDepth,p=i.effectiveFilterHeight,m=i.effectiveFilterWidth,g=v-1-i.padInfo.front,x=m-1-i.padInfo.left,y=p-1-i.padInfo.top,w=Ye(r.shape,"float32"),_=1/(u*l*c),b=this.bufferSync(n),E=0;E<i.batchSize;++E)for(var S=0;S<i.inChannels;++S)for(var C=0;C<i.inDepth;++C)for(var T=0;T<i.inHeight;++T)for(var A=0;A<i.inWidth;++A){for(var I=C-g,V=T-y,J=A-x,K=0,ae=0;ae<v;ae+=f){var ie=(I+ae)/a;if(!(ie<0||ie>=i.outDepth||Math.floor(ie)!==ie))for(var G=0;G<p;G+=h){var Q=(V+G)/o;if(!(Q<0||Q>=i.outHeight||Math.floor(Q)!==Q))for(var te=0;te<m;te+=d){var pe=(J+te)/s;pe<0||pe>=i.outWidth||Math.floor(pe)!==pe||(K+=b.get(E,ie,Q,pe,S))}}}w.set(K*_,E,C,T,A,S)}return w.toTensor()},e.prototype.maxPool3d=function(n,r){return me(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(n,r){for(var i=Ye(r.outShape,"int32"),a=r.strideDepth,o=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,v=r.padInfo.front,p=r.padInfo.top,m=r.padInfo.left,g=this.bufferSync(n),x=0;x<r.batchSize;++x)for(var y=0;y<r.inChannels;++y)for(var w=0;w<r.outDepth;++w){for(var _=w*a-v,b=_;b<0;)b+=u;for(var E=Math.min(r.inDepth,f+_),S=0;S<r.outHeight;++S){for(var C=S*o-p,T=C;T<0;)T+=l;for(var A=Math.min(r.inHeight,h+C),I=0;I<r.outWidth;++I){for(var V=I*s-m,J=V;J<0;)J+=c;for(var K=Math.min(r.inWidth,d+V),ae=Number.NEGATIVE_INFINITY,ie=-1,G=b;G<E;G+=u)for(var Q=G-_,te=T;te<A;te+=l)for(var pe=te-C,P=J;P<K;P+=c){var j=P-V,U=g.get(x,G,te,P,y);U>=ae&&(ae=U,ie=Q*h*d+pe*h+j)}i.set(ie,x,w,S,I,y)}}}return i.toTensor()},e.prototype.maxPool3dBackprop=function(n,r,i,a){me([r,i],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(r,a),s=a.strideDepth,u=a.strideHeight,l=a.strideWidth,c=a.dilationDepth,f=a.dilationHeight,h=a.dilationWidth,d=a.effectiveFilterDepth,v=a.effectiveFilterHeight,p=a.effectiveFilterWidth,m=d-1-a.padInfo.front,g=p-1-a.padInfo.left,x=v-1-a.padInfo.top,y=Ye(r.shape,"float32"),w=this.bufferSync(o),_=this.bufferSync(n),b=0;b<a.batchSize;++b)for(var E=0;E<a.inChannels;++E)for(var S=0;S<a.inDepth;++S)for(var C=0;C<a.inHeight;++C)for(var T=0;T<a.inWidth;++T){for(var A=S-m,I=C-x,V=T-g,J=0,K=0;K<d;K+=c){var ae=(A+K)/s;if(!(ae<0||ae>=a.outDepth||Math.floor(ae)!==ae))for(var ie=0;ie<v;ie+=f){var G=(I+ie)/u;if(!(G<0||G>=a.outHeight||Math.floor(G)!==G))for(var Q=0;Q<p;Q+=h){var te=(V+Q)/l;if(!(te<0||te>=a.outWidth||Math.floor(te)!==te)){var pe=d*v*p-1-w.get(b,ae,G,te,E)===K*v*p+ie*p+Q?1:0;pe!==0&&(J+=_.get(b,ae,G,te,E)*pe)}}}}y.set(J,b,S,C,T,E)}return y.toTensor()},e.prototype.cast=function(n,r){return uk(n,r,this)},e.prototype.reshape=function(n,r){return sg(n,r)},e.prototype.avgPool=function(n,r){return me(n,"avgPool"),this.pool(n,r,"avg").toFloat()},e.prototype.resizeBilinear=function(n,r,i,a){me(n,"resizeBilinear");for(var o=n.shape,s=o[0],u=o[1],l=o[2],c=o[3],f=this.readSync(n.dataId),h=new Float32Array(Be([s,r,i,c])),d=[a&&r>1?u-1:u,a&&i>1?l-1:l],v=[a&&r>1?r-1:r,a&&i>1?i-1:i],p=0,m=d[0]/v[0],g=d[1]/v[1],x=0;x<s;x++)for(var y=0;y<r;y++)for(var w=m*y,_=Math.floor(w),b=w-_,E=Math.min(u-1,Math.ceil(w)),S=x*n.strides[0]+_*n.strides[1],C=x*n.strides[0]+E*n.strides[1],T=0;T<i;T++)for(var A=g*T,I=Math.floor(A),V=A-I,J=Math.min(l-1,Math.ceil(A)),K=S+I*n.strides[2],ae=C+I*n.strides[2],ie=S+J*n.strides[2],G=C+J*n.strides[2],Q=0;Q<c;Q++){var te=f[K+Q],pe=f[ae+Q],P=te+(f[ie+Q]-te)*V,j=P+(pe+(f[G+Q]-pe)*V-P)*b;h[p++]=j}return Un(h,[s,r,i,c])},e.prototype.resizeBilinearBackprop=function(n,r,i){me([n,r],"resizeBilinearBackprop");for(var a=r.shape,o=a[0],s=a[1],u=a[2],l=a[3],c=n.shape,f=c[1],h=c[2],d=new Float32Array(o*s*u*l),v=[i&&f>1?s-1:s,i&&h>1?u-1:u],p=[i&&f>1?f-1:f,i&&h>1?h-1:h],m=v[0]/p[0],g=v[1]/p[1],x=this.readSync(n.dataId),y=0,w=0;w<o;w++)for(var _=w*r.strides[0],b=0;b<f;b++)for(var E=b*m,S=Math.floor(E),C=Math.min(Math.ceil(E),s-1),T=_+S*r.strides[1],A=_+C*r.strides[1],I=E-S,V=1-I,J=0;J<h;J++)for(var K=J*g,ae=Math.floor(K),ie=Math.min(Math.ceil(K),u-1),G=K-ae,Q=1-G,te=T+ae*r.strides[2],pe=T+ie*r.strides[2],P=A+ae*r.strides[2],j=A+ie*r.strides[2],U=V*Q,z=V*G,Z=I*Q,xe=I*G,we=0;we<l;we++){var ee=x[y++];d[te+we]+=ee*U,d[pe+we]+=ee*z,d[P+we]+=ee*Z,d[j+we]+=ee*xe}return br(d,[o,u,s,l],r.dtype)},e.prototype.resizeNearestNeighbor=function(n,r,i,a){me(n,"resizeNearestNeighbor");for(var o=n.shape,s=o[0],u=o[1],l=o[2],c=o[3],f=this.readSync(n.dataId),h=new Float32Array(s*r*i*c),d=[a&&r>1?u-1:u,a&&i>1?l-1:l],v=[a&&r>1?r-1:r,a&&i>1?i-1:i],p=d[0]/v[0],m=d[1]/v[1],g=0,x=0;x<s;x++)for(var y=x*n.strides[0],w=0;w<r;w++)for(var _=p*w,b=y+Math.min(u-1,a?Math.round(_):Math.floor(_))*n.strides[1],E=0;E<i;E++)for(var S=m*E,C=b+Math.min(l-1,a?Math.round(S):Math.floor(S))*n.strides[2],T=0;T<c;T++){var A=f[C+T];h[g++]=A}return Un(h,[s,r,i,c],n.dtype)},e.prototype.resizeNearestNeighborBackprop=function(n,r,i){me([n,r],"resizeNearestNeighborBackprop");for(var a=r.shape,o=a[0],s=a[1],u=a[2],l=a[3],c=n.shape,f=c[1],h=c[2],d=new Float32Array(o*s*u*l),v=this.readSync(n.dataId),p=[i&&f>1?s-1:s,i&&h>1?u-1:u],m=[i&&f>1?f-1:f,i&&h>1?h-1:h],g=p[0]/m[0],x=p[1]/m[1],y=1/g,w=1/x,_=2*Math.ceil(y)+2,b=2*Math.ceil(w)+2,E=0;E<o;E++)for(var S=E*r.strides[0],C=0;C<s;C++)for(var T=S+C*r.strides[1],A=Math.floor(C*y),I=Math.floor(A-_/2),V=0;V<u;V++)for(var J=T+V*r.strides[2],K=Math.floor(V*w),ae=Math.floor(K-b/2),ie=0;ie<l;ie++){for(var G=0,Q=0;Q<_;Q++){var te=Q+I;if(!(te<0||te>=f)){var pe=S+te*n.strides[1],P=te*g;if(C===Math.min(s-1,i?Math.round(P):Math.floor(P)))for(var j=0;j<b;j++){var U=j+ae;if(!(U<0||U>=h)){var z=pe+U*n.strides[2],Z=U*x;V===Math.min(u-1,i?Math.round(Z):Math.floor(Z))&&(G+=v[z+ie])}}}}d[J+ie]=G}return br(d,r.shape,r.dtype)},e.prototype.batchNormalization=function(n,r,i,a,o,s){me([n,r,i,o,s],"batchNorm");for(var u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=this.readSync(i.dataId),f=o?this.readSync(o.dataId):new Float32Array([1]),h=s?this.readSync(s.dataId):new Float32Array([0]),d=new Float32Array(u.length),v=h.length,p=f.length,m=c.length,g=l.length,x=0,y=0,w=0,_=0,b=0;b<u.length;++b)d[b]=h[x++]+(u[b]-l[y++])*f[w++]/Math.sqrt(c[_++]+a),x>=v&&(x=0),y>=g&&(y=0),w>=p&&(w=0),_>=m&&(_=0);return br(d,n.shape)},e.prototype.localResponseNormalization4D=function(n,r,i,a,o){me(n,"localResponseNormalization4D");var s=n.shape[3],u=s-1,l=this.readSync(n.dataId),c=n.size,f=new Float32Array(c);function h(m){for(var g=m%s,x=m-g+Math.max(0,g-r),y=m-g+Math.min(g+r,u),w=0;x<=y;x++){var _=l[x];w+=_*_}return w}for(var d=0;d<c;d++){var v=h(d),p=l[d]*Math.pow(i+a*v,-o);f[d]=p}return br(f,n.shape)},e.prototype.LRNGrad=function(n,r,i,a,o,s,u){me(n,"LRNGrad");for(var l=n.shape[3],c=this.readSync(n.dataId),f=this.readSync(r.dataId),h=this.readSync(i.dataId),d=new Float32Array(n.size),v=n.size,p=0;p<v;p++){for(var m=p%l,g=p-m+Math.max(0,m-a),x=p-m+Math.min(l,m+a+1),y=0,w=g;w<x;w++)y+=Math.pow(f[w],2);for(y=s*y+o,w=g;w<x;w++){var _=-2*s*u*f[w]*h[p]/y;p===w&&(_+=Math.pow(y,-u)),_*=c[p],d[w]+=_}}return br(d,n.shape)},e.prototype.multinomial=function(n,r,i,a){me(n,"multinomial");for(var o=r?n:Ja(n),s=o.shape[0],u=o.shape[1],l=At([s,i],"int32"),c=this.readSync(l.dataId),f=this.readSync(o.dataId),h=0;h<s;++h){var d=h*u,v=new Float32Array(u-1);v[0]=f[d];for(var p=1;p<v.length;++p)v[p]=v[p-1]+f[d+p];for(var m=e0(a.toString()),g=h*i,x=0;x<i;++x){var y=m();c[g+x]=v.length;for(var w=0;w<v.length;w++)if(y<v[w]){c[g+x]=w;break}}}return l},e.prototype.oneHot=function(n,r,i,a){me(n,"oneHot");var o=new Float32Array(n.size*r);o.fill(a);for(var s=this.readSync(n.dataId),u=0;u<n.size;++u)s[u]>=0&&s[u]<r&&(o[u*r+s[u]]=i);return No(o,[n.size,r],"int32")},e.prototype.nonMaxSuppression=function(n,r,i,a,o){return me(n,"nonMaxSuppression"),J1(this.readSync(n.dataId),this.readSync(r.dataId),i,a,o)},e.prototype.fft=function(n){return this.fftBatch(n,!1)},e.prototype.ifft=function(n){return this.fftBatch(n,!0)},e.prototype.fftBatch=function(n,r){for(var i=n.shape[0],a=n.shape[1],o=Ye(n.shape,"float32"),s=Ye(n.shape,"float32"),u=di(n).as2D(i,a),l=ia(n).as2D(i,a),c=0;c<i;c++)for(var f=u.slice([c,0],[1,a]),h=l.slice([c,0],[1,a]),d=Wn(f,h),v=this.readSync(this.fftImpl(d,r).dataId),p=0;p<a;p++){var m=Cw(v,p);o.values[c*a+p]=m.real,s.values[c*a+p]=m.imag}return Wn(o.toTensor(),s.toTensor()).as2D(i,a)},e.prototype.fftImpl=function(n,r){var i=n.as1D(),a=i.size;if(this.isExponentOf2(a)){var o=this.fftRadix2(i,a,r).as2D(n.shape[0],n.shape[1]);return r&&(o=Wn(di(o).div(Ie(a)),ia(o).div(Ie(a)))),o}var s=this.readSync(n.dataId),u=function(l){for(var c=new Float32Array(l.length/2),f=new Float32Array(l.length/2),h=0;h<l.length;h+=2)c[h/2]=l[h],f[h/2]=l[h+1];return{real:c,imag:f}}(this.fourierTransformByMatmul(s,a,r));return Wn(u.real,u.imag).as2D(n.shape[0],n.shape[1])},e.prototype.isExponentOf2=function(n){return(n&n-1)==0},e.prototype.fftRadix2=function(n,r,i){if(r===1)return n;var a=this.readSync(n.dataId),o=r/2,s=function(g){for(var x=Math.ceil(g.length/4),y=new Float32Array(x),w=new Float32Array(x),_=0;_<g.length;_+=4)y[Math.floor(_/4)]=g[_],w[Math.floor(_/4)]=g[_+1];return{real:y,imag:w}}(a),u=Wn(s.real,s.imag).as1D(),l=function(g){for(var x=Math.floor(g.length/4),y=new Float32Array(x),w=new Float32Array(x),_=2;_<g.length;_+=4)y[Math.floor(_/4)]=g[_],w[Math.floor(_/4)]=g[_+1];return{real:y,imag:w}}(a),c=Wn(l.real,l.imag).as1D();u=this.fftRadix2(u,o,i),c=this.fftRadix2(c,o,i);var f=function(g,x){for(var y=new Float32Array(g/2),w=new Float32Array(g/2),_=0;_<Math.ceil(g/2);_++){var b=(x?2:-2)*Math.PI*(_/g);y[_]=Math.cos(b),w[_]=Math.sin(b)}return{real:y,imag:w}}(r,i),h=Wn(f.real,f.imag).mul(c),d=u.add(h),v=u.sub(h),p=di(d).concat(di(v)),m=ia(d).concat(ia(v));return Wn(p,m).as1D()},e.prototype.fourierTransformByMatmul=function(n,r,i){for(var a=new Float32Array(2*r),o=0;o<r;o++){for(var s=0,u=0,l=0;l<r;l++){var c=K6(o*l,r,i),f=Cw(n,l);s+=f.real*c.real-f.imag*c.imag,u+=f.real*c.imag+f.imag*c.real}i&&(s/=r,u/=r),X6(a,s,u,o)}return a},e.prototype.depthToSpace=function(n,r,i){M(i==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),M(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var a=n.shape[0],o=n.shape[1],s=n.shape[2],u=n.shape[3],l=o*r,c=s*r,f=u/(r*r),h=this.readSync(n.dataId),d=new Float32Array(a*l*c*f),v=0,p=0;p<a;++p)for(var m=0;m<l;++m)for(var g=Math.floor(m/r),x=m%r,y=0;y<c;++y)for(var w=Math.floor(y/r),_=(x*r+y%r)*f,b=0;b<f;++b){var E=b+_+u*(w+s*(g+o*p));d[v++]=h[E]}return br(d,[a,l,c,f])},e.prototype.broadcastedBinaryOp=function(n,r,i,a){var o=at(n.shape,r.shape),s=Ye(o,i),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=_o(n.shape,o),f=_o(r.shape,o),h=s.values;if(c.length+f.length===0)for(var d=0;d<h.length;++d)h[d]=a(u[d%u.length],l[d%l.length]);else{var v=this.bufferSync(n),p=this.bufferSync(r),m=function(g){var x=s.indexToLoc(g),y=x.slice(-n.rank);c.forEach(function(E){return y[E]=0});var w=v.locToIndex(y),_=x.slice(-r.rank);f.forEach(function(E){return _[E]=0});var b=p.locToIndex(_);h[g]=a(u[w],l[b])};for(d=0;d<h.length;++d)m(d)}return s.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(n,r,i){var a=at(n.shape,r.shape),o=Ye(a,"float32"),s=Ye(a,"float32"),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=_o(n.shape,a),f=_o(r.shape,a),h=o.values,d=s.values;if(c.length+f.length===0)for(var v=0;v<h.length;v++){var p=v%u.length,m=v%l.length,g=i(u[2*p],u[2*p+1],l[2*m],l[2*m+1]);h[v]=g.real,d[v]=g.imag}else{var x=this.bufferSync(this.data.get(n.dataId).complexTensors.real),y=this.bufferSync(this.data.get(r.dataId).complexTensors.real),w=function(_){var b=o.indexToLoc(_),E=b.slice(-n.rank);c.forEach(function(I){return E[I]=0});var S=x.locToIndex(E),C=b.slice(-r.rank);f.forEach(function(I){return C[I]=0});var T=y.locToIndex(C),A=i(u[2*S],u[2*S+1],l[2*T],l[2*T+1]);h[_]=A.real,d[_]=A.imag};for(v=0;v<h.length;v++)w(v)}return this.complex(o.toTensor(),s.toTensor())},e.prototype.split=function(n,r,i){return fk(n,r,i)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(n,r,i,a,o,s){for(var u=n.shape,l=u[0],c=u[1],f=u[2],h=u[3],d=r.shape[0],v=a[0],p=a[1],m=Ye([d,v,p,h],"float32"),g=this.readSync(r.dataId),x=this.readSync(i.dataId),y=this.readSync(n.dataId),w=n.strides,_=m.strides,b=0;b<d;b++){var E=4*b,S=g[E],C=g[E+1],T=g[E+2],A=g[E+3],I=x[b];if(!(I>=l))for(var V=v>1?(T-S)*(c-1)/(v-1):0,J=p>1?(A-C)*(f-1)/(p-1):0,K=0;K<v;K++){var ae=v>1?S*(c-1)+K*V:.5*(S+T)*(c-1);if(ae<0||ae>c-1)for(var ie=0;ie<p;ie++)for(var G=0;G<h;G++){var Q=G+ie*_[2]+K*_[1]+b*_[0];m.values[Q]=s}else if(o==="bilinear"){var te=Math.floor(ae),pe=Math.ceil(ae),P=ae-te;for(ie=0;ie<p;ie++)if((Fe=p>1?C*(f-1)+ie*J:.5*(C+A)*(f-1))<0||Fe>f-1)for(G=0;G<h;G++)Q=G+ie*_[2]+K*_[1]+b*_[0],m.values[Q]=s;else{var j=Math.floor(Fe),U=Math.ceil(Fe),z=Fe-j;for(G=0;G<h;G++){var Z=y[Q=G+j*w[2]+te*w[1]+I*w[0]],xe=y[Q=G+U*w[2]+te*w[1]+I*w[0]],we=y[Q=G+j*w[2]+pe*w[1]+I*w[0]],ee=Z+(xe-Z)*z,de=we+(y[Q=G+U*w[2]+pe*w[1]+I*w[0]]-we)*z;Q=G+ie*_[2]+K*_[1]+b*_[0],m.values[Q]=ee+(de-ee)*P}}}else for(ie=0;ie<p;++ie){var Fe;if((Fe=p>1?C*(f-1)+ie*J:.5*(C+A)*(f-1))<0||Fe>f-1)for(G=0;G<h;G++)Q=G+ie*_[2]+K*_[1]+b*_[0],m.values[Q]=s;else{var Re=Math.round(Fe),He=Math.round(ae);for(G=0;G<h;G++){var Ve=G+Re*w[2]+He*w[1]+I*w[0],Me=G+ie*_[2]+K*_[1]+b*_[0];m.values[Me]=y[Ve]}}}}}return m.toTensor()},e.prototype.sparseToDense=function(n,r,i,a){var o=fp(0,n,i),s=o.sliceRank,u=o.numUpdates,l=o.sliceSize,c=o.strides,f=o.outputSize;return this.scatter(n,r,i,f,l,u,s,c,a,!1)},e.prototype.gatherND=function(n,r){var i=r.shape,a=i[i.length-1],o=tk(n,r),s=o[0],u=o[1],l=o[2],c=o[3];if(u===0)return Un([],s,n.dtype);for(var f=new Jc([u,l],n.dtype),h=this.readSync(r.dataId),d=this.readSync(n.dataId),v=0;v<u;v++){for(var p=[],m=0,g=0;g<a;g++){var x=h[v*a+g];m+=x*c[g],p.push(x)}if(m<0||m>=n.size/l)throw new Error("Invalid indices: "+p+" does not index into "+n.shape);for(var y=0;y<l;y++)f.values[v*l+y]=d[m*l+y]}return f.toTensor().reshape(s)},e.prototype.scatterND=function(n,r,i){var a=fp(0,n,i),o=a.sliceRank,s=a.numUpdates,u=a.sliceSize,l=a.strides,c=a.outputSize,f=Ie(0);return this.scatter(n,r,i,c,u,s,o,l,f,!0)},e.prototype.fill=function(n,r,i){var a=tp(i=i||Sf(r),Be(n));return a.fill(r),X.makeTensor(a,n,i,this)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){var r=tp(n.dtype,Be(n.shape));return this.makeOutput(r,n.shape,n.dtype)},e.prototype.linspace=function(n,r,i){return lk(n,r,i)},e.prototype.scatter=function(n,r,i,a,o,s,u,l,c,f){var h=[a/o,o],d=this.readSync(n.dataId),v=this.readSync(r.dataId);if(a===0)return Un([],i,r.dtype);var p=new Jc(h,r.dtype);p.values.fill(this.readSync(c.dataId)[0]);for(var m=0;m<s;m++){for(var g=[],x=0,y=0;y<u;y++){var w=d[m*u+y];g.push(w),x+=w*l[y]}if(x<0||x>=a/o)throw new Error("Invalid indices: "+g+" does not index into "+i);for(var _=0;_<o;_++)f?p.values[x*o+_]+=v[m*o+_]:p.values[x*o+_]=r.rank===0?v[0]:v[m*o+_]}return p.toTensor().reshape(i)},e}(ok);X.registerBackend("cpu",function(){return new pU},1);for(var kv=0,Xw=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e,a=i.boxes,o=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,h=n;me(a,"NonMaxSuppressionWithScore");var d=Z1(h.data.get(a.dataId).values,h.data.get(o.dataId).values,u,l,c,f);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,i=n;me(r,"square");for(var a=i.data.get(r.dataId).values,o=new Float32Array(a.length),s=0;s<a.length;++s){var u=a[s];o[s]=u*u}return{dataId:i.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:tf,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,i=r.a,a=r.b,o=n;me([i,a],tf);var s=o.data.get(i.dataId).values,u=o.data.get(a.dataId).values,l=function(h,d,v,p,m,g){var x=at(h,d),y=x.length,w=ca(x),_=Qc(m,Be(x)),b=h.length,E=d.length,S=ca(h),C=ca(d),T=_o(h,x),A=_o(d,x);if(T.length+A.length===0)for(var I=0;I<_.length;++I)_[I]=g(v[I%v.length],p[I%p.length]);else{var V=function(J){var K=SB(J,y,w),ae=K.slice(-b);T.forEach(function(te){return ae[te]=0});var ie=mw(ae,b,S),G=K.slice(-E);A.forEach(function(te){return G[te]=0});var Q=mw(G,E,C);_[J]=g(v[ie],p[Q])};for(I=0;I<_.length;++I)V(I)}return[_,x]}(i.shape,a.shape,s,u,i.dtype,function(h,d){var v=h-d;return v*v}),c=l[0],f=l[1];return{dataId:o.write(c,f,i.dtype),shape:f,dtype:i.dtype}}}];kv<Xw.length;kv++)PT(Xw[kv]);var fu,vU=function(t){this.variableNames=["A"];var e=er(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},mU=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=er(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `};for(var Av=0,Kw=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.pixels,a=r.numChannels,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,u=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],l=u[0],c=u[1],f=[c,l],h=[c,l,a];(s||o)&&(fu==null&&(fu=document.createElement("canvas").getContext("2d")),fu.canvas.width=l,fu.canvas.height=c,fu.drawImage(i,0,0,l,c),i=fu.canvas);var d=n.makeTensorInfo(f,"int32");n.texData.get(d.dataId).usage=qr.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),i);var v=fe().getBool("WEBGL_PACK")?new mU(h):new vU(h),p=n.runWebGLProgram(v,[d],"int32");return n.disposeData(d.dataId),p}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs;ap("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=e,a=i.boxes,o=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,h=n,d=Z1(h.readSync(a.dataId),h.readSync(o.dataId),u,l,c,f);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,i=n,a=new et(r.shape,"return x * x;");return i.runWebGLProgram(a,[r],r.dtype)}},{kernelName:tf,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,i=r.a,a=r.b,o=n,s=fe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Aa("return (a - b) * (a - b);",i.shape,a.shape):new Ht("return (a - b) * (a - b);",i.shape,a.shape);return o.compileAndRun(s,[i,a])}}];Av<Kw.length;Av++)PT(Kw[Av]);for(var Iv=0,qw=[{kernelName:"Square",gradFunc:function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().mul(2))}}}},{kernelName:tf,gradFunc:function(t,e){var n=e[0],r=e[1],i=Ie(2);return{a:function(){return nr(t,nr(i,yn(n,r)))},b:function(){return nr(t,nr(i,yn(r,n)))}}}}];Iv<qw.length;Iv++)dB(qw[Iv]);var gU=function(){function t(){}return t.prototype.fetch=function(e,n){return fetch(e,n)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return new TextDecoder(n).decode(e)},t}();fe().get("IS_BROWSER")&&fe().setPlatform("browser",new gU);var Rv,xU=function(){return require("node-fetch")},yU=function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(e,n){return fe().global.fetch!=null?fe().global.fetch(e,n):(Rv==null&&(Rv=xU()),Rv(e,n))},t.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)},t}();fe().get("IS_NODE")&&fe().setPlatform("node",new yU);var cg={float32:4,int32:4,uint16:2,uint8:1,bool:1},xp=4;function r4(t,e){for(var n={},r=0,i=function(s){var u=s.name,l=s.dtype,c=s.shape,f=Be(c),h=void 0;if("quantization"in s){var d=s.quantization;if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+d.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var v=cg[d.dtype],p=t.slice(r,r+f*v),m=d.dtype==="uint8"?new Uint8Array(p):new Uint16Array(p);if(l==="float32")h=Float32Array.from(m,function(b){return b*d.scale+d.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);h=Int32Array.from(m,function(b){return Math.round(b*d.scale+d.min)})}r+=f*v}else if(l==="string"){var g=Be(s.shape);h=[];for(var x=0;x<g;x++){var y=new Uint32Array(t.slice(r,r+xp))[0];r+=xp;var w=new Uint8Array(t.slice(r,r+y));h.push(w),r+=y}}else{var _=cg[l];if(p=t.slice(r,r+f*_),l==="float32")h=new Float32Array(p);else if(l==="int32")h=new Int32Array(p);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);h=new Uint8Array(p)}r+=f*_}n[u]=Un(h,c,l)},a=0,o=e;a<o.length;a++)i(o[a]);return n}function wU(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach(function(a){if(e+=a.byteLength,n.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+a.constructor.name)});var r=new Uint8Array(e),i=0;return n.forEach(function(a){r.set(new Uint8Array(a.buffer),i),i+=a.byteLength}),r.buffer}var fg=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function Yw(t){return fg?Buffer.byteLength(t):new Blob([t]).size}function xx(t){var e=0;t.forEach(function(i){e+=i.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(i){n.set(new Uint8Array(i),r),r+=i.byteLength}),n.buffer}function Qw(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function Ff(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:Yw(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:Yw(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var Yr=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var i=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(a){var o=a(e,r);o!==null&&i.push(o)}),i},t}(),Gu="://",Mo=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(e,n){M(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(Gu)&&(e=e.slice(0,e.indexOf(Gu))),M(e.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();M(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=n},t.getManager=function(e){var n=this.getInstance().managers[e];if(n==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return n},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function ud(t){if(t.indexOf(Gu)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Mo.getSchemes().join(","));return{scheme:t.split(Gu)[0],path:t.split(Gu)[1]}}function Jw(t,e,n){return n===void 0&&(n=!1),Pe(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f;return Ne(this,function(h){switch(h.label){case 0:return M(t!==e,function(){return"Old path and new path are the same: '"+t+"'"}),M((r=Yr.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),M(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),i=r[0],M((a=Yr.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),M(a.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),o=a[0],s=ud(t).scheme,u=ud(t).path,l=s===ud(t).scheme,[4,i.load()];case 1:return c=h.sent(),n&&l?[4,Mo.getManager(s).removeModel(u)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,o.save(c)];case 4:return f=h.sent(),!n||l?[3,6]:[4,Mo.getManager(s).removeModel(u)];case 5:h.sent(),h.label=6;case 6:return[2,f.modelArtifactsInfo]}})})}var bs="models_store",bo="model_info_store";function i4(){if(!fe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function hg(t){var e=t.result;e.createObjectStore(bs,{keyPath:"modelPath"}),e.createObjectStore(bo,{keyPath:"modelPath"})}var Xu=function(){function t(e){if(this.indexedDB=i4(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return t.prototype.save=function(e){return Pe(this,void 0,void 0,function(){return Ne(this,function(n){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},t.prototype.load=function(){return Pe(this,void 0,void 0,function(){return Ne(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(e,n){var r=this;return new Promise(function(i,a){var o=r.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return hg(o)},o.onsuccess=function(){var s=o.result;if(n==null){var u=s.transaction(bs,"readonly"),l=u.objectStore(bs).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),a(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(l.result.modelArtifacts)},l.onerror=function(p){return s.close(),a(l.error)},u.oncomplete=function(){return s.close()}}else{var c,f=Ff(n),h=s.transaction(bo,"readwrite"),d=h.objectStore(bo),v=d.put({modelPath:r.modelPath,modelArtifactsInfo:f});v.onsuccess=function(){var p=(c=s.transaction(bs,"readwrite")).objectStore(bs).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:f});p.onsuccess=function(){return i({modelArtifactsInfo:f})},p.onerror=function(m){var g=(d=h.objectStore(bo)).delete(r.modelPath);g.onsuccess=function(){return s.close(),a(p.error)},g.onerror=function(x){return s.close(),a(p.error)}}},v.onerror=function(p){return s.close(),a(v.error)},h.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},o.onerror=function(s){return a(o.error)}})},t.URL_SCHEME="indexeddb://",t}(),Zw=function(t){return fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Xu.URL_SCHEME)?(e=t.slice(Xu.URL_SCHEME.length),new Xu(e)):null;var e};Yr.registerSaveRouter(Zw),Yr.registerLoadRouter(Zw);var _U=function(){function t(){this.indexedDB=i4()}return t.prototype.listModels=function(){return Pe(this,void 0,void 0,function(){var e=this;return Ne(this,function(n){return[2,new Promise(function(r,i){var a=e.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return hg(a)},a.onsuccess=function(){var o=a.result,s=o.transaction(bo,"readonly"),u=s.objectStore(bo).getAll();u.onsuccess=function(){for(var l={},c=0,f=u.result;c<f.length;c++){var h=f[c];l[h.modelPath]=h.modelArtifactsInfo}r(l)},u.onerror=function(l){return o.close(),i(u.error)},s.oncomplete=function(){return o.close()}},a.onerror=function(o){return i(a.error)}})]})})},t.prototype.removeModel=function(e){return Pe(this,void 0,void 0,function(){var n=this;return Ne(this,function(r){var i;return e=(i=e).startsWith(Xu.URL_SCHEME)?i.slice(Xu.URL_SCHEME.length):i,[2,new Promise(function(a,o){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return hg(s)},s.onsuccess=function(){var u,l=s.result,c=l.transaction(bo,"readwrite"),f=c.objectStore(bo),h=f.get(e);h.onsuccess=function(){if(h.result==null)return l.close(),o(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var d=f.delete(e),v=function(){var p=(u=l.transaction(bs,"readwrite")).objectStore(bs).delete(e);p.onsuccess=function(){return a(h.result.modelArtifactsInfo)},p.onerror=function(m){return o(h.error)}};d.onsuccess=v,d.onerror=function(p){return v(),l.close(),o(h.error)}},h.onerror=function(d){return l.close(),o(h.error)},c.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},s.onerror=function(u){return o(s.error)}})]})})},t}();if(fe().getBool("IS_BROWSER"))try{Mo.registerManager(Xu.URL_SCHEME,new _U)}catch{}var Na="/",yu="tensorflowjs_models",a4="info",bU="model_topology",EU="weight_specs",SU="weight_data",CU="model_metadata";function o4(t){return{info:[yu,t,a4].join(Na),topology:[yu,t,bU].join(Na),weightSpecs:[yu,t,EU].join(Na),weightData:[yu,t,SU].join(Na),modelMetadata:[yu,t,CU].join(Na)}}function TU(t){var e=t.split(Na);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(Na)}var Ku=function(){function t(e){if(!fe().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=o4(this.modelPath)}return t.prototype.save=function(e){return Pe(this,void 0,void 0,function(){var n,r,i;return Ne(this,function(a){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=Ff(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(o){if(fg)return Buffer.from(o).toString("base64");for(var s=new Uint8Array(o),u="",l=0,c=s.length;l<c;l++)u+=String.fromCharCode(s[l]);return btoa(u)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return Pe(this,void 0,void 0,function(){var e,n,r,i,a,o,s;return Ne(this,function(u){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=i,(a=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(a),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,n.userDefinedMetadata=o.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(l){if(fg){var c=Buffer.from(l,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var f=atob(l),h=new Uint8Array(f.length),d=0;d<f.length;++d)h.set([f.charCodeAt(d)],d);return h.buffer}(s),[2,n]})})},t.URL_SCHEME="localstorage://",t}(),e_=function(t){return fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ku.URL_SCHEME)?(e=t.slice(Ku.URL_SCHEME.length),new Ku(e)):null;var e};Yr.registerSaveRouter(e_),Yr.registerLoadRouter(e_);var kU=function(){function t(){M(fe().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),M(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return Pe(this,void 0,void 0,function(){var e,n,r,i,a,o;return Ne(this,function(s){for(e={},n=yu+Na,r=Na+a4,i=0;i<this.LS.length;++i)(a=this.LS.key(i)).startsWith(n)&&a.endsWith(r)&&(o=TU(a),e[o]=JSON.parse(this.LS.getItem(a)));return[2,e]})})},t.prototype.removeModel=function(e){return Pe(this,void 0,void 0,function(){var n,r;return Ne(this,function(i){var a;if(e=(a=e).startsWith(Ku.URL_SCHEME)?a.slice(Ku.URL_SCHEME.length):a,n=o4(e),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},t}();if(fe().getBool("IS_BROWSER"))try{Mo.registerManager(Ku.URL_SCHEME,new kU)}catch{}var AU="model",IU=".json",RU=".weights.bin";function t_(t){return new Promise(function(e){return setTimeout(e)}).then(t)}var Fv=function(){function t(e){if(!fe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),e!=null&&e.length!==0||(e=AU),this.modelTopologyFileName=e+IU,this.weightDataFileName=e+RU}return t.prototype.save=function(e){return Pe(this,void 0,void 0,function(){var n,r,i,a,o,s;return Ne(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},a=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=a,[4,t_(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),e.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,t_(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:Ff(e)}]}})})},t.URL_SCHEME="downloads://",t}(),FU=function(){function t(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return t.prototype.load=function(){return Pe(this,void 0,void 0,function(){var e,n,r=this;return Ne(this,function(i){return e=this.files[0],n=this.files.slice(1),[2,new Promise(function(a,o){var s=new FileReader;s.onload=function(u){var l=JSON.parse(u.target.result),c=l.modelTopology;if(c!=null){n.length===0&&a({modelTopology:c});var f=l.weightsManifest;if(f!=null){var h;try{h=r.checkManifestAndWeightFiles(f,n)}catch(m){return void o(m)}var d=[],v=[],p=[];f.forEach(function(m){m.paths.forEach(function(g){v.push(g),p.push(null)}),d.push.apply(d,m.weights)}),f.forEach(function(m){m.paths.forEach(function(g){var x=new FileReader;x.onload=function(y){var w=y.target.result,_=v.indexOf(g);p[_]=w,p.indexOf(null)===-1&&a({modelTopology:c,weightSpecs:d,weightData:xx(p),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},x.onerror=function(y){return o("Failed to weights data from file of path '"+g+"'.")},x.readAsArrayBuffer(h[g])})})}else o(new Error("weightManifest field is missing from file "+e.name))}else o(new Error("modelTopology field is missing from file "+e.name))},s.onerror=function(u){return o("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(e)})]})})},t.prototype.checkManifestAndWeightFiles=function(e,n){for(var r=[],i=n.map(function(u){return Qw(u.name)}),a={},o=0,s=e;o<s.length;o++)s[o].paths.forEach(function(u){var l=Qw(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),i.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");a[u]=n[i.indexOf(l)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return a},t}();function n_(t,e,n,r){(function(a){M(a!=null&&Array.isArray(a)&&a.length>0,function(){return"promises must be a none empty array"})})(t),function(a,o){M(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+a}),M(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),M(o>=a,function(){return"startFraction must be no more than endFraction, but got startFraction "+a+" and endFraction "+o})}(n=n??0,r=r??1);var i=0;return Promise.all(t.map(function(a){return a.then(function(o){var s=n+ ++i/t.length*(r-n);return e(s),o}),a}))}function s4(t,e){return Pe(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,c;return Ne(this,function(f){switch(f.label){case 0:return e==null&&(e={}),n=e.fetchFunc==null?fe().platform.fetch:e.fetchFunc,r=t.map(function(h){return n(h,e.requestInit,{isBinary:!0})}),i=0,a=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return o=f.sent(),[3,4];case 2:return[4,n_(r,e.onProgress,i,a)];case 3:o=f.sent(),f.label=4;case 4:return s=o.map(function(h){return h.arrayBuffer()}),u=.5,l=1,e.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=f.sent(),[3,8];case 6:return[4,n_(s,e.onProgress,u,l)];case 7:c=f.sent(),f.label=8;case 8:return[2,c]}})})}function r_(t){var e=this;return function(n,r,i){return r===void 0&&(r=""),Pe(e,void 0,void 0,function(){var a,o,s,u,l,c,f,h,d,v;return Ne(this,function(p){switch(p.label){case 0:if(a=n.map(function(){return!1}),o={},s=i!=null?i.map(function(){return!1}):[],u=[],n.forEach(function(m,g){var x=0;m.weights.forEach(function(y){var w="quantization"in y?y.quantization.dtype:y.dtype,_=cg[w]*Be(y.shape),b=function(){a[g]=!0,o[g]==null&&(o[g]=[]),o[g].push({manifestEntry:y,groupOffset:x,sizeBytes:_})};i!=null?i.forEach(function(E,S){E===y.name&&(b(),s[S]=!0)}):b(),u.push(y.name),x+=_})}),!s.every(function(m){return m}))throw l=i.filter(function(m,g){return!s[g]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return c=a.reduce(function(m,g,x){return g&&m.push(x),m},[]),f=[],c.forEach(function(m){n[m].paths.forEach(function(g){var x=r+(r.endsWith("/")?"":"/")+g;f.push(x)})}),[4,t(f)];case 1:return h=p.sent(),d={},v=0,c.forEach(function(m){for(var g=n[m].paths.length,x=0,y=0;y<g;y++)x+=h[v+y].byteLength;for(var w=new ArrayBuffer(x),_=new Uint8Array(w),b=0,E=0;E<g;E++){var S=new Uint8Array(h[v+E]);_.set(S,b),b+=S.byteLength}o[m].forEach(function(C){var T=r4(w.slice(C.groupOffset,C.groupOffset+C.sizeBytes),[C.manifestEntry]);for(var A in T)d[A]=T[A]}),v+=g}),[2,d]}})})}}Yr.registerSaveRouter(function(t){return fe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Fv.URL_SCHEME)?function(e){return e===void 0&&(e="model"),new Fv(e)}(t.slice(Fv.URL_SCHEME.length)):null});var u4=function(){function t(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(M(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=fe().platform.fetch,M(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&M(e.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return t.prototype.save=function(e){return Pe(this,void 0,void 0,function(){var n,r,i,a;return Ne(this,function(o){switch(o.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((a=o.sent()).ok)return[2,{modelArtifactsInfo:Ff(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}})})},t.prototype.load=function(){return Pe(this,void 0,void 0,function(){var e,n,r,i,a,o,s,u,l,c,f,h;return Ne(this,function(d){switch(d.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=d.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");d.label=2;case 2:return d.trys.push([2,4,,5]),[4,e.json()];case 3:return n=d.sent(),[3,5];case 4:throw d.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(i=n.modelTopology,a=n.weightsManifest,o=n.generatedBy,s=n.convertedBy,u=n.format,l=n.userDefinedMetadata,i==null&&a==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return a==null?[3,7]:[4,this.loadWeights(a)];case 6:h=d.sent(),c=h[0],f=h[1],d.label=7;case 7:return[2,{modelTopology:i,weightSpecs:c,weightData:f,userDefinedMetadata:l,generatedBy:o,convertedBy:s,format:u}]}})})},t.prototype.loadWeights=function(e){return Pe(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,c,f,h;return Ne(this,function(d){switch(d.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=function(v){var p=v.lastIndexOf("/"),m=v.lastIndexOf("?"),g=v.substring(0,p),x=m>p?v.substring(m):"";return[g+"/",x]}(n),i=r[0],a=r[1],o=this.weightPathPrefix||i,s=[],u=0,l=e;u<l.length;u++)c=l[u],s.push.apply(s,c.weights);return f=[],e.forEach(function(v){v.paths.forEach(function(p){f.push(o+p+a)})}),[4,s4(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return h=d.sent(),[2,[s,xx(h)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function dg(t){return t.match(u4.URL_SCHEME_REGEX)!=null}var i_=function(t,e){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(n){return dg(n)}):dg(t))?pg(t,{onProgress:e}):null};function pg(t,e){return new u4(t,e)}Yr.registerSaveRouter(i_),Yr.registerLoadRouter(i_);var Dv=function(){function t(e){this.modelArtifacts=e}return t.prototype.load=function(){return Pe(this,void 0,void 0,function(){return Ne(this,function(e){return[2,this.modelArtifacts]})})},t}(),DU=function(){function t(e){this.saveHandler=e}return t.prototype.save=function(e){return Pe(this,void 0,void 0,function(){return Ne(this,function(n){return[2,this.saveHandler(e)]})})},t}(),l4=Object.freeze({browserFiles:function(t){return new FU(t)},browserHTTPRequest:function(t,e){return pg(t,e)},concatenateArrayBuffers:xx,decodeWeights:r4,encodeWeights:function(t,e){return Pe(this,void 0,void 0,function(){var n,r,i,a,o,s=this;return Ne(this,function(u){switch(u.label){case 0:for(n=[],r=[],i=Array.isArray(t)?t.map(function(l){return l.name}):Object.keys(t),a=function(l){var c=i[l],f=Array.isArray(t)?t[l].tensor:t[c];if(f.dtype!=="float32"&&f.dtype!=="int32"&&f.dtype!=="bool"&&f.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+f.dtype);var h={name:c,shape:f.shape,dtype:f.dtype};if(f.dtype==="string"){var d=new Promise(function(v){return Pe(s,void 0,void 0,function(){var p,m,g,x,y,w,_;return Ne(this,function(b){switch(b.label){case 0:return[4,f.bytes()];case 1:for(p=b.sent(),m=p.reduce(function(E,S){return E+S.length},0)+xp*p.length,g=new Uint8Array(m),x=0,y=0;y<p.length;y++)w=p[y],_=new Uint8Array(new Uint32Array([w.length]).buffer),g.set(_,x),x+=xp,g.set(w,x),x+=w.length;return v(g),[2]}})})});r.push(d)}else r.push(f.data());e!=null&&(h.group=e),n.push(h)},o=0;o<i.length;++o)a(o);return[4,Promise.all(r)];case 1:return[2,{data:wU(u.sent()),specs:n}]}})})},fromMemory:function(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new Dv(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Dv({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Dv({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))},getLoadHandlers:function(t,e){return Yr.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:Ff,getSaveHandlers:function(t){return Yr.getSaveHandlers(t)},http:pg,isHTTPScheme:dg,loadWeights:function(t,e,n,r){return e===void 0&&(e=""),Pe(this,void 0,void 0,function(){return Ne(this,function(i){return[2,r_(function(a){return s4(a,{requestInit:r})})(t,e,n)]})})},registerLoadRouter:function(t){return Yr.registerLoadRouter(t)},registerSaveRouter:function(t){return Yr.registerSaveRouter(t)},weightsLoaderFactory:r_,withSaveHandler:function(t){return new DU(t)},copyModel:function(t,e){return Pe(this,void 0,void 0,function(){return Ne(this,function(n){return[2,Jw(t,e,!1)]})})},listModels:function(){return Pe(this,void 0,void 0,function(){var t,e,n,r,i,a,o;return Ne(this,function(s){switch(s.label){case 0:t=Mo.getSchemes(),e={},n=0,r=t,s.label=1;case 1:return n<r.length?(i=r[n],[4,Mo.getManager(i).listModels()]):[3,4];case 2:for(o in a=s.sent())e[i+Gu+o]=a[o];s.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},moveModel:function(t,e){return Pe(this,void 0,void 0,function(){return Ne(this,function(n){return[2,Jw(t,e,!0)]})})},removeModel:function(t){return Pe(this,void 0,void 0,function(){var e;return Ne(this,function(n){return e=ud(t),[2,Mo.getManager(e.scheme).removeModel(e.path)]})})}}),hu;H({confusionMatrix_:function(t,e,n){var r=F(t,"labels","confusionMatrix"),i=F(e,"predictions","confusionMatrix");M(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),M(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),M(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),M(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),M(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var a=ag(r.asType("int32"),n),o=ag(i.asType("int32"),n);return a.transpose().matMul(o).asType("int32")}});var OU=H({fromPixels_:function(t,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,i=!1,a=!1,o=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)a=!0;else{if(t.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);o=!0}if(i&&i&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(OT("FromPixels",X.backendName)!=null)return X.runKernel("FromPixels",{pixels:t},{numChannels:e});var s,u,l=i?[t.videoWidth,t.videoHeight]:[t.width,t.height],c=l[0],f=l[1];if(o?s=t.getContext("2d").getImageData(0,0,c,f).data:r||n?s=t.data:(a||i)&&(hu==null&&(hu=document.createElement("canvas").getContext("2d")),hu.canvas.width=c,hu.canvas.height=f,hu.drawImage(t,0,0,c,f),s=hu.getImageData(0,0,c,f).data),e===4)u=new Int32Array(s);else{var h=c*f;u=new Int32Array(h*e);for(var d=0;d<h;d++)for(var v=0;v<e;++v)u[d*e+v]=s[4*d+v]}return X1(u,[f,c,e],"int32")}}),yx=Object.freeze({toPixels:function(t,e){return Pe(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,c,f,h,d,v,p,m,g,x,y,w,_,b,E,S;return Ne(this,function(C){switch(C.label){case 0:if(n=F(t,"img","toPixels"),t instanceof Mt||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),i=r[0],a=r[1],(o=n.rank===2?1:n.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,n.data()];case 1:return s=C.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=C.sent(),f=c[0],h=c[1],d=f[0],v=h[0],u.dispose(),l.dispose(),n.dtype==="float32"){if(d<0||v>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+d+" - "+v+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(d<0||v>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+d+" - "+v+"].")}for(p=n.dtype==="float32"?255:1,m=new Uint8ClampedArray(a*i*4),g=0;g<i*a;++g)x=void 0,y=void 0,w=void 0,_=void 0,o===1?(x=s[g]*p,y=s[g]*p,w=s[g]*p,_=255):o===3?(x=s[3*g]*p,y=s[3*g+1]*p,w=s[3*g+2]*p,_=255):o===4&&(x=s[4*g]*p,y=s[4*g+1]*p,w=s[4*g+2]*p,_=s[4*g+3]*p),m[(b=4*g)+0]=Math.round(x),m[b+1]=Math.round(y),m[b+2]=Math.round(w),m[b+3]=Math.round(_);return e!=null&&(e.width=a,e.height=i,E=e.getContext("2d"),S=new ImageData(m,a,i),E.putImageData(S,0,0)),n!==t&&n.dispose(),[2,m]}})})},fromPixels:OU}),PU=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(e,n){return new e(n)},t}(),NU=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}();function Zs(t){M(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),M(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),M(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),NU.register(t)}var eu=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return Ui(e,t),e.prototype.minimize=function(n,r,i){r===void 0&&(r=!1);var a=this.computeGradients(n,i),o=a.value,s=a.grads;if(i!=null){var u=i.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(u)}else this.applyGradients(s);return Fr(s),r?o:(o.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(n,r){return j6(n,r)},e.prototype.dispose=function(){this.iterations_!=null&&Fr(this.iterations_)},e.prototype.saveIterations=function(){return Pe(this,void 0,void 0,function(){return Ne(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:Ie(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){return Ne(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(n){return Pe(this,void 0,void 0,function(){return Ne(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(n){return Pe(this,void 0,void 0,function(){var r;return Ne(this,function(i){switch(i.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,n.slice(1)]}})})},e}(PU);Object.defineProperty(eu,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var MU=function(t){function e(n,r,i){i===void 0&&(i=null);var a=t.call(this)||this;return a.learningRate=n,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],i==null&&(a.epsilon=X.backend.epsilon()),a}return Ui(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,a){var o=X.registeredVariables[i];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:i+"/accum_grad",variable:De(function(){return st(o).variable(!1)})}),r.accumulatedUpdates[a]==null&&(r.accumulatedUpdates[a]={originalName:i+"/accum_var",variable:De(function(){return st(o).variable(!1)})});var s=Array.isArray(n)?n[a].tensor:n[i];if(s!=null){var u=r.accumulatedGrads[a].variable,l=r.accumulatedUpdates[a].variable;De(function(){var c=u.mul(r.rho).add(s.square().mul(1-r.rho)),f=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),h=l.mul(r.rho).add(f.square().mul(1-r.rho));u.assign(c),l.assign(h);var d=f.mul(-r.learningRate).add(o);o.assign(d)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Fr(this.accumulatedGrads.map(function(n){return n.variable})),Fr(this.accumulatedUpdates.map(function(n){return n.variable})))},e.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){var n;return Ne(this,function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return Pe(this,void 0,void 0,function(){var r;return Ne(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e}(eu);Zs(MU);var LU=function(t){function e(n,r){r===void 0&&(r=.1);var i=t.call(this)||this;return i.learningRate=n,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return Ui(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,a){var o=X.registeredVariables[i];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:i+"/accumulator",variable:De(function(){return fa(o.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(n)?n[a].tensor:n[i];if(s!=null){var u=r.accumulatedGrads[a].variable;De(function(){var l=u.add(s.square());u.assign(l);var c=s.div(l.add(X.backend.epsilon()).sqrt()).mul(-r.learningRate).add(o);o.assign(c)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&Fr(this.accumulatedGrads.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){return Ne(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return Pe(this,void 0,void 0,function(){return Ne(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e}(eu);Zs(LU);var BU=function(t){function e(n,r,i,a){a===void 0&&(a=null);var o=t.call(this)||this;return o.learningRate=n,o.beta1=r,o.beta2=i,o.epsilon=a,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],De(function(){o.accBeta1=Ie(r).variable(),o.accBeta2=Ie(i).variable()}),a==null&&(o.epsilon=X.backend.epsilon()),o}return Ui(e,t),e.prototype.applyGradients=function(n){var r=this,i=Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n);De(function(){var a=yn(1,r.accBeta1),o=yn(1,r.accBeta2);i.forEach(function(s,u){var l=X.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:De(function(){return st(l).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:De(function(){return st(l).variable(!1)})});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var f=r.accumulatedFirstMoment[u].variable,h=r.accumulatedSecondMoment[u].variable,d=f.mul(r.beta1).add(c.mul(1-r.beta1)),v=h.mul(r.beta2).add(c.square().mul(1-r.beta2)),p=d.div(a),m=v.div(o);f.assign(d),h.assign(v);var g=p.div(m.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(g)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Fr(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&Fr(this.accumulatedSecondMoment.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){var n;return Ne(this,function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return Pe(this,void 0,void 0,function(){var r,i=this;return Ne(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),De(function(){i.accBeta1.assign(mp(i.beta1,i.iterations_+1)),i.accBeta2.assign(mp(i.beta2,i.iterations_+1))}),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e}(eu);Zs(BU);var WU=function(t){function e(n,r,i,a,o){a===void 0&&(a=null),o===void 0&&(o=0);var s=t.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=i,s.epsilon=a,s.decay=o,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],De(function(){s.iteration=Ie(0).variable(),s.accBeta1=Ie(r).variable()}),a==null&&(s.epsilon=X.backend.epsilon()),s}return Ui(e,t),e.prototype.applyGradients=function(n){var r=this,i=Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n);De(function(){var a=yn(1,r.accBeta1),o=Ri(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach(function(s,u){var l=X.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:st(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:st(l).variable(!1)});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var f=r.accumulatedFirstMoment[u].variable,h=r.accumulatedWeightedInfNorm[u].variable,d=f.mul(r.beta1).add(c.mul(1-r.beta1)),v=h.mul(r.beta2),p=c.abs(),m=v.maximum(p);f.assign(d),h.assign(m);var g=o.div(a).mul(d.div(m.add(r.epsilon))).add(l);l.assign(g)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Fr(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&Fr(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){return Ne(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(n){return Pe(this,void 0,void 0,function(){return Ne(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e}(eu);Zs(WU);var c4=function(t){function e(n){var r=t.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Ui(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,a){var o=Array.isArray(n)?n[a].tensor:n[i];if(o!=null){var s=X.registeredVariables[i];De(function(){var u=r.c.mul(o).add(s);s.assign(u)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=a6(Ie(-n))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){return Ne(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},e.prototype.setWeights=function(n){return Pe(this,void 0,void 0,function(){return Ne(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(n,r){return new n(r.learningRate)},e.className="SGD",e}(eu);Zs(c4);var zU=function(t){function e(n,r,i){i===void 0&&(i=!1);var a=t.call(this,n)||this;return a.learningRate=n,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=Ie(a.momentum),a}return Ui(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,a){var o=X.registeredVariables[i];r.accumulations[a]==null&&(r.accumulations[a]={originalName:i+"/momentum",variable:De(function(){return st(o).variable(!1)})});var s=r.accumulations[a].variable,u=Array.isArray(n)?n[a].tensor:n[i];u!=null&&De(function(){var l,c=r.m.mul(s).add(u);l=r.useNesterov?r.c.mul(u.add(c.mul(r.m))).add(o):r.c.mul(c).add(o),s.assign(c),o.assign(l)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Fr(this.accumulations.map(function(n){return n.variable}))},e.prototype.setMomentum=function(n){this.momentum=n},e.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){return Ne(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return Pe(this,void 0,void 0,function(){return Ne(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e}(c4);Zs(zU);var UU=function(t){function e(n,r,i,a,o){r===void 0&&(r=.9),i===void 0&&(i=0),a===void 0&&(a=null),o===void 0&&(o=!1);var s=t.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=i,s.epsilon=a,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=o,a==null&&(s.epsilon=X.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Ui(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,a){var o=X.registeredVariables[i];r.accumulatedMeanSquares[a]==null&&(r.accumulatedMeanSquares[a]={originalName:i+"/rms",variable:De(function(){return st(o).variable(!1)})}),r.accumulatedMoments[a]==null&&(r.accumulatedMoments[a]={originalName:i+"/momentum",variable:De(function(){return st(o).variable(!1)})}),r.accumulatedMeanGrads[a]==null&&r.centered&&(r.accumulatedMeanGrads[a]={originalName:i+"/mg",variable:De(function(){return st(o).variable(!1)})});var s=Array.isArray(n)?n[a].tensor:n[i];if(s!=null){var u=r.accumulatedMeanSquares[a].variable,l=r.accumulatedMoments[a].variable;De(function(){var c=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[a].variable,h=f.mul(r.decay).add(s.mul(1-r.decay)),d=l.mul(r.momentum).add(s.mul(r.learningRate).div(c.sub(h.square().add(r.epsilon)).sqrt()));u.assign(c),f.assign(h),l.assign(d);var v=o.sub(d);o.assign(v)}else{var p=u.mul(r.decay).add(s.square().mul(1-r.decay));d=l.mul(r.momentum).add(s.mul(r.learningRate).div(p.add(r.epsilon).sqrt())),u.assign(p),l.assign(d),v=o.sub(d),o.assign(v)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Fr(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Fr(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&Fr(this.accumulatedMoments.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Pe(this,void 0,void 0,function(){var n;return Ne(this,function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return Pe(this,void 0,void 0,function(){var r;return Ne(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e}(eu);Zs(UU);Mt.prototype.squaredDifference=function(t){return Ck(this,t)},le=dU;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vg=function(t,e){return vg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},vg(t,e)};function qe(t,e){vg(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Zn=function(){return Zn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zn.apply(this,arguments)};function ze(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?a(c.value):i(c.value).then(s,u)}l((r=r.apply(t,[])).next())})}function Ue(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){n.label=l[1];break}if(l[0]===6&&n.label<a[1]){n.label=a[1],a=l;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(l);break}a[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(c){l=[6,c],i=0}finally{r=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function bc(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}var Is=function(){function t(e,n){if(!Rs(e)||!Rs(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:n}));this._width=e,this._height=n}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}();function u0(t,e){return t instanceof Mt&&t.shape.length===e}function VU(t){return u0(t,2)}function l0(t){return u0(t,3)}function Lo(t){return u0(t,4)}function HU(t){return t%1!==0}function a_(t){return t%2===0}function $U(t,e){e===void 0&&(e=2);var n=Math.pow(10,e);return Math.floor(t*n)/n}function o_(t){return t&&t.width&&t.height}function jU(t,e){var n=t.width,r=t.height,i=e/Math.max(r,n);return new Is(Math.round(n*i),Math.round(r*i))}function wx(t){return t.reduce(function(e,n){return e.add(n)},new ht(0,0)).div(new ht(t.length,t.length))}function nf(t,e,n){return Array(t).fill(0).map(function(r,i){return e+i*n})}function Rs(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||t===0}function s_(t){return Rs(t)&&0<=t&&t<=1}var ht=function(){function t(e,n){this._x=e,this._y=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.mul=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.div=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}(),jo=function(){function t(e,n){n===void 0&&(n=!0);var r=e||{},i=[r.left,r.top,r.right,r.bottom].every(Rs),a=[r.x,r.y,r.width,r.height].every(Rs);if(!a&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=o[0],u=o[1],l=o[2],c=o[3];t.assertIsValidBox({x:s,y:u,width:l,height:c},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=c}return t.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(Rs)},t.assertIsValidBox=function(e,n,r){if(r===void 0&&(r=!1),!t.isRect(e))throw new Error(n+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(n+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new ht(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new ht(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new ht(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new ht(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),n=e[0],r=e[1],i=e[2],a=e[3];return new t({x:n,y:r,width:i,height:a})},t.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),n=e[0],r=e[1],i=e[2],a=e[3];return new t({x:n,y:r,width:i,height:a})},t.prototype.toSquare=function(){var e=this,n=e.x,r=e.y,i=e.width,a=e.height,o=Math.abs(i-a);return i<a&&(n-=o/2,i+=o),a<i&&(r-=o/2,a+=o),new t({x:n,y:r,width:i,height:a})},t.prototype.rescale=function(e){var n=o_(e)?e.width:e,r=o_(e)?e.height:e;return new t({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},t.prototype.pad=function(e,n){var r=[this.x-e/2,this.y-n/2,this.width+e,this.height+n],i=r[0],a=r[1],o=r[2],s=r[3];return new t({x:i,y:a,width:o,height:s})},t.prototype.clipAtImageBorders=function(e,n){var r=this,i=r.x,a=r.y,o=r.right,s=r.bottom,u=Math.max(i,0),l=Math.max(a,0),c=o-u,f=s-l,h=Math.min(c,e-u),d=Math.min(f,n-l);return new t({x:u,y:l,width:h,height:d}).floor()},t.prototype.shift=function(e,n){var r=this,i=r.width,a=r.height,o=this.x+e,s=this.y+n;return new t({x:o,y:s,width:i,height:a})},t.prototype.padAtBorders=function(e,n){var r=this.width+1,i=this.height+1,a=1,o=1,s=r,u=i,l=this.left,c=this.top,f=this.right,h=this.bottom;return f>n&&(s=-f+n+r,f=n),h>e&&(u=-h+e+i,h=e),l<1&&(u=2-l,l=1),c<1&&(u=2-c,c=1),{dy:o,edy:u,dx:a,edx:s,y:c,ey:h,x:l,ex:f,w:r,h:i}},t.prototype.calibrate=function(e){return new t({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},t}(),c0=function(t){qe(e,t);function e(n,r,i,a,o){return o===void 0&&(o=!1),t.call(this,{left:n,top:r,right:i,bottom:a},o)||this}return e}(jo),f4=function(){function t(e,n,r,i,a){this._imageDims=new Is(a.width,a.height),this._score=e,this._classScore=n,this._className=r,this._box=new jo(i).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new jo(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:n})},t}(),Hi=function(t){qe(e,t);function e(n,r,i){return t.call(this,n,n,"",r,i)||this}return e.prototype.forSize=function(n,r){var i=t.prototype.forSize.call(this,n,r),a=i.score,o=i.relativeBox,s=i.imageDims;return new e(a,o,s)},e}(f4);function GU(t,e,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left)),i=Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top)),a=r*i;return n?a/(t.area+e.area-a):a/Math.min(t.area,e.area)}function XU(t){var e=t.map(function(s){return s.x}),n=t.map(function(s){return s.y}),r=e.reduce(function(s,u){return u<s?u:s},1/0),i=n.reduce(function(s,u){return u<s?u:s},1/0),a=e.reduce(function(s,u){return s<u?u:s},0),o=n.reduce(function(s,u){return s<u?u:s},0);return new c0(r,i,a,o)}function rf(t,e,n,r){r===void 0&&(r=!0);for(var i=e.map(function(s,u){return{score:s,boxIndex:u}}).sort(function(s,u){return s.score-u.score}).map(function(s){return s.boxIndex}),a=[],o=function(){var s=i.pop();a.push(s);for(var u=i,l=[],c=0;c<u.length;c++){var f=u[c],h=t[s],d=t[f];l.push(GU(h,d,r))}i=i.filter(function(v,p){return l[p]<=n})};i.length>0;)o();return a}function Df(t,e){return De(function(){var n=e[0],r=e[1],i=e[2],a=fa(bc(t.shape.slice(0,3),[1]),n),o=fa(bc(t.shape.slice(0,3),[1]),r),s=fa(bc(t.shape.slice(0,3),[1]),i),u=mn([a,o,s],3);return yn(t,u)})}function KU(t,e){return e===void 0&&(e=!1),De(function(){var n=t.shape.slice(1),r=n[0],i=n[1];if(r===i)return t;var a=Math.abs(r-i),o=Math.round(a*(e?.5:1)),s=r>i?2:1,u=function(d){var v=t.shape.slice();return v[s]=d,fa(v,0)},l=u(o),c=a-l.shape[s],f=e&&c?u(c):null,h=[f,t,l].filter(function(d){return!!d}).map(function(d){return d.toFloat()});return mn(h,s)})}function Ov(t){return 1/(1+Math.exp(-t))}var _x=function(t){qe(e,t);function e(n,r,i,a,o){return o===void 0&&(o=!1),t.call(this,{x:n,y:r,width:i,height:a},o)||this}return e}(jo),qU=.5,YU=.43,QU=.45,af=function(){function t(e,n,r){r===void 0&&(r=new ht(0,0));var i=n.width,a=n.height;this._imgDims=new Is(i,a),this._shift=r,this._positions=e.map(function(o){return o.mul(new ht(i,a)).add(r)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new ht(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(n){return n.sub(e._shift).div(new ht(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new this.constructor(this.relativePositions,{width:e,height:n})},t.prototype.shiftBy=function(e,n){return new this.constructor(this.relativePositions,this._imgDims,new ht(e,n))},t.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},t.prototype.align=function(e,n){if(n===void 0&&(n={}),e){var r=e instanceof Hi?e.box.floor():new jo(e);return this.shiftBy(r.x,r.y).align(null,n)}var i=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),a=i.useDlibAlignment,o=i.minBoxPadding;return a?this.alignDlib():this.alignMinBbox(o)},t.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),n=e[0],r=e[1],i=e[2],a=function(f){return i.sub(f).magnitude()},o=(a(n)+a(r))/2,s=Math.floor(o/QU),u=wx(e),l=Math.floor(Math.max(0,u.x-qU*s)),c=Math.floor(Math.max(0,u.y-YU*s));return new _x(l,c,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+c))},t.prototype.alignMinBbox=function(e){var n=XU(this.positions);return n.pad(n.width*e,n.height*e)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t}(),JU=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],wx([n[3],n[4]])]},e}(af),ZU=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(wx)},e}(af),u_=function(){function t(e,n){this._label=e,this._distance=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+$U(this.distance)+")":"")},t}(),l_=function(t){qe(e,t);function e(n,r){var i=t.call(this,n)||this;return i._label=r,i}return e.assertIsValidLabeledBox=function(n,r){if(jo.assertIsValidBox(n,r),!Rs(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}(jo),ec=function(){function t(e,n){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},t.fromJSON=function(e){var n=e.descriptors.map(function(r){return new Float32Array(r)});return new t(e.label,n)},t}();(function(t){qe(e,t);function e(n,r,i,a){var o=t.call(this,n,r)||this;return o._score=i,o._classScore=a,o}return e.assertIsValidPredictedBox=function(n,r){if(l_.assertIsValidLabeledBox(n,r),!s_(n.score)||!s_(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})(l_);function h4(t){return t.detection instanceof Hi}function of(t,e){var n={detection:e};return Object.assign({},t,n)}function d4(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:e}}function p4(t){var e="";if(!t)try{t=require("fs")}catch(r){e=r.toString()}var n=t?function(r){return new Promise(function(i,a){t.readFile(r,function(o,s){return o?a(o):i(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:n}}function v4(){var t=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,n=function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},i=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},a=p4();return Zn({Canvas:t||function(){function o(){}return o}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function o(){}return o}(),Image:e||function(){function o(){}return o}(),ImageData:global.ImageData||function(){function o(){}return o}(),Video:global.HTMLVideoElement||function(){function o(){}return o}(),createCanvasElement:n,createImageElement:r,fetch:i},a)}function m4(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function g4(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var dn;function e7(){if(!dn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return dn}function mg(t){dn=t}function bx(){m4()&&mg(d4()),g4()&&mg(v4())}function t7(t){if(dn||bx(),!dn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=t.Canvas,n=e===void 0?dn.Canvas:e,r=t.Image,i=r===void 0?dn.Image:r;dn.Canvas=n,dn.Image=i,dn.createCanvasElement=t.createCanvasElement||function(){return new n},dn.createImageElement=t.createImageElement||function(){return new i},dn.ImageData=t.ImageData||dn.ImageData,dn.Video=t.Video||dn.Video,dn.fetch=t.fetch||dn.fetch,dn.readFile=t.readFile||dn.readFile}var sr={getEnv:e7,setEnv:mg,initialize:bx,createBrowserEnv:d4,createFileSystem:p4,createNodejsEnv:v4,monkeyPatch:t7,isBrowser:m4,isNodejs:g4};bx();function x4(t){return!sr.isNodejs()&&typeof t=="string"?document.getElementById(t):t}function Us(t){var e=sr.getEnv(),n=e.Canvas,r=e.CanvasRenderingContext2D;if(t instanceof r)return t;var i=x4(t);if(!(i instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=i.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}var c_;(function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"})(c_||(c_={}));function y4(t){var e=sr.getEnv(),n=e.Image,r=e.Video;return t instanceof n&&t.complete||t instanceof r&&t.readyState>=3}function n7(t){return new Promise(function(e,n){if(t instanceof sr.getEnv().Canvas||y4(t))return e();function r(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",i),e(a))}function i(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",i),n(a))}t.addEventListener("load",r),t.addEventListener("error",i)})}function Ex(t){var e=sr.getEnv(),n=e.Image,r=e.Video;return t instanceof n?new Is(t.naturalWidth,t.naturalHeight):t instanceof r?new Is(t.videoWidth,t.videoHeight):new Is(t.width,t.height)}function f0(t){var e=t.width,n=t.height,r=sr.getEnv().createCanvasElement,i=r();return i.width=e,i.height=n,i}function Sx(t,e){var n=sr.getEnv().ImageData;if(!(t instanceof n)&&!y4(t))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=Ex(t),i=r.width,a=r.height,o=f0({width:i,height:a});return t instanceof n?Us(o).putImageData(t,0,0):Us(o).drawImage(t,0,0,i,a),o}function r7(t,e){return ze(this,void 0,void 0,function(){var n,r,i,a,o,s;return Ue(this,function(u){switch(u.label){case 0:return n=sr.getEnv().createCanvasElement(),r=t.shape.slice(Lo(t)?1:0),i=r[0],a=r[1],o=r[2],s=De(function(){return t.as3D(i,a,o).toInt()}),[4,yx.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}})})}function f_(t){var e=sr.getEnv(),n=e.Image,r=e.Canvas,i=e.Video;return t instanceof n||t instanceof r||t instanceof i}function i7(t,e,n){n===void 0&&(n=!1);var r=sr.getEnv(),i=r.Image,a=r.Canvas;if(!(t instanceof i||t instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=Ex(t),s=e/Math.max(o.height,o.width),u=s*o.width,l=s*o.height,c=f0({width:e,height:e}),f=t instanceof a?t:Sx(t),h=Math.abs(u-l)/2,d=n&&u<l?h:0,v=n&&l<u?h:0;return Us(c).drawImage(f,d,v,u,l),c}var yp=function(){function t(e,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=n,this._batchSize=e.length,e.forEach(function(i,a){if(l0(i)){r._imageTensors[a]=i,r._inputDimensions[a]=i.shape;return}if(Lo(i)){var o=i.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");r._imageTensors[a]=i,r._inputDimensions[a]=i.shape.slice(1);return}var s=i instanceof sr.getEnv().Canvas?i:Sx(i);r._canvases[a]=s,r._inputDimensions[a]=[s.height,s.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var e=this;return nf(this.batchSize,0,1).map(function(n,r){return e.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},t.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},t.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},t.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},t.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(e),r=this.getInputHeight(e);return jU({width:n,height:r},this.inputSize)},t.prototype.toBatchTensor=function(e,n){var r=this;return n===void 0&&(n=!0),this._inputSize=e,De(function(){var i=nf(r.batchSize,0,1).map(function(o){var s=r.getInput(o);if(s instanceof Mt){var u=Lo(s)?s:s.expandDims();return u=KU(u,n),(u.shape[1]!==e||u.shape[2]!==e)&&(u=dx.resizeBilinear(u,[e,e])),u.as3D(e,e,3)}if(s instanceof sr.getEnv().Canvas)return yx.fromPixels(i7(s,e,n));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),a=ei(i.map(function(o){return o.toFloat()})).as4D(r.batchSize,e,e,3);return a})},t}();function On(t){return ze(this,void 0,void 0,function(){var e,n,r;return Ue(this,function(i){switch(i.label){case 0:if(t instanceof yp)return[2,t];if(e=Array.isArray(t)?t:[t],!e.length)throw new Error("toNetInput - empty array passed as input");return n=function(a){return Array.isArray(t)?" at input index "+a+":":""},r=e.map(x4),r.forEach(function(a,o){if(!f_(a)&&!l0(a)&&!Lo(a))throw typeof e[o]=="string"?new Error("toNetInput -"+n(o)+" string passed, but could not resolve HTMLElement for element id "+e[o]):new Error("toNetInput -"+n(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Lo(a)){var s=a.shape[0];if(s!==1)throw new Error("toNetInput -"+n(o)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(a){return f_(a)&&n7(a)}))];case 1:return i.sent(),[2,new yp(r,Array.isArray(t))]}})})}function Cx(t,e){return ze(this,void 0,void 0,function(){var n,r,i,a,o,s,u;return Ue(this,function(l){switch(l.label){case 0:return n=sr.getEnv().Canvas,r=t,t instanceof n?[3,5]:[4,On(t)];case 1:if(i=l.sent(),i.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return a=i.getInput(0),a instanceof n?(o=a,[3,4]):[3,2];case 2:return[4,r7(a)];case 3:o=l.sent(),l.label=4;case 4:r=o,l.label=5;case 5:return s=Us(r),u=e.map(function(c){return c instanceof Hi?c.forSize(r.width,r.height).box.floor():c}).map(function(c){return c.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(c){var f=c.x,h=c.y,d=c.width,v=c.height,p=f0({width:d,height:v});return Us(p).putImageData(s.getImageData(f,h,d,v),0,0),p})]}})})}function Tx(t,e){return ze(this,void 0,void 0,function(){return Ue(this,function(n){if(!l0(t)&&!Lo(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Lo(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,De(function(){var r=t.shape.slice(Lo(t)?1:0),i=r[0],a=r[1],o=r[2],s=e.map(function(l){return l instanceof Hi?l.forSize(a,i).box:l}).map(function(l){return l.clipAtImageBorders(a,i)}),u=s.map(function(l){var c=l.x,f=l.y,h=l.width,d=l.height;return Gk(t.as3D(i,a,o),[f,c,0],[d,h,o])});return u})]})})}function a7(t,e){return ze(this,void 0,void 0,function(){var n,r;return Ue(this,function(i){switch(i.label){case 0:return n=sr.getEnv().fetch,[4,n(t,e)];case 1:if(r=i.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function o7(t){return ze(this,void 0,void 0,function(){return Ue(this,function(e){switch(e.label){case 0:return[4,a7(t)];case 1:return[2,e.sent().json()]}})})}function w4(t,e){var n=e+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:n};if(t==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"";t=t.replace(r,"");var i=t.split("/").filter(function(s){return s}),a=t.endsWith(".json")?i[i.length-1]:n,o=r+(t.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return o=t.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+a:o+"/"+a}}function s7(t,e){return ze(this,void 0,void 0,function(){var n,r,i,a;return Ue(this,function(o){switch(o.label){case 0:return n=w4(t,e),r=n.manifestUri,i=n.modelBaseUri,[4,o7(r)];case 1:return a=o.sent(),[2,l4.loadWeights(a,i)]}})})}function u7(t,e,n){var r=Ex(e),i=r.width,a=r.height;return t.width=i,t.height=a,{width:i,height:a}}var eo=function(){function t(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(e){var n=this.traversePropertyPath(e),r=n.obj,i=n.objProp;return r[i]},t.prototype.reassignParamFromPath=function(e,n){var r=this.traversePropertyPath(e),i=r.obj,a=r.objProp;i[a].dispose(),i[a]=n},t.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:e.getParamFromPath(r)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof ul})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof ul)})},t.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(n){var r=n.path,i=n.tensor;e.reassignParamFromPath(r,i.variable())})},t.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(n){var r=n.path,i=n.tensor,a=Un(i.dataSync());i.dispose(),e.reassignParamFromPath(r,a)})},t.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(n){if(e&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var n=e.tensor;return Array.from(n.dataSync())}).reduce(function(e,n){return e.concat(n)}))},t.prototype.load=function(e){return ze(this,void 0,void 0,function(){return Ue(this,function(n){switch(n.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return n.sent(),[2]}})})},t.prototype.loadFromUri=function(e){return ze(this,void 0,void 0,function(){var n;return Ue(this,function(r){switch(r.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,s7(e,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},t.prototype.loadFromDisk=function(e){return ze(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,c,f;return Ue(this,function(h){switch(h.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=sr.getEnv().readFile,r=w4(e,this.getDefaultModelName()),i=r.manifestUri,a=r.modelBaseUri,o=function(d){return Promise.all(d.map(function(v){return n(v).then(function(p){return p.buffer})}))},s=l4.weightsLoaderFactory(o),c=(l=JSON).parse,[4,n(i)];case 1:return u=c.apply(l,[h.sent().toString()]),[4,s(u,a)];case 2:return f=h.sent(),this.loadFromWeightMap(f),[2]}})})},t.prototype.loadFromWeightMap=function(e){var n=this.extractParamsFromWeigthMap(e),r=n.paramMappings,i=n.params;this._paramMappings=r,this._params=i},t.prototype.extractWeights=function(e){var n=this.extractParams(e),r=n.paramMappings,i=n.params;this._paramMappings=r,this._params=i},t.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=e.split("/").reduce(function(a,o){if(!a.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+e);return{obj:a.nextObj,objProp:o,nextObj:a.nextObj[o]}},{nextObj:this.params}),r=n.obj,i=n.objProp;if(!r||!i||!(r[i]instanceof Mt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:r,objProp:i}},t}();function Qr(t,e,n){return De(function(){var r=ux(t,e.depthwise_filter,e.pointwise_filter,n,"same");return r=rt(r,e.bias),r})}function Pv(t,e,n){return n===void 0&&(n=!1),De(function(){var r=Lt(n?rt(_i(t,e.conv0.filters,[2,2],"same"),e.conv0.bias):Qr(t,e.conv0,[2,2])),i=Qr(r,e.conv1,[1,1]),a=Lt(rt(r,i)),o=Qr(a,e.conv2,[1,1]);return Lt(rt(r,rt(i,o)))})}function Ih(t,e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),De(function(){var i=Lt(n?rt(_i(t,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):Qr(t,e.conv0,r?[2,2]:[1,1])),a=Qr(i,e.conv1,[1,1]),o=Lt(rt(i,a)),s=Qr(o,e.conv2,[1,1]),u=Lt(rt(i,rt(a,s))),l=Qr(u,e.conv3,[1,1]);return Lt(rt(i,rt(a,rt(s,l))))})}function Bi(t,e,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),De(function(){var i=rt(_i(t,e.filters,[1,1],n),e.bias);return r?Lt(i):i})}function to(t,e){Object.keys(t).forEach(function(n){e.some(function(r){return r.originalPath===n})||t[n].dispose()})}function h0(t,e){return function(n,r,i,a){var o=br(t(n*r*i*i),[i,i,n,r]),s=rn(t(r));return e.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:o,bias:s}}}function kx(t,e){return function(n,r,i){var a=No(t(n*r),[n,r]),o=rn(t(r));return e.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:a,bias:o}}}var _4=function(){function t(e,n,r){this.depthwise_filter=e,this.pointwise_filter=n,this.bias=r}return t}();function Ax(t,e){return function(n,r,i){var a=br(t(9*n),[3,3,n,1]),o=br(t(n*r),[1,1,n,r]),s=rn(t(r));return e.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new _4(a,o,s)}}function Ix(t){return function(e){var n=t(e+"/depthwise_filter",4),r=t(e+"/pointwise_filter",4),i=t(e+"/bias",1);return new _4(n,r,i)}}function Zo(t,e){return function(n,r,i){var a=t[n];if(!u0(a,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+a);return e.push({originalPath:n,paramPath:i||n}),a}}function no(t){var e=t;function n(i){var a=e.slice(0,i);return e=e.slice(i),a}function r(){return e}return{extractWeights:n,getRemainingWeights:r}}function b4(t,e){var n=h0(t,e),r=Ax(t,e);function i(o,s,u,l){l===void 0&&(l=!1);var c=l?n(o,s,3,u+"/conv0"):r(o,s,u+"/conv0"),f=r(s,s,u+"/conv1"),h=r(s,s,u+"/conv2");return{conv0:c,conv1:f,conv2:h}}function a(o,s,u,l){l===void 0&&(l=!1);var c=i(o,s,u,l),f=c.conv0,h=c.conv1,d=c.conv2,v=r(s,s,u+"/conv3");return{conv0:f,conv1:h,conv2:d,conv3:v}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:a}}function l7(t){var e=[],n=no(t),r=n.extractWeights,i=n.getRemainingWeights,a=b4(r,e).extractDenseBlock4Params,o=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2"),l=a(128,256,"dense3");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{dense0:o,dense1:s,dense2:u,dense3:l}}}function E4(t){return function(e){var n=t(e+"/filters",4),r=t(e+"/bias",1);return{filters:n,bias:r}}}function S4(t,e){var n=Zo(t,e),r=E4(n),i=Ix(n);function a(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):i(s+"/conv0"),c=i(s+"/conv1"),f=i(s+"/conv2");return{conv0:l,conv1:c,conv2:f}}function o(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):i(s+"/conv0"),c=i(s+"/conv1"),f=i(s+"/conv2"),h=i(s+"/conv3");return{conv0:l,conv1:c,conv2:f,conv3:h}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:o}}function c7(t){var e=[],n=S4(t,e).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return to(t,e),{params:r,paramMappings:e}}var C4=function(t){qe(e,t);function e(){return t.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return De(function(){var i=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],o=Df(i,a).div(Ie(255)),s=Ih(o,r.dense0,!0);return s=Ih(s,r.dense1),s=Ih(s,r.dense2),s=Ih(s,r.dense3),s=Rf(s,[7,7],[2,2],"valid"),s})},e.prototype.forward=function(n){return ze(this,void 0,void 0,function(){var r;return Ue(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,On(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(n){return c7(n)},e.prototype.extractParams=function(n){return l7(n)},e}(eo);function oa(t,e){return De(function(){return rt(a0(t,e.weights),e.bias)})}function f7(t,e,n){var r=[],i=no(t),a=i.extractWeights,o=i.getRemainingWeights,s=kx(a,r),u=s(e,n,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:u}}}function h7(t){var e=[],n=Zo(t,e);function r(a){var o=n(a+"/weights",2),s=n(a+"/bias",1);return{weights:o,bias:s}}var i={fc:r("fc")};return to(t,e),{params:i,paramMappings:e}}function T4(t){var e={},n={};return Object.keys(t).forEach(function(r){var i=r.startsWith("fc")?n:e;i[r]=t[r]}),{featureExtractorMap:e,classifierMap:n}}var k4=function(t){qe(e,t);function e(n,r){var i=t.call(this,n)||this;return i._faceFeatureExtractor=r,i}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return De(function(){var a=n instanceof yp?r.faceFeatureExtractor.forwardInput(n):n;return oa(a.as2D(a.shape[0],-1),i.fc)})},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),i=r.params,a=r.paramMappings;this._params=i,this._paramMappings=a},e.prototype.extractClassifierParams=function(n){return f7(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(n){var r=T4(n),i=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),h7(a)},e.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),i=this.getClassifierChannelsOut(),a=i*r+i,o=n.slice(0,n.length-a),s=n.slice(n.length-a);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(s)},e}(eo),h_=["neutral","happy","sad","angry","fearful","disgusted","surprised"],d7=function(){function t(e){var n=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);h_.forEach(function(r,i){n[r]=e[i]})}return t.prototype.asSortedArray=function(){var e=this;return h_.map(function(n){return{expression:n,probability:e[n]}}).sort(function(n,r){return r.probability-n.probability})},t}(),p7=function(t){qe(e,t);function e(n){return n===void 0&&(n=new C4),t.call(this,"FaceExpressionNet",n)||this}return e.prototype.forwardInput=function(n){var r=this;return De(function(){return Ja(r.runNet(n))})},e.prototype.forward=function(n){return ze(this,void 0,void 0,function(){var r;return Ue(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,On(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.predictExpressions=function(n){return ze(this,void 0,void 0,function(){var r,i,a,o,s=this;return Ue(this,function(u){switch(u.label){case 0:return[4,On(n)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return i=u.sent(),[4,Promise.all(gn(i).map(function(l){return ze(s,void 0,void 0,function(){var c;return Ue(this,function(f){switch(f.label){case 0:return[4,l.data()];case 1:return c=f.sent(),l.dispose(),[2,c]}})})}))];case 3:return a=u.sent(),i.dispose(),o=a.map(function(l){return new d7(l)}),[2,r.isBatchInput?o:o[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}(k4);function A4(t,e){var n={expressions:e};return Object.assign({},t,n)}function I4(t){return h4(t)&&t.landmarks instanceof af&&t.unshiftedLandmarks instanceof af&&t.alignedRect instanceof Hi}function d0(t,e){var n=t.detection.box,r=e.shiftBy(n.x,n.y),i=r.align(),a=t.detection.imageDims,o=new Hi(t.detection.score,i.rescale(a.reverse()),a),s={landmarks:r,unshiftedLandmarks:e,alignedRect:o};return Object.assign({},t,s)}function v7(t,e){var n=h0(t,e),r=Ax(t,e);function i(o,s,u){var l=r(o,s,u+"/separable_conv0"),c=r(s,s,u+"/separable_conv1"),f=n(o,s,1,u+"/expansion_conv");return{separable_conv0:l,separable_conv1:c,expansion_conv:f}}function a(o,s){var u=r(o,o,s+"/separable_conv0"),l=r(o,o,s+"/separable_conv1"),c=r(o,o,s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:i,extractMainBlockParams:a}}function m7(t,e){var n=[],r=no(t),i=r.extractWeights,a=r.getRemainingWeights,o=v7(i,n),s=o.extractConvParams,u=o.extractSeparableConvParams,l=o.extractReductionBlockParams,c=o.extractMainBlockParams,f=s(3,32,3,"entry_flow/conv_in"),h=l(32,64,"entry_flow/reduction_block_0"),d=l(64,128,"entry_flow/reduction_block_1"),v={conv_in:f,reduction_block_0:h,reduction_block_1:d},p={};nf(e,0,1).forEach(function(y){p["main_block_"+y]=c(128,"middle_flow/main_block_"+y)});var m=l(128,256,"exit_flow/reduction_block"),g=u(256,512,"exit_flow/separable_conv"),x={reduction_block:m,separable_conv:g};if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{entry_flow:v,middle_flow:p,exit_flow:x}}}function g7(t,e){var n=Zo(t,e),r=E4(n),i=Ix(n);function a(s){var u=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),c=r(s+"/expansion_conv");return{separable_conv0:u,separable_conv1:l,expansion_conv:c}}function o(s){var u=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),c=i(s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:a,extractMainBlockParams:o}}function x7(t,e){var n=[],r=g7(t,n),i=r.extractConvParams,a=r.extractSeparableConvParams,o=r.extractReductionBlockParams,s=r.extractMainBlockParams,u=i("entry_flow/conv_in"),l=o("entry_flow/reduction_block_0"),c=o("entry_flow/reduction_block_1"),f={conv_in:u,reduction_block_0:l,reduction_block_1:c},h={};nf(e,0,1).forEach(function(m){h["main_block_"+m]=s("middle_flow/main_block_"+m)});var d=o("exit_flow/reduction_block"),v=a("exit_flow/separable_conv"),p={reduction_block:d,separable_conv:v};return to(t,n),{params:{entry_flow:f,middle_flow:h,exit_flow:p},paramMappings:n}}function R4(t,e,n){return rt(_i(t,e.filters,n,"same"),e.bias)}function Nv(t,e,n){n===void 0&&(n=!0);var r=n?Lt(t):t;return r=Qr(r,e.separable_conv0,[1,1]),r=Qr(Lt(r),e.separable_conv1,[1,1]),r=Cn(r,[3,3],[2,2],"same"),r=rt(r,R4(t,e.expansion_conv,[2,2])),r}function y7(t,e){var n=Qr(Lt(t),e.separable_conv0,[1,1]);return n=Qr(Lt(n),e.separable_conv1,[1,1]),n=Qr(Lt(n),e.separable_conv2,[1,1]),n=rt(n,t),n}var w7=function(t){qe(e,t);function e(n){var r=t.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return e.prototype.forwardInput=function(n){var r=this,i=this.params;if(!i)throw new Error("TinyXception - load model before inference");return De(function(){var a=n.toBatchTensor(112,!0),o=[122.782,117.001,104.298],s=Df(a,o).div(Ie(256)),u=Lt(R4(s,i.entry_flow.conv_in,[2,2]));return u=Nv(u,i.entry_flow.reduction_block_0,!1),u=Nv(u,i.entry_flow.reduction_block_1),nf(r._numMainBlocks,0,1).forEach(function(l){u=y7(u,i.middle_flow["main_block_"+l])}),u=Nv(u,i.exit_flow.reduction_block),u=Lt(Qr(u,i.exit_flow.separable_conv,[1,1])),u})},e.prototype.forward=function(n){return ze(this,void 0,void 0,function(){var r;return Ue(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,On(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(n){return x7(n,this._numMainBlocks)},e.prototype.extractParams=function(n){return m7(n,this._numMainBlocks)},e}(eo);function _7(t){var e=[],n=no(t),r=n.extractWeights,i=n.getRemainingWeights,a=kx(r,e),o=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{fc:{age:o,gender:s}}}}function b7(t){var e=[],n=Zo(t,e);function r(a){var o=n(a+"/weights",2),s=n(a+"/bias",1);return{weights:o,bias:s}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return to(t,e),{params:i,paramMappings:e}}var wp;(function(t){t.FEMALE="female",t.MALE="male"})(wp||(wp={}));var E7=function(t){qe(e,t);function e(n){n===void 0&&(n=new w7(2));var r=t.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return De(function(){var a=n instanceof yp?r.faceFeatureExtractor.forwardInput(n):n,o=Rf(a,[7,7],[2,2],"valid").as2D(a.shape[0],-1),s=oa(o,i.fc.age).as1D(),u=oa(o,i.fc.gender);return{age:s,gender:u}})},e.prototype.forwardInput=function(n){var r=this;return De(function(){var i=r.runNet(n),a=i.age,o=i.gender;return{age:a,gender:Ja(o)}})},e.prototype.forward=function(n){return ze(this,void 0,void 0,function(){var r;return Ue(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,On(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.predictAgeAndGender=function(n){return ze(this,void 0,void 0,function(){var r,i,a,o,s,u,l=this;return Ue(this,function(c){switch(c.label){case 0:return[4,On(n)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return i=c.sent(),a=gn(i.age),o=gn(i.gender),s=a.map(function(f,h){return{ageTensor:f,genderTensor:o[h]}}),[4,Promise.all(s.map(function(f){var h=f.ageTensor,d=f.genderTensor;return ze(l,void 0,void 0,function(){var v,p,m,g,x;return Ue(this,function(y){switch(y.label){case 0:return[4,h.data()];case 1:return v=y.sent()[0],[4,d.data()];case 2:return p=y.sent()[0],m=p>.5,g=m?wp.MALE:wp.FEMALE,x=m?p:1-p,h.dispose(),d.dispose(),[2,{age:v,gender:g,genderProbability:x}]}})})}))];case 3:return u=c.sent(),i.age.dispose(),i.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),i=r.params,a=r.paramMappings;this._params=i,this._paramMappings=a},e.prototype.extractClassifierParams=function(n){return _7(n)},e.prototype.extractParamsFromWeigthMap=function(n){var r=T4(n),i=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),b7(a)},e.prototype.extractParams=function(n){var r=1539,i=n.slice(0,n.length-r),a=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(a)},e}(eo),F4=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.postProcess=function(n,r,i){var a=i.map(function(s){var u=s.width,l=s.height,c=r/Math.max(l,u);return{width:u*c,height:l*c}}),o=a.length;return De(function(){var s=function(h,d){return ei([fa([68],h),fa([68],d)],1).as2D(1,136).as1D()},u=function(h,d){var v=a[h],p=v.width,m=v.height;return d(p,m)?Math.abs(p-m)/2:0},l=function(h){return u(h,function(d,v){return d<v})},c=function(h){return u(h,function(d,v){return v<d})},f=n.mul(fa([o,136],r)).sub(ei(Array.from(Array(o),function(h,d){return s(l(d),c(d))}))).div(ei(Array.from(Array(o),function(h,d){return s(a[d].width,a[d].height)})));return f})},e.prototype.forwardInput=function(n){var r=this;return De(function(){var i=r.runNet(n);return r.postProcess(i,n.inputSize,n.inputDimensions.map(function(a){var o=a[0],s=a[1];return{height:o,width:s}}))})},e.prototype.forward=function(n){return ze(this,void 0,void 0,function(){var r;return Ue(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,On(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.detectLandmarks=function(n){return ze(this,void 0,void 0,function(){var r,i,a,o=this;return Ue(this,function(s){switch(s.label){case 0:return[4,On(n)];case 1:return r=s.sent(),i=De(function(){return gn(o.forwardInput(r))}),[4,Promise.all(i.map(function(u,l){return ze(o,void 0,void 0,function(){var c,f,h,d,v;return Ue(this,function(p){switch(p.label){case 0:return h=(f=Array).from,[4,u.data()];case 1:return c=h.apply(f,[p.sent()]),d=c.filter(function(m,g){return a_(g)}),v=c.filter(function(m,g){return!a_(g)}),[2,new ZU(Array(68).fill(0).map(function(m,g){return new ht(d[g],v[g])}),{height:r.getInputHeight(l),width:r.getInputWidth(l)})]}})})}))];case 2:return a=s.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}(k4),D4=function(t){qe(e,t);function e(n){return n===void 0&&(n=new C4),t.call(this,"FaceLandmark68Net",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(F4);function S7(t){var e=[],n=S4(t,e).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return to(t,e),{params:r,paramMappings:e}}function C7(t){var e=[],n=no(t),r=n.extractWeights,i=n.getRemainingWeights,a=b4(r,e).extractDenseBlock3Params,o=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{dense0:o,dense1:s,dense2:u}}}var T7=function(t){qe(e,t);function e(){return t.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return De(function(){var i=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],o=Df(i,a).div(Ie(255)),s=Pv(o,r.dense0,!0);return s=Pv(s,r.dense1),s=Pv(s,r.dense2),s=Rf(s,[14,14],[2,2],"valid"),s})},e.prototype.forward=function(n){return ze(this,void 0,void 0,function(){var r;return Ue(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,On(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(n){return S7(n)},e.prototype.extractParams=function(n){return C7(n)},e}(eo),k7=function(t){qe(e,t);function e(n){return n===void 0&&(n=new T7),t.call(this,"FaceLandmark68TinyNet",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(F4);(function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(D4);function A7(t,e){return rt(nr(t,e.weights),e.biases)}function Rx(t,e,n,r,i){i===void 0&&(i="same");var a=e.conv,o=a.filters,s=a.bias,u=_i(t,o,n,i);return u=rt(u,s),u=A7(u,e.scale),r?Lt(u):u}function I7(t,e){return Rx(t,e,[1,1],!0)}function O4(t,e){return Rx(t,e,[1,1],!1)}function P4(t,e){return Rx(t,e,[2,2],!0,"valid")}function R7(t,e){function n(s,u,l){var c=t(s),f=c.length/(u*l*l);if(HU(f))throw new Error("depth has to be an integer: "+f+", weights.length: "+c.length+", numFilters: "+u+", filterSize: "+l);return De(function(){return $o(br(c,[u,f,l,l]),[2,3,1,0])})}function r(s,u,l,c){var f=n(s,u,l),h=rn(t(u));return e.push({paramPath:c+"/filters"},{paramPath:c+"/bias"}),{filters:f,bias:h}}function i(s,u){var l=rn(t(s)),c=rn(t(s));return e.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:l,biases:c}}function a(s,u,l,c){var f=r(s,u,l,c+"/conv"),h=i(u,c+"/scale");return{conv:f,scale:h}}function o(s,u,l,c,f){f===void 0&&(f=!1);var h=a((f?.5:1)*s,u,l,c+"/conv1"),d=a(s,u,l,c+"/conv2");return{conv1:h,conv2:d}}return{extractConvLayerParams:a,extractResidualLayerParams:o}}function F7(t){var e=no(t),n=e.extractWeights,r=e.getRemainingWeights,i=[],a=R7(n,i),o=a.extractConvLayerParams,s=a.extractResidualLayerParams,u=o(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),f=s(9216,32,3,"conv32_3"),h=s(36864,64,3,"conv64_down",!0),d=s(36864,64,3,"conv64_1"),v=s(36864,64,3,"conv64_2"),p=s(36864,64,3,"conv64_3"),m=s(147456,128,3,"conv128_down",!0),g=s(147456,128,3,"conv128_1"),x=s(147456,128,3,"conv128_2"),y=s(589824,256,3,"conv256_down",!0),w=s(589824,256,3,"conv256_1"),_=s(589824,256,3,"conv256_2"),b=s(589824,256,3,"conv256_down_out"),E=De(function(){return $o(No(n(256*128),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var S={conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:f,conv64_down:h,conv64_1:d,conv64_2:v,conv64_3:p,conv128_down:m,conv128_1:g,conv128_2:x,conv256_down:y,conv256_1:w,conv256_2:_,conv256_down_out:b,fc:E};return{params:S,paramMappings:i}}function D7(t,e){var n=Zo(t,e);function r(o){var s=n(o+"/scale/weights",1),u=n(o+"/scale/biases",1);return{weights:s,biases:u}}function i(o){var s=n(o+"/conv/filters",4),u=n(o+"/conv/bias",1),l=r(o);return{conv:{filters:s,bias:u},scale:l}}function a(o){return{conv1:i(o+"/conv1"),conv2:i(o+"/conv2")}}return{extractConvLayerParams:i,extractResidualLayerParams:a}}function O7(t){var e=[],n=D7(t,e),r=n.extractConvLayerParams,i=n.extractResidualLayerParams,a=r("conv32_down"),o=i("conv32_1"),s=i("conv32_2"),u=i("conv32_3"),l=i("conv64_down"),c=i("conv64_1"),f=i("conv64_2"),h=i("conv64_3"),d=i("conv128_down"),v=i("conv128_1"),p=i("conv128_2"),m=i("conv256_down"),g=i("conv256_1"),x=i("conv256_2"),y=i("conv256_down_out"),w=t.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!VU(w))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+w);var _={conv32_down:a,conv32_1:o,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:f,conv64_3:h,conv128_down:d,conv128_1:v,conv128_2:p,conv256_down:m,conv256_1:g,conv256_2:x,conv256_down_out:y,fc:w};return to(t,e),{params:_,paramMappings:e}}function Xi(t,e){var n=I7(t,e.conv1);return n=O4(n,e.conv2),n=rt(n,t),n=Lt(n),n}function Rh(t,e){var n=P4(t,e.conv1);n=O4(n,e.conv2);var r=Rf(t,2,2,"valid"),i=At(r.shape),a=r.shape[3]!==n.shape[3],o=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(o){var s=bc(n.shape);s[1]=1;var u=At(s);n=mn([n,u],1);var l=bc(n.shape);l[2]=1;var c=At(l);n=mn([n,c],2)}return r=a?mn([r,i],3):r,n=rt(r,n),n=Lt(n),n}var P7=function(t){qe(e,t);function e(){return t.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return De(function(){var i=n.toBatchTensor(150,!0).toFloat(),a=[122.782,117.001,104.298],o=Df(i,a).div(Ie(256)),s=P4(o,r.conv32_down);s=Cn(s,3,2,"valid"),s=Xi(s,r.conv32_1),s=Xi(s,r.conv32_2),s=Xi(s,r.conv32_3),s=Rh(s,r.conv64_down),s=Xi(s,r.conv64_1),s=Xi(s,r.conv64_2),s=Xi(s,r.conv64_3),s=Rh(s,r.conv128_down),s=Xi(s,r.conv128_1),s=Xi(s,r.conv128_2),s=Rh(s,r.conv256_down),s=Xi(s,r.conv256_1),s=Xi(s,r.conv256_2),s=Rh(s,r.conv256_down_out);var u=s.mean([1,2]),l=a0(u,r.fc);return l})},e.prototype.forward=function(n){return ze(this,void 0,void 0,function(){var r;return Ue(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,On(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.computeFaceDescriptor=function(n){return ze(this,void 0,void 0,function(){var r,i,a,o=this;return Ue(this,function(s){switch(s.label){case 0:return[4,On(n)];case 1:return r=s.sent(),i=De(function(){return gn(o.forwardInput(r))}),[4,Promise.all(i.map(function(u){return u.data()}))];case 2:return a=s.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(n){return O7(n)},e.prototype.extractParams=function(n){return F7(n)},e}(eo);function N4(t,e){var n={descriptor:e};return Object.assign({},t,n)}function M4(t,e){var n={age:e};return Object.assign({},t,n)}function L4(t,e,n){var r={gender:e,genderProbability:n};return Object.assign({},t,r)}var B4=function(){function t(e){var n=e===void 0?{}:e,r=n.minFaceSize,i=n.scaleFactor,a=n.maxNumScales,o=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=i||.709,this._maxNumScales=a||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}();function N7(t,e){function n(u,l){var c=br(t(9*u),[3,3,u,1]),f=rn(t(u)),h=rn(t(u)),d=rn(t(u)),v=rn(t(u));return e.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:c,batch_norm_scale:f,batch_norm_offset:h,batch_norm_mean:d,batch_norm_variance:v}}function r(u,l,c,f,h){var d=br(t(u*l*c*c),[c,c,u,l]),v=rn(t(l));return e.push({paramPath:f+"/filters"},{paramPath:f+"/"+(h?"batch_norm_offset":"bias")}),{filters:d,bias:v}}function i(u,l,c,f){var h=r(u,l,c,f,!0),d=h.filters,v=h.bias;return{filters:d,batch_norm_offset:v}}function a(u,l,c){var f=n(u,c+"/depthwise_conv"),h=i(u,l,1,c+"/pointwise_conv");return{depthwise_conv:f,pointwise_conv:h}}function o(){var u=i(3,32,3,"mobilenetv1/conv_0"),l=a(32,64,"mobilenetv1/conv_1"),c=a(64,128,"mobilenetv1/conv_2"),f=a(128,128,"mobilenetv1/conv_3"),h=a(128,256,"mobilenetv1/conv_4"),d=a(256,256,"mobilenetv1/conv_5"),v=a(256,512,"mobilenetv1/conv_6"),p=a(512,512,"mobilenetv1/conv_7"),m=a(512,512,"mobilenetv1/conv_8"),g=a(512,512,"mobilenetv1/conv_9"),x=a(512,512,"mobilenetv1/conv_10"),y=a(512,512,"mobilenetv1/conv_11"),w=a(512,1024,"mobilenetv1/conv_12"),_=a(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:l,conv_2:c,conv_3:f,conv_4:h,conv_5:d,conv_6:v,conv_7:p,conv_8:m,conv_9:g,conv_10:x,conv_11:y,conv_12:w,conv_13:_}}function s(){var u=i(1024,256,1,"prediction_layer/conv_0"),l=i(256,512,3,"prediction_layer/conv_1"),c=i(512,128,1,"prediction_layer/conv_2"),f=i(128,256,3,"prediction_layer/conv_3"),h=i(256,128,1,"prediction_layer/conv_4"),d=i(128,256,3,"prediction_layer/conv_5"),v=i(256,64,1,"prediction_layer/conv_6"),p=i(64,128,3,"prediction_layer/conv_7"),m=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),g=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),x=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),y=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),w=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),_=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),b=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),S=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),C=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),T=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),A=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),I={box_encoding_predictor:m,class_predictor:g},V={box_encoding_predictor:x,class_predictor:y},J={box_encoding_predictor:w,class_predictor:_},K={box_encoding_predictor:b,class_predictor:E},ae={box_encoding_predictor:S,class_predictor:C},ie={box_encoding_predictor:T,class_predictor:A};return{conv_0:u,conv_1:l,conv_2:c,conv_3:f,conv_4:h,conv_5:d,conv_6:v,conv_7:p,box_predictor_0:I,box_predictor_1:V,box_predictor_2:J,box_predictor_3:K,box_predictor_4:ae,box_predictor_5:ie}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:s}}function M7(t){var e=[],n=no(t),r=n.extractWeights,i=n.getRemainingWeights,a=N7(r,e),o=a.extractMobilenetV1Params,s=a.extractPredictionLayerParams,u=o(),l=s(),c=X1(r(5118*4),[1,5118,4]),f={extra_dim:c};if(e.push({paramPath:"output_layer/extra_dim"}),i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:f},paramMappings:e}}function L7(t,e){var n=Zo(t,e);function r(l,c,f){var h=n(l+"/Conv2d_"+c+"_pointwise/weights",4,f+"/filters"),d=n(l+"/Conv2d_"+c+"_pointwise/convolution_bn_offset",1,f+"/batch_norm_offset");return{filters:h,batch_norm_offset:d}}function i(l){var c="mobilenetv1/conv_"+l,f="MobilenetV1/Conv2d_"+l+"_depthwise",h=c+"/depthwise_conv",d=c+"/pointwise_conv",v=n(f+"/depthwise_weights",4,h+"/filters"),p=n(f+"/BatchNorm/gamma",1,h+"/batch_norm_scale"),m=n(f+"/BatchNorm/beta",1,h+"/batch_norm_offset"),g=n(f+"/BatchNorm/moving_mean",1,h+"/batch_norm_mean"),x=n(f+"/BatchNorm/moving_variance",1,h+"/batch_norm_variance");return{depthwise_conv:{filters:v,batch_norm_scale:p,batch_norm_offset:m,batch_norm_mean:g,batch_norm_variance:x},pointwise_conv:r("MobilenetV1",l,d)}}function a(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}}function o(l,c){var f=n(l+"/weights",4,c+"/filters"),h=n(l+"/biases",1,c+"/bias");return{filters:f,bias:h}}function s(l){var c=o("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),f=o("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:c,class_predictor:f}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:u}}function B7(t){var e=[],n=L7(t,e),r=n.extractMobilenetV1Params,i=n.extractPredictionLayerParams,a=t["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!l0(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var o={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:a}};return to(t,e),{params:o,paramMappings:e}}function Zi(t,e,n){return De(function(){var r=_i(t,e.filters,n,"same");return r=rt(r,e.batch_norm_offset),ix(r,0,6)})}var W7=.0010000000474974513;function z7(t,e,n){return De(function(){var r=i0(t,e.filters,n,"same");return r=Fk(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,W7),ix(r,0,6)})}function U7(t){return[2,4,6,12].some(function(e){return e===t})?[2,2]:[1,1]}function V7(t,e){return De(function(){var n=null,r=Zi(t,e.conv_0,[2,2]),i=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(i.forEach(function(a,o){var s=o+1,u=U7(s);r=z7(r,a.depthwise_conv,u),r=Zi(r,a.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function H7(t,e,n,r,i){var a=t.shape[0],o=Math.min(n,a),s=e.map(function(c,f){return{score:c,boxIndex:f}}).filter(function(c){return c.score>i}).sort(function(c,f){return f.score-c.score}),u=function(c){return c<=r?1:0},l=[];return s.forEach(function(c){if(!(l.length>=o)){for(var f=c.score,h=l.length-1;h>=0;--h){var d=$7(t,c.boxIndex,l[h]);if(d!==0&&(c.score*=u(d),c.score<=i))break}f===c.score&&l.push(c.boxIndex)}}),l}function $7(t,e,n){var r=t.arraySync(),i=Math.min(r[e][0],r[e][2]),a=Math.min(r[e][1],r[e][3]),o=Math.max(r[e][0],r[e][2]),s=Math.max(r[e][1],r[e][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),h=(o-i)*(s-a),d=(c-u)*(f-l);if(h<=0||d<=0)return 0;var v=Math.max(i,u),p=Math.max(a,l),m=Math.min(o,c),g=Math.min(s,f),x=Math.max(m-v,0)*Math.max(g-p,0);return x/(h+d-x)}function j7(t){var e=gn($o(t,[1,0])),n=[yn(e[2],e[0]),yn(e[3],e[1])],r=[rt(e[0],Ri(n[0],Ie(2))),rt(e[1],Ri(n[1],Ie(2)))];return{sizes:n,centers:r}}function G7(t,e){var n=j7(t),r=n.sizes,i=n.centers,a=gn($o(e,[1,0])),o=Ri(nr(lg(Ri(a[2],Ie(5))),r[0]),Ie(2)),s=rt(nr(Ri(a[0],Ie(10)),r[0]),i[0]),u=Ri(nr(lg(Ri(a[3],Ie(5))),r[1]),Ie(2)),l=rt(nr(Ri(a[1],Ie(10)),r[1]),i[1]);return $o(ei([yn(s,o),yn(l,u),rt(s,o),rt(l,u)]),[1,0])}function X7(t,e,n){return De(function(){var r=t.shape[0],i=G7(Oi($u(n.extra_dim,[r,1,1]),[-1,4]),Oi(t,[-1,4]));i=Oi(i,[r,i.shape[0]/r,4]);var a=kk(va(e,[0,0,1],[-1,-1,-1])),o=va(a,[0,0,0],[-1,-1,1]);o=Oi(o,[r,o.shape[1]]);var s=gn(i),u=gn(o);return{boxes:s,scores:u}})}function du(t,e){return De(function(){var n=t.shape[0],r=Oi(Bi(t,e.box_encoding_predictor),[n,-1,1,4]),i=Oi(Bi(t,e.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:i}})}function K7(t,e,n){return De(function(){var r=Zi(t,n.conv_0,[1,1]),i=Zi(r,n.conv_1,[2,2]),a=Zi(i,n.conv_2,[1,1]),o=Zi(a,n.conv_3,[2,2]),s=Zi(o,n.conv_4,[1,1]),u=Zi(s,n.conv_5,[2,2]),l=Zi(u,n.conv_6,[1,1]),c=Zi(l,n.conv_7,[2,2]),f=du(e,n.box_predictor_0),h=du(t,n.box_predictor_1),d=du(i,n.box_predictor_2),v=du(o,n.box_predictor_3),p=du(u,n.box_predictor_4),m=du(c,n.box_predictor_5),g=mn([f.boxPredictionEncoding,h.boxPredictionEncoding,d.boxPredictionEncoding,v.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding],1),x=mn([f.classPrediction,h.classPrediction,d.classPrediction,v.classPrediction,p.classPrediction,m.classPrediction],1);return{boxPredictions:g,classPredictions:x}})}var aa=function(){function t(e){var n=e===void 0?{}:e,r=n.minConfidence,i=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=i||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}(),W4=function(t){qe(e,t);function e(){return t.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return De(function(){var i=n.toBatchTensor(512,!1).toFloat(),a=yn(nr(i,Ie(.007843137718737125)),Ie(1)),o=V7(a,r.mobilenetv1),s=K7(o.out,o.conv11,r.prediction_layer),u=s.boxPredictions,l=s.classPredictions;return X7(u,l,r.output_layer)})},e.prototype.forward=function(n){return ze(this,void 0,void 0,function(){var r;return Ue(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,On(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),ze(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,h,d,v,p,m,g,x,y,w,_,b,E,S;return Ue(this,function(C){switch(C.label){case 0:return i=new aa(r),a=i.maxResults,o=i.minConfidence,[4,On(n)];case 1:for(s=C.sent(),u=this.forwardInput(s),l=u.boxes,c=u.scores,f=l[0],h=c[0],d=1;d<l.length;d++)l[d].dispose(),c[d].dispose();return m=(p=Array).from,[4,h.data()];case 2:return v=m.apply(p,[C.sent()]),g=.5,x=H7(f,v,a,g,o),y=s.getReshapedInputDimensions(0),w=s.inputSize,_=w/y.width,b=w/y.height,E=f.arraySync(),S=x.map(function(T){var A=[Math.max(0,E[T][0]),Math.min(1,E[T][2])].map(function(ie){return ie*b}),I=A[0],V=A[1],J=[Math.max(0,E[T][1]),Math.min(1,E[T][3])].map(function(ie){return ie*_}),K=J[0],ae=J[1];return new Hi(v[T],new _x(K,I,ae-K,V-I),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),f.dispose(),h.dispose(),[2,S]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(n){return B7(n)},e.prototype.extractParams=function(n){return M7(n)},e}(eo);(function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(W4);var q7=.4,Y7=[new ht(.738768,.874946),new ht(2.42204,2.65704),new ht(4.30971,7.04493),new ht(10.246,4.59428),new ht(12.6868,11.8741)],Q7=[new ht(1.603231,2.094468),new ht(6.041143,7.080126),new ht(2.882459,3.518061),new ht(4.266906,5.178857),new ht(9.041765,10.66308)],J7=[117.001,114.697,97.404],Z7="tiny_yolov2_model",e9="tiny_yolov2_separable_conv_model",Fh=function(t){return typeof t=="number"};function t9(t){if(!t)throw new Error("invalid config: "+t);if(typeof t.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!Fh(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(e){return e||{}}).every(function(e){return Fh(e.x)&&Fh(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||t.meanRgb.length!==3||!t.meanRgb.every(Fh)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}function Fx(t){return De(function(){var e=nr(t,Ie(.10000000149011612));return rt(Lt(yn(t,e)),e)})}function uo(t,e){return De(function(){var n=Qs(t,[[0,0],[1,1],[1,1],[0,0]]);return n=_i(n,e.conv.filters,[1,1],"valid"),n=yn(n,e.bn.sub),n=nr(n,e.bn.truediv),n=rt(n,e.conv.bias),Fx(n)})}function lo(t,e){return De(function(){var n=Qs(t,[[0,0],[1,1],[1,1],[0,0]]);return n=ux(n,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),n=rt(n,e.bias),Fx(n)})}function n9(t,e){var n=h0(t,e);function r(o,s){var u=rn(t(o)),l=rn(t(o));return e.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:u,truediv:l}}function i(o,s,u){var l=n(o,s,3,u+"/conv"),c=r(s,u+"/bn");return{conv:l,bn:c}}var a=Ax(t,e);return{extractConvParams:n,extractConvWithBatchNormParams:i,extractSeparableConvParams:a}}function r9(t,e,n,r){var i=no(t),a=i.extractWeights,o=i.getRemainingWeights,s=[],u=n9(a,s),l=u.extractConvParams,c=u.extractConvWithBatchNormParams,f=u.extractSeparableConvParams,h;if(e.withSeparableConvs){var d=r[0],v=r[1],p=r[2],m=r[3],g=r[4],x=r[5],y=r[6],w=r[7],_=r[8],b=e.isFirstLayerConv2d?l(d,v,3,"conv0"):f(d,v,"conv0"),E=f(v,p,"conv1"),S=f(p,m,"conv2"),C=f(m,g,"conv3"),T=f(g,x,"conv4"),A=f(x,y,"conv5"),I=w?f(y,w,"conv6"):void 0,V=_?f(w,_,"conv7"):void 0,J=l(_||w||y,5*n,1,"conv8");h={conv0:b,conv1:E,conv2:S,conv3:C,conv4:T,conv5:A,conv6:I,conv7:V,conv8:J}}else{var d=r[0],v=r[1],p=r[2],m=r[3],g=r[4],x=r[5],y=r[6],w=r[7],_=r[8],b=c(d,v,"conv0"),E=c(v,p,"conv1"),S=c(p,m,"conv2"),C=c(m,g,"conv3"),T=c(g,x,"conv4"),A=c(x,y,"conv5"),I=c(y,w,"conv6"),V=c(w,_,"conv7"),J=l(_,5*n,1,"conv8");h={conv0:b,conv1:E,conv2:S,conv3:C,conv4:T,conv5:A,conv6:I,conv7:V,conv8:J}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:h,paramMappings:s}}function i9(t,e){var n=Zo(t,e);function r(s){var u=n(s+"/sub",1),l=n(s+"/truediv",1);return{sub:u,truediv:l}}function i(s){var u=n(s+"/filters",4),l=n(s+"/bias",1);return{filters:u,bias:l}}function a(s){var u=i(s+"/conv"),l=r(s+"/bn");return{conv:u,bn:l}}var o=Ix(n);return{extractConvParams:i,extractConvWithBatchNormParams:a,extractSeparableConvParams:o}}function a9(t,e){var n=[],r=i9(t,n),i=r.extractConvParams,a=r.extractConvWithBatchNormParams,o=r.extractSeparableConvParams,s;if(e.withSeparableConvs){var u=e.filterSizes&&e.filterSizes.length||9;s={conv0:e.isFirstLayerConv2d?i("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:u>7?o("conv6"):void 0,conv7:u>8?o("conv7"):void 0,conv8:i("conv8")}}else s={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:i("conv8")};return to(t,n),{params:s,paramMappings:n}}var d_;(function(t){t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG"})(d_||(d_={}));var Dx=function(){function t(e){var n=e===void 0?{}:e,r=n.inputSize,i=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=i||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}(),z4=function(t){qe(e,t);function e(n){var r=t.call(this,"TinyYolov2")||this;return t9(n),r._config=n,r}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(n,r){var i=uo(n,r.conv0);return i=Cn(i,[2,2],[2,2],"same"),i=uo(i,r.conv1),i=Cn(i,[2,2],[2,2],"same"),i=uo(i,r.conv2),i=Cn(i,[2,2],[2,2],"same"),i=uo(i,r.conv3),i=Cn(i,[2,2],[2,2],"same"),i=uo(i,r.conv4),i=Cn(i,[2,2],[2,2],"same"),i=uo(i,r.conv5),i=Cn(i,[2,2],[1,1],"same"),i=uo(i,r.conv6),i=uo(i,r.conv7),Bi(i,r.conv8,"valid",!1)},e.prototype.runMobilenet=function(n,r){var i=this.config.isFirstLayerConv2d?Fx(Bi(n,r.conv0,"valid",!1)):lo(n,r.conv0);return i=Cn(i,[2,2],[2,2],"same"),i=lo(i,r.conv1),i=Cn(i,[2,2],[2,2],"same"),i=lo(i,r.conv2),i=Cn(i,[2,2],[2,2],"same"),i=lo(i,r.conv3),i=Cn(i,[2,2],[2,2],"same"),i=lo(i,r.conv4),i=Cn(i,[2,2],[2,2],"same"),i=lo(i,r.conv5),i=Cn(i,[2,2],[1,1],"same"),i=r.conv6?lo(i,r.conv6):i,i=r.conv7?lo(i,r.conv7):i,Bi(i,r.conv8,"valid",!1)},e.prototype.forwardInput=function(n,r){var i=this,a=this.params;if(!a)throw new Error("TinyYolov2 - load model before inference");return De(function(){var o=n.toBatchTensor(r,!1).toFloat();return o=i.config.meanRgb?Df(o,i.config.meanRgb):o,o=o.div(Ie(256)),i.config.withSeparableConvs?i.runMobilenet(o,a):i.runTinyYolov2(o,a)})},e.prototype.forward=function(n,r){return ze(this,void 0,void 0,function(){var i;return Ue(this,function(a){switch(a.label){case 0:return i=this.forwardInput,[4,On(n)];case 1:return[4,i.apply(this,[a.sent(),r])];case 2:return[2,a.sent()]}})})},e.prototype.detect=function(n,r){return r===void 0&&(r={}),ze(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,h,d,v,p,m,g,x=this;return Ue(this,function(y){switch(y.label){case 0:return i=new Dx(r),a=i.inputSize,o=i.scoreThreshold,[4,On(n)];case 1:return s=y.sent(),[4,this.forwardInput(s,a)];case 2:return u=y.sent(),l=De(function(){return gn(u)[0].expandDims()}),c={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(l,s.getReshapedInputDimensions(0),o)];case 3:return f=y.sent(),u.dispose(),l.dispose(),h=f.map(function(w){return w.box}),d=f.map(function(w){return w.score}),v=f.map(function(w){return w.classScore}),p=f.map(function(w){return x.config.classes[w.label]}),m=rf(h.map(function(w){return w.rescale(a)}),d,this.config.iouThreshold,!0),g=m.map(function(w){return new f4(d[w],v[w],p[w],h[w],c)}),[2,g]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(n){return a9(n,this.config)},e.prototype.extractParams=function(n){var r=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,i=r?r.length:void 0;if(i!==7&&i!==8&&i!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+i+" filterSizes in config");return r9(n,this.config,this.boxEncodingSize,r)},e.prototype.extractBoxes=function(n,r,i){return ze(this,void 0,void 0,function(){var a,o,s,u,l,c,f,h,d,v,p,m,g,x,y,w,_,b,E,S,C,T,A,I,V,J,K,ae,ie,G=this;return Ue(this,function(Q){switch(Q.label){case 0:return a=r.width,o=r.height,s=Math.max(a,o),u=s/a,l=s/o,c=n.shape[1],f=this.config.anchors.length,h=De(function(){var te=n.reshape([c,c,f,G.boxEncodingSize]),pe=te.slice([0,0,0,0],[c,c,f,4]),P=te.slice([0,0,0,4],[c,c,f,1]),j=G.withClassScores?Ja(te.slice([0,0,0,5],[c,c,f,G.config.classes.length]),3):Ie(0);return[pe,P,j]}),d=h[0],v=h[1],p=h[2],m=[],[4,v.array()];case 1:return g=Q.sent(),[4,d.array()];case 2:x=Q.sent(),y=0,Q.label=3;case 3:if(!(y<c))return[3,12];w=0,Q.label=4;case 4:if(!(w<c))return[3,11];_=0,Q.label=5;case 5:return _<f?(b=Ov(g[y][w][_][0]),!i||b>i?(E=(w+Ov(x[y][w][_][0]))/c*u,S=(y+Ov(x[y][w][_][1]))/c*l,C=Math.exp(x[y][w][_][2])*this.config.anchors[_].x/c*u,T=Math.exp(x[y][w][_][3])*this.config.anchors[_].y/c*l,A=E-C/2,I=S-T/2,V={row:y,col:w,anchor:_},this.withClassScores?[4,this.extractPredictedClass(p,V)]:[3,7]):[3,9]):[3,10];case 6:return ie=Q.sent(),[3,8];case 7:ie={classScore:1,label:0},Q.label=8;case 8:J=ie,K=J.classScore,ae=J.label,m.push(Zn({box:new c0(A,I,A+C,I+T),score:b,classScore:b*K,label:ae},V)),Q.label=9;case 9:return _++,[3,5];case 10:return w++,[3,4];case 11:return y++,[3,3];case 12:return d.dispose(),v.dispose(),p.dispose(),[2,m]}})})},e.prototype.extractPredictedClass=function(n,r){return ze(this,void 0,void 0,function(){var i,a,o,s;return Ue(this,function(u){switch(u.label){case 0:return i=r.row,a=r.col,o=r.anchor,[4,n.array()];case 1:return s=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,c){return s[i][a][o][c]}).map(function(l,c){return{classScore:l,label:c}}).reduce(function(l,c){return l.classScore>c.classScore?l:c})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(eo),o9=function(t){qe(e,t);function e(n){n===void 0&&(n=!0);var r=this,i=Object.assign({},{withSeparableConvs:n,iouThreshold:q7,classes:["face"]},n?{anchors:Q7,meanRgb:J7}:{anchors:Y7,withClassScores:!0});return r=t.call(this,i)||this,r}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return ze(this,void 0,void 0,function(){var i;return Ue(this,function(a){switch(a.label){case 0:return[4,this.detect(n,r)];case 1:return i=a.sent(),[2,i.map(function(o){return new Hi(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?e9:Z7},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e}(z4),Ia=function(t){qe(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return e}(Dx),Of=function(){function t(){}return t.prototype.then=function(e){return ze(this,void 0,void 0,function(){var n;return Ue(this,function(r){switch(r.label){case 0:return n=e,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},t.prototype.run=function(){return ze(this,void 0,void 0,function(){return Ue(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},t}();function p0(t,e,n,r,i){return i===void 0&&(i=function(a){var o=a.alignedRect;return o}),ze(this,void 0,void 0,function(){var a,o,s,u,l;return Ue(this,function(c){switch(c.label){case 0:return a=t.map(function(f){return I4(f)?i(f):f.detection}),s=r,s?[3,5]:e instanceof Mt?[4,Tx(e,a)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,Cx(e,a)];case 3:u=c.sent(),c.label=4;case 4:s=u,c.label=5;case 5:return o=s,[4,n(o)];case 6:return l=c.sent(),o.forEach(function(f){return f instanceof Mt&&f.dispose()}),[2,l]}})})}function Ox(t,e,n,r,i){return ze(this,void 0,void 0,function(){var a=this;return Ue(this,function(o){return[2,p0([t],e,function(s){return ze(a,void 0,void 0,function(){return Ue(this,function(u){return[2,n(s[0])]})})},r,i)]})})}function s9(t){return De(function(){return ei(gn(t,3).reverse(),3)})}var Dh=2,_p=12;function u9(t,e){var n=h0(t,e),r=kx(t,e);function i(l,c){var f=rn(t(l));return e.push({paramPath:c}),f}function a(l,c,f){f===void 0&&(f=!1);var h=n(l[0],l[1],3,c+"/conv1"),d=i(l[1],c+"/prelu1_alpha"),v=n(l[1],l[2],3,c+"/conv2"),p=i(l[2],c+"/prelu2_alpha"),m=n(l[2],l[3],f?2:3,c+"/conv3"),g=i(l[3],c+"/prelu3_alpha");return{conv1:h,prelu1_alpha:d,conv2:v,prelu2_alpha:p,conv3:m,prelu3_alpha:g}}function o(){var l=a([3,10,16,32],"pnet"),c=n(32,2,1,"pnet/conv4_1"),f=n(32,4,1,"pnet/conv4_2");return Zn(Zn({},l),{conv4_1:c,conv4_2:f})}function s(){var l=a([3,28,48,64],"rnet",!0),c=r(576,128,"rnet/fc1"),f=i(128,"rnet/prelu4_alpha"),h=r(128,2,"rnet/fc2_1"),d=r(128,4,"rnet/fc2_2");return Zn(Zn({},l),{fc1:c,prelu4_alpha:f,fc2_1:h,fc2_2:d})}function u(){var l=a([3,32,64,64],"onet"),c=n(64,128,2,"onet/conv4"),f=i(128,"onet/prelu4_alpha"),h=r(1152,256,"onet/fc1"),d=i(256,"onet/prelu5_alpha"),v=r(256,2,"onet/fc2_1"),p=r(256,4,"onet/fc2_2"),m=r(256,10,"onet/fc2_3");return Zn(Zn({},l),{conv4:c,prelu4_alpha:f,fc1:h,prelu5_alpha:d,fc2_1:v,fc2_2:p,fc2_3:m})}return{extractPNetParams:o,extractRNetParams:s,extractONetParams:u}}function l9(t){var e=no(t),n=e.extractWeights,r=e.getRemainingWeights,i=[],a=u9(n,i),o=a.extractPNetParams,s=a.extractRNetParams,u=a.extractONetParams,l=o(),c=s(),f=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:f},paramMappings:i}}function c9(t,e){var n=Zo(t,e);function r(c){var f=n(c+"/weights",4,c+"/filters"),h=n(c+"/bias",1);return{filters:f,bias:h}}function i(c){var f=n(c+"/weights",2),h=n(c+"/bias",1);return{weights:f,bias:h}}function a(c){return n(c,1)}function o(c){var f=r(c+"/conv1"),h=a(c+"/prelu1_alpha"),d=r(c+"/conv2"),v=a(c+"/prelu2_alpha"),p=r(c+"/conv3"),m=a(c+"/prelu3_alpha");return{conv1:f,prelu1_alpha:h,conv2:d,prelu2_alpha:v,conv3:p,prelu3_alpha:m}}function s(){var c=o("pnet"),f=r("pnet/conv4_1"),h=r("pnet/conv4_2");return Zn(Zn({},c),{conv4_1:f,conv4_2:h})}function u(){var c=o("rnet"),f=i("rnet/fc1"),h=a("rnet/prelu4_alpha"),d=i("rnet/fc2_1"),v=i("rnet/fc2_2");return Zn(Zn({},c),{fc1:f,prelu4_alpha:h,fc2_1:d,fc2_2:v})}function l(){var c=o("onet"),f=r("onet/conv4"),h=a("onet/prelu4_alpha"),d=i("onet/fc1"),v=a("onet/prelu5_alpha"),p=i("onet/fc2_1"),m=i("onet/fc2_2"),g=i("onet/fc2_3");return Zn(Zn({},c),{conv4:f,prelu4_alpha:h,fc1:d,prelu5_alpha:v,fc2_1:p,fc2_2:m,fc2_3:g})}return{extractPNetParams:s,extractRNetParams:u,extractONetParams:l}}function f9(t){var e=[],n=c9(t,e),r=n.extractPNetParams,i=n.extractRNetParams,a=n.extractONetParams,o=r(),s=i(),u=a();return to(t,e),{params:{pnet:o,rnet:s,onet:u},paramMappings:e}}function gg(t,e){var n=e[0],r=e[1];return{height:Math.floor(n*t),width:Math.floor(r*t)}}function h9(t,e,n){for(var r=n[0],i=n[1],a=_p/t,o=[],s=Math.min(r,i)*a,u=0;s>=12;)o.push(a*Math.pow(e,u)),s=s*e,u+=1;return o}var Px=function(t){qe(e,t);function e(n,r,i,a){return t.call(this,{left:n,top:r,right:i,bottom:a},!0)||this}return e}(jo);function U4(t){return De(function(){return nr(yn(t,Ie(127.5)),Ie(.0078125))})}function qu(t,e){return De(function(){return rt(Lt(t),nr(e,vp(Lt(vp(t)))))})}function Nx(t,e,n){return n===void 0&&(n=!1),De(function(){var r=Bi(t,e.conv1,"valid");return r=qu(r,e.prelu1_alpha),r=Cn(r,n?[2,2]:[3,3],[2,2],"same"),r=Bi(r,e.conv2,"valid"),r=qu(r,e.prelu2_alpha),r=n?r:Cn(r,[3,3],[2,2],"valid"),r=Bi(r,e.conv3,"valid"),r=qu(r,e.prelu3_alpha),r})}function d9(t,e){return De(function(){var n=Nx(t,e,!0),r=Bi(n,e.conv4_1,"valid"),i=hi(o0(r,3),3),a=Ja(yn(r,i),3),o=Bi(n,e.conv4_2,"valid");return{prob:a,regions:o}})}function p9(t,e){return De(function(){var n=gg(e,t.shape.slice(1)),r=n.height,i=n.width,a=dx.resizeBilinear(t,[r,i]),o=U4(a);return $o(o,[0,2,1,3])})}function v9(t,e,n,r){for(var i=[],a=t.arraySync(),o=0;o<t.shape[0];o++)for(var s=0;s<t.shape[1];s++)a[o][s]>=r&&i.push(new ht(s,o));var u=i.map(function(l){var c=new c0(Math.round((l.y*Dh+1)/n),Math.round((l.x*Dh+1)/n),Math.round((l.y*Dh+_p)/n),Math.round((l.x*Dh+_p)/n)),f=a[l.y][l.x],h=e.arraySync(),d=new Px(h[l.y][l.x][0],h[l.y][l.x][1],h[l.y][l.x][2],h[l.y][l.x][3]);return{cell:c,score:f,region:d}});return u}function m9(t,e,n,r,i){i.stage1=[];var a=e.map(function(h){return De(function(){var d={scale:h},v=p9(t,h),p=Date.now(),m=d9(v,r),g=m.prob,x=m.regions;d.pnet=Date.now()-p;var y=gn(gn(g,3)[1])[0],w=gn(x)[0];return{scoresTensor:y,regionsTensor:w,scale:h,statsForScale:d}})}),o=a.map(function(h){var d=h.scoresTensor,v=h.regionsTensor,p=h.scale,m=h.statsForScale,g=v9(d,v,p,n);if(d.dispose(),v.dispose(),!g.length)return i.stage1.push(m),[];var x=Date.now(),y=rf(g.map(function(w){return w.cell}),g.map(function(w){return w.score}),.5);return m.nms=Date.now()-x,m.numBoxes=y.length,i.stage1.push(m),y.map(function(w){return g[w]})}),s=o.reduce(function(h,d){return h.concat(d)},[]),u=[],l=[];if(s.length>0){var c=Date.now(),f=rf(s.map(function(h){return h.cell}),s.map(function(h){return h.score}),.7);i.stage1_nms=Date.now()-c,l=f.map(function(h){return s[h].score}),u=f.map(function(h){return s[h]}).map(function(h){var d=h.cell,v=h.region;return new c0(d.left+v.left*d.width,d.top+v.top*d.height,d.right+v.right*d.width,d.bottom+v.bottom*d.height).toSquare().round()})}return{boxes:u,scores:l}}function V4(t,e,n){var r=n.width,i=n.height;return ze(this,void 0,void 0,function(){var a,o,s,u=this;return Ue(this,function(l){switch(l.label){case 0:return a=Us(t),[4,Promise.all(e.map(function(c){return ze(u,void 0,void 0,function(){var f,h,d,v,p,m,g,x;return Ue(this,function(y){return f=c.padAtBorders(t.height,t.width),h=f.y,d=f.ey,v=f.x,p=f.ex,m=v-1,g=h-1,x=a.getImageData(m,g,p-m,d-g),[2,sr.isNodejs()?Sx(x):createImageBitmap(x)]})})}))];case 1:return o=l.sent(),s=[],o.forEach(function(c){var f=f0({width:r,height:i}),h=Us(f);h.drawImage(c,0,0,r,i);for(var d=h.getImageData(0,0,r,i).data,v=[],p=0;p<d.length;p+=4)v.push(d[p+2]),v.push(d[p+1]),v.push(d[p]);s.push(v)}),[2,s.map(function(c){var f=De(function(){var h=$o(br(c,[1,r,i,3]),[0,2,1,3]).toFloat();return U4(h)});return f})]}})})}function g9(t,e){return De(function(){var n=Nx(t,e),r=Oi(n,[n.shape[0],e.fc1.weights.shape[0]]),i=oa(r,e.fc1),a=qu(i,e.prelu4_alpha),o=oa(a,e.fc2_1),s=hi(o0(o,1),1),u=Ja(yn(o,s),1),l=oa(a,e.fc2_2),c=gn(u,1)[1];return{scores:c,regions:l}})}function x9(t,e,n,r,i){return ze(this,void 0,void 0,function(){var a,o,s,u,l,c,f,h,d,v,p,m,g,x;return Ue(this,function(y){switch(y.label){case 0:return a=Date.now(),[4,V4(t,e,{width:24,height:24})];case 1:return o=y.sent(),i.stage2_extractImagePatches=Date.now()-a,a=Date.now(),s=o.map(function(w){var _=g9(w,r);return w.dispose(),_}),i.stage2_rnet=Date.now()-a,u=s.length>1?mn(s.map(function(w){return w.scores})):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[y.sent()]),u.dispose(),h=l.map(function(w,_){return{score:w,idx:_}}).filter(function(w){return w.score>n}).map(function(w){var _=w.idx;return _}),d=h.map(function(w){return e[w]}),v=h.map(function(w){return l[w]}),p=[],m=[],d.length>0&&(a=Date.now(),g=rf(d,v,.7),i.stage2_nms=Date.now()-a,x=g.map(function(w){var _=s[h[w]].regions.arraySync();return new Px(_[0][0],_[0][1],_[0][2],_[0][3])}),m=g.map(function(w){return v[w]}),p=g.map(function(w,_){return d[w].calibrate(x[_])})),s.forEach(function(w){w.regions.dispose(),w.scores.dispose()}),[2,{boxes:p,scores:m}]}})})}function y9(t,e){return De(function(){var n=Nx(t,e);n=Cn(n,[2,2],[2,2],"same"),n=Bi(n,e.conv4,"valid"),n=qu(n,e.prelu4_alpha);var r=Oi(n,[n.shape[0],e.fc1.weights.shape[0]]),i=oa(r,e.fc1),a=qu(i,e.prelu5_alpha),o=oa(a,e.fc2_1),s=hi(o0(o,1),1),u=Ja(yn(o,s),1),l=oa(a,e.fc2_2),c=oa(a,e.fc2_3),f=gn(u,1)[1];return{scores:f,regions:l,points:c}})}function w9(t,e,n,r,i){return ze(this,void 0,void 0,function(){var a,o,s,u,l,c,f,h,d,v,p,m,g,x,y;return Ue(this,function(w){switch(w.label){case 0:return a=Date.now(),[4,V4(t,e,{width:48,height:48})];case 1:return o=w.sent(),i.stage3_extractImagePatches=Date.now()-a,a=Date.now(),s=o.map(function(_){var b=y9(_,r);return _.dispose(),b}),i.stage3_onet=Date.now()-a,u=s.length>1?mn(s.map(function(_){return _.scores})):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[w.sent()]),u.dispose(),h=l.map(function(_,b){return{score:_,idx:b}}).filter(function(_){return _.score>n}).map(function(_){var b=_.idx;return b}),d=h.map(function(_){var b=s[_].regions.arraySync();return new Px(b[0][0],b[0][1],b[0][2],b[0][3])}),v=h.map(function(_,b){return e[_].calibrate(d[b])}),p=h.map(function(_){return l[_]}),m=[],g=[],x=[],v.length>0&&(a=Date.now(),y=rf(v,p,.7,!1),i.stage3_nms=Date.now()-a,m=y.map(function(_){return v[_]}),g=y.map(function(_){return p[_]}),x=y.map(function(_,b){return Array(5).fill(0).map(function(E,S){var C=s[_].points.arraySync();return new ht(C[0][S]*(m[b].width+1)+m[b].left,C[0][S+5]*(m[b].height+1)+m[b].top)})})),s.forEach(function(_){_.regions.dispose(),_.scores.dispose(),_.points.dispose()}),[2,{boxes:m,scores:g,points:x}]}})})}var _9=function(t){qe(e,t);function e(){return t.call(this,"Mtcnn")||this}return e.prototype.load=function(n){return ze(this,void 0,void 0,function(){return Ue(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.load.call(this,n)]})})},e.prototype.loadFromDisk=function(n){return ze(this,void 0,void 0,function(){return Ue(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.loadFromDisk.call(this,n)]})})},e.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),ze(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,h,d,v,p,m,g,x,y,w,_,b,E,S;return Ue(this,function(C){switch(C.label){case 0:if(i=this.params,!i)throw new Error("Mtcnn - load model before inference");if(a=n.canvases[0],!a)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},s=Date.now(),u=De(function(){return s9(hi(yx.fromPixels(a)).toFloat())}),l=function(T){return u.dispose(),o.total=Date.now()-s,T},c=u.shape.slice(1),f=c[0],h=c[1],d=new B4(r),v=d.minFaceSize,p=d.scaleFactor,m=d.maxNumScales,g=d.scoreThresholds,x=d.scaleSteps,y=(x||h9(v,p,[f,h])).filter(function(T){var A=gg(T,[f,h]);return Math.min(A.width,A.height)>_p}).slice(0,m),o.scales=y,o.pyramid=y.map(function(T){return gg(T,[f,h])}),w=Date.now(),[4,m9(u,y,g[0],i.pnet,o)];case 1:return _=C.sent(),o.total_stage1=Date.now()-w,_.boxes.length?(o.stage2_numInputBoxes=_.boxes.length,w=Date.now(),[4,x9(a,_.boxes,g[1],i.rnet,o)]):[2,l({results:[],stats:o})];case 2:return b=C.sent(),o.total_stage2=Date.now()-w,b.boxes.length?(o.stage3_numInputBoxes=b.boxes.length,w=Date.now(),[4,w9(a,b.boxes,g[2],i.onet,o)]):[2,l({results:[],stats:o})];case 3:return E=C.sent(),o.total_stage3=Date.now()-w,S=E.boxes.map(function(T,A){return d0(of({},new Hi(E.scores[A],new _x(T.left/h,T.top/f,T.width/h,T.height/f),{height:f,width:h})),new JU(E.points[A].map(function(I){return I.sub(new ht(T.left,T.top)).div(new ht(T.width,T.height))}),{width:T.width,height:T.height}))}),[2,l({results:S,stats:o})]}})})},e.prototype.forward=function(n,r){return r===void 0&&(r={}),ze(this,void 0,void 0,function(){var i;return Ue(this,function(a){switch(a.label){case 0:return i=this.forwardInput,[4,On(n)];case 1:return[4,i.apply(this,[a.sent(),r])];case 2:return[2,a.sent().results]}})})},e.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),ze(this,void 0,void 0,function(){var i;return Ue(this,function(a){switch(a.label){case 0:return i=this.forwardInput,[4,On(n)];case 1:return[2,i.apply(this,[a.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(n){return f9(n)},e.prototype.extractParams=function(n){return l9(n)},e}(eo),b9=.4,E9=[new ht(1.603231,2.094468),new ht(6.041143,7.080126),new ht(2.882459,3.518061),new ht(4.266906,5.178857),new ht(9.041765,10.66308)],S9=[117.001,114.697,97.404],C9=function(t){qe(e,t);function e(){var n=this,r={withSeparableConvs:!0,iouThreshold:b9,classes:["face"],anchors:E9,meanRgb:S9,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=t.call(this,r)||this,n}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return ze(this,void 0,void 0,function(){var i;return Ue(this,function(a){switch(a.label){case 0:return[4,this.detect(n,r)];case 1:return i=a.sent(),[2,i.map(function(o){return new Hi(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e}(z4),tn={ssdMobilenetv1:new W4,tinyFaceDetector:new C9,tinyYolov2:new o9,mtcnn:new _9,faceLandmark68Net:new D4,faceLandmark68TinyNet:new k7,faceRecognitionNet:new P7,faceExpressionNet:new p7,ageGenderNet:new E7},H4=function(t){qe(e,t);function e(n,r,i){var a=t.call(this)||this;return a.parentTask=n,a.input=r,a.extractedFaces=i,a}return e}(Of),Mx=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return ze(this,void 0,void 0,function(){var n,r,i=this;return Ue(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,p0(n,this.input,function(o){return ze(i,void 0,void 0,function(){return Ue(this,function(s){switch(s.label){case 0:return[4,Promise.all(o.map(function(u){return tn.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,n.map(function(o,s){return A4(o,r[s])})]}})})},e.prototype.withAgeAndGender=function(){return new zx(this,this.input)},e}(H4),Lx=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return ze(this,void 0,void 0,function(){var n,r;return Ue(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),n?[4,Ox(n,this.input,function(a){return tn.faceExpressionNet.predictExpressions(a)},this.extractedFaces)]:[2];case 2:return r=i.sent(),[2,A4(n,r)]}})})},e.prototype.withAgeAndGender=function(){return new Ux(this,this.input)},e}(H4),Bx=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new Vx(this,this.input)},e.prototype.withFaceDescriptors=function(){return new $x(this,this.input)},e}(Mx),Wx=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new Hx(this,this.input)},e.prototype.withFaceDescriptor=function(){return new jx(this,this.input)},e}(Lx),$4=function(t){qe(e,t);function e(n,r,i){var a=t.call(this)||this;return a.parentTask=n,a.input=r,a.extractedFaces=i,a}return e}(Of),zx=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return ze(this,void 0,void 0,function(){var n,r,i=this;return Ue(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,p0(n,this.input,function(o){return ze(i,void 0,void 0,function(){return Ue(this,function(s){switch(s.label){case 0:return[4,Promise.all(o.map(function(u){return tn.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,n.map(function(o,s){var u=r[s],l=u.age,c=u.gender,f=u.genderProbability;return M4(L4(o,c,f),l)})]}})})},e.prototype.withFaceExpressions=function(){return new Mx(this,this.input)},e}($4),Ux=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return ze(this,void 0,void 0,function(){var n,r,i,a,o;return Ue(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,Ox(n,this.input,function(u){return tn.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=s.sent(),i=r.age,a=r.gender,o=r.genderProbability,[2,M4(L4(n,a,o),i)]}})})},e.prototype.withFaceExpressions=function(){return new Lx(this,this.input)},e}($4),Vx=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new Bx(this,this.input)},e.prototype.withFaceDescriptors=function(){return new $x(this,this.input)},e}(zx),Hx=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new Wx(this,this.input)},e.prototype.withFaceDescriptor=function(){return new jx(this,this.input)},e}(Ux),j4=function(t){qe(e,t);function e(n,r){var i=t.call(this)||this;return i.parentTask=n,i.input=r,i}return e}(Of),$x=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return ze(this,void 0,void 0,function(){var n,r;return Ue(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,p0(n,this.input,function(a){return Promise.all(a.map(function(o){return tn.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=i.sent(),[2,r.map(function(a,o){return N4(n[o],a)})]}})})},e.prototype.withFaceExpressions=function(){return new Bx(this,this.input)},e.prototype.withAgeAndGender=function(){return new Vx(this,this.input)},e}(j4),jx=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return ze(this,void 0,void 0,function(){var n,r;return Ue(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),n?[4,Ox(n,this.input,function(a){return tn.faceRecognitionNet.computeFaceDescriptor(a)},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=i.sent(),[2,N4(n,r)]}})})},e.prototype.withFaceExpressions=function(){return new Wx(this,this.input)},e.prototype.withAgeAndGender=function(){return new Hx(this,this.input)},e}(j4),G4=function(t){qe(e,t);function e(n,r,i){var a=t.call(this)||this;return a.parentTask=n,a.input=r,a.useTinyLandmarkNet=i,a}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?tn.faceLandmark68TinyNet:tn.faceLandmark68Net},enumerable:!0,configurable:!0}),e}(Of),T9=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return ze(this,void 0,void 0,function(){var n,r,i,a,o,s=this;return Ue(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return n=u.sent(),r=n.map(function(l){return l.detection}),this.input instanceof Mt?[4,Tx(this.input,r)]:[3,3];case 2:return a=u.sent(),[3,5];case 3:return[4,Cx(this.input,r)];case 4:a=u.sent(),u.label=5;case 5:return i=a,[4,Promise.all(i.map(function(l){return s.landmarkNet.detectLandmarks(l)}))];case 6:return o=u.sent(),i.forEach(function(l){return l instanceof Mt&&l.dispose()}),[2,n.map(function(l,c){return d0(l,o[c])})]}})})},e.prototype.withFaceExpressions=function(){return new Bx(this,this.input)},e.prototype.withAgeAndGender=function(){return new Vx(this,this.input)},e.prototype.withFaceDescriptors=function(){return new $x(this,this.input)},e}(G4),k9=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return ze(this,void 0,void 0,function(){var n,r,i,a,o;return Ue(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof Mt?[4,Tx(this.input,[r])]:[3,3]):[2];case 2:return a=s.sent(),[3,5];case 3:return[4,Cx(this.input,[r])];case 4:a=s.sent(),s.label=5;case 5:return i=a,[4,this.landmarkNet.detectLandmarks(i[0])];case 6:return o=s.sent(),i.forEach(function(u){return u instanceof Mt&&u.dispose()}),[2,d0(n,o)]}})})},e.prototype.withFaceExpressions=function(){return new Wx(this,this.input)},e.prototype.withAgeAndGender=function(){return new Hx(this,this.input)},e.prototype.withFaceDescriptor=function(){return new jx(this,this.input)},e}(G4),X4=function(t){qe(e,t);function e(n,r){r===void 0&&(r=new aa);var i=t.call(this)||this;return i.input=n,i.options=r,i}return e}(Of),K4=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return ze(this,void 0,void 0,function(){var n,r,i,a;return Ue(this,function(o){switch(o.label){case 0:return n=this,r=n.input,i=n.options,i instanceof B4?[4,tn.mtcnn.forward(r,i)]:[3,2];case 1:return[2,o.sent().map(function(s){return s.detection})];case 2:if(a=i instanceof Ia?function(s){return tn.tinyFaceDetector.locateFaces(s,i)}:i instanceof aa?function(s){return tn.ssdMobilenetv1.locateFaces(s,i)}:i instanceof Dx?function(s){return tn.tinyYolov2.locateFaces(s,i)}:null,!a)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,a(r)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return ze(n,void 0,void 0,function(){var i;return Ue(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return i=a.sent(),[2,r(i.map(function(o){return of({},o)}))]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new T9(this.runAndExtendWithFaceDetections(),this.input,n)},e.prototype.withFaceExpressions=function(){return new Mx(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new zx(this.runAndExtendWithFaceDetections(),this.input)},e}(X4),A9=function(t){qe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return ze(this,void 0,void 0,function(){var n,r;return Ue(this,function(i){switch(i.label){case 0:return[4,new K4(this.input,this.options)];case 1:return n=i.sent(),r=n[0],n.forEach(function(a){a.score>r.score&&(r=a)}),[2,r]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return ze(n,void 0,void 0,function(){var i;return Ue(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return i=a.sent(),[2,r(i?of({},i):void 0)]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new k9(this.runAndExtendWithFaceDetection(),this.input,n)},e.prototype.withFaceExpressions=function(){return new Lx(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new Ux(this.runAndExtendWithFaceDetection(),this.input)},e}(X4);function p_(t,e){return e===void 0&&(e=new aa),new A9(t,e)}function Oh(t,e){return e===void 0&&(e=new aa),new K4(t,e)}function I9(t,e){if(t.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(t),r=Array.from(e);return Math.sqrt(n.map(function(i,a){return i-r[a]}).reduce(function(i,a){return i+Math.pow(a,2)},0))}var R9=function(){function t(e,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(e)?e:[e];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var i=1,a=function(){return"person "+i++};this._labeledDescriptors=r.map(function(o){if(o instanceof ec)return o;if(o instanceof Float32Array)return new ec(a(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new ec(a(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(e,n){return n.map(function(r){return I9(r,e)}).reduce(function(r,i){return r+i},0)/(n.length||1)},t.prototype.matchDescriptor=function(e){var n=this;return this.labeledDescriptors.map(function(r){var i=r.descriptors,a=r.label;return new u_(a,n.computeMeanDistance(e,i))}).reduce(function(r,i){return r.distance<i.distance?r:i})},t.prototype.findBestMatch=function(e){var n=this.matchDescriptor(e);return n.distance<this.distanceThreshold?n:new u_("unknown",n.distance)},t.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},t.fromJSON=function(e){var n=e.labeledDescriptors.map(function(r){return ec.fromJSON(r)});return new t(n,e.distanceThreshold)},t}();function q4(t,e){var n=new Is(e.width,e.height),r=n.width,i=n.height;if(r<=0||i<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:i}));if(Array.isArray(t))return t.map(function(s){return q4(s,{width:r,height:i})});if(I4(t)){var a=t.detection.forSize(r,i),o=t.unshiftedLandmarks.forSize(a.box.width,a.box.height);return d0(of(t,a),o)}return h4(t)?of(t,t.detection.forSize(r,i)):t instanceof af||t instanceof Hi?t.forSize(r,i):t}var Y4="officattend_store_v1";function Pf(){const t=localStorage.getItem(Y4);if(!t)return{companies:[],session:null};try{return JSON.parse(t)}catch{return{companies:[],session:null}}}function Gx(t){localStorage.setItem(Y4,JSON.stringify(t))}function F9(t,e){const n=Pf(),r=crypto.randomUUID(),i={id:r,name:t,admins:[{id:crypto.randomUUID(),...e}],employees:[],attendance:[],settings:{schedule:{checkInEnd:"10:00",checkOutStart:"16:00"}}};return n.companies.push(i),n.session={companyId:r,adminId:i.admins[0].id},Gx(n),i}function D9(){return Pf().session}function Mv(t){const e=Pf();e.session=t,Gx(e)}function wr(t){return Pf().companies.find(n=>n.id===t)||null}function Nf(t){const e=Pf(),n=e.companies.findIndex(r=>r.id===t.id);n>=0&&(e.companies[n]=t),Gx(e)}function O9(t,e){const n=wr(t);if(!n)return null;const r={id:crypto.randomUUID(),...e};return n.employees.push(r),Nf(n),r}function P9(t,e,n){const r=wr(t);if(!r)return null;const i=r.employees.find(a=>a.id===e);return i?(i.name=n,Nf(r),i):null}function N9(t,e){const n=wr(t);if(!n)return!1;const r=n.employees.find(i=>i.id===e);if(r)for(const i of n.attendance)i.employeeId===e&&!i.employeeName&&(i.employeeName=r.name||null);return n.employees=n.employees.filter(i=>i.id!==e),Nf(n),!0}function v_(t,e,n,r){const i=wr(t);if(!i)return;const a=new Date(r).toISOString().slice(0,10);let o=i.attendance.find(c=>c.date===a&&c.employeeId===e);const s=i.employees.find(c=>c.id===e);o?!o.employeeName&&s&&(o.employeeName=s.name):(o={id:crypto.randomUUID(),employeeId:e,employeeName:(s==null?void 0:s.name)||null,date:a,checkIn:null,checkOut:null,late:!1,earlyLeave:!1,absent:!1},i.attendance.push(o));const u=i.settings&&i.settings.schedule||{checkInEnd:"10:00",checkOutStart:"16:00"},l=c=>{const[f,h]=(c||"00:00").split(":").map(Number),d=new Date(a);return d.setHours(f||0,h||0,0,0),d.getTime()};return n==="in"&&!o.checkIn&&(o.checkIn=r,o.late=r>l(u.checkInEnd),o.absent=!1),n==="out"&&!o.checkOut&&(o.checkOut=r,o.earlyLeave=r<l(u.checkOutStart),o.absent=!1),Nf(i),o}function m_(t){const e=wr(t);if(!e)return[];const n=new Date().toISOString().slice(0,10);return e.attendance.filter(r=>r.date===n)}function M9(t){return Array.from(t)}function L9(t,e){const n=wr(t);return n?(n.settings=n.settings||{},n.settings.schedule={...n.settings.schedule||{},...e},Nf(n),n.settings.schedule):null}function Ph(t,e,n){const r=wr(t);return r?r.attendance.filter(i=>(!e||i.date>=e)&&(!n||i.date<=n)):[]}var sn="http://localhost:3001",wn=null;function Nh(t){wn=t}async function B9(){try{return(await fetch(sn+"/health")).ok}catch{return!1}}async function W9(t,e){const n=await fetch(sn+"/setup/company",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,admin:e})});if(!n.ok)throw new Error("createCompany failed");return n.json()}async function Ta(t){const e=await fetch(sn+`/company/${t}`);if(!e.ok)throw new Error("getCompany failed");return e.json()}async function z9(t,e){const n=await fetch(sn+`/company/${t}/employees`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error("addEmployee failed");return n.json()}async function U9(t,e,n){const r=await fetch(sn+`/company/${t}/employees/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",...wn?{Authorization:`Bearer ${wn}`}:{}},body:JSON.stringify({name:n})});if(!r.ok)throw new Error("renameEmployee failed");return r.json()}async function V9(t,e){const n=await fetch(sn+`/company/${t}/employees/${e}`,{method:"DELETE",headers:{...wn?{Authorization:`Bearer ${wn}`}:{}}});if(!n.ok)throw new Error("deleteEmployee failed");return n.json()}async function g_(t){const e=await fetch(sn+`/company/${t}/attendance/today`);if(!e.ok)throw new Error("listTodayAttendance failed");return e.json()}async function x_(t,e,n,r){const i=await fetch(sn+`/company/${t}/attendance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:e,type:n,ts:r})});if(!i.ok)throw new Error("recordAttendance failed");return i.json()}async function H9(t,e){const n=await fetch(sn+`/company/${t}/settings`,{method:"PUT",headers:{"Content-Type":"application/json",...wn?{Authorization:`Bearer ${wn}`}:{}},body:JSON.stringify(e)});if(!n.ok)throw new Error("updateSettings failed");return n.json()}function y_(t,e,n){const r=new URL(sn+`/company/${t}/attendance.csv`);return e&&r.searchParams.set("start",e),n&&r.searchParams.set("end",n),r.toString()}async function Q4(t,e,n){const r={email:e,password:n},i=await fetch(sn+"/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)try{const a=await i.json();throw new Error("login failed: "+(a.error||i.status))}catch{throw new Error("login failed: "+i.status)}return i.json()}async function Mh(t,e,n){const r=new URL(sn+`/company/${t}/attendance`);e&&r.searchParams.set("start",e),n&&r.searchParams.set("end",n);const i=await fetch(r.toString());if(!i.ok)throw new Error("listAttendanceRange failed");return i.json()}async function $9(t,e){const n=await fetch(sn+`/company/${t}/attendance/closeDay`,{method:"POST",headers:{"Content-Type":"application/json",...wn?{Authorization:`Bearer ${wn}`}:{}},body:JSON.stringify({date:e})});if(!n.ok)throw new Error("closeDay failed");return n.json()}async function Lv(t){const e=await fetch(sn+`/company/${t}/departments`);if(!e.ok)throw new Error("listDepartments failed");return e.json()}async function j9(t,e){const n=await fetch(sn+`/company/${t}/departments`,{method:"POST",headers:{"Content-Type":"application/json",...wn?{Authorization:`Bearer ${wn}`}:{}},body:JSON.stringify({name:e})});if(!n.ok)throw new Error("createDepartment failed");return n.json()}async function G9(t,e){const n=await fetch(sn+`/company/${t}/departments/${e}`,{method:"DELETE",headers:{...wn?{Authorization:`Bearer ${wn}`}:{}}});if(!n.ok)throw new Error("deleteDepartment failed");return n.json()}async function Bv(t){const e=await fetch(sn+`/company/${t}/shifts`);if(!e.ok)throw new Error("listShifts failed");return e.json()}async function X9(t,e){const n=await fetch(sn+`/company/${t}/shifts`,{method:"POST",headers:{"Content-Type":"application/json",...wn?{Authorization:`Bearer ${wn}`}:{}},body:JSON.stringify(e)});if(!n.ok)throw new Error("createShift failed");return n.json()}async function K9(t,e){const n=await fetch(sn+`/company/${t}/shifts/${e}`,{method:"DELETE",headers:{...wn?{Authorization:`Bearer ${wn}`}:{}}});if(!n.ok)throw new Error("deleteShift failed");return n.json()}async function w_(t,e,n){const r=await fetch(sn+`/company/${t}/employees/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",...wn?{Authorization:`Bearer ${wn}`}:{}},body:JSON.stringify(n)});if(!r.ok)throw new Error("updateEmployee failed");return r.json()}var J4={exports:{}},v0={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q9=ve,Y9=Symbol.for("react.element"),Q9=Symbol.for("react.fragment"),J9=Object.prototype.hasOwnProperty,Z9=q9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eV={key:!0,ref:!0,__self:!0,__source:!0};function Z4(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)J9.call(e,r)&&!eV.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Y9,type:t,key:a,ref:o,props:i,_owner:Z9.current}}v0.Fragment=Q9;v0.jsx=Z4;v0.jsxs=Z4;J4.exports=v0;var eA=J4.exports;/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Mf(t){return t+.5|0}const Eo=(t,e,n)=>Math.max(Math.min(t,n),e);function tc(t){return Eo(Mf(t*2.55),0,255)}function Bo(t){return Eo(Mf(t*255),0,255)}function Pa(t){return Eo(Mf(t/2.55)/100,0,1)}function __(t){return Eo(Mf(t*100),0,100)}const si={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},xg=[..."0123456789ABCDEF"],tV=t=>xg[t&15],nV=t=>xg[(t&240)>>4]+xg[t&15],Lh=t=>(t&240)>>4===(t&15),rV=t=>Lh(t.r)&&Lh(t.g)&&Lh(t.b)&&Lh(t.a);function iV(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&si[t[1]]*17,g:255&si[t[2]]*17,b:255&si[t[3]]*17,a:e===5?si[t[4]]*17:255}:(e===7||e===9)&&(n={r:si[t[1]]<<4|si[t[2]],g:si[t[3]]<<4|si[t[4]],b:si[t[5]]<<4|si[t[6]],a:e===9?si[t[7]]<<4|si[t[8]]:255})),n}const aV=(t,e)=>t<255?e(t):"";function oV(t){var e=rV(t)?tV:nV;return t?"#"+e(t.r)+e(t.g)+e(t.b)+aV(t.a,e):void 0}const sV=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function tA(t,e,n){const r=e*Math.min(n,1-n),i=(a,o=(a+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function uV(t,e,n){const r=(i,a=(i+t/60)%6)=>n-n*e*Math.max(Math.min(a,4-a,1),0);return[r(5),r(3),r(1)]}function lV(t,e,n){const r=tA(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function cV(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function Xx(t){const n=t.r/255,r=t.g/255,i=t.b/255,a=Math.max(n,r,i),o=Math.min(n,r,i),s=(a+o)/2;let u,l,c;return a!==o&&(c=a-o,l=s>.5?c/(2-a-o):c/(a+o),u=cV(n,r,i,c,a),u=u*60+.5),[u|0,l||0,s]}function Kx(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Bo)}function qx(t,e,n){return Kx(tA,t,e,n)}function fV(t,e,n){return Kx(lV,t,e,n)}function hV(t,e,n){return Kx(uV,t,e,n)}function nA(t){return(t%360+360)%360}function dV(t){const e=sV.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?tc(+e[5]):Bo(+e[5]));const i=nA(+e[2]),a=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=fV(i,a,o):e[1]==="hsv"?r=hV(i,a,o):r=qx(i,a,o),{r:r[0],g:r[1],b:r[2],a:n}}function pV(t,e){var n=Xx(t);n[0]=nA(n[0]+e),n=qx(n),t.r=n[0],t.g=n[1],t.b=n[2]}function vV(t){if(!t)return;const e=Xx(t),n=e[0],r=__(e[1]),i=__(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Pa(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const b_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},E_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function mV(){const t={},e=Object.keys(E_),n=Object.keys(b_);let r,i,a,o,s;for(r=0;r<e.length;r++){for(o=s=e[r],i=0;i<n.length;i++)a=n[i],s=s.replace(a,b_[a]);a=parseInt(E_[o],16),t[s]=[a>>16&255,a>>8&255,a&255]}return t}let Bh;function gV(t){Bh||(Bh=mV(),Bh.transparent=[0,0,0,0]);const e=Bh[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const xV=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function yV(t){const e=xV.exec(t);let n=255,r,i,a;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?tc(o):Eo(o*255,0,255)}return r=+e[1],i=+e[3],a=+e[5],r=255&(e[2]?tc(r):Eo(r,0,255)),i=255&(e[4]?tc(i):Eo(i,0,255)),a=255&(e[6]?tc(a):Eo(a,0,255)),{r,g:i,b:a,a:n}}}function wV(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Pa(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Wv=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,pu=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function _V(t,e,n){const r=pu(Pa(t.r)),i=pu(Pa(t.g)),a=pu(Pa(t.b));return{r:Bo(Wv(r+n*(pu(Pa(e.r))-r))),g:Bo(Wv(i+n*(pu(Pa(e.g))-i))),b:Bo(Wv(a+n*(pu(Pa(e.b))-a))),a:t.a+n*(e.a-t.a)}}function Wh(t,e,n){if(t){let r=Xx(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=qx(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function rA(t,e){return t&&Object.assign(e||{},t)}function S_(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Bo(t[3]))):(e=rA(t,{r:0,g:0,b:0,a:1}),e.a=Bo(e.a)),e}function bV(t){return t.charAt(0)==="r"?yV(t):dV(t)}class sf{constructor(e){if(e instanceof sf)return e;const n=typeof e;let r;n==="object"?r=S_(e):n==="string"&&(r=iV(e)||gV(e)||bV(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=rA(this._rgb);return e&&(e.a=Pa(e.a)),e}set rgb(e){this._rgb=S_(e)}rgbString(){return this._valid?wV(this._rgb):void 0}hexString(){return this._valid?oV(this._rgb):void 0}hslString(){return this._valid?vV(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let a;const o=n===a?.5:n,s=2*o-1,u=r.a-i.a,l=((s*u===-1?s:(s+u)/(1+s*u))+1)/2;a=1-l,r.r=255&l*r.r+a*i.r+.5,r.g=255&l*r.g+a*i.g+.5,r.b=255&l*r.b+a*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=_V(this._rgb,e._rgb,n)),this}clone(){return new sf(this.rgb)}alpha(e){return this._rgb.a=Bo(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Mf(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Wh(this._rgb,2,e),this}darken(e){return Wh(this._rgb,2,-e),this}saturate(e){return Wh(this._rgb,1,e),this}desaturate(e){return Wh(this._rgb,1,-e),this}rotate(e){return pV(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ka(){}const EV=(()=>{let t=0;return()=>t++})();function dt(t){return t==null}function An(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ct(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function yi(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ki(t,e){return yi(t)?t:e}function it(t,e){return typeof t>"u"?e:t}const SV=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function It(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function xt(t,e,n,r){let i,a,o;if(An(t))for(a=t.length,i=0;i<a;i++)e.call(n,t[i],i);else if(ct(t))for(o=Object.keys(t),a=o.length,i=0;i<a;i++)e.call(n,t[o[i]],o[i])}function bp(t,e){let n,r,i,a;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],a=e[n],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function Ep(t){if(An(t))return t.map(Ep);if(ct(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Ep(t[n[i]]);return e}return t}function iA(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function CV(t,e,n,r){if(!iA(t))return;const i=e[t],a=n[t];ct(i)&&ct(a)?uf(i,a,r):e[t]=Ep(a)}function uf(t,e,n){const r=An(e)?e:[e],i=r.length;if(!ct(t))return t;n=n||{};const a=n.merger||CV;let o;for(let s=0;s<i;++s){if(o=r[s],!ct(o))continue;const u=Object.keys(o);for(let l=0,c=u.length;l<c;++l)a(u[l],t,o,n)}return t}function Ec(t,e){return uf(t,e,{merger:TV})}function TV(t,e,n){if(!iA(t))return;const r=e[t],i=n[t];ct(r)&&ct(i)?Ec(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ep(i))}const C_={"":t=>t,x:t=>t.x,y:t=>t.y};function kV(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function AV(t){const e=kV(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function fl(t,e){return(C_[e]||(C_[e]=AV(e)))(t)}function Yx(t){return t.charAt(0).toUpperCase()+t.slice(1)}const lf=t=>typeof t<"u",Go=t=>typeof t=="function",T_=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function IV(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ar=Math.PI,ha=2*ar,RV=ha+ar,Sp=Number.POSITIVE_INFINITY,FV=ar/180,Pi=ar/2,os=ar/4,k_=ar*2/3,aA=Math.log10,da=Math.sign;function Sc(t,e,n){return Math.abs(t-e)<n}function A_(t){const e=Math.round(t);t=Sc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(aA(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function DV(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,a)=>i-a).pop(),e}function OV(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function cf(t){return!OV(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function PV(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function NV(t,e,n){let r,i,a;for(r=0,i=t.length;r<i;r++)a=t[r][n],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function Es(t){return t*(ar/180)}function MV(t){return t*(180/ar)}function I_(t){if(!yi(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function LV(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n);return a<-.5*ar&&(a+=ha),{angle:a,distance:i}}function yg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function BV(t,e){return(t-e+RV)%ha-ar}function fo(t){return(t%ha+ha)%ha}function oA(t,e,n,r){const i=fo(t),a=fo(e),o=fo(n),s=fo(a-i),u=fo(o-i),l=fo(i-a),c=fo(i-o);return i===a||i===o||r&&a===o||s>u&&l<c}function Jr(t,e,n){return Math.max(e,Math.min(n,t))}function WV(t){return Jr(t,-32768,32767)}function Ss(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Qx(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,a;for(;r-i>1;)a=i+r>>1,n(a)?i=a:r=a;return{lo:i,hi:r}}const Cs=(t,e,n,r)=>Qx(t,n,r?i=>{const a=t[i][e];return a<n||a===n&&t[i+1][e]===n}:i=>t[i][e]<n),zV=(t,e,n)=>Qx(t,n,r=>t[r][e]>=n);function UV(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const sA=["push","pop","shift","splice","unshift"];function VV(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),sA.forEach(n=>{const r="_onData"+Yx(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...a){const o=i.apply(this,a);return t._chartjs.listeners.forEach(s=>{typeof s[r]=="function"&&s[r](...a)}),o}})})}function R_(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(sA.forEach(a=>{delete t[a]}),delete t._chartjs)}function uA(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const lA=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function cA(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,lA.call(window,()=>{r=!1,t.apply(e,n)}))}}function HV(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const fA=t=>t==="start"?"left":t==="end"?"right":"center",zr=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,$V=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function jV(t,e,n){const r=e.length;let i=0,a=r;if(t._sorted){const{iScale:o,vScale:s,_parsed:u}=t,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,c=o.axis,{min:f,max:h,minDefined:d,maxDefined:v}=o.getUserBounds();if(d){if(i=Math.min(Cs(u,c,f).lo,n?r:Cs(e,c,o.getPixelForValue(f)).lo),l){const p=u.slice(0,i+1).reverse().findIndex(m=>!dt(m[s.axis]));i-=Math.max(0,p)}i=Jr(i,0,r-1)}if(v){let p=Math.max(Cs(u,o.axis,h,!0).hi+1,n?0:Cs(e,c,o.getPixelForValue(h),!0).hi+1);if(l){const m=u.slice(p-1).findIndex(g=>!dt(g[s.axis]));p+=Math.max(0,m)}a=Jr(p,i,r)-i}else a=r-i}return{start:i,count:a}}function GV(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const a=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),a}const zh=t=>t===0||t===1,F_=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ha/n)),D_=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ha/n)+1,Cc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Pi)+1,easeOutSine:t=>Math.sin(t*Pi),easeInOutSine:t=>-.5*(Math.cos(ar*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>zh(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>zh(t)?t:F_(t,.075,.3),easeOutElastic:t=>zh(t)?t:D_(t,.075,.3),easeInOutElastic(t){return zh(t)?t:t<.5?.5*F_(t*2,.1125,.45):.5+.5*D_(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Cc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Cc.easeInBounce(t*2)*.5:Cc.easeOutBounce(t*2-1)*.5+.5};function Jx(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function O_(t){return Jx(t)?t:new sf(t)}function zv(t){return Jx(t)?t:new sf(t).saturate(.5).darken(.1).hexString()}const XV=["x","y","borderWidth","radius","tension"],KV=["color","borderColor","backgroundColor"];function qV(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:KV},numbers:{type:"number",properties:XV}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function YV(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const P_=new Map;function QV(t,e){e=e||{};const n=t+JSON.stringify(e);let r=P_.get(n);return r||(r=new Intl.NumberFormat(t,e),P_.set(n,r)),r}function hA(t,e,n){return QV(e,n).format(t)}const JV={values(t){return An(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,a=t;if(n.length>1){const l=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),a=ZV(t,n)}const o=aA(Math.abs(a)),s=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:i,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(u,this.options.ticks.format),hA(t,r,u)}};function ZV(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var dA={formatters:JV};function eH(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:dA.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Vs=Object.create(null),wg=Object.create(null);function Tc(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const a=n[r];t=t[a]||(t[a]=Object.create(null))}return t}function Uv(t,e,n){return typeof e=="string"?uf(Tc(t,e),n):uf(Tc(t,""),e)}class tH{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>zv(i.backgroundColor),this.hoverBorderColor=(r,i)=>zv(i.borderColor),this.hoverColor=(r,i)=>zv(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Uv(this,e,n)}get(e){return Tc(this,e)}describe(e,n){return Uv(wg,e,n)}override(e,n){return Uv(Vs,e,n)}route(e,n,r,i){const a=Tc(this,e),o=Tc(this,r),s="_"+n;Object.defineProperties(a,{[s]:{value:a[n],writable:!0},[n]:{enumerable:!0,get(){const u=this[s],l=o[i];return ct(u)?Object.assign({},l,u):it(u,l)},set(u){this[s]=u}}})}apply(e){e.forEach(n=>n(this))}}var Qt=new tH({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[qV,YV,eH]);function nH(t){return!t||dt(t.size)||dt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function N_(t,e,n,r,i){let a=e[i];return a||(a=e[i]=t.measureText(i).width,n.push(i)),a>r&&(r=a),r}function ss(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function M_(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function _g(t,e,n,r){pA(t,e,n,r,null)}function pA(t,e,n,r,i){let a,o,s,u,l,c,f,h;const d=e.pointStyle,v=e.rotation,p=e.radius;let m=(v||0)*FV;if(d&&typeof d=="object"&&(a=d.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(m),t.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),t.restore();return}if(!(isNaN(p)||p<=0)){switch(t.beginPath(),d){default:i?t.ellipse(n,r,i/2,p,0,0,ha):t.arc(n,r,p,0,ha),t.closePath();break;case"triangle":c=i?i/2:p,t.moveTo(n+Math.sin(m)*c,r-Math.cos(m)*p),m+=k_,t.lineTo(n+Math.sin(m)*c,r-Math.cos(m)*p),m+=k_,t.lineTo(n+Math.sin(m)*c,r-Math.cos(m)*p),t.closePath();break;case"rectRounded":l=p*.516,u=p-l,o=Math.cos(m+os)*u,f=Math.cos(m+os)*(i?i/2-l:u),s=Math.sin(m+os)*u,h=Math.sin(m+os)*(i?i/2-l:u),t.arc(n-f,r-s,l,m-ar,m-Pi),t.arc(n+h,r-o,l,m-Pi,m),t.arc(n+f,r+s,l,m,m+Pi),t.arc(n-h,r+o,l,m+Pi,m+ar),t.closePath();break;case"rect":if(!v){u=Math.SQRT1_2*p,c=i?i/2:u,t.rect(n-c,r-u,2*c,2*u);break}m+=os;case"rectRot":f=Math.cos(m)*(i?i/2:p),o=Math.cos(m)*p,s=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),t.moveTo(n-f,r-s),t.lineTo(n+h,r-o),t.lineTo(n+f,r+s),t.lineTo(n-h,r+o),t.closePath();break;case"crossRot":m+=os;case"cross":f=Math.cos(m)*(i?i/2:p),o=Math.cos(m)*p,s=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),t.moveTo(n-f,r-s),t.lineTo(n+f,r+s),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"star":f=Math.cos(m)*(i?i/2:p),o=Math.cos(m)*p,s=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),t.moveTo(n-f,r-s),t.lineTo(n+f,r+s),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o),m+=os,f=Math.cos(m)*(i?i/2:p),o=Math.cos(m)*p,s=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),t.moveTo(n-f,r-s),t.lineTo(n+f,r+s),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"line":o=i?i/2:Math.cos(m)*p,s=Math.sin(m)*p,t.moveTo(n-o,r-s),t.lineTo(n+o,r+s);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(m)*(i?i/2:p),r+Math.sin(m)*p);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ff(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Zx(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ey(t){t.restore()}function rH(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const a=(e.x+n.x)/2;t.lineTo(a,e.y),t.lineTo(a,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function iH(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function aH(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),dt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function oH(t,e,n,r,i){if(i.strikethrough||i.underline){const a=t.measureText(r),o=e-a.actualBoundingBoxLeft,s=e+a.actualBoundingBoxRight,u=n-a.actualBoundingBoxAscent,l=n+a.actualBoundingBoxDescent,c=i.strikethrough?(u+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,c),t.lineTo(s,c),t.stroke()}}function sH(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Cp(t,e,n,r,i,a={}){const o=An(e)?e:[e],s=a.strokeWidth>0&&a.strokeColor!=="";let u,l;for(t.save(),t.font=i.string,aH(t,a),u=0;u<o.length;++u)l=o[u],a.backdrop&&sH(t,a.backdrop),s&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),dt(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(l,n,r,a.maxWidth)),t.fillText(l,n,r,a.maxWidth),oH(t,n,r,l,a),r+=Number(i.lineHeight);t.restore()}function Tp(t,e){const{x:n,y:r,w:i,h:a,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*ar,ar,!0),t.lineTo(n,r+a-o.bottomLeft),t.arc(n+o.bottomLeft,r+a-o.bottomLeft,o.bottomLeft,ar,Pi,!0),t.lineTo(n+i-o.bottomRight,r+a),t.arc(n+i-o.bottomRight,r+a-o.bottomRight,o.bottomRight,Pi,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Pi,!0),t.lineTo(n+o.topLeft,r)}const uH=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,lH=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function cH(t,e){const n=(""+t).match(uH);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const fH=t=>+t||0;function vA(t,e){const n={},r=ct(e),i=r?Object.keys(e):e,a=ct(t)?r?o=>it(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=fH(a(o));return n}function mA(t){return vA(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Yu(t){return vA(t,["topLeft","topRight","bottomLeft","bottomRight"])}function zi(t){const e=mA(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Tr(t,e){t=t||{},e=e||Qt.font;let n=it(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=it(t.style,e.style);r&&!(""+r).match(lH)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:it(t.family,e.family),lineHeight:cH(it(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:it(t.weight,e.weight),string:""};return i.string=nH(i),i}function Uh(t,e,n,r){let i,a,o;for(i=0,a=t.length;i<a;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function hH(t,e,n){const{min:r,max:i}=t,a=SV(e,(i-r)/2),o=(s,u)=>n&&s===0?0:s+u;return{min:o(r,-Math.abs(a)),max:o(i,a)}}function tu(t,e){return Object.assign(Object.create(t),e)}function ty(t,e=[""],n,r,i=()=>t[0]){const a=n||t;typeof r>"u"&&(r=wA("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:a,_fallback:r,_getTarget:i,override:s=>ty([s,...t],e,a,r)};return new Proxy(o,{deleteProperty(s,u){return delete s[u],delete s._keys,delete t[0][u],!0},get(s,u){return xA(s,u,()=>wH(u,e,t,s))},getOwnPropertyDescriptor(s,u){return Reflect.getOwnPropertyDescriptor(s._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(s,u){return B_(s).includes(u)},ownKeys(s){return B_(s)},set(s,u,l){const c=s._storage||(s._storage=i());return s[u]=c[u]=l,delete s._keys,!0}})}function hl(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:gA(t,r),setContext:a=>hl(t,a,n,r),override:a=>hl(t.override(a),e,n,r)};return new Proxy(i,{deleteProperty(a,o){return delete a[o],delete t[o],!0},get(a,o,s){return xA(a,o,()=>pH(a,o,s))},getOwnPropertyDescriptor(a,o){return a._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(a,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(a,o,s){return t[o]=s,delete a[o],!0}})}function gA(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Go(n)?n:()=>n,isIndexable:Go(r)?r:()=>r}}const dH=(t,e)=>t?t+Yx(e):e,ny=(t,e)=>ct(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function xA(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function pH(t,e,n){const{_proxy:r,_context:i,_subProxy:a,_descriptors:o}=t;let s=r[e];return Go(s)&&o.isScriptable(e)&&(s=vH(e,s,t,n)),An(s)&&s.length&&(s=mH(e,s,t,o.isIndexable)),ny(e,s)&&(s=hl(s,i,a&&a[e],o)),s}function vH(t,e,n,r){const{_proxy:i,_context:a,_subProxy:o,_stack:s}=n;if(s.has(t))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+t);s.add(t);let u=e(a,o||r);return s.delete(t),ny(t,u)&&(u=ry(i._scopes,i,t,u)),u}function mH(t,e,n,r){const{_proxy:i,_context:a,_subProxy:o,_descriptors:s}=n;if(typeof a.index<"u"&&r(t))return e[a.index%e.length];if(ct(e[0])){const u=e,l=i._scopes.filter(c=>c!==u);e=[];for(const c of u){const f=ry(l,i,t,c);e.push(hl(f,a,o&&o[t],s))}}return e}function yA(t,e,n){return Go(t)?t(e,n):t}const gH=(t,e)=>t===!0?e:typeof t=="string"?fl(e,t):void 0;function xH(t,e,n,r,i){for(const a of e){const o=gH(n,a);if(o){t.add(o);const s=yA(o._fallback,n,i);if(typeof s<"u"&&s!==n&&s!==r)return s}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function ry(t,e,n,r){const i=e._rootScopes,a=yA(e._fallback,n,r),o=[...t,...i],s=new Set;s.add(r);let u=L_(s,o,n,a||n,r);return u===null||typeof a<"u"&&a!==n&&(u=L_(s,o,a,u,r),u===null)?!1:ty(Array.from(s),[""],i,a,()=>yH(e,n,r))}function L_(t,e,n,r,i){for(;n;)n=xH(t,e,n,r,i);return n}function yH(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return An(i)&&ct(n)?n:i||{}}function wH(t,e,n,r){let i;for(const a of e)if(i=wA(dH(a,t),n),typeof i<"u")return ny(t,i)?ry(n,r,t,i):i}function wA(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function B_(t){let e=t._keys;return e||(e=t._keys=_H(t._scopes)),e}function _H(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const bH=Number.EPSILON||1e-14,dl=(t,e)=>e<t.length&&!t[e].skip&&t[e],_A=t=>t==="x"?"y":"x";function EH(t,e,n,r){const i=t.skip?e:t,a=e,o=n.skip?e:n,s=yg(a,i),u=yg(o,a);let l=s/(s+u),c=u/(s+u);l=isNaN(l)?0:l,c=isNaN(c)?0:c;const f=r*l,h=r*c;return{previous:{x:a.x-f*(o.x-i.x),y:a.y-f*(o.y-i.y)},next:{x:a.x+h*(o.x-i.x),y:a.y+h*(o.y-i.y)}}}function SH(t,e,n){const r=t.length;let i,a,o,s,u,l=dl(t,0);for(let c=0;c<r-1;++c)if(u=l,l=dl(t,c+1),!(!u||!l)){if(Sc(e[c],0,bH)){n[c]=n[c+1]=0;continue}i=n[c]/e[c],a=n[c+1]/e[c],s=Math.pow(i,2)+Math.pow(a,2),!(s<=9)&&(o=3/Math.sqrt(s),n[c]=i*o*e[c],n[c+1]=a*o*e[c])}}function CH(t,e,n="x"){const r=_A(n),i=t.length;let a,o,s,u=dl(t,0);for(let l=0;l<i;++l){if(o=s,s=u,u=dl(t,l+1),!s)continue;const c=s[n],f=s[r];o&&(a=(c-o[n])/3,s[`cp1${n}`]=c-a,s[`cp1${r}`]=f-a*e[l]),u&&(a=(u[n]-c)/3,s[`cp2${n}`]=c+a,s[`cp2${r}`]=f+a*e[l])}}function TH(t,e="x"){const n=_A(e),r=t.length,i=Array(r).fill(0),a=Array(r);let o,s,u,l=dl(t,0);for(o=0;o<r;++o)if(s=u,u=l,l=dl(t,o+1),!!u){if(l){const c=l[e]-u[e];i[o]=c!==0?(l[n]-u[n])/c:0}a[o]=s?l?da(i[o-1])!==da(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}SH(t,i,a),CH(t,a,e)}function Vh(t,e,n){return Math.max(Math.min(t,n),e)}function kH(t,e){let n,r,i,a,o,s=ff(t[0],e);for(n=0,r=t.length;n<r;++n)o=a,a=s,s=n<r-1&&ff(t[n+1],e),a&&(i=t[n],o&&(i.cp1x=Vh(i.cp1x,e.left,e.right),i.cp1y=Vh(i.cp1y,e.top,e.bottom)),s&&(i.cp2x=Vh(i.cp2x,e.left,e.right),i.cp2y=Vh(i.cp2y,e.top,e.bottom)))}function AH(t,e,n,r,i){let a,o,s,u;if(e.spanGaps&&(t=t.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")TH(t,i);else{let l=r?t[t.length-1]:t[0];for(a=0,o=t.length;a<o;++a)s=t[a],u=EH(l,s,t[Math.min(a+1,o-(r?0:1))%o],e.tension),s.cp1x=u.previous.x,s.cp1y=u.previous.y,s.cp2x=u.next.x,s.cp2y=u.next.y,l=s}e.capBezierPoints&&kH(t,n)}function iy(){return typeof window<"u"&&typeof document<"u"}function ay(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function kp(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const m0=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function IH(t,e){return m0(t).getPropertyValue(e)}const RH=["top","right","bottom","left"];function Fs(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const a=RH[i];r[a]=parseFloat(t[e+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const FH=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function DH(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:a}=r;let o=!1,s,u;if(FH(i,a,t.target))s=i,u=a;else{const l=e.getBoundingClientRect();s=r.clientX-l.left,u=r.clientY-l.top,o=!0}return{x:s,y:u,box:o}}function ds(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=m0(n),a=i.boxSizing==="border-box",o=Fs(i,"padding"),s=Fs(i,"border","width"),{x:u,y:l,box:c}=DH(t,n),f=o.left+(c&&s.left),h=o.top+(c&&s.top);let{width:d,height:v}=e;return a&&(d-=o.width+s.width,v-=o.height+s.height),{x:Math.round((u-f)/d*n.width/r),y:Math.round((l-h)/v*n.height/r)}}function OH(t,e,n){let r,i;if(e===void 0||n===void 0){const a=t&&ay(t);if(!a)e=t.clientWidth,n=t.clientHeight;else{const o=a.getBoundingClientRect(),s=m0(a),u=Fs(s,"border","width"),l=Fs(s,"padding");e=o.width-l.width-u.width,n=o.height-l.height-u.height,r=kp(s.maxWidth,a,"clientWidth"),i=kp(s.maxHeight,a,"clientHeight")}}return{width:e,height:n,maxWidth:r||Sp,maxHeight:i||Sp}}const So=t=>Math.round(t*10)/10;function PH(t,e,n,r){const i=m0(t),a=Fs(i,"margin"),o=kp(i.maxWidth,t,"clientWidth")||Sp,s=kp(i.maxHeight,t,"clientHeight")||Sp,u=OH(t,e,n);let{width:l,height:c}=u;if(i.boxSizing==="content-box"){const h=Fs(i,"border","width"),d=Fs(i,"padding");l-=d.width+h.width,c-=d.height+h.height}return l=Math.max(0,l-a.width),c=Math.max(0,r?l/r:c-a.height),l=So(Math.min(l,o,u.maxWidth)),c=So(Math.min(c,s,u.maxHeight)),l&&!c&&(c=So(l/2)),(e!==void 0||n!==void 0)&&r&&u.height&&c>u.height&&(c=u.height,l=So(Math.floor(c*r))),{width:l,height:c}}function W_(t,e,n){const r=e||1,i=So(t.height*r),a=So(t.width*r);t.height=So(t.height),t.width=So(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==a?(t.currentDevicePixelRatio=r,o.height=i,o.width=a,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const NH=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};iy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function z_(t,e){const n=IH(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function ps(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function MH(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function LH(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},a={x:e.cp1x,y:e.cp1y},o=ps(t,i,n),s=ps(i,a,n),u=ps(a,e,n),l=ps(o,s,n),c=ps(s,u,n);return ps(l,c,n)}const BH=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},WH=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Qu(t,e,n){return t?BH(e,n):WH()}function bA(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function EA(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function SA(t){return t==="angle"?{between:oA,compare:BV,normalize:fo}:{between:Ss,compare:(e,n)=>e-n,normalize:e=>e}}function U_({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function zH(t,e,n){const{property:r,start:i,end:a}=n,{between:o,normalize:s}=SA(r),u=e.length;let{start:l,end:c,loop:f}=t,h,d;if(f){for(l+=u,c+=u,h=0,d=u;h<d&&o(s(e[l%u][r]),i,a);++h)l--,c--;l%=u,c%=u}return c<l&&(c+=u),{start:l,end:c,loop:f,style:t.style}}function UH(t,e,n){if(!n)return[t];const{property:r,start:i,end:a}=n,o=e.length,{compare:s,between:u,normalize:l}=SA(r),{start:c,end:f,loop:h,style:d}=zH(t,e,n),v=[];let p=!1,m=null,g,x,y;const w=()=>u(i,y,g)&&s(i,y)!==0,_=()=>s(a,g)===0||u(a,y,g),b=()=>p||w(),E=()=>!p||_();for(let S=c,C=c;S<=f;++S)x=e[S%o],!x.skip&&(g=l(x[r]),g!==y&&(p=u(g,i,a),m===null&&b()&&(m=s(g,i)===0?S:C),m!==null&&E()&&(v.push(U_({start:m,end:S,loop:h,count:o,style:d})),m=null),C=S,y=g));return m!==null&&v.push(U_({start:m,end:f,loop:h,count:o,style:d})),v}function VH(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const a=UH(r[i],t.points,e);a.length&&n.push(...a)}return n}function HH(t,e,n,r){let i=0,a=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(a+=i);a>i&&t[a%e].skip;)a--;return a%=e,{start:i,end:a}}function $H(t,e,n,r){const i=t.length,a=[];let o=e,s=t[e],u;for(u=e+1;u<=n;++u){const l=t[u%i];l.skip||l.stop?s.skip||(r=!1,a.push({start:e%i,end:(u-1)%i,loop:r}),e=o=l.stop?u:null):(o=u,s.skip&&(e=u)),s=l}return o!==null&&a.push({start:e%i,end:o%i,loop:r}),a}function jH(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const a=!!t._loop,{start:o,end:s}=HH(n,i,a,r);if(r===!0)return V_(t,[{start:o,end:s,loop:a}],n,e);const u=s<o?s+i:s,l=!!t._fullLoop&&o===0&&s===i-1;return V_(t,$H(n,o,u,l),n,e)}function V_(t,e,n,r){return!r||!r.setContext||!n?e:GH(t,e,n,r)}function GH(t,e,n,r){const i=t._chart.getContext(),a=H_(t.options),{_datasetIndex:o,options:{spanGaps:s}}=t,u=n.length,l=[];let c=a,f=e[0].start,h=f;function d(v,p,m,g){const x=s?-1:1;if(v!==p){for(v+=u;n[v%u].skip;)v-=x;for(;n[p%u].skip;)p+=x;v%u!==p%u&&(l.push({start:v%u,end:p%u,loop:m,style:g}),c=g,f=p%u)}}for(const v of e){f=s?f:v.start;let p=n[f%u],m;for(h=f+1;h<=v.end;h++){const g=n[h%u];m=H_(r.setContext(tu(i,{type:"segment",p0:p,p1:g,p0DataIndex:(h-1)%u,p1DataIndex:h%u,datasetIndex:o}))),XH(m,c)&&d(f,h-1,v.loop,c),p=g,c=m}f<h-1&&d(f,h-1,v.loop,c)}return l}function H_(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function XH(t,e){if(!e)return!1;const n=[],r=function(i,a){return Jx(a)?(n.includes(a)||n.push(a),n.indexOf(a)):a};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Hh(t,e,n){return t.options.clip?t[n]:e[n]}function KH(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Hh(n,e,"left"),right:Hh(n,e,"right"),top:Hh(r,e,"top"),bottom:Hh(r,e,"bottom")}:e}function qH(t,e){const n=e._clip;if(n.disabled)return!1;const r=KH(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class YH{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const a=n.listeners[i],o=n.duration;a.forEach(s=>s({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=lA.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const a=r.items;let o=a.length-1,s=!1,u;for(;o>=0;--o)u=a[o],u._active?(u._total>r.duration&&(r.duration=u._total),u.tick(e),s=!0):(a[o]=a[a.length-1],a.pop());s&&(i.draw(),this._notify(i,r,e,"progress")),a.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=a.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ra=new YH;const $_="transparent",QH={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=O_(t||$_),i=r.valid&&O_(e||$_);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class JH{constructor(e,n,r,i){const a=n[r];i=Uh([e.to,i,a,e.from]);const o=Uh([e.from,a,i]);this._active=!0,this._fn=e.fn||QH[e.type||typeof o],this._easing=Cc[e.easing]||Cc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],a=r-this._start,o=this._duration-a;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Uh([e.to,n,i,e.from]),this._from=Uh([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,a=this._from,o=this._loop,s=this._to;let u;if(this._active=a!==s&&(o||n<r),!this._active){this._target[i]=s,this._notify(!0);return}if(n<0){this._target[i]=a;return}u=n/r%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[i]=this._fn(a,s,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class CA{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ct(e))return;const n=Object.keys(Qt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const a=e[i];if(!ct(a))return;const o={};for(const s of n)o[s]=a[s];(An(a.properties)&&a.properties||[i]).forEach(s=>{(s===i||!r.has(s))&&r.set(s,o)})})}_animateOptions(e,n){const r=n.options,i=e$(e,r);if(!i)return[];const a=this._createAnimations(i,r);return r.$shared&&ZH(e.options.$animations,r).then(()=>{e.options=r},()=>{}),a}_createAnimations(e,n){const r=this._properties,i=[],a=e.$animations||(e.$animations={}),o=Object.keys(n),s=Date.now();let u;for(u=o.length-1;u>=0;--u){const l=o[u];if(l.charAt(0)==="$")continue;if(l==="options"){i.push(...this._animateOptions(e,n));continue}const c=n[l];let f=a[l];const h=r.get(l);if(f)if(h&&f.active()){f.update(h,c,s);continue}else f.cancel();if(!h||!h.duration){e[l]=c;continue}a[l]=f=new JH(h,e,l,c),i.push(f)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Ra.add(this._chart,r),!0}}function ZH(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const a=t[r[i]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}function e$(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function j_(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,a=n.max===void 0?e:0;return{start:r?a:i,end:r?i:a}}function t$(t,e,n){if(n===!1)return!1;const r=j_(t,n),i=j_(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function n$(t){let e,n,r,i;return ct(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function TA(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,a;for(i=0,a=r.length;i<a;++i)n.push(r[i].index);return n}function G_(t,e,n,r={}){const i=t.keys,a=r.mode==="single";let o,s,u,l;if(e===null)return;let c=!1;for(o=0,s=i.length;o<s;++o){if(u=+i[o],u===n){if(c=!0,r.all)continue;break}l=t.values[u],yi(l)&&(a||e===0||da(e)===da(l))&&(e+=l)}return!c&&!r.all?0:e}function r$(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",a=r.axis==="x"?"x":"y",o=Object.keys(t),s=new Array(o.length);let u,l,c;for(u=0,l=o.length;u<l;++u)c=o[u],s[u]={[i]:c,[a]:t[c]};return s}function Vv(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function i$(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function a$(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function o$(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function X_(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const a=t[i.index];if(n&&a>0||!n&&a<0)return i.index}return null}function K_(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:a,vScale:o,index:s}=r,u=a.axis,l=o.axis,c=i$(a,o,r),f=e.length;let h;for(let d=0;d<f;++d){const v=e[d],{[u]:p,[l]:m}=v,g=v._stacks||(v._stacks={});h=g[l]=o$(i,c,p),h[s]=m,h._top=X_(h,o,!0,r.type),h._bottom=X_(h,o,!1,r.type);const x=h._visualValues||(h._visualValues={});x[s]=m}}function Hv(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function s$(t,e){return tu(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function u$(t,e,n){return tu(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function $l(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const a=i._stacks;if(!a||a[r]===void 0||a[r][n]===void 0)return;delete a[r][n],a[r]._visualValues!==void 0&&a[r]._visualValues[n]!==void 0&&delete a[r]._visualValues[n]}}}const $v=t=>t==="reset"||t==="none",q_=(t,e)=>e?t:Object.assign({},t),l$=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:TA(n,!0),values:null};class Ju{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Vv(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&$l(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(f,h,d,v)=>f==="x"?h:f==="r"?v:d,a=n.xAxisID=it(r.xAxisID,Hv(e,"x")),o=n.yAxisID=it(r.yAxisID,Hv(e,"y")),s=n.rAxisID=it(r.rAxisID,Hv(e,"r")),u=n.indexAxis,l=n.iAxisID=i(u,a,o,s),c=n.vAxisID=i(u,o,a,s);n.xScale=this.getScaleForId(a),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(s),n.iScale=this.getScaleForId(l),n.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&R_(this._data,this),e._stacked&&$l(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ct(n)){const i=this._cachedMeta;this._data=r$(n,i)}else if(r!==n){if(r){R_(r,this);const i=this._cachedMeta;$l(i),i._parsed=[]}n&&Object.isExtensible(n)&&VV(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const a=n._stacked;n._stacked=Vv(n.vScale,n),n.stack!==r.stack&&(i=!0,$l(n),n.stack=r.stack),this._resyncElements(e),(i||a!==n._stacked)&&(K_(this,n._parsed),n._stacked=Vv(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:a,_stacked:o}=r,s=a.axis;let u=e===0&&n===i.length?!0:r._sorted,l=e>0&&r._parsed[e-1],c,f,h;if(this._parsing===!1)r._parsed=i,r._sorted=!0,h=i;else{An(i[e])?h=this.parseArrayData(r,i,e,n):ct(i[e])?h=this.parseObjectData(r,i,e,n):h=this.parsePrimitiveData(r,i,e,n);const d=()=>f[s]===null||l&&f[s]<l[s];for(c=0;c<n;++c)r._parsed[c+e]=f=h[c],u&&(d()&&(u=!1),l=f);r._sorted=u}o&&K_(this,h)}parsePrimitiveData(e,n,r,i){const{iScale:a,vScale:o}=e,s=a.axis,u=o.axis,l=a.getLabels(),c=a===o,f=new Array(i);let h,d,v;for(h=0,d=i;h<d;++h)v=h+r,f[h]={[s]:c||a.parse(l[v],v),[u]:o.parse(n[v],v)};return f}parseArrayData(e,n,r,i){const{xScale:a,yScale:o}=e,s=new Array(i);let u,l,c,f;for(u=0,l=i;u<l;++u)c=u+r,f=n[c],s[u]={x:a.parse(f[0],c),y:o.parse(f[1],c)};return s}parseObjectData(e,n,r,i){const{xScale:a,yScale:o}=e,{xAxisKey:s="x",yAxisKey:u="y"}=this._parsing,l=new Array(i);let c,f,h,d;for(c=0,f=i;c<f;++c)h=c+r,d=n[h],l[c]={x:a.parse(fl(d,s),h),y:o.parse(fl(d,u),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,a=this._cachedMeta,o=n[e.axis],s={keys:TA(i,!0),values:n._stacks[e.axis]._visualValues};return G_(s,o,a.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const a=r[n.axis];let o=a===null?NaN:a;const s=i&&r._stacks[n.axis];i&&s&&(i.values=s,o=G_(i,a,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,a=r._sorted&&e===r.iScale,o=i.length,s=this._getOtherScale(e),u=l$(n,r,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:f}=a$(s);let h,d;function v(){d=i[h];const p=d[s.axis];return!yi(d[e.axis])||c>p||f<p}for(h=0;h<o&&!(!v()&&(this.updateRangeFromParsed(l,e,d,u),a));++h);if(a){for(h=o-1;h>=0;--h)if(!v()){this.updateRangeFromParsed(l,e,d,u);break}}return l}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,a,o;for(i=0,a=n.length;i<a;++i)o=n[i][e.axis],yi(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,a=this.getParsed(e);return{label:r?""+r.getLabelForValue(a[r.axis]):"",value:i?""+i.getLabelForValue(a[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=n$(it(this.options.clip,t$(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],a=n.chartArea,o=[],s=this._drawStart||0,u=this._drawCount||i.length-s,l=this.options.drawActiveElementsOnTop;let c;for(r.dataset&&r.dataset.draw(e,a,s,u),c=s;c<s+u;++c){const f=i[c];f.hidden||(f.active&&l?o.push(f):f.draw(e,a))}for(c=0;c<o.length;++c)o[c].draw(e,a)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];a=o.$context||(o.$context=u$(this.getContext(),e,o)),a.parsed=this.getParsed(e),a.raw=i.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=s$(this.chart.getContext(),this.index)),a.dataset=i,a.index=a.datasetIndex=this.index;return a.active=!!n,a.mode=r,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",a=this._cachedDataOpts,o=e+"-"+n,s=a[o],u=this.enableOptionSharing&&lf(r);if(s)return q_(s,u);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),f=i?[`${e}Hover`,"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(Qt.elements[e]),v=()=>this.getContext(r,i,n),p=l.resolveNamedOptions(h,d,v,f);return p.$shared&&(p.$shared=u,a[o]=Object.freeze(q_(p,u))),p}_resolveAnimations(e,n,r){const i=this.chart,a=this._cachedDataOpts,o=`animation-${n}`,s=a[o];if(s)return s;let u;if(i.options.animation!==!1){const c=this.chart.config,f=c.datasetAnimationScopeKeys(this._type,n),h=c.getOptionScopes(this.getDataset(),f);u=c.createResolver(h,this.getContext(e,r,n))}const l=new CA(i,u&&u.animations);return u&&u._cacheable&&(a[o]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||$v(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,a=this.getSharedOptions(r),o=this.includeOptions(n,a)||a!==i;return this.updateSharedOptions(a,n,r),{sharedOptions:a,includeOptions:o}}updateElement(e,n,r,i){$v(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!$v(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const a=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(a)||a})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[s,u,l]of this._syncList)this[s](u,l);this._syncList=[];const i=r.length,a=n.length,o=Math.min(a,i);o&&this.parse(0,o),a>i?this._insertElements(i,a-i,e):a<i&&this._removeElements(a,i-a)}_insertElements(e,n,r=!0){const i=this._cachedMeta,a=i.data,o=e+n;let s;const u=l=>{for(l.length+=n,s=l.length-1;s>=o;s--)l[s]=l[s-n]};for(u(a),s=e;s<o;++s)a[s]=new this.dataElementType;this._parsing&&u(i._parsed),this.parse(e,n),r&&this.updateElements(a,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&$l(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Xe(Ju,"defaults",{}),Xe(Ju,"datasetElementType",null),Xe(Ju,"dataElementType",null);function c$(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,a=n.length;i<a;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=uA(r.sort((i,a)=>i-a))}return t._cache.$bar}function f$(t){const e=t.iScale,n=c$(e,t.type);let r=e._length,i,a,o,s;const u=()=>{o===32767||o===-32768||(lf(s)&&(r=Math.min(r,Math.abs(o-s)||r)),s=o)};for(i=0,a=n.length;i<a;++i)o=e.getPixelForValue(n[i]),u();for(s=void 0,i=0,a=e.ticks.length;i<a;++i)o=e.getPixelForTick(i),u();return r}function h$(t,e,n,r){const i=n.barThickness;let a,o;return dt(i)?(a=e.min*n.categoryPercentage,o=n.barPercentage):(a=i*r,o=1),{chunk:a/r,ratio:o,start:e.pixels[t]-a/2}}function d$(t,e,n,r){const i=e.pixels,a=i[t];let o=t>0?i[t-1]:null,s=t<i.length-1?i[t+1]:null;const u=n.categoryPercentage;o===null&&(o=a-(s===null?e.end-e.start:s-a)),s===null&&(s=a+a-o);const l=a-(a-Math.min(o,s))/2*u;return{chunk:Math.abs(s-o)/2*u/r,ratio:n.barPercentage,start:l}}function p$(t,e,n,r){const i=n.parse(t[0],r),a=n.parse(t[1],r),o=Math.min(i,a),s=Math.max(i,a);let u=o,l=s;Math.abs(o)>Math.abs(s)&&(u=s,l=o),e[n.axis]=l,e._custom={barStart:u,barEnd:l,start:i,end:a,min:o,max:s}}function kA(t,e,n,r){return An(t)?p$(t,e,n,r):e[n.axis]=n.parse(t,r),e}function Y_(t,e,n,r){const i=t.iScale,a=t.vScale,o=i.getLabels(),s=i===a,u=[];let l,c,f,h;for(l=n,c=n+r;l<c;++l)h=e[l],f={},f[i.axis]=s||i.parse(o[l],l),u.push(kA(h,f,a,l));return u}function jv(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function v$(t,e,n){return t!==0?da(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function m$(t){let e,n,r,i,a;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",a="start"):(i="start",a="end"),{start:n,end:r,reverse:e,top:i,bottom:a}}function g$(t,e,n,r){let i=e.borderSkipped;const a={};if(!i){t.borderSkipped=a;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:s,reverse:u,top:l,bottom:c}=m$(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=l:(n._bottom||0)===r?i=c:(a[Q_(c,o,s,u)]=!0,i=l)),a[Q_(i,o,s,u)]=!0,t.borderSkipped=a}function Q_(t,e,n,r){return r?(t=x$(t,e,n),t=J_(t,n,e)):t=J_(t,e,n),t}function x$(t,e,n){return t===e?n:t===n?e:t}function J_(t,e,n){return t==="start"?e:t==="end"?n:t}function y$(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class ld extends Ju{parsePrimitiveData(e,n,r,i){return Y_(e,n,r,i)}parseArrayData(e,n,r,i){return Y_(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:a,vScale:o}=e,{xAxisKey:s="x",yAxisKey:u="y"}=this._parsing,l=a.axis==="x"?s:u,c=o.axis==="x"?s:u,f=[];let h,d,v,p;for(h=r,d=r+i;h<d;++h)p=n[h],v={},v[a.axis]=a.parse(fl(p,l),h),f.push(kA(fl(p,c),v,o,h));return f}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const a=r._custom;a&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,a=this.getParsed(e),o=a._custom,s=jv(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(a[i.axis]);return{label:""+r.getLabelForValue(a[r.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const a=i==="reset",{index:o,_cachedMeta:{vScale:s}}=this,u=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),{sharedOptions:f,includeOptions:h}=this._getSharedOptions(n,i);for(let d=n;d<n+r;d++){const v=this.getParsed(d),p=a||dt(v[s.axis])?{base:u,head:u}:this._calculateBarValuePixels(d),m=this._calculateBarIndexPixels(d,c),g=(v._stacks||{})[s.axis],x={horizontal:l,base:p.base,enableBorderRadius:!g||jv(v._custom)||o===g._top||o===g._bottom,x:l?p.head:m.center,y:l?m.center:p.head,height:l?m.size:Math.abs(p.size),width:l?Math.abs(p.size):m.size};h&&(x.options=f||this.resolveDataElementOptions(d,e[d].active?"active":i));const y=x.options||e[d].options;g$(x,y,g,o),y$(x,y,c.ratio),this.updateElement(e[d],d,x,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),a=r.options.stacked,o=[],s=this._cachedMeta.controller.getParsed(n),u=s&&s[r.axis],l=c=>{const f=c._parsed.find(d=>d[r.axis]===u),h=f&&f[c.vScale.axis];if(dt(h)||isNaN(h))return!0};for(const c of i)if(!(n!==void 0&&l(c))&&((a===!1||o.indexOf(c.stack)===-1||a===void 0&&c.stack===void 0)&&o.push(c.stack),c.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[it(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const i=this._getStacks(e,r),a=n!==void 0?i.indexOf(n):-1;return a===-1?i.length-1:a}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let a,o;for(a=0,o=n.data.length;a<o;++a)i.push(r.getPixelForValue(this.getParsed(a)[r.axis],a));const s=e.barThickness;return{min:s||f$(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:s?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:a,minBarLength:o}}=this,s=a||0,u=this.getParsed(e),l=u._custom,c=jv(l);let f=u[n.axis],h=0,d=r?this.applyStack(n,u,r):f,v,p;d!==f&&(h=d-f,d=f),c&&(f=l.barStart,d=l.barEnd-l.barStart,f!==0&&da(f)!==da(l.barEnd)&&(h=0),h+=f);const m=!dt(a)&&!c?a:h;let g=n.getPixelForValue(m);if(this.chart.getDataVisibility(e)?v=n.getPixelForValue(h+d):v=g,p=v-g,Math.abs(p)<o){p=v$(p,n,s)*o,f===s&&(g-=p/2);const x=n.getPixelForDecimal(0),y=n.getPixelForDecimal(1),w=Math.min(x,y),_=Math.max(x,y);g=Math.max(Math.min(g,_),w),v=g+p,r&&!c&&(u._stacks[n.axis]._visualValues[i]=n.getValueForPixel(v)-n.getValueForPixel(g))}if(g===n.getPixelForValue(s)){const x=da(p)*n.getLineWidthForValue(s)/2;g+=x,p-=x}return{size:p,base:g,head:v,center:v+p/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,a=i.skipNull,o=it(i.maxBarThickness,1/0);let s,u;const l=this._getAxisCount();if(n.grouped){const c=a?this._getStackCount(e):n.stackCount,f=i.barThickness==="flex"?d$(e,n,i,c*l):h$(e,n,i,c*l),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(it(h,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+d;s=f.start+f.chunk*v+f.chunk/2,u=Math.min(o,f.chunk*f.ratio)}else s=r.getPixelForValue(this.getParsed(e)[r.axis],e),u=Math.min(o,n.min*n.ratio);return{base:s-u/2,head:s+u/2,center:s,size:u}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let a=0;for(;a<i;++a)this.getParsed(a)[n.axis]!==null&&!r[a].hidden&&r[a].draw(this._ctx)}}Xe(ld,"id","bar"),Xe(ld,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Xe(ld,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class cd extends Ju{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:a}=n,o=this.chart._animationsDisabled;let{start:s,count:u}=jV(n,i,o);this._drawStart=s,this._drawCount=u,GV(n)&&(s=0,u=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!a._decimated,r.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:l},e),this.updateElements(i,s,u,e)}updateElements(e,n,r,i){const a=i==="reset",{iScale:o,vScale:s,_stacked:u,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:f}=this._getSharedOptions(n,i),h=o.axis,d=s.axis,{spanGaps:v,segment:p}=this.options,m=cf(v)?v:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||a||i==="none",x=n+r,y=e.length;let w=n>0&&this.getParsed(n-1);for(let _=0;_<y;++_){const b=e[_],E=g?b:{};if(_<n||_>=x){E.skip=!0;continue}const S=this.getParsed(_),C=dt(S[d]),T=E[h]=o.getPixelForValue(S[h],_),A=E[d]=a||C?s.getBasePixel():s.getPixelForValue(u?this.applyStack(s,S,u):S[d],_);E.skip=isNaN(T)||isNaN(A)||C,E.stop=_>0&&Math.abs(S[h]-w[h])>m,p&&(E.parsed=S,E.raw=l.data[_]),f&&(E.options=c||this.resolveDataElementOptions(_,b.active?"active":i)),g||this.updateElement(b,_,E,i),w=S}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const a=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,a,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Xe(cd,"id","line"),Xe(cd,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Xe(cd,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function us(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class oy{constructor(e){Xe(this,"options");this.options=e||{}}static override(e){Object.assign(oy.prototype,e)}init(){}formats(){return us()}parse(){return us()}format(){return us()}add(){return us()}diff(){return us()}startOf(){return us()}endOf(){return us()}}var w$={_date:oy};function _$(t,e,n,r){const{controller:i,data:a,_sorted:o}=t,s=i._cachedMeta.iScale,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(s&&e===s.axis&&e!=="r"&&o&&a.length){const l=s._reversePixels?zV:Cs;if(r){if(i._sharedOptions){const c=a[0],f=typeof c.getRange=="function"&&c.getRange(e);if(f){const h=l(a,e,n-f),d=l(a,e,n+f);return{lo:h.lo,hi:d.hi}}}}else{const c=l(a,e,n);if(u){const{vScale:f}=i._cachedMeta,{_parsed:h}=t,d=h.slice(0,c.lo+1).reverse().findIndex(p=>!dt(p[f.axis]));c.lo-=Math.max(0,d);const v=h.slice(c.hi).findIndex(p=>!dt(p[f.axis]));c.hi+=Math.max(0,v)}return c}}return{lo:0,hi:a.length-1}}function g0(t,e,n,r,i){const a=t.getSortedVisibleDatasetMetas(),o=n[e];for(let s=0,u=a.length;s<u;++s){const{index:l,data:c}=a[s],{lo:f,hi:h}=_$(a[s],e,o,i);for(let d=f;d<=h;++d){const v=c[d];v.skip||r(v,l,d)}}}function b$(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const a=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function Gv(t,e,n,r,i){const a=[];return!i&&!t.isPointInArea(e)||g0(t,n,e,function(s,u,l){!i&&!ff(s,t.chartArea,0)||s.inRange(e.x,e.y,r)&&a.push({element:s,datasetIndex:u,index:l})},!0),a}function E$(t,e,n,r){let i=[];function a(o,s,u){const{startAngle:l,endAngle:c}=o.getProps(["startAngle","endAngle"],r),{angle:f}=LV(o,{x:e.x,y:e.y});oA(f,l,c)&&i.push({element:o,datasetIndex:s,index:u})}return g0(t,n,e,a),i}function S$(t,e,n,r,i,a){let o=[];const s=b$(n);let u=Number.POSITIVE_INFINITY;function l(c,f,h){const d=c.inRange(e.x,e.y,i);if(r&&!d)return;const v=c.getCenterPoint(i);if(!(!!a||t.isPointInArea(v))&&!d)return;const m=s(e,v);m<u?(o=[{element:c,datasetIndex:f,index:h}],u=m):m===u&&o.push({element:c,datasetIndex:f,index:h})}return g0(t,n,e,l),o}function Xv(t,e,n,r,i,a){return!a&&!t.isPointInArea(e)?[]:n==="r"&&!r?E$(t,e,n,i):S$(t,e,n,r,i,a)}function Z_(t,e,n,r,i){const a=[],o=n==="x"?"inXRange":"inYRange";let s=!1;return g0(t,n,e,(u,l,c)=>{u[o]&&u[o](e[n],i)&&(a.push({element:u,datasetIndex:l,index:c}),s=s||u.inRange(e.x,e.y,i))}),r&&!s?[]:a}var C$={modes:{index(t,e,n,r){const i=ds(e,t),a=n.axis||"x",o=n.includeInvisible||!1,s=n.intersect?Gv(t,i,a,r,o):Xv(t,i,a,!1,r,o),u=[];return s.length?(t.getSortedVisibleDatasetMetas().forEach(l=>{const c=s[0].index,f=l.data[c];f&&!f.skip&&u.push({element:f,datasetIndex:l.index,index:c})}),u):[]},dataset(t,e,n,r){const i=ds(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;let s=n.intersect?Gv(t,i,a,r,o):Xv(t,i,a,!1,r,o);if(s.length>0){const u=s[0].datasetIndex,l=t.getDatasetMeta(u).data;s=[];for(let c=0;c<l.length;++c)s.push({element:l[c],datasetIndex:u,index:c})}return s},point(t,e,n,r){const i=ds(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;return Gv(t,i,a,r,o)},nearest(t,e,n,r){const i=ds(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;return Xv(t,i,a,n.intersect,r,o)},x(t,e,n,r){const i=ds(e,t);return Z_(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=ds(e,t);return Z_(t,i,"y",n.intersect,r)}}};const AA=["left","top","right","bottom"];function jl(t,e){return t.filter(n=>n.pos===e)}function eb(t,e){return t.filter(n=>AA.indexOf(n.pos)===-1&&n.box.axis===e)}function Gl(t,e){return t.sort((n,r)=>{const i=e?r:n,a=e?n:r;return i.weight===a.weight?i.index-a.index:i.weight-a.weight})}function T$(t){const e=[];let n,r,i,a,o,s;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:a,options:{stack:o,stackWeight:s=1}}=i,e.push({index:n,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&a+o,stackWeight:s});return e}function k$(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:a}=n;if(!r||!AA.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=a}return e}function A$(t,e){const n=k$(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let a,o,s;for(a=0,o=t.length;a<o;++a){s=t[a];const{fullSize:u}=s.box,l=n[s.stack],c=l&&s.stackWeight/l.weight;s.horizontal?(s.width=c?c*r:u&&e.availableWidth,s.height=i):(s.width=r,s.height=c?c*i:u&&e.availableHeight)}return n}function I$(t){const e=T$(t),n=Gl(e.filter(l=>l.box.fullSize),!0),r=Gl(jl(e,"left"),!0),i=Gl(jl(e,"right")),a=Gl(jl(e,"top"),!0),o=Gl(jl(e,"bottom")),s=eb(e,"x"),u=eb(e,"y");return{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:i.concat(u).concat(o).concat(s),chartArea:jl(e,"chartArea"),vertical:r.concat(i).concat(u),horizontal:a.concat(o).concat(s)}}function tb(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function IA(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function R$(t,e,n,r){const{pos:i,box:a}=n,o=t.maxPadding;if(!ct(i)){n.size&&(t[i]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?a.height:a.width),n.size=f.size/f.count,t[i]+=n.size}a.getPadding&&IA(o,a.getPadding());const s=Math.max(0,e.outerWidth-tb(o,t,"left","right")),u=Math.max(0,e.outerHeight-tb(o,t,"top","bottom")),l=s!==t.w,c=u!==t.h;return t.w=s,t.h=u,n.horizontal?{same:l,other:c}:{same:c,other:l}}function F$(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function D$(t,e){const n=e.maxPadding;function r(i){const a={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{a[o]=Math.max(e[o],n[o])}),a}return r(t?["left","right"]:["top","bottom"])}function nc(t,e,n,r){const i=[];let a,o,s,u,l,c;for(a=0,o=t.length,l=0;a<o;++a){s=t[a],u=s.box,u.update(s.width||e.w,s.height||e.h,D$(s.horizontal,e));const{same:f,other:h}=R$(e,n,s,r);l|=f&&i.length,c=c||h,u.fullSize||i.push(s)}return l&&nc(i,e,n,r)||c}function $h(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function nb(t,e,n,r){const i=n.padding;let{x:a,y:o}=e;for(const s of t){const u=s.box,l=r[s.stack]||{placed:0,weight:1},c=s.stackWeight/l.weight||1;if(s.horizontal){const f=e.w*c,h=l.size||u.height;lf(l.start)&&(o=l.start),u.fullSize?$h(u,i.left,o,n.outerWidth-i.right-i.left,h):$h(u,e.left+l.placed,o,f,h),l.start=o,l.placed+=f,o=u.bottom}else{const f=e.h*c,h=l.size||u.width;lf(l.start)&&(a=l.start),u.fullSize?$h(u,a,i.top,h,n.outerHeight-i.bottom-i.top):$h(u,a,e.top+l.placed,h,f),l.start=a,l.placed+=f,a=u.right}}e.x=a,e.y=o}var Co={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=zi(t.options.layout.padding),a=Math.max(e-i.width,0),o=Math.max(n-i.height,0),s=I$(t.boxes),u=s.vertical,l=s.horizontal;xt(t.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const c=u.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/c,hBoxMaxHeight:o/2}),h=Object.assign({},i);IA(h,zi(r));const d=Object.assign({maxPadding:h,w:a,h:o,x:i.left,y:i.top},i),v=A$(u.concat(l),f);nc(s.fullSize,d,f,v),nc(u,d,f,v),nc(l,d,f,v)&&nc(u,d,f,v),F$(d),nb(s.leftAndTop,d,f,v),d.x+=d.w,d.y+=d.h,nb(s.rightAndBottom,d,f,v),t.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},xt(s.chartArea,p=>{const m=p.box;Object.assign(m,t.chartArea),m.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class RA{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class O$ extends RA{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const fd="$chartjs",P$={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},rb=t=>t===null||t==="";function N$(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[fd]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",rb(i)){const a=z_(t,"width");a!==void 0&&(t.width=a)}if(rb(r))if(t.style.height==="")t.height=t.width/(e||2);else{const a=z_(t,"height");a!==void 0&&(t.height=a)}return t}const FA=NH?{passive:!0}:!1;function M$(t,e,n){t&&t.addEventListener(e,n,FA)}function L$(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,FA)}function B$(t,e){const n=P$[t.type]||t.type,{x:r,y:i}=ds(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Ap(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function W$(t,e,n){const r=t.canvas,i=new MutationObserver(a=>{let o=!1;for(const s of a)o=o||Ap(s.addedNodes,r),o=o&&!Ap(s.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function z$(t,e,n){const r=t.canvas,i=new MutationObserver(a=>{let o=!1;for(const s of a)o=o||Ap(s.removedNodes,r),o=o&&!Ap(s.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const hf=new Map;let ib=0;function DA(){const t=window.devicePixelRatio;t!==ib&&(ib=t,hf.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function U$(t,e){hf.size||window.addEventListener("resize",DA),hf.set(t,e)}function V$(t){hf.delete(t),hf.size||window.removeEventListener("resize",DA)}function H$(t,e,n){const r=t.canvas,i=r&&ay(r);if(!i)return;const a=cA((s,u)=>{const l=i.clientWidth;n(s,u),l<i.clientWidth&&n()},window),o=new ResizeObserver(s=>{const u=s[0],l=u.contentRect.width,c=u.contentRect.height;l===0&&c===0||a(l,c)});return o.observe(i),U$(t,a),o}function Kv(t,e,n){n&&n.disconnect(),e==="resize"&&V$(t)}function $$(t,e,n){const r=t.canvas,i=cA(a=>{t.ctx!==null&&n(B$(a,t))},t);return M$(r,e,i),i}class j$ extends RA{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(N$(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[fd])return!1;const r=n[fd].initial;["height","width"].forEach(a=>{const o=r[a];dt(o)?n.removeAttribute(a):n.setAttribute(a,o)});const i=r.style||{};return Object.keys(i).forEach(a=>{n.style[a]=i[a]}),n.width=n.width,delete n[fd],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:W$,detach:z$,resize:H$}[n]||$$;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:Kv,detach:Kv,resize:Kv}[n]||L$)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return PH(e,n,r,i)}isAttached(e){const n=e&&ay(e);return!!(n&&n.isConnected)}}function G$(t){return!iy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?O$:j$}class Ka{constructor(){Xe(this,"x");Xe(this,"y");Xe(this,"active",!1);Xe(this,"options");Xe(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return cf(this.x)&&cf(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(a=>{i[a]=r[a]&&r[a].active()?r[a]._to:this[a]}),i}}Xe(Ka,"defaults",{}),Xe(Ka,"defaultRoutes");function X$(t,e){const n=t.options.ticks,r=K$(t),i=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?Y$(e):[],o=a.length,s=a[0],u=a[o-1],l=[];if(o>i)return Q$(e,l,a,o/i),l;const c=q$(a,e,i);if(o>0){let f,h;const d=o>1?Math.round((u-s)/(o-1)):null;for(jh(e,l,c,dt(d)?0:s-d,s),f=0,h=o-1;f<h;f++)jh(e,l,c,a[f],a[f+1]);return jh(e,l,c,u,dt(d)?e.length:u+d),l}return jh(e,l,c),l}function K$(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function q$(t,e,n){const r=J$(t),i=e.length/n;if(!r)return Math.max(i,1);const a=DV(r);for(let o=0,s=a.length-1;o<s;o++){const u=a[o];if(u>i)return u}return Math.max(i,1)}function Y$(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function Q$(t,e,n,r){let i=0,a=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===a&&(e.push(t[o]),i++,a=n[i*r])}function jh(t,e,n,r,i){const a=it(r,0),o=Math.min(it(i,t.length),t.length);let s=0,u,l,c;for(n=Math.ceil(n),i&&(u=i-r,n=u/Math.floor(u/n)),c=a;c<0;)s++,c=Math.round(a+s*n);for(l=Math.max(a,0);l<o;l++)l===c&&(e.push(t[l]),s++,c=Math.round(a+s*n))}function J$(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const Z$=t=>t==="left"?"right":t==="right"?"left":t,ab=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,ob=(t,e)=>Math.min(e||t,t);function sb(t,e){const n=[],r=t.length/e,i=t.length;let a=0;for(;a<i;a+=r)n.push(t[Math.floor(a)]);return n}function ej(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),a=t._startPixel,o=t._endPixel,s=1e-6;let u=t.getPixelForTick(i),l;if(!(n&&(r===1?l=Math.max(u-a,o-u):e===0?l=(t.getPixelForTick(1)-u)/2:l=(u-t.getPixelForTick(i-1))/2,u+=i<e?l:-l,u<a-s||u>o+s)))return u}function tj(t,e){xt(t,n=>{const r=n.gc,i=r.length/2;let a;if(i>e){for(a=0;a<i;++a)delete n.data[r[a]];r.splice(0,i)}})}function Xl(t){return t.drawTicks?t.tickLength:0}function ub(t,e){if(!t.display)return 0;const n=Tr(t.font,e),r=zi(t.padding);return(An(t.text)?t.text.length:1)*n.lineHeight+r.height}function nj(t,e){return tu(t,{scale:e,type:"scale"})}function rj(t,e,n){return tu(t,{tick:n,index:e,type:"tick"})}function ij(t,e,n){let r=fA(t);return(n&&e!=="right"||!n&&e==="right")&&(r=Z$(r)),r}function aj(t,e,n,r){const{top:i,left:a,bottom:o,right:s,chart:u}=t,{chartArea:l,scales:c}=u;let f=0,h,d,v;const p=o-i,m=s-a;if(t.isHorizontal()){if(d=zr(r,a,s),ct(n)){const g=Object.keys(n)[0],x=n[g];v=c[g].getPixelForValue(x)+p-e}else n==="center"?v=(l.bottom+l.top)/2+p-e:v=ab(t,n,e);h=s-a}else{if(ct(n)){const g=Object.keys(n)[0],x=n[g];d=c[g].getPixelForValue(x)-m+e}else n==="center"?d=(l.left+l.right)/2-m+e:d=ab(t,n,e);v=zr(r,o,i),f=n==="left"?-Pi:Pi}return{titleX:d,titleY:v,maxWidth:h,rotation:f}}class El extends Ka{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Ki(e,Number.POSITIVE_INFINITY),n=Ki(n,Number.NEGATIVE_INFINITY),r=Ki(r,Number.POSITIVE_INFINITY),i=Ki(i,Number.NEGATIVE_INFINITY),{min:Ki(e,r),max:Ki(n,i),minDefined:yi(e),maxDefined:yi(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:a}=this.getUserBounds(),o;if(i&&a)return{min:n,max:r};const s=this.getMatchingVisibleMetas();for(let u=0,l=s.length;u<l;++u)o=s[u].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),a||(r=Math.max(r,o.max));return n=a&&n>r?r:n,r=i&&n>r?n:r,{min:Ki(n,Ki(r,n)),max:Ki(r,Ki(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){It(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:a,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=hH(this,a,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=s<this.ticks.length;this._convertTicksToLabels(u?sb(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=X$(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){It(this.options.afterUpdate,[this])}beforeSetDimensions(){It(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){It(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),It(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){It(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,a;for(r=0,i=e.length;r<i;r++)a=e[r],a.label=It(n.callback,[a.value,r,e],this)}afterTickToLabelConversion(){It(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){It(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=ob(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,a=n.maxRotation;let o=i,s,u,l;if(!this._isVisible()||!n.display||i>=a||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const c=this._getLabelSizes(),f=c.widest.width,h=c.highest.height,d=Jr(this.chart.width-f,0,this.maxWidth);s=e.offset?this.maxWidth/r:d/(r-1),f+6>s&&(s=d/(r-(e.offset?.5:1)),u=this.maxHeight-Xl(e.grid)-n.padding-ub(e.title,this.chart.options.font),l=Math.sqrt(f*f+h*h),o=MV(Math.min(Math.asin(Jr((c.highest.height+6)/s,-1,1)),Math.asin(Jr(u/l,-1,1))-Math.asin(Jr(h/l,-1,1)))),o=Math.max(i,Math.min(a,o))),this.labelRotation=o}afterCalculateLabelRotation(){It(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){It(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:a}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){const u=ub(i,n.options.font);if(s?(e.width=this.maxWidth,e.height=Xl(a)+u):(e.height=this.maxHeight,e.width=Xl(a)+u),r.display&&this.ticks.length){const{first:l,last:c,widest:f,highest:h}=this._getLabelSizes(),d=r.padding*2,v=Es(this.labelRotation),p=Math.cos(v),m=Math.sin(v);if(s){const g=r.mirror?0:m*f.width+p*h.height;e.height=Math.min(this.maxHeight,e.height+g+d)}else{const g=r.mirror?0:p*f.width+m*h.height;e.width=Math.min(this.maxWidth,e.width+g+d)}this._calculatePadding(l,c,m,p)}}this._handleMargins(),s?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:a,padding:o},position:s}=this.options,u=this.labelRotation!==0,l=s!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,d=0;u?l?(h=i*e.width,d=r*n.height):(h=r*e.height,d=i*n.width):a==="start"?d=n.width:a==="end"?h=e.width:a!=="inner"&&(h=e.width/2,d=n.width/2),this.paddingLeft=Math.max((h-c+o)*this.width/(this.width-c),0),this.paddingRight=Math.max((d-f+o)*this.width/(this.width-f),0)}else{let c=n.height/2,f=e.height/2;a==="start"?(c=0,f=e.height):a==="end"&&(c=n.height,f=0),this.paddingTop=c+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){It(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)dt(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=sb(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:a}=this,o=[],s=[],u=Math.floor(n/ob(n,r));let l=0,c=0,f,h,d,v,p,m,g,x,y,w,_;for(f=0;f<n;f+=u){if(v=e[f].label,p=this._resolveTickFontOptions(f),i.font=m=p.string,g=a[m]=a[m]||{data:{},gc:[]},x=p.lineHeight,y=w=0,!dt(v)&&!An(v))y=N_(i,g.data,g.gc,y,v),w=x;else if(An(v))for(h=0,d=v.length;h<d;++h)_=v[h],!dt(_)&&!An(_)&&(y=N_(i,g.data,g.gc,y,_),w+=x);o.push(y),s.push(w),l=Math.max(y,l),c=Math.max(w,c)}tj(a,n);const b=o.indexOf(l),E=s.indexOf(c),S=C=>({width:o[C]||0,height:s[C]||0});return{first:S(0),last:S(n-1),widest:S(b),highest:S(E),widths:o,heights:s}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return WV(this._alignToPixels?ss(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=rj(this.getContext(),e,r))}return this.$context||(this.$context=nj(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Es(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),a=this._getLabelSizes(),o=e.autoSkipPadding||0,s=a?a.widest.width+o:0,u=a?a.highest.height+o:0;return this.isHorizontal()?u*r>s*i?s/r:u/i:u*i<s*r?u/r:s/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:a,position:o,border:s}=i,u=a.offset,l=this.isHorizontal(),f=this.ticks.length+(u?1:0),h=Xl(a),d=[],v=s.setContext(this.getContext()),p=v.display?v.width:0,m=p/2,g=function(ae){return ss(r,ae,p)};let x,y,w,_,b,E,S,C,T,A,I,V;if(o==="top")x=g(this.bottom),E=this.bottom-h,C=x-m,A=g(e.top)+m,V=e.bottom;else if(o==="bottom")x=g(this.top),A=e.top,V=g(e.bottom)-m,E=x+m,C=this.top+h;else if(o==="left")x=g(this.right),b=this.right-h,S=x-m,T=g(e.left)+m,I=e.right;else if(o==="right")x=g(this.left),T=e.left,I=g(e.right)-m,b=x+m,S=this.left+h;else if(n==="x"){if(o==="center")x=g((e.top+e.bottom)/2+.5);else if(ct(o)){const ae=Object.keys(o)[0],ie=o[ae];x=g(this.chart.scales[ae].getPixelForValue(ie))}A=e.top,V=e.bottom,E=x+m,C=E+h}else if(n==="y"){if(o==="center")x=g((e.left+e.right)/2);else if(ct(o)){const ae=Object.keys(o)[0],ie=o[ae];x=g(this.chart.scales[ae].getPixelForValue(ie))}b=x-m,S=b-h,T=e.left,I=e.right}const J=it(i.ticks.maxTicksLimit,f),K=Math.max(1,Math.ceil(f/J));for(y=0;y<f;y+=K){const ae=this.getContext(y),ie=a.setContext(ae),G=s.setContext(ae),Q=ie.lineWidth,te=ie.color,pe=G.dash||[],P=G.dashOffset,j=ie.tickWidth,U=ie.tickColor,z=ie.tickBorderDash||[],Z=ie.tickBorderDashOffset;w=ej(this,y,u),w!==void 0&&(_=ss(r,w,Q),l?b=S=T=I=_:E=C=A=V=_,d.push({tx1:b,ty1:E,tx2:S,ty2:C,x1:T,y1:A,x2:I,y2:V,width:Q,color:te,borderDash:pe,borderDashOffset:P,tickWidth:j,tickColor:U,tickBorderDash:z,tickBorderDashOffset:Z}))}return this._ticksLength=f,this._borderValue=x,d}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:a}=r,o=this.isHorizontal(),s=this.ticks,{align:u,crossAlign:l,padding:c,mirror:f}=a,h=Xl(r.grid),d=h+c,v=f?-c:d,p=-Es(this.labelRotation),m=[];let g,x,y,w,_,b,E,S,C,T,A,I,V="middle";if(i==="top")b=this.bottom-v,E=this._getXAxisLabelAlignment();else if(i==="bottom")b=this.top+v,E=this._getXAxisLabelAlignment();else if(i==="left"){const K=this._getYAxisLabelAlignment(h);E=K.textAlign,_=K.x}else if(i==="right"){const K=this._getYAxisLabelAlignment(h);E=K.textAlign,_=K.x}else if(n==="x"){if(i==="center")b=(e.top+e.bottom)/2+d;else if(ct(i)){const K=Object.keys(i)[0],ae=i[K];b=this.chart.scales[K].getPixelForValue(ae)+d}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")_=(e.left+e.right)/2-d;else if(ct(i)){const K=Object.keys(i)[0],ae=i[K];_=this.chart.scales[K].getPixelForValue(ae)}E=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(u==="start"?V="top":u==="end"&&(V="bottom"));const J=this._getLabelSizes();for(g=0,x=s.length;g<x;++g){y=s[g],w=y.label;const K=a.setContext(this.getContext(g));S=this.getPixelForTick(g)+a.labelOffset,C=this._resolveTickFontOptions(g),T=C.lineHeight,A=An(w)?w.length:1;const ae=A/2,ie=K.color,G=K.textStrokeColor,Q=K.textStrokeWidth;let te=E;o?(_=S,E==="inner"&&(g===x-1?te=this.options.reverse?"left":"right":g===0?te=this.options.reverse?"right":"left":te="center"),i==="top"?l==="near"||p!==0?I=-A*T+T/2:l==="center"?I=-J.highest.height/2-ae*T+T:I=-J.highest.height+T/2:l==="near"||p!==0?I=T/2:l==="center"?I=J.highest.height/2-ae*T:I=J.highest.height-A*T,f&&(I*=-1),p!==0&&!K.showLabelBackdrop&&(_+=T/2*Math.sin(p))):(b=S,I=(1-A)*T/2);let pe;if(K.showLabelBackdrop){const P=zi(K.backdropPadding),j=J.heights[g],U=J.widths[g];let z=I-P.top,Z=0-P.left;switch(V){case"middle":z-=j/2;break;case"bottom":z-=j;break}switch(E){case"center":Z-=U/2;break;case"right":Z-=U;break;case"inner":g===x-1?Z-=U:g>0&&(Z-=U/2);break}pe={left:Z,top:z,width:U+P.width,height:j+P.height,color:K.backdropColor}}m.push({label:w,font:C,textOffset:I,options:{rotation:p,color:ie,strokeColor:G,strokeWidth:Q,textAlign:te,textBaseline:V,translation:[_,b],backdrop:pe}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Es(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:a}}=this.options,o=this._getLabelSizes(),s=e+a,u=o.widest.width;let l,c;return n==="left"?i?(c=this.right+a,r==="near"?l="left":r==="center"?(l="center",c+=u/2):(l="right",c+=u)):(c=this.right-s,r==="near"?l="right":r==="center"?(l="center",c-=u/2):(l="left",c=this.left)):n==="right"?i?(c=this.left+a,r==="near"?l="right":r==="center"?(l="center",c-=u/2):(l="left",c-=u)):(c=this.left+s,r==="near"?l="left":r==="center"?(l="center",c+=u/2):(l="right",c=this.right)):l="right",{textAlign:l,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:a,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,a,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(a=>a.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,o;const s=(u,l,c)=>{!c.width||!c.color||(r.save(),r.lineWidth=c.width,r.strokeStyle=c.color,r.setLineDash(c.borderDash||[]),r.lineDashOffset=c.borderDashOffset,r.beginPath(),r.moveTo(u.x,u.y),r.lineTo(l.x,l.y),r.stroke(),r.restore())};if(n.display)for(a=0,o=i.length;a<o;++a){const u=i[a];n.drawOnChartArea&&s({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),n.drawTicks&&s({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,a=r.setContext(this.getContext()),o=r.display?a.width:0;if(!o)return;const s=i.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let l,c,f,h;this.isHorizontal()?(l=ss(e,this.left,o)-o/2,c=ss(e,this.right,s)+s/2,f=h=u):(f=ss(e,this.top,o)-o/2,h=ss(e,this.bottom,s)+s/2,l=c=u),n.save(),n.lineWidth=a.width,n.strokeStyle=a.color,n.beginPath(),n.moveTo(l,f),n.lineTo(c,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Zx(r,i);const a=this.getLabelItems(e);for(const o of a){const s=o.options,u=o.font,l=o.label,c=o.textOffset;Cp(r,l,0,c,u,s)}i&&ey(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const a=Tr(r.font),o=zi(r.padding),s=r.align;let u=a.lineHeight/2;n==="bottom"||n==="center"||ct(n)?(u+=o.bottom,An(r.text)&&(u+=a.lineHeight*(r.text.length-1))):u+=o.top;const{titleX:l,titleY:c,maxWidth:f,rotation:h}=aj(this,u,n,s);Cp(e,r.text,0,0,a,{color:r.color,maxWidth:f,rotation:h,textAlign:ij(s,n,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=it(e.grid&&e.grid.z,-1),i=it(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==El.prototype.draw?[{z:n,draw:a=>{this.draw(a)}}]:[{z:r,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let a,o;for(a=0,o=n.length;a<o;++a){const s=n[a];s[r]===this.id&&(!e||s.type===e)&&i.push(s)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Tr(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Gh{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;uj(n)&&(r=this.register(n));const i=this.items,a=e.id,o=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in i||(i[a]=e,oj(e,o,r),this.override&&Qt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Qt[i]&&(delete Qt[i][r],this.override&&delete Vs[r])}}function oj(t,e,n){const r=uf(Object.create(null),[n?Qt.get(n):{},Qt.get(e),t.defaults]);Qt.set(e,r),t.defaultRoutes&&sj(e,t.defaultRoutes),t.descriptors&&Qt.describe(e,t.descriptors)}function sj(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),a=[t].concat(r).join("."),o=e[n].split("."),s=o.pop(),u=o.join(".");Qt.route(a,i,u,s)})}function uj(t){return"id"in t&&"defaults"in t}class lj{constructor(){this.controllers=new Gh(Ju,"datasets",!0),this.elements=new Gh(Ka,"elements"),this.plugins=new Gh(Object,"plugins"),this.scales=new Gh(El,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const a=r||this._getRegistryForType(i);r||a.isForType(i)||a===this.plugins&&i.id?this._exec(e,a,i):xt(i,o=>{const s=r||this._getRegistryForType(o);this._exec(e,s,o)})})}_exec(e,n,r){const i=Yx(e);It(r["before"+i],[],r),n[e](r),It(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var ea=new lj;class cj{constructor(){this._init=void 0}notify(e,n,r,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const a=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(a,e,n,r);return n==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,i){i=i||{};for(const a of e){const o=a.plugin,s=o[r],u=[n,i,a.options];if(It(s,u,o)===!1&&i.cancelable)return!1}return!0}invalidate(){dt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=it(r.options&&r.options.plugins,{}),a=fj(r);return i===!1&&!n?[]:dj(e,a,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(a,o)=>a.filter(s=>!o.some(u=>s.plugin.id===u.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function fj(t){const e={},n=[],r=Object.keys(ea.plugins.items);for(let a=0;a<r.length;a++)n.push(ea.getPlugin(r[a]));const i=t.plugins||[];for(let a=0;a<i.length;a++){const o=i[a];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function hj(t,e){return!e&&t===!1?null:t===!0?{}:t}function dj(t,{plugins:e,localIds:n},r,i){const a=[],o=t.getContext();for(const s of e){const u=s.id,l=hj(r[u],i);l!==null&&a.push({plugin:s,options:pj(t.config,{plugin:s,local:n[u]},l,o)})}return a}function pj(t,{plugin:e,local:n},r,i){const a=t.pluginScopeKeys(e),o=t.getOptionScopes(r,a);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function bg(t,e){const n=Qt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function vj(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function mj(t,e){return t===e?"_index_":"_value_"}function lb(t){if(t==="x"||t==="y"||t==="r")return t}function gj(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Eg(t,...e){if(lb(t))return t;for(const n of e){const r=n.axis||gj(n.position)||t.length>1&&lb(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function cb(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function xj(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return cb(t,"x",n[0])||cb(t,"y",n[0])}return{}}function yj(t,e){const n=Vs[t.type]||{scales:{}},r=e.scales||{},i=bg(t.type,e),a=Object.create(null);return Object.keys(r).forEach(o=>{const s=r[o];if(!ct(s))return console.error(`Invalid scale configuration for scale: ${o}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const u=Eg(o,s,xj(o,t),Qt.scales[s.type]),l=mj(u,i),c=n.scales||{};a[o]=Ec(Object.create(null),[{axis:u},s,c[u],c[l]])}),t.data.datasets.forEach(o=>{const s=o.type||t.type,u=o.indexAxis||bg(s,e),c=(Vs[s]||{}).scales||{};Object.keys(c).forEach(f=>{const h=vj(f,u),d=o[h+"AxisID"]||h;a[d]=a[d]||Object.create(null),Ec(a[d],[{axis:h},r[d],c[f]])})}),Object.keys(a).forEach(o=>{const s=a[o];Ec(s,[Qt.scales[s.type],Qt.scale])}),a}function OA(t){const e=t.options||(t.options={});e.plugins=it(e.plugins,{}),e.scales=yj(t,e)}function PA(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function wj(t){return t=t||{},t.data=PA(t.data),OA(t),t}const fb=new Map,NA=new Set;function Xh(t,e){let n=fb.get(t);return n||(n=e(),fb.set(t,n),NA.add(n)),n}const Kl=(t,e,n)=>{const r=fl(e,n);r!==void 0&&t.add(r)};class _j{constructor(e){this._config=wj(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=PA(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),OA(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Xh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Xh(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Xh(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Xh(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:a}=this,o=this._cachedScopes(e,r),s=o.get(n);if(s)return s;const u=new Set;n.forEach(c=>{e&&(u.add(e),c.forEach(f=>Kl(u,e,f))),c.forEach(f=>Kl(u,i,f)),c.forEach(f=>Kl(u,Vs[a]||{},f)),c.forEach(f=>Kl(u,Qt,f)),c.forEach(f=>Kl(u,wg,f))});const l=Array.from(u);return l.length===0&&l.push(Object.create(null)),NA.has(n)&&o.set(n,l),l}chartOptionScopes(){const{options:e,type:n}=this;return[e,Vs[n]||{},Qt.datasets[n]||{},{type:n},Qt,wg]}resolveNamedOptions(e,n,r,i=[""]){const a={$shared:!0},{resolver:o,subPrefixes:s}=hb(this._resolverCache,e,i);let u=o;if(Ej(o,n)){a.$shared=!1,r=Go(r)?r():r;const l=this.createResolver(e,r,s);u=hl(o,r,l)}for(const l of n)a[l]=u[l];return a}createResolver(e,n,r=[""],i){const{resolver:a}=hb(this._resolverCache,e,r);return ct(n)?hl(a,n,void 0,i):a}}function hb(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let a=r.get(i);return a||(a={resolver:ty(e,n),subPrefixes:n.filter(s=>!s.toLowerCase().includes("hover"))},r.set(i,a)),a}const bj=t=>ct(t)&&Object.getOwnPropertyNames(t).some(e=>Go(t[e]));function Ej(t,e){const{isScriptable:n,isIndexable:r}=gA(t);for(const i of e){const a=n(i),o=r(i),s=(o||a)&&t[i];if(a&&(Go(s)||bj(s))||o&&An(s))return!0}return!1}var Sj="4.5.1";const Cj=["top","bottom","left","right","chartArea"];function db(t,e){return t==="top"||t==="bottom"||Cj.indexOf(t)===-1&&e==="x"}function pb(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function vb(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),It(n&&n.onComplete,[t],e)}function Tj(t){const e=t.chart,n=e.options.animation;It(n&&n.onProgress,[t],e)}function MA(t){return iy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const hd={},mb=t=>{const e=MA(t);return Object.values(hd).filter(n=>n.canvas===e).pop()};function kj(t,e,n){const r=Object.keys(t);for(const i of r){const a=+i;if(a>=e){const o=t[i];delete t[i],(n>0||a>e)&&(t[a+n]=o)}}}function Aj(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var co;let x0=(co=class{static register(...e){ea.add(...e),gb()}static unregister(...e){ea.remove(...e),gb()}constructor(e,n){const r=this.config=new _j(n),i=MA(e),a=mb(i);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||G$(i)),this.platform.updateConfig(r);const s=this.platform.acquireContext(i,o.aspectRatio),u=s&&s.canvas,l=u&&u.height,c=u&&u.width;if(this.id=EV(),this.ctx=s,this.canvas=u,this.width=c,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new cj,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=HV(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],hd[this.id]=this,!s||!u){console.error("Failed to create chart: can't acquire context from the given item");return}Ra.listen(this,"complete",vb),Ra.listen(this,"progress",Tj),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:a}=this;return dt(e)?n&&a?a:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ea}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():W_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return M_(this.canvas,this.ctx),this}stop(){return Ra.stop(this),this}resize(e,n){Ra.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,a=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,a),s=r.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,W_(this,s,!0)&&(this.notifyPlugins("resize",{size:o}),It(r.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};xt(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,s)=>(o[s]=!1,o),{});let a=[];n&&(a=a.concat(Object.keys(n).map(o=>{const s=n[o],u=Eg(o,s),l=u==="r",c=u==="x";return{options:s,dposition:l?"chartArea":c?"bottom":"left",dtype:l?"radialLinear":c?"category":"linear"}}))),xt(a,o=>{const s=o.options,u=s.id,l=Eg(u,s),c=it(s.type,o.dtype);(s.position===void 0||db(s.position,l)!==db(o.dposition))&&(s.position=o.dposition),i[u]=!0;let f=null;if(u in r&&r[u].type===c)f=r[u];else{const h=ea.getScale(c);f=new h({id:u,type:c,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(s,e)}),xt(i,(o,s)=>{o||delete r[s]}),xt(r,o=>{Co.configure(this,o,o.options),Co.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,a)=>i.index-a.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(pb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(a=>a===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const a=n[r];let o=this.getDatasetMeta(r);const s=a.type||this.config.type;if(o.type&&o.type!==s&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=s,o.indexAxis=a.indexAxis||bg(s,this.options),o.order=a.order||0,o.index=r,o.label=""+a.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const u=ea.getController(s),{datasetElementType:l,dataElementType:c}=Qt.datasets[s];Object.assign(u,{dataElementType:ea.getElement(c),datasetElementType:l&&ea.getElement(l)}),o.controller=new u(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){xt(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:f}=this.getDatasetMeta(l),h=!i&&a.indexOf(f)===-1;f.buildOrUpdateElements(h),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||xt(a,l=>{l.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(pb("z","_idx"));const{_active:s,_lastEvent:u}=this;u?this._eventHandler(u,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){xt(this.scales,e=>{Co.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!T_(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:a}of n){const o=r==="_removeElements"?-a:a;kj(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=a=>new Set(e.filter(o=>o[0]===a).map((o,s)=>s+","+o.splice(1).join(","))),i=r(0);for(let a=1;a<n;a++)if(!T_(i,r(a)))return;return Array.from(i).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Co.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],xt(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,a)=>{i._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Go(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ra.has(this)?this.attached&&!Ra.running(this)&&Ra.start(this):(this.draw(),vb({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,a;for(i=0,a=n.length;i<a;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=qH(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Zx(n,i),e.controller.draw(),i&&ey(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return ff(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const a=C$.modes[n];return typeof a=="function"?a(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(a=>a&&a._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=tu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",a=this.getDatasetMeta(e),o=a.controller._resolveAnimations(void 0,i);lf(n)?(a.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(a,{visible:r}),this.update(s=>s.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ra.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),M_(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete hd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(a,o)=>{n.addEventListener(this,a,o),e[a]=o},i=(a,o,s)=>{a.offsetX=o,a.offsetY=s,this._eventHandler(a)};xt(this.options.events,a=>r(a,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(u,l)=>{n.addEventListener(this,u,l),e[u]=l},i=(u,l)=>{e[u]&&(n.removeEventListener(this,u,l),delete e[u])},a=(u,l)=>{this.canvas&&this.resize(u,l)};let o;const s=()=>{i("attach",s),this.attached=!0,this.resize(),r("resize",a),r("detach",o)};o=()=>{this.attached=!1,i("resize",a),this._stop(),this._resize(0,0),r("attach",s)},n.isAttached(this.canvas)?s():o()}unbindEvents(){xt(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},xt(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let a,o,s,u;for(n==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+i+"DatasetHoverStyle"]()),s=0,u=e.length;s<u;++s){o=e[s];const l=o&&this.getDatasetMeta(o.datasetIndex).controller;l&&l[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:a,index:o})=>{const s=this.getDatasetMeta(a);if(!s)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:s.data[o],index:o}});!bp(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,a=(u,l)=>u.filter(c=>!l.some(f=>c.datasetIndex===f.datasetIndex&&c.index===f.index)),o=a(n,e),s=r?e:a(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),s.length&&i.mode&&this.updateHoverStyle(s,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const a=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(a||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:a}=this,o=n,s=this._getActiveElements(e,i,r,o),u=IV(e),l=Aj(e,this._lastEvent,r,u);r&&(this._lastEvent=null,It(a.onHover,[e,s,this],this),u&&It(a.onClick,[e,s,this],this));const c=!bp(s,i);return(c||n)&&(this._active=s,this._updateHoverStyles(s,i,n)),this._lastEvent=l,c}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,i)}},Xe(co,"defaults",Qt),Xe(co,"instances",hd),Xe(co,"overrides",Vs),Xe(co,"registry",ea),Xe(co,"version",Sj),Xe(co,"getChart",mb),co);function gb(){return xt(x0.instances,t=>t._plugins.invalidate())}function LA(t,e,n=e){t.lineCap=it(n.borderCapStyle,e.borderCapStyle),t.setLineDash(it(n.borderDash,e.borderDash)),t.lineDashOffset=it(n.borderDashOffset,e.borderDashOffset),t.lineJoin=it(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=it(n.borderWidth,e.borderWidth),t.strokeStyle=it(n.borderColor,e.borderColor)}function Ij(t,e,n){t.lineTo(n.x,n.y)}function Rj(t){return t.stepped?rH:t.tension||t.cubicInterpolationMode==="monotone"?iH:Ij}function BA(t,e,n={}){const r=t.length,{start:i=0,end:a=r-1}=n,{start:o,end:s}=e,u=Math.max(i,o),l=Math.min(a,s),c=i<o&&a<o||i>s&&a>s;return{count:r,start:u,loop:e.loop,ilen:l<u&&!c?r+l-u:l-u}}function Fj(t,e,n,r){const{points:i,options:a}=e,{count:o,start:s,loop:u,ilen:l}=BA(i,n,r),c=Rj(a);let{move:f=!0,reverse:h}=r||{},d,v,p;for(d=0;d<=l;++d)v=i[(s+(h?l-d:d))%o],!v.skip&&(f?(t.moveTo(v.x,v.y),f=!1):c(t,p,v,h,a.stepped),p=v);return u&&(v=i[(s+(h?l:0))%o],c(t,p,v,h,a.stepped)),!!u}function Dj(t,e,n,r){const i=e.points,{count:a,start:o,ilen:s}=BA(i,n,r),{move:u=!0,reverse:l}=r||{};let c=0,f=0,h,d,v,p,m,g;const x=w=>(o+(l?s-w:w))%a,y=()=>{p!==m&&(t.lineTo(c,m),t.lineTo(c,p),t.lineTo(c,g))};for(u&&(d=i[x(0)],t.moveTo(d.x,d.y)),h=0;h<=s;++h){if(d=i[x(h)],d.skip)continue;const w=d.x,_=d.y,b=w|0;b===v?(_<p?p=_:_>m&&(m=_),c=(f*c+w)/++f):(y(),t.lineTo(w,_),v=b,f=0,p=m=_),g=_}y()}function Sg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Dj:Fj}function Oj(t){return t.stepped?MH:t.tension||t.cubicInterpolationMode==="monotone"?LH:ps}function Pj(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),LA(t,e.options),t.stroke(i)}function Nj(t,e,n,r){const{segments:i,options:a}=e,o=Sg(e);for(const s of i)LA(t,a,s.style),t.beginPath(),o(t,e,s,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const Mj=typeof Path2D=="function";function Lj(t,e,n,r){Mj&&!e.options.segment?Pj(t,e,n,r):Nj(t,e,n,r)}class rc extends Ka{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;AH(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=jH(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],a=this.points,o=VH(this,{property:n,start:i,end:i});if(!o.length)return;const s=[],u=Oj(r);let l,c;for(l=0,c=o.length;l<c;++l){const{start:f,end:h}=o[l],d=a[f],v=a[h];if(d===v){s.push(d);continue}const p=Math.abs((i-d[n])/(v[n]-d[n])),m=u(d,v,p,r.stepped);m[n]=e[n],s.push(m)}return s.length===1?s[0]:s}pathSegment(e,n,r){return Sg(this)(e,this,n,r)}path(e,n,r){const i=this.segments,a=Sg(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const s of i)o&=a(e,this,s,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),Lj(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Xe(rc,"id","line"),Xe(rc,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Xe(rc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Xe(rc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function xb(t,e,n,r){const i=t.options,{[n]:a}=t.getProps([n],r);return Math.abs(e-a)<i.radius+i.hitRadius}class dd extends Ka{constructor(n){super();Xe(this,"parsed");Xe(this,"skip");Xe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const a=this.options,{x:o,y:s}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-s,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(n,r){return xb(this,n,"x",r)}inYRange(n,r){return xb(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!ff(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,_g(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Xe(dd,"id","point"),Xe(dd,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Xe(dd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function WA(t,e){const{x:n,y:r,base:i,width:a,height:o}=t.getProps(["x","y","base","width","height"],e);let s,u,l,c,f;return t.horizontal?(f=o/2,s=Math.min(n,i),u=Math.max(n,i),l=r-f,c=r+f):(f=a/2,s=n-f,u=n+f,l=Math.min(r,i),c=Math.max(r,i)),{left:s,top:l,right:u,bottom:c}}function To(t,e,n,r){return t?0:Jr(e,n,r)}function Bj(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,a=mA(r);return{t:To(i.top,a.top,0,n),r:To(i.right,a.right,0,e),b:To(i.bottom,a.bottom,0,n),l:To(i.left,a.left,0,e)}}function Wj(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,a=Yu(i),o=Math.min(e,n),s=t.borderSkipped,u=r||ct(i);return{topLeft:To(!u||s.top||s.left,a.topLeft,0,o),topRight:To(!u||s.top||s.right,a.topRight,0,o),bottomLeft:To(!u||s.bottom||s.left,a.bottomLeft,0,o),bottomRight:To(!u||s.bottom||s.right,a.bottomRight,0,o)}}function zj(t){const e=WA(t),n=e.right-e.left,r=e.bottom-e.top,i=Bj(t,n/2,r/2),a=Wj(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:a},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}function qv(t,e,n,r){const i=e===null,a=n===null,s=t&&!(i&&a)&&WA(t,r);return s&&(i||Ss(e,s.left,s.right))&&(a||Ss(n,s.top,s.bottom))}function Uj(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Vj(t,e){t.rect(e.x,e.y,e.w,e.h)}function Yv(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,a=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+a,h:t.h+o,radius:t.radius}}class pd extends Ka{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:a,outer:o}=zj(this),s=Uj(o.radius)?Tp:Vj;e.save(),(o.w!==a.w||o.h!==a.h)&&(e.beginPath(),s(e,Yv(o,n,a)),e.clip(),s(e,Yv(a,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),s(e,Yv(a,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return qv(this,e,n,r)}inXRange(e,n){return qv(this,e,null,n)}inYRange(e,n){return qv(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(n+i)/2:n,y:a?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Xe(pd,"id","bar"),Xe(pd,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Xe(pd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const yb=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Hj=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class wb extends Ka{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=It(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Tr(r.font),a=i.size,o=this._computeTitleHeight(),{boxWidth:s,itemHeight:u}=yb(r,a);let l,c;n.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(o,a,s,u)+10):(c=this.maxHeight,l=this._fitCols(o,i,s,u)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:a,maxWidth:o,options:{labels:{padding:s}}}=this,u=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+s;let f=e;a.textAlign="left",a.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach((v,p)=>{const m=r+n/2+a.measureText(v.text).width;(p===0||l[l.length-1]+m+2*s>o)&&(f+=c,l[l.length-(p>0?0:1)]=0,d+=c,h++),u[p]={left:0,top:d,row:h,width:m,height:i},l[l.length-1]+=m+s}),f}_fitCols(e,n,r,i){const{ctx:a,maxHeight:o,options:{labels:{padding:s}}}=this,u=this.legendHitBoxes=[],l=this.columnSizes=[],c=o-e;let f=s,h=0,d=0,v=0,p=0;return this.legendItems.forEach((m,g)=>{const{itemWidth:x,itemHeight:y}=$j(r,n,a,m,i);g>0&&d+y+2*s>c&&(f+=h+s,l.push({width:h,height:d}),v+=h+s,p++,h=d=0),u[g]={left:v,top:d,col:p,width:x,height:y},h=Math.max(h,x),d+=y+s}),f+=h,l.push({width:h,height:d}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:a}}=this,o=Qu(a,this.left,this.width);if(this.isHorizontal()){let s=0,u=zr(r,this.left+i,this.right-this.lineWidths[s]);for(const l of n)s!==l.row&&(s=l.row,u=zr(r,this.left+i,this.right-this.lineWidths[s])),l.top+=this.top+e+i,l.left=o.leftForLtr(o.x(u),l.width),u+=l.width+i}else{let s=0,u=zr(r,this.top+e+i,this.bottom-this.columnSizes[s].height);for(const l of n)l.col!==s&&(s=l.col,u=zr(r,this.top+e+i,this.bottom-this.columnSizes[s].height)),l.top=u,l.left+=this.left+i,l.left=o.leftForLtr(o.x(l.left),l.width),u+=l.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Zx(e,this),this._draw(),ey(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:a,labels:o}=e,s=Qt.color,u=Qu(e.rtl,this.left,this.width),l=Tr(o.font),{padding:c}=o,f=l.size,h=f/2;let d;this.drawTitle(),i.textAlign=u.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:v,boxHeight:p,itemHeight:m}=yb(o,f),g=function(b,E,S){if(isNaN(v)||v<=0||isNaN(p)||p<0)return;i.save();const C=it(S.lineWidth,1);if(i.fillStyle=it(S.fillStyle,s),i.lineCap=it(S.lineCap,"butt"),i.lineDashOffset=it(S.lineDashOffset,0),i.lineJoin=it(S.lineJoin,"miter"),i.lineWidth=C,i.strokeStyle=it(S.strokeStyle,s),i.setLineDash(it(S.lineDash,[])),o.usePointStyle){const T={radius:p*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:C},A=u.xPlus(b,v/2),I=E+h;pA(i,T,A,I,o.pointStyleWidth&&v)}else{const T=E+Math.max((f-p)/2,0),A=u.leftForLtr(b,v),I=Yu(S.borderRadius);i.beginPath(),Object.values(I).some(V=>V!==0)?Tp(i,{x:A,y:T,w:v,h:p,radius:I}):i.rect(A,T,v,p),i.fill(),C!==0&&i.stroke()}i.restore()},x=function(b,E,S){Cp(i,S.text,b,E+m/2,l,{strikethrough:S.hidden,textAlign:u.textAlign(S.textAlign)})},y=this.isHorizontal(),w=this._computeTitleHeight();y?d={x:zr(a,this.left+c,this.right-r[0]),y:this.top+c+w,line:0}:d={x:this.left+c,y:zr(a,this.top+w+c,this.bottom-n[0].height),line:0},bA(this.ctx,e.textDirection);const _=m+c;this.legendItems.forEach((b,E)=>{i.strokeStyle=b.fontColor,i.fillStyle=b.fontColor;const S=i.measureText(b.text).width,C=u.textAlign(b.textAlign||(b.textAlign=o.textAlign)),T=v+h+S;let A=d.x,I=d.y;u.setWidth(this.width),y?E>0&&A+T+c>this.right&&(I=d.y+=_,d.line++,A=d.x=zr(a,this.left+c,this.right-r[d.line])):E>0&&I+_>this.bottom&&(A=d.x=A+n[d.line].width+c,d.line++,I=d.y=zr(a,this.top+w+c,this.bottom-n[d.line].height));const V=u.x(A);if(g(V,I,b),A=$V(C,A+v+h,y?A+T:this.right,e.rtl),x(u.x(A),I,b),y)d.x+=T+c;else if(typeof b.text!="string"){const J=l.lineHeight;d.y+=zA(b,J)+c}else d.y+=_}),EA(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Tr(n.font),i=zi(n.padding);if(!n.display)return;const a=Qu(e.rtl,this.left,this.width),o=this.ctx,s=n.position,u=r.size/2,l=i.top+u;let c,f=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,f=zr(e.align,f,this.right-h);else{const v=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);c=l+zr(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const d=zr(s,f,f+h);o.textAlign=a.textAlign(fA(s)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Cp(o,n.text,d,c,r)}_computeTitleHeight(){const e=this.options.title,n=Tr(e.font),r=zi(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,a;if(Ss(e,this.left,this.right)&&Ss(n,this.top,this.bottom)){for(a=this.legendHitBoxes,r=0;r<a.length;++r)if(i=a[r],Ss(e,i.left,i.left+i.width)&&Ss(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!Xj(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,a=Hj(i,r);i&&!a&&It(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!a&&It(n.onHover,[e,r,this],this)}else r&&It(n.onClick,[e,r,this],this)}}function $j(t,e,n,r,i){const a=jj(r,t,e,n),o=Gj(i,r,e.lineHeight);return{itemWidth:a,itemHeight:o}}function jj(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((a,o)=>a.length>o.length?a:o)),e+n.size/2+r.measureText(i).width}function Gj(t,e,n){let r=t;return typeof e.text!="string"&&(r=zA(e,n)),r}function zA(t,e){const n=t.text?t.text.length:0;return e*n}function Xj(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Kj={id:"legend",_element:wb,start(t,e,n){const r=t.legend=new wb({ctx:t.ctx,options:n,chart:t});Co.configure(t,r,n),Co.addBox(t,r)},stop(t){Co.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Co.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:a,useBorderRadius:o,borderRadius:s}}=t.legend.options;return t._getSortedDatasetMetas().map(u=>{const l=u.controller.getStyle(n?0:void 0),c=zi(l.borderWidth);return{text:e[u.index].label,fillStyle:l.backgroundColor,fontColor:a,hidden:!u.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(s||l.borderRadius),datasetIndex:u.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const ic={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,a=0;for(e=0,n=t.length;e<n;++e){const s=t[e].element;if(s&&s.hasValue()){const u=s.tooltipPosition();r.add(u.x),i+=u.y,++a}}return a===0||r.size===0?!1:{x:[...r].reduce((s,u)=>s+u)/r.size,y:i/a}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,a,o,s;for(a=0,o=t.length;a<o;++a){const u=t[a].element;if(u&&u.hasValue()){const l=u.getCenterPoint(),c=yg(e,l);c<i&&(i=c,s=u)}}if(s){const u=s.tooltipPosition();n=u.x,r=u.y}return{x:n,y:r}}};function Qi(t,e){return e&&(An(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Fa(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function qj(t,e){const{element:n,datasetIndex:r,index:i}=e,a=t.getDatasetMeta(r).controller,{label:o,value:s}=a.getLabelAndValue(i);return{chart:t,label:o,parsed:a.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:s,dataset:a.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function _b(t,e){const n=t.chart.ctx,{body:r,footer:i,title:a}=t,{boxWidth:o,boxHeight:s}=e,u=Tr(e.bodyFont),l=Tr(e.titleFont),c=Tr(e.footerFont),f=a.length,h=i.length,d=r.length,v=zi(e.padding);let p=v.height,m=0,g=r.reduce((w,_)=>w+_.before.length+_.lines.length+_.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,f&&(p+=f*l.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),g){const w=e.displayColors?Math.max(s,u.lineHeight):u.lineHeight;p+=d*w+(g-d)*u.lineHeight+(g-1)*e.bodySpacing}h&&(p+=e.footerMarginTop+h*c.lineHeight+(h-1)*e.footerSpacing);let x=0;const y=function(w){m=Math.max(m,n.measureText(w).width+x)};return n.save(),n.font=l.string,xt(t.title,y),n.font=u.string,xt(t.beforeBody.concat(t.afterBody),y),x=e.displayColors?o+2+e.boxPadding:0,xt(r,w=>{xt(w.before,y),xt(w.lines,y),xt(w.after,y)}),x=0,n.font=c.string,xt(t.footer,y),n.restore(),m+=v.width,{width:m,height:p}}function Yj(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function Qj(t,e,n,r){const{x:i,width:a}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+a+o>e.width||t==="right"&&i-a-o<0)return!0}function Jj(t,e,n,r){const{x:i,width:a}=n,{width:o,chartArea:{left:s,right:u}}=t;let l="center";return r==="center"?l=i<=(s+u)/2?"left":"right":i<=a/2?l="left":i>=o-a/2&&(l="right"),Qj(l,t,e,n)&&(l="center"),l}function bb(t,e,n){const r=n.yAlign||e.yAlign||Yj(t,n);return{xAlign:n.xAlign||e.xAlign||Jj(t,e,n,r),yAlign:r}}function Zj(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function eG(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function Eb(t,e,n,r){const{caretSize:i,caretPadding:a,cornerRadius:o}=t,{xAlign:s,yAlign:u}=n,l=i+a,{topLeft:c,topRight:f,bottomLeft:h,bottomRight:d}=Yu(o);let v=Zj(e,s);const p=eG(e,u,l);return u==="center"?s==="left"?v+=l:s==="right"&&(v-=l):s==="left"?v-=Math.max(c,h)+i:s==="right"&&(v+=Math.max(f,d)+i),{x:Jr(v,0,r.width-e.width),y:Jr(p,0,r.height-e.height)}}function Kh(t,e,n){const r=zi(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Sb(t){return Qi([],Fa(t))}function tG(t,e,n){return tu(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Cb(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const UA={beforeTitle:ka,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:ka,beforeBody:ka,beforeLabel:ka,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return dt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ka,afterBody:ka,beforeFooter:ka,footer:ka,afterFooter:ka};function yr(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?UA[e].call(n,r):i}class Cg extends Ka{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,a=new CA(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=tG(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=yr(r,"beforeTitle",this,e),a=yr(r,"title",this,e),o=yr(r,"afterTitle",this,e);let s=[];return s=Qi(s,Fa(i)),s=Qi(s,Fa(a)),s=Qi(s,Fa(o)),s}getBeforeBody(e,n){return Sb(yr(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return xt(e,a=>{const o={before:[],lines:[],after:[]},s=Cb(r,a);Qi(o.before,Fa(yr(s,"beforeLabel",this,a))),Qi(o.lines,yr(s,"label",this,a)),Qi(o.after,Fa(yr(s,"afterLabel",this,a))),i.push(o)}),i}getAfterBody(e,n){return Sb(yr(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=yr(r,"beforeFooter",this,e),a=yr(r,"footer",this,e),o=yr(r,"afterFooter",this,e);let s=[];return s=Qi(s,Fa(i)),s=Qi(s,Fa(a)),s=Qi(s,Fa(o)),s}_createItems(e){const n=this._active,r=this.chart.data,i=[],a=[],o=[];let s=[],u,l;for(u=0,l=n.length;u<l;++u)s.push(qj(this.chart,n[u]));return e.filter&&(s=s.filter((c,f,h)=>e.filter(c,f,h,r))),e.itemSort&&(s=s.sort((c,f)=>e.itemSort(c,f,r))),xt(s,c=>{const f=Cb(e.callbacks,c);i.push(yr(f,"labelColor",this,c)),a.push(yr(f,"labelPointStyle",this,c)),o.push(yr(f,"labelTextColor",this,c))}),this.labelColors=i,this.labelPointStyles=a,this.labelTextColors=o,this.dataPoints=s,s}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let a,o=[];if(!i.length)this.opacity!==0&&(a={opacity:0});else{const s=ic[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const u=this._size=_b(this,r),l=Object.assign({},s,u),c=bb(this.chart,r,l),f=Eb(r,l,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,a={opacity:1,x:f.x,y:f.y,width:u.width,height:u.height,caretX:s.x,caretY:s.y}}this._tooltipItems=o,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const a=this.getCaretPosition(e,r,i);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:a}=this,{caretSize:o,cornerRadius:s}=r,{topLeft:u,topRight:l,bottomLeft:c,bottomRight:f}=Yu(s),{x:h,y:d}=e,{width:v,height:p}=n;let m,g,x,y,w,_;return a==="center"?(w=d+p/2,i==="left"?(m=h,g=m-o,y=w+o,_=w-o):(m=h+v,g=m+o,y=w-o,_=w+o),x=m):(i==="left"?g=h+Math.max(u,c)+o:i==="right"?g=h+v-Math.max(l,f)-o:g=this.caretX,a==="top"?(y=d,w=y-o,m=g-o,x=g+o):(y=d+p,w=y+o,m=g+o,x=g-o),_=y),{x1:m,x2:g,x3:x,y1:y,y2:w,y3:_}}drawTitle(e,n,r){const i=this.title,a=i.length;let o,s,u;if(a){const l=Qu(r.rtl,this.x,this.width);for(e.x=Kh(this,r.titleAlign,r),n.textAlign=l.textAlign(r.titleAlign),n.textBaseline="middle",o=Tr(r.titleFont),s=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,u=0;u<a;++u)n.fillText(i[u],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s,u+1===a&&(e.y+=r.titleMarginBottom-s)}}_drawColorBox(e,n,r,i,a){const o=this.labelColors[r],s=this.labelPointStyles[r],{boxHeight:u,boxWidth:l}=a,c=Tr(a.bodyFont),f=Kh(this,"left",a),h=i.x(f),d=u<c.lineHeight?(c.lineHeight-u)/2:0,v=n.y+d;if(a.usePointStyle){const p={radius:Math.min(l,u)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},m=i.leftForLtr(h,l)+l/2,g=v+u/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,_g(e,p,m,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,_g(e,p,m,g)}else{e.lineWidth=ct(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const p=i.leftForLtr(h,l),m=i.leftForLtr(i.xPlus(h,1),l-2),g=Yu(o.borderRadius);Object.values(g).some(x=>x!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,Tp(e,{x:p,y:v,w:l,h:u,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Tp(e,{x:m,y:v+1,w:l-2,h:u-2,radius:g}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(p,v,l,u),e.strokeRect(p,v,l,u),e.fillStyle=o.backgroundColor,e.fillRect(m,v+1,l-2,u-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:a,bodyAlign:o,displayColors:s,boxHeight:u,boxWidth:l,boxPadding:c}=r,f=Tr(r.bodyFont);let h=f.lineHeight,d=0;const v=Qu(r.rtl,this.x,this.width),p=function(S){n.fillText(S,v.x(e.x+d),e.y+h/2),e.y+=h+a},m=v.textAlign(o);let g,x,y,w,_,b,E;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=Kh(this,m,r),n.fillStyle=r.bodyColor,xt(this.beforeBody,p),d=s&&m!=="right"?o==="center"?l/2+c:l+2+c:0,w=0,b=i.length;w<b;++w){for(g=i[w],x=this.labelTextColors[w],n.fillStyle=x,xt(g.before,p),y=g.lines,s&&y.length&&(this._drawColorBox(n,e,w,v,r),h=Math.max(f.lineHeight,u)),_=0,E=y.length;_<E;++_)p(y[_]),h=f.lineHeight;xt(g.after,p)}d=0,h=f.lineHeight,xt(this.afterBody,p),e.y-=a}drawFooter(e,n,r){const i=this.footer,a=i.length;let o,s;if(a){const u=Qu(r.rtl,this.x,this.width);for(e.x=Kh(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=u.textAlign(r.footerAlign),n.textBaseline="middle",o=Tr(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,s=0;s<a;++s)n.fillText(i[s],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:a,yAlign:o}=this,{x:s,y:u}=e,{width:l,height:c}=r,{topLeft:f,topRight:h,bottomLeft:d,bottomRight:v}=Yu(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(s+f,u),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(s+l-h,u),n.quadraticCurveTo(s+l,u,s+l,u+h),o==="center"&&a==="right"&&this.drawCaret(e,n,r,i),n.lineTo(s+l,u+c-v),n.quadraticCurveTo(s+l,u+c,s+l-v,u+c),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(s+d,u+c),n.quadraticCurveTo(s,u+c,s,u+c-d),o==="center"&&a==="left"&&this.drawCaret(e,n,r,i),n.lineTo(s,u+f),n.quadraticCurveTo(s,u,s+f,u),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,a=r&&r.y;if(i||a){const o=ic[e.position].call(this,this._active,this._eventPosition);if(!o)return;const s=this._size=_b(this,e),u=Object.assign({},o,this._size),l=bb(n,e,u),c=Eb(e,u,l,n);(i._to!==c.x||a._to!==c.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=s.width,this.height=s.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},a={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=zi(n.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&s&&(e.save(),e.globalAlpha=r,this.drawBackground(a,e,i,n),bA(e,n.textDirection),a.y+=o.top,this.drawTitle(a,e,n),this.drawBody(a,e,n),this.drawFooter(a,e,n),EA(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:s,index:u})=>{const l=this.chart.getDatasetMeta(s);if(!l)throw new Error("Cannot find a dataset at index "+s);return{datasetIndex:s,element:l.data[u],index:u}}),a=!bp(r,i),o=this._positionChanged(i,n);(a||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,a=this._active||[],o=this._getActiveElements(e,a,n,r),s=this._positionChanged(o,e),u=n||!bp(o,a)||s;return u&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),u}_getActiveElements(e,n,r,i){const a=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(s=>this.chart.data.datasets[s.datasetIndex]&&this.chart.getDatasetMeta(s.datasetIndex).controller.getParsed(s.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,a.mode,a,r);return a.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:a}=this,o=ic[a.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Xe(Cg,"positioners",ic);var nG={id:"tooltip",_element:Cg,positioners:ic,afterInit(t,e,n){n&&(t.tooltip=new Cg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:UA},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const rG=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function iG(t,e,n,r){const i=t.indexOf(e);if(i===-1)return rG(t,e,n,r);const a=t.lastIndexOf(e);return i!==a?n:i}const aG=(t,e)=>t===null?null:Jr(Math.round(t),0,e);function Tb(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Tg extends El{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:a}of n)r[i]===a&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(dt(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:iG(r,e,it(n,e),this._addedLabels),aG(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let a=this.getLabels();a=e===0&&n===a.length-1?a:a.slice(e,n+1),this._valueRange=Math.max(a.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return Tb.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Xe(Tg,"id","category"),Xe(Tg,"defaults",{ticks:{callback:Tb}});function oG(t,e){const n=[],{bounds:i,step:a,min:o,max:s,precision:u,count:l,maxTicks:c,maxDigits:f,includeBounds:h}=t,d=a||1,v=c-1,{min:p,max:m}=e,g=!dt(o),x=!dt(s),y=!dt(l),w=(m-p)/(f+1);let _=A_((m-p)/v/d)*d,b,E,S,C;if(_<1e-14&&!g&&!x)return[{value:p},{value:m}];C=Math.ceil(m/_)-Math.floor(p/_),C>v&&(_=A_(C*_/v/d)*d),dt(u)||(b=Math.pow(10,u),_=Math.ceil(_*b)/b),i==="ticks"?(E=Math.floor(p/_)*_,S=Math.ceil(m/_)*_):(E=p,S=m),g&&x&&a&&PV((s-o)/a,_/1e3)?(C=Math.round(Math.min((s-o)/_,c)),_=(s-o)/C,E=o,S=s):y?(E=g?o:E,S=x?s:S,C=l-1,_=(S-E)/C):(C=(S-E)/_,Sc(C,Math.round(C),_/1e3)?C=Math.round(C):C=Math.ceil(C));const T=Math.max(I_(_),I_(E));b=Math.pow(10,dt(u)?T:u),E=Math.round(E*b)/b,S=Math.round(S*b)/b;let A=0;for(g&&(h&&E!==o?(n.push({value:o}),E<o&&A++,Sc(Math.round((E+A*_)*b)/b,o,kb(o,w,t))&&A++):E<o&&A++);A<C;++A){const I=Math.round((E+A*_)*b)/b;if(x&&I>s)break;n.push({value:I})}return x&&h&&S!==s?n.length&&Sc(n[n.length-1].value,s,kb(s,w,t))?n[n.length-1].value=s:n.push({value:s}):(!x||S===s)&&n.push({value:S}),n}function kb(t,e,{horizontal:n,minRotation:r}){const i=Es(r),a=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/a,o)}class sG extends El{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return dt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:a}=this;const o=u=>i=n?i:u,s=u=>a=r?a:u;if(e){const u=da(i),l=da(a);u<0&&l<0?s(0):u>0&&l>0&&o(0)}if(i===a){let u=a===0?1:Math.abs(a*.05);s(a+u),e||o(i-u)}this.min=i,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},a=this._range||this,o=oG(i,a);return e.bounds==="ticks"&&NV(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return hA(e,this.chart.options.locale,this.options.ticks.format)}}class kg extends sG{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=yi(e)?e:0,this.max=yi(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Es(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,a.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Xe(kg,"id","linear"),Xe(kg,"defaults",{ticks:{callback:dA.formatters.numeric}});const y0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Sr=Object.keys(y0);function Ab(t,e){return t-e}function Ib(t,e){if(dt(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:a}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),yi(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(cf(a)||a===!0)?n.startOf(o,"isoWeek",a):n.startOf(o,i)),+o)}function Rb(t,e,n,r){const i=Sr.length;for(let a=Sr.indexOf(t);a<i-1;++a){const o=y0[Sr[a]],s=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(s*o.size))<=r)return Sr[a]}return Sr[i-1]}function uG(t,e,n,r,i){for(let a=Sr.length-1;a>=Sr.indexOf(n);a--){const o=Sr[a];if(y0[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Sr[n?Sr.indexOf(n):0]}function lG(t){for(let e=Sr.indexOf(t)+1,n=Sr.length;e<n;++e)if(y0[Sr[e]].common)return Sr[e]}function Fb(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=Qx(n,e),a=n[r]>=e?n[r]:n[i];t[a]=!0}}function cG(t,e,n,r){const i=t._adapter,a=+i.startOf(e[0].value,r),o=e[e.length-1].value;let s,u;for(s=a;s<=o;s=+i.add(s,1,r))u=n[s],u>=0&&(e[u].major=!0);return e}function Db(t,e,n){const r=[],i={},a=e.length;let o,s;for(o=0;o<a;++o)s=e[o],i[s]=o,r.push({value:s,major:!1});return a===0||!n?r:cG(t,r,i,n)}class Ip extends El{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new w$._date(e.adapters.date);i.init(n),Ec(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Ib(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:a,minDefined:o,maxDefined:s}=this.getUserBounds();function u(l){!o&&!isNaN(l.min)&&(i=Math.min(i,l.min)),!s&&!isNaN(l.max)&&(a=Math.max(a,l.max))}(!o||!s)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),i=yi(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),a=yi(a)&&!isNaN(a)?a:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,a-1),this.max=Math.max(i+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const a=this.min,o=this.max,s=UV(i,a,o);return this._unit=n.unit||(r.autoSkip?Rb(n.minUnit,this.min,this.max,this._getLabelCapacity(a)):uG(this,s.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:lG(this._unit),this.initOffsets(i),e.reverse&&s.reverse(),Db(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,a;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?r=a:r=(a-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Jr(n,0,o),r=Jr(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,a=i.time,o=a.unit||Rb(a.minUnit,n,r,this._getLabelCapacity(n)),s=it(i.ticks.stepSize,1),u=o==="week"?a.isoWeekday:!1,l=cf(u)||u===!0,c={};let f=n,h,d;if(l&&(f=+e.startOf(f,"isoWeek",u)),f=+e.startOf(f,l?"day":o),e.diff(r,n,o)>1e5*s)throw new Error(n+" and "+r+" are too far apart with stepSize of "+s+" "+o);const v=i.ticks.source==="data"&&this.getDataTimestamps();for(h=f,d=0;h<r;h=+e.add(h,s,o),d++)Fb(c,h,v);return(h===r||i.bounds==="ticks"||d===1)&&Fb(c,h,v),Object.keys(c).sort(Ab).map(p=>+p)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,a=this._unit,o=n||i[a];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const a=this.options,o=a.ticks.callback;if(o)return It(o,[e,n,r],this);const s=a.time.displayFormats,u=this._unit,l=this._majorUnit,c=u&&s[u],f=l&&s[l],h=r[n],d=l&&f&&h&&h.major;return this._adapter.format(e,i||(d?f:c))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Es(this.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(i),o=Math.sin(i),s=this._resolveTickFontOptions(0).size;return{w:r*a+s*o,h:r*o+s*a}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,a=this._tickFormatFunction(e,0,Db(this,[e],this._majorUnit),i),o=this._getLabelSize(a),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(Ib(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return uA(e.sort(Ab))}}Xe(Ip,"id","time"),Xe(Ip,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function qh(t,e,n){let r=0,i=t.length-1,a,o,s,u;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Cs(t,"pos",e)),{pos:a,time:s}=t[r],{pos:o,time:u}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Cs(t,"time",e)),{time:a,pos:s}=t[r],{time:o,pos:u}=t[i]);const l=o-a;return l?s+(u-s)*(e-a)/l:s}class Ob extends Ip{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=qh(n,this.min),this._tableRange=qh(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],a=[];let o,s,u,l,c;for(o=0,s=e.length;o<s;++o)l=e[o],l>=n&&l<=r&&i.push(l);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,s=i.length;o<s;++o)c=i[o+1],u=i[o-1],l=i[o],Math.round((c+u)/2)!==l&&a.push({time:l,pos:o/(s-1)});return a}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,a)=>i-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(qh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return qh(this._table,r*this._tableRange+this._minPos,!0)}}Xe(Ob,"id","timeseries"),Xe(Ob,"defaults",Ip.defaults);const VA="label";function Pb(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function fG(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function HA(t,e){t.labels=e}function $A(t,e,n=VA){const r=[];t.datasets=e.map(i=>{const a=t.datasets.find(o=>o[n]===i[n]);return!a||!i.data||r.includes(a)?{...i}:(r.push(a),Object.assign(a,i),a)})}function hG(t,e=VA){const n={labels:[],datasets:[]};return HA(n,t.labels),$A(n,t.datasets,e),n}function dG(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:a,type:o,data:s,options:u,plugins:l=[],fallbackContent:c,updateMode:f,...h}=t,d=ve.useRef(null),v=ve.useRef(null),p=()=>{d.current&&(v.current=new x0(d.current,{type:o,data:hG(s,a),options:u&&{...u},plugins:l}),Pb(e,v.current))},m=()=>{Pb(e,null),v.current&&(v.current.destroy(),v.current=null)};return ve.useEffect(()=>{!i&&v.current&&u&&fG(v.current,u)},[i,u]),ve.useEffect(()=>{!i&&v.current&&HA(v.current.config.data,s.labels)},[i,s.labels]),ve.useEffect(()=>{!i&&v.current&&s.datasets&&$A(v.current.config.data,s.datasets,a)},[i,s.datasets]),ve.useEffect(()=>{v.current&&(i?(m(),setTimeout(p)):v.current.update(f))},[i,u,s.labels,s.datasets,f]),ve.useEffect(()=>{v.current&&(m(),setTimeout(p))},[o]),ve.useEffect(()=>(p(),()=>m()),[]),eA.jsx("canvas",{ref:d,role:"img",height:n,width:r,...h,children:c})}const pG=ve.forwardRef(dG);function jA(t,e){return x0.register(e),ve.forwardRef((n,r)=>eA.jsx(pG,{...n,ref:r,type:t}))}const vG=jA("line",cd),mG=jA("bar",ld);function Qv({name:t,size:e=32,style:n={}}){const r=(t||"").split(" ").map(i=>i[0]).join("").slice(0,2).toUpperCase();return R.createElement("div",{style:{width:e,height:e,borderRadius:"50%",background:"#1976d2",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600,fontSize:e/2,userSelect:"none",...n},"aria-label":t?`Avatar for ${t}`:"Avatar"},r||R.createElement("span",{role:"img","aria-label":"user"},""))}function gG({theme:t,setTheme:e,cameraList:n,selectedCamera:r,setSelectedCamera:i,language:a,setLanguage:o,onClose:s}){return R.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"}},R.createElement("div",{style:{background:"#fff",color:"#222",borderRadius:12,minWidth:320,maxWidth:360,boxShadow:"0 4px 32px rgba(0,0,0,0.10)",padding:24,display:"grid",gap:18,position:"relative"}},R.createElement("button",{onClick:s,style:{position:"absolute",top:12,right:12,background:"none",border:"none",fontSize:20,color:"#888",cursor:"pointer"},"aria-label":"Close settings"},""),R.createElement("h2",{style:{margin:0,fontSize:20}},"Settings"),R.createElement("div",null,R.createElement("label",{style:{fontWeight:500}},"Theme:"),R.createElement("select",{value:t,onChange:u=>e(u.target.value),style:{marginLeft:10,padding:6,borderRadius:6}},R.createElement("option",{value:"dark"},"Dark"),R.createElement("option",{value:"light"},"Light"))),R.createElement("div",null,R.createElement("label",{style:{fontWeight:500}},"Language:"),R.createElement("select",{value:a,onChange:u=>o(u.target.value),style:{marginLeft:10,padding:6,borderRadius:6}},R.createElement("option",{value:"en"},"English"),R.createElement("option",{value:"fr"},"Franais"),R.createElement("option",{value:"es"},"Espaol"))),R.createElement("div",null,R.createElement("label",{style:{fontWeight:500}},"Camera:"),R.createElement("select",{value:r,onChange:u=>i(u.target.value),style:{marginLeft:10,padding:6,borderRadius:6}},n.map(u=>R.createElement("option",{key:u.deviceId,value:u.deviceId},u.label||`Camera ${u.deviceId}`))))))}const Jv=[{title:"Welcome to OfficAttend!",content:"This quick tour will show you how to register employees, track attendance, and use admin features."},{title:"Register Employees",content:"Go to the Register tab and capture each employees face. This enables face recognition for attendance."},{title:"Attendance",content:"Employees check in/out by facing the camera. The system records their attendance automatically."},{title:"Admin Features",content:"Admins can manage employees, view history, export CSVs, and change settings from the Admin tab."},{title:"Theme & Settings",content:"Switch between dark/light mode and adjust settings using the toggle and settings panel."},{title:"All Set!",content:"Youre ready to use OfficAttend. You can revisit this tour anytime from the settings panel."}];function xG({open:t,onClose:e}){const[n,r]=ve.useState(0);return ve.useEffect(()=>{t||r(0)},[t]),t?R.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.45)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"}},R.createElement("div",{style:{background:"#fff",borderRadius:12,padding:32,maxWidth:400,boxShadow:"0 8px 32px #0002",textAlign:"center"}},R.createElement("h2",{style:{margin:"0 0 12px"}},Jv[n].title),R.createElement("div",{style:{marginBottom:24,color:"#444"}},Jv[n].content),R.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},R.createElement("button",{onClick:e,style:{padding:"8px 16px",borderRadius:6,border:"1px solid #bbb",background:"#f3f4f6",color:"#222",cursor:"pointer"}},"Skip"),n<Jv.length-1?R.createElement("button",{onClick:()=>r(i=>i+1),style:{padding:"8px 16px",borderRadius:6,border:"1px solid #2563eb",background:"#2563eb",color:"#fff",cursor:"pointer"}},"Next"):R.createElement("button",{onClick:e,style:{padding:"8px 16px",borderRadius:6,border:"1px solid #2563eb",background:"#2563eb",color:"#fff",cursor:"pointer"}},"Finish")))):null}x0.register(pd,Tg,kg,dd,rc,nG,Kj);const yG=typeof window<"u"&&window.require&&window.require("electron");let vs=null;if(yG)try{vs=window.require("electron").ipcRenderer}catch{}function Nb(t,e){window.Notification&&Notification.permission==="granted"?new Notification(t,{body:e}):window.Notification&&Notification.permission!=="denied"&&Notification.requestPermission().then(n=>{n==="granted"&&new Notification(t,{body:e})})}function Mb(t){if(window.speechSynthesis){const e=new window.SpeechSynthesisUtterance(t);e.rate=1.05,e.pitch=1,window.speechSynthesis.speak(e)}}function wG({open:t,title:e,message:n,onConfirm:r,onCancel:i,confirmText:a="Yes",cancelText:o="Cancel"}){return t?R.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.18)",zIndex:10001,display:"flex",alignItems:"center",justifyContent:"center"},role:"dialog","aria-modal":"true","aria-labelledby":"confirm-title"},R.createElement("div",{style:{background:"#fff",borderRadius:10,boxShadow:"0 4px 32px #0002",padding:28,minWidth:320,maxWidth:"90vw",display:"grid",gap:18}},R.createElement("div",{id:"confirm-title",style:{fontWeight:600,fontSize:18}},e),R.createElement("div",{style:{fontSize:15}},n),R.createElement("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"}},R.createElement("button",{onClick:i,style:{padding:"8px 18px",borderRadius:6,border:"1px solid #bbb",background:"#f5f5f5",color:"#333",cursor:"pointer"}},o),R.createElement("button",{onClick:r,style:{padding:"8px 18px",borderRadius:6,border:"1px solid #b00",background:"#e33",color:"#fff",cursor:"pointer",fontWeight:500}},a)))):null}function _G(){const[t,e]=ve.useState({open:!1,onConfirm:null,title:"",message:"",confirmText:"",cancelText:""}),[n,r]=ve.useState(!1),[i,a]=ve.useState("en"),[o,s]=ve.useState([]),[u,l]=ve.useState("");ve.useEffect(()=>{async function W(){try{const he=(await navigator.mediaDevices.enumerateDevices()).filter(Le=>Le.kind==="videoinput");s(he),he.length&&!u&&l(he[0].deviceId)}catch{}}W()},[]);const[c,f]=ve.useState(!1),[h,d]=ve.useState(!1),[v,p]=ve.useState(!0),[m,g]=ve.useState(!1);ve.useEffect(()=>{c?setTimeout(()=>p(!1),500):p(!0)},[c]);const[x,y]=ve.useState(()=>window.localStorage.getItem("officattend_tour_shown")!=="1"),w=()=>{y(!1),window.localStorage.setItem("officattend_tour_shown","1")},[_,b]=ve.useState("attendance"),[E,S]=ve.useState("Loading..."),{push:C}=H1(),[T,A]=ve.useState(!1),[I,V]=ve.useState("tiny");ve.useRef(null);const[J,K]=ve.useState(!1),[ae,ie]=ve.useState([]),[G,Q]=ve.useState([]),[te,pe]=ve.useState(0),P=ve.useRef(0),[j,U]=ve.useState(new Date().toLocaleString()),z=ve.useRef(!1),Z=ve.useRef(null),[xe,we]=ve.useState(null),[ee,de]=ve.useState(null),[Fe,Re]=ve.useState("in"),[He,Ve]=ve.useState(""),[Me,$e]=ve.useState(!1),[Te,Et]=ve.useState("10:00"),[vt,bn]=ve.useState("16:00"),[Xt,ur]=ve.useState(null),[St,Ut]=ve.useState(null),[Pn,$i]=ve.useState(""),[Mr,Kt]=ve.useState(""),[qt,ro]=ve.useState(""),[Vt,io]=ve.useState(""),[ai,Kn]=ve.useState([]),[ji,nu]=ve.useState([]),[Sl,es]=ve.useState([]),un=ve.useRef(null),Cl=ve.useRef(null),ru=ve.useRef(null),iu=ve.useRef(null),ya=ve.useRef(!1),[Lf,Bf]=ve.useState(!1),[w0,Tl]=ve.useState(!1),[_0,Wf]=ve.useState(""),[zf,kl]=ve.useState(null),[wa,Uf]=ve.useState("dark"),Al=ve.useRef(null),Vf=ve.useRef("attendance"),k=ve.useRef("in"),L=ve.useRef([]),O=ve.useRef(!1),N=ve.useRef(null),D=ve.useMemo(()=>wa==="dark"?{bg:"#0b1220",headerBg:"#0f172a",card:"#0f172a",border:"#1f2937",text:"#e5e7eb",muted:"#9ca3af",primary:"#2563eb",primaryText:"#ffffff",buttonBg:"#111827",buttonBorder:"#334155",accentBg:"#0b1220",accentActiveBg:"#1e293b"}:{bg:"#f8fafc",headerBg:"#ffffff",card:"#ffffff",border:"#e5e7eb",text:"#1f2937",muted:"#64748b",primary:"#2563eb",primaryText:"#ffffff",buttonBg:"#ffffff",buttonBorder:"#d1d5db",accentBg:"#ffffff",accentActiveBg:"#eef2ff"},[wa]);function B(W){return{padding:"8px 12px",borderRadius:6,border:`1px solid ${D.buttonBorder}`,background:W?D.accentActiveBg:D.accentBg,color:D.text,cursor:"pointer"}}const ne={padding:"10px 14px",borderRadius:6,border:`1px solid ${D.primary}`,background:D.primary,color:D.primaryText,cursor:"pointer"},ue={padding:"10px 14px",borderRadius:6,border:`1px solid ${D.buttonBorder}`,background:D.buttonBg,color:D.text,cursor:"pointer"},q={border:`1px solid ${D.border}`,padding:"8px 10px",textAlign:"left"};function re(){const W=un.current;return W&&W instanceof HTMLVideoElement&&W.videoWidth&&W.videoHeight?W:null}function oe(){try{Mv(null)}catch{}Nh(null),Ut(null),de(null),we(null),nu([]),es([]),Kn([]),Ve(""),A(!1),S("Logged out"),C("Logged out","success")}function _e(){async function W(Y){g(!0);const he=await navigator.mediaDevices.getUserMedia(Y);if(un.current){un.current.srcObject=he;try{await un.current.play()}catch{}}S("Camera ready"),C("Camera ready","success"),g(!1)}(async()=>{try{await W({video:{facingMode:"user"},audio:!1})}catch{try{await W({video:!0,audio:!1})}catch{try{const nt=(await navigator.mediaDevices.enumerateDevices()).filter(Je=>Je.kind==="videoinput");if(nt.length>0){const Je=nt[0].deviceId;await W({video:{deviceId:{exact:Je}},audio:!1})}else throw new Error("No video input devices found")}catch{S("Camera permission denied or not available"),C("Camera not available or permission denied","error")}}}ru.current=document.createElement("canvas")})()}ve.useEffect(()=>{_e();const W=()=>{var Y,he;un.current&&un.current.srcObject&&((((he=(Y=un.current.srcObject).getTracks)==null?void 0:he.call(Y))||[]).forEach(nt=>nt.stop()),un.current.srcObject=null),vs&&vs.send("camera-released")};return window.addEventListener("beforeunload",W),window.addEventListener("unload",W),vs&&vs.on("release-camera",W),()=>{W(),window.removeEventListener("beforeunload",W),window.removeEventListener("unload",W),vs&&vs.removeListener("release-camera",W)}},[]),ve.useEffect(()=>{const W=setInterval(()=>U(new Date().toLocaleString()),1e3);return()=>clearInterval(W)},[]),ve.useEffect(()=>{const W=()=>{z.current=document.hidden};return document.addEventListener("visibilitychange",W),()=>document.removeEventListener("visibilitychange",W)},[]),ve.useEffect(()=>{const W=()=>{const Y=window.cv;return Y?Y&&Y.onRuntimeInitialized?(Y.onRuntimeInitialized=()=>{Bf(!0),C("OpenCV ready","success")},!1):Y&&(Y.Mat||Y.ready)?(Bf(!0),!0):!1:!1};if(!W()){const Y=setInterval(()=>{W()&&clearInterval(Y)},200);return()=>clearInterval(Y)}},[]),ve.useEffect(()=>{c&&(_==="attendance"||_==="register")&&!T&&A(!0)},[c,_]),ve.useEffect(()=>{async function W(){S("Loading face recognition models...");try{const Y="/models";await Promise.all([tn.tinyFaceDetector.loadFromUri(Y),tn.faceLandmark68Net.loadFromUri(Y),tn.faceRecognitionNet.loadFromUri(Y)]);try{await tn.ssdMobilenetv1.loadFromUri(Y),d(!0)}catch{d(!1)}f(!0),S("Models loaded. Ready.")}catch{try{const he="https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights";await Promise.all([tn.tinyFaceDetector.loadFromUri(he),tn.faceLandmark68Net.loadFromUri(he),tn.faceRecognitionNet.loadFromUri(he)]);try{await tn.ssdMobilenetv1.loadFromUri(he),d(!0)}catch{d(!1)}f(!0),S("Models loaded from CDN. Ready."),C("Models loaded from CDN","success")}catch{f(!1),d(!1),S("Models not found. Place model files in public/models to enable detection."),C("Models missing: add to public/models to enable detection","warning")}}}W()},[]),ve.useEffect(()=>{I==="ssd"&&!h&&(S("SSD Mobilenet not loaded  falling back to Tiny detector"),C("SSD not loaded  using Tiny","info"))},[I,h]),ve.useEffect(()=>{let W;const Y=async()=>{if(z.current||!T||!c||!re()){W=requestAnimationFrame(Y);return}const he=performance.now();if(P.current){const cr=he-P.current;pe(Math.round(1e3/Math.max(1,cr)))}P.current=he;try{const cr=un.current,cn=cr.videoWidth,bi=cr.videoHeight;if(Lf&&window.cv&&cn&&bi&&ru.current){const Ke=ru.current;Ke.width!==cn&&(Ke.width=cn),Ke.height!==bi&&(Ke.height=bi),Ke.getContext("2d").drawImage(cr,0,0,cn,bi);const Nn=window.cv;let _a=Nn.imread(Ke);if(Nn.cvtColor(_a,_a,Nn.COLOR_RGBA2GRAY),Nn.equalizeHist(_a,_a),iu.current){let au=new Nn.Mat;Nn.absdiff(_a,iu.current,au);const Il=Nn.mean(au),Hf=(Il[0]+Il[1]+Il[2])/3;ya.current=Hf>5,au.delete(),iu.current.delete()}else ya.current=!0;iu.current=_a}}catch{}const Le=I==="ssd"&&h,nt=un.current.videoWidth||320,Je=Math.max(160,Math.min(416,Math.floor(nt/2))),ln=Le?new aa({minConfidence:.5}):new Ia({inputSize:Je,scoreThreshold:.3});let lr;try{const cr=re();lr=await Oh(cr,ln).withFaceLandmarks().withFaceDescriptors()}catch{try{const cn=re(),bi=new Ia({inputSize:Je,scoreThreshold:.3});lr=await Oh(cn,bi).withFaceLandmarks().withFaceDescriptors()}catch{}}if(!lr||lr.length===0)try{const cr=Le?new Ia({inputSize:Je,scoreThreshold:.3}):h?new aa({minConfidence:.5}):new Ia({inputSize:Je,scoreThreshold:.3}),cn=re();cn&&(lr=await Oh(cn,cr).withFaceLandmarks().withFaceDescriptors())}catch{}const Zt=Cl.current;if(Zt&&un.current){const cr=re()||un.current,cn=u7(Zt,cr),bi=q4(lr,cn),Ke=Zt.getContext("2d");Ke.clearRect(0,0,Zt.width,Zt.height);const ts=[],Nn=Al.current,_a=Vf.current,au=N.current;if(bi.forEach((En,Dt)=>{var is;const Ze=En.detection.box,oi=En.detection.score||0;let Ei=null,Pt=null,Qe="Unknown Face",Sn=null,Lr=0;if(au&&_a==="attendance"&&(Ei=au.findBestMatch(En.descriptor),Ei&&Ei.label!=="unknown")){Pt=((is=Nn==null?void 0:Nn.employees)==null?void 0:is.find(Ea=>Ea.id===Ei.label))||null,Sn=Ei.distance,Lr=Math.round((1-Sn)*100);const ao=Lr>=75;Qe=Pt?ao?`Recognized (${Lr}%)`:`${Pt.name} - ${Lr}% (need 75%+)`:"Unknown Face"}ts.push({i:Dt,count:bi.length,box:{x:Ze.x,y:Ze.y,w:Ze.width,h:Ze.height},score:Math.round(oi*100),label:Pt?Pt.name:"unknown",empId:Pt?Pt.id:null,status:Qe,distance:Sn,matchConfidence:Lr,time:new Date().toLocaleTimeString()});const ba=Pt&&Lr>=75?"lime":"orange";Ke.strokeStyle=ba,Ke.lineWidth=3;const Br=8,fn=Ze.x,fr=Ze.y,ns=Ze.width,rs=Ze.height;Ke.beginPath(),Ke.moveTo(fn+Br,fr),Ke.lineTo(fn+ns-Br,fr),Ke.quadraticCurveTo(fn+ns,fr,fn+ns,fr+Br),Ke.lineTo(fn+ns,fr+rs-Br),Ke.quadraticCurveTo(fn+ns,fr+rs,fn+ns-Br,fr+rs),Ke.lineTo(fn+Br,fr+rs),Ke.quadraticCurveTo(fn,fr+rs,fn,fr+rs-Br),Ke.lineTo(fn,fr+Br),Ke.quadraticCurveTo(fn,fr,fn+Br,fr),Ke.stroke(),Ke.fillStyle=ba,Ke.font="12px system-ui, sans-serif";const jf=`Face ${Math.round(oi*100)}%`+(Pt?`  ${Pt.name}`:"");if(Ke.fillText(jf,fn+4,Math.max(12,fr-6)),J){const ao=En.landmarks.positions;Ke.fillStyle="deepskyblue",ao.forEach(Ea=>{Ke.fillRect(Ea.x-1,Ea.y-1,2,2)})}}),ie(ts),_==="register"&&bi.length>0){const En=bi[0],Dt=En.detection.box;let Ze=!1,oi="";try{const fn=un.current,fr=fn.videoWidth,ns=fn.videoHeight,jf=Dt.width*Dt.height/(cn.width*cn.height)>.1&&Dt.width>=160&&Dt.height>=160,is=En.landmarks.getLeftEye(),ao=En.landmarks.getRightEye(),Ea=En.landmarks.getNose(),Gf=Wr=>Wr.reduce((Sa,S0)=>({x:Sa.x+S0.x,y:Sa.y+S0.y}),{x:0,y:0}),sy={x:Gf(is).x/is.length,y:Gf(is).y/is.length},uy={x:Gf(ao).x/ao.length,y:Gf(ao).y/ao.length},Xf=Ea[Math.floor(Ea.length/2)]||Ea[3]||Ea[0],ly=Math.hypot(Xf.x-sy.x,Xf.y-sy.y),cy=Math.hypot(Xf.x-uy.x,Xf.y-uy.y),fy=Math.abs(ly-cy)/Math.max(ly,cy)<.15;let b0=!0,E0=!0;if(Lf&&window.cv){const Wr=window.cv,Sa=ru.current||document.createElement("canvas");Sa.width!==cn.width&&(Sa.width=cn.width),Sa.height!==cn.height&&(Sa.height=cn.height),Sa.getContext("2d").drawImage(fn,0,0,cn.width,cn.height);let Kf=Wr.imread(Sa);Wr.cvtColor(Kf,Kf,Wr.COLOR_RGBA2GRAY);const GA=new Wr.Rect(Math.max(0,Math.round(Dt.x)),Math.max(0,Math.round(Dt.y)),Math.round(Dt.width),Math.round(Dt.height));let C0=Kf.roi(GA),T0=new Wr.Mat;Wr.Laplacian(C0,T0,Wr.CV_64F);let dy=new Wr.Mat,k0=new Wr.Mat;Wr.meanStdDev(T0,dy,k0),b0=(k0.doubleAt(0,0)||0)>12;const py=Wr.mean(C0)[0];E0=py>50&&py<200,T0.delete(),dy.delete(),k0.delete(),C0.delete(),Kf.delete()}const hy=!ya.current;Ze=jf&&fy&&b0&&E0&&hy,oi=Ze?"Ready: optimal face captured":jf?fy?b0?E0?hy?"Align face":"Hold still":"Adjust lighting":"Hold still":"Face front":"Move closer"}catch{Ze=!1,oi="Analyzing..."}const Ei=Ze?"lime":"orange";Ke.strokeStyle=Ei,Ke.lineWidth=3;const Pt=8,Qe=Dt.x,Sn=Dt.y,Lr=Dt.width,ba=Dt.height;Ke.beginPath(),Ke.moveTo(Qe+Pt,Sn),Ke.lineTo(Qe+Lr-Pt,Sn),Ke.quadraticCurveTo(Qe+Lr,Sn,Qe+Lr,Sn+Pt),Ke.lineTo(Qe+Lr,Sn+ba-Pt),Ke.quadraticCurveTo(Qe+Lr,Sn+ba,Qe+Lr-Pt,Sn+ba),Ke.lineTo(Qe+Pt,Sn+ba),Ke.quadraticCurveTo(Qe,Sn+ba,Qe,Sn+ba-Pt),Ke.lineTo(Qe,Sn+Pt),Ke.quadraticCurveTo(Qe,Sn,Qe+Pt,Sn),Ke.stroke(),Ke.fillStyle=Ei,Ke.font="14px system-ui, sans-serif",Ke.fillText(oi,Qe+4,Math.max(14,Sn-8));const Br=En.landmarks.getNose()[Math.floor(En.landmarks.getNose().length/2)];Br&&(Ke.beginPath(),Ke.arc(Br.x,Br.y,3,0,Math.PI*2),Ke.fill()),Tl(Ze),Wf(oi),Ze&&!zf&&(kl(lr[0].descriptor),S("Best face captured  click Save"),C("Best face captured  click Save Face Template","success"))}const Il=L.current,Hf=k.current,$f=O.current;if(Nn&&_a==="attendance"&&ts&&ts.length>0){console.log("Attendance check - infos:",ts.length,"motion:",ya.current);const En=Date.now();for(const Dt of ts){if(console.log("Processing face:",Dt.label,"empId:",Dt.empId,"confidence:",Dt.matchConfidence),!Dt.empId){console.log("Skipping - no empId");continue}if(Dt.matchConfidence<75){S(`${Dt.label}: confidence ${Dt.matchConfidence}% (need 75%+)`),console.log("Skipping - low confidence:",Dt.matchConfidence);continue}const Ze=Nn.employees.find(Qe=>Qe.id===Dt.empId);if(!Ze){console.log("Skipping - employee not found");continue}const oi=(Il||[]).find(Qe=>Qe.employeeId===Ze.id);let Ei=!!(oi&&oi.checkIn),Pt=!!(oi&&oi.checkOut);if(console.log("Employee found:",Ze.name,"alreadyIn:",Ei,"alreadyOut:",Pt,"attendanceType:",Hf),Hf==="in"){if(Ei){S(`Already checked in: ${Ze.name}`),Q(Qe=>[{t:new Date().toLocaleTimeString(),msg:`Already checked in: ${Ze.name}`},...Qe].slice(0,50));continue}try{if(console.log("Recording check-in for:",Ze.name,"backend:",$f),$f){const Qe=await x_(Nn.id,Ze.id,"in",En);console.log("Check-in result:",Qe)}else{const Qe=v_(Nn.id,Ze.id,"in",En);console.log("Check-in result (local):",Qe)}await Ge(),S(`${Ze.name} checked in at ${new Date(En).toLocaleTimeString()}`),Q(Qe=>[{t:new Date().toLocaleTimeString(),msg:`Attendance recorded: ${Ze.name} (Check-In)`},...Qe].slice(0,50)),C(`${Ze.name} checked in`,"success"),Mb(`Attendance marked for ${Ze.name}`),Nb("Attendance Marked",`${Ze.name} checked in`)}catch(Qe){console.error("Check-in failed:",Qe),S(`Check-in failed for ${Ze.name}`),C(`Check-in failed: ${Qe.message}`,"error")}}else{if(Pt){S(`Already checked out: ${Ze.name}`),Q(Qe=>[{t:new Date().toLocaleTimeString(),msg:`Already checked out: ${Ze.name}`},...Qe].slice(0,50));continue}try{if(console.log("Recording check-out for:",Ze.name,"backend:",$f),$f){const Qe=await x_(Nn.id,Ze.id,"out",En);console.log("Check-out result:",Qe)}else{const Qe=v_(Nn.id,Ze.id,"out",En);console.log("Check-out result (local):",Qe)}await Ge(),S(`${Ze.name} checked out at ${new Date(En).toLocaleTimeString()}`),Q(Qe=>[{t:new Date().toLocaleTimeString(),msg:`Departure recorded: ${Ze.name} (Check-Out)`},...Qe].slice(0,50)),C(`${Ze.name} checked out`,"success"),Mb(`Attendance marked for ${Ze.name}`),Nb("Attendance Marked",`${Ze.name} checked out`)}catch(Qe){console.error("Check-out failed:",Qe),S(`Check-out failed for ${Ze.name}`),C(`Check-out failed: ${Qe.message}`,"error")}}A(!1),setTimeout(()=>A(!0),1500)}}}W=requestAnimationFrame(Y)};return W=requestAnimationFrame(Y),()=>cancelAnimationFrame(W)},[T,c]),ve.useEffect(()=>{B9().then(W=>$e(W))},[]),ve.useEffect(()=>{const W=D9();W!=null&&W.companyId&&(we(W.companyId),Me?Ta(W.companyId).then(de).catch(()=>de(wr(W.companyId))):de(wr(W.companyId)))},[Me]);const Ce=ve.useMemo(()=>{if(!ee||!c)return null;const W=ee.employees.filter(Y=>Array.isArray(Y.descriptor)&&Y.descriptor.length===128).map(Y=>new ec(Y.id,[new Float32Array(Y.descriptor)]));return W.length?new R9(W,.6):null},[ee,c]),Ae=ee?ee.employees||[]:[],[ye,ke]=ve.useState([]);ve.useEffect(()=>{Al.current=ee},[ee]),ve.useEffect(()=>{Vf.current=_},[_]),ve.useEffect(()=>{k.current=Fe},[Fe]),ve.useEffect(()=>{L.current=ye},[ye]),ve.useEffect(()=>{O.current=Me},[Me]),ve.useEffect(()=>{N.current=Ce},[Ce]),ve.useEffect(()=>{if(!ee){ke([]);return}(async()=>{if(Me)try{const W=await g_(ee.id);ke(W)}catch{ke([])}else try{ke(m_(ee.id))}catch{ke([])}})()},[ee,Me]);async function Ge(){const W=Al.current,Y=O.current;if(W)if(Y)try{const he=await g_(W.id);ke(he),console.log("Reloaded today attendance:",he)}catch(he){console.error("Failed to reload today:",he)}else try{const he=m_(W.id);ke(he),console.log("Reloaded today attendance (local):",he)}catch(he){console.error("Failed to reload today (local):",he)}}return ve.useEffect(()=>{async function W(){if(!(!ee||!Me))try{const Y=await Lv(ee.id),he=await Bv(ee.id);nu(Y),es(he)}catch{}}W()},[ee,Me]),ve.useEffect(()=>{if(!ee||_!=="history")return;const W=new Date().toISOString().slice(0,10),Y=new Date(Date.now()-6*24*60*60*1e3).toISOString().slice(0,10),he=qt||Y,Le=Vt||W;qt||ro(he),Vt||io(Le),(async()=>{if(Me)try{const nt=await Mh(ee.id,he,Le);Kn(nt)}catch{}else try{const nt=Ph(ee.id,he,Le);Kn(nt)}catch{}})()},[_,ee,Me]),ve.useEffect(()=>{!ee||_!=="history"||!qt||!Vt||(async()=>{if(Me)try{const W=await Mh(ee.id,qt,Vt);Kn(W)}catch{}else try{const W=Ph(ee.id,qt,Vt);Kn(W)}catch{}})()},[qt,Vt,_,ee,Me]),ee?R.createElement(R.Fragment,null,R.createElement(wG,{...t}),R.createElement("div",{style:{display:"grid",gridTemplateRows:"auto 1fr",minHeight:"100vh",background:D.bg,color:D.text},role:"application","aria-label":"OfficAttend Attendance System"},R.createElement(xG,{open:x,onClose:w}),R.createElement("header",{style:{padding:"12px 16px",borderBottom:`1px solid ${D.border}`,background:D.headerBg,display:"flex",gap:12,alignItems:"center",position:"relative"},role:"banner"},R.createElement("h1",{style:{margin:0,fontSize:18},tabIndex:0},"OfficAttend"),R.createElement("button",{onClick:()=>y(!0),style:{position:"absolute",right:16,top:16,zIndex:10,background:"none",border:"none",color:D.primary,cursor:"pointer",fontSize:14},"aria-label":"Show onboarding tour"}," Tour"),R.createElement("nav",{style:{display:"flex",gap:8},"aria-label":"Main navigation"},R.createElement("button",{onClick:()=>b("attendance"),style:B(_==="attendance"),"aria-current":_==="attendance",tabIndex:0},"Attendance"),R.createElement("button",{onClick:()=>b("register"),style:B(_==="register"),"aria-current":_==="register",tabIndex:0},"Register"),R.createElement("button",{onClick:()=>b("records"),style:B(_==="records"),"aria-current":_==="records",tabIndex:0},"Today"),R.createElement("button",{onClick:()=>b("history"),style:B(_==="history"),"aria-current":_==="history",tabIndex:0},"History"),R.createElement("button",{onClick:()=>b("dashboard"),style:B(_==="dashboard"),"aria-current":_==="dashboard",tabIndex:0},"Dashboard"),R.createElement("button",{onClick:()=>b("print"),style:B(_==="print"),"aria-current":_==="print",tabIndex:0},"Print"),R.createElement("button",{onClick:()=>b("employees"),style:B(_==="employees"),"aria-current":_==="employees",tabIndex:0},"Employees"),R.createElement("button",{onClick:()=>b("admin"),style:B(_==="admin"),"aria-current":_==="admin",tabIndex:0},"Admin")),R.createElement("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:8}},R.createElement("button",{style:{padding:"7px 14px",borderRadius:20,border:`1px solid ${D.buttonBorder}`,background:D.buttonBg,color:D.text,cursor:"pointer",fontSize:15,boxShadow:"0 2px 8px rgba(0,0,0,0.04)",display:"flex",alignItems:"center",gap:8},onClick:()=>Uf(W=>W==="dark"?"light":"dark"),"aria-label":"Toggle dark/light mode"},wa==="dark"?"":"",wa==="dark"?"Dark":"Light"),R.createElement("button",{style:{padding:"7px 14px",borderRadius:20,border:`1px solid ${D.buttonBorder}`,background:D.buttonBg,color:D.text,cursor:"pointer",fontSize:15,boxShadow:"0 2px 8px rgba(0,0,0,0.04)",display:"flex",alignItems:"center",gap:8},onClick:()=>r(!0),"aria-label":"Open settings panel"}," Settings"),n&&R.createElement(gG,{theme:wa,setTheme:Uf,cameraList:o,selectedCamera:u,setSelectedCamera:l,language:i,setLanguage:a,onClose:()=>r(!1)}),R.createElement("div",{style:{fontSize:13,color:D.muted}},E),R.createElement("button",{onClick:oe,style:ue},"Logout"))),R.createElement("main",{style:{display:"grid",placeItems:"center",padding:16,gap:16},role:"main",tabIndex:0,"aria-label":"Main content"},v&&R.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.18)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"}},R.createElement(hw,{size:60,color:D.primary}),R.createElement("span",{style:{marginLeft:18,color:D.primary,fontWeight:500,fontSize:18}},"Loading models...")),m&&R.createElement("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.10)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"}},R.createElement(hw,{size:48,color:D.primary}),R.createElement("span",{style:{marginLeft:14,color:D.primary,fontWeight:500,fontSize:16}},"Starting camera...")),["attendance","register"].includes(_)&&R.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:16,alignItems:"flex-start",width:"100%",maxWidth:1040}},R.createElement("div",{style:{position:"relative",width:"100%",maxWidth:720,flex:"2 1 320px",minWidth:240}},R.createElement("video",{ref:un,width:720,height:405,style:{width:"100%",background:"#000",borderRadius:8},autoPlay:!0,muted:!0,playsInline:!0}),R.createElement("canvas",{ref:Cl,width:720,height:405,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:8,pointerEvents:"none",zIndex:2}})),R.createElement("div",{style:{display:"grid",gap:8,flex:"1 1 280px",minWidth:220,maxWidth:340}},R.createElement("div",{style:{padding:10,border:`1px solid ${D.border}`,borderRadius:8,background:D.card}},R.createElement("div",{style:{fontSize:13,color:D.muted}},"Status"),R.createElement("div",{style:{fontSize:14}},E),R.createElement("div",{style:{display:"flex",gap:8,fontSize:12,color:D.muted}},R.createElement("div",null,"Now: ",j),R.createElement("div",null,"FPS: ",te),R.createElement("div",null,"Faces: ",ae.length))),R.createElement("div",{style:{padding:10,border:`1px solid ${D.border}`,borderRadius:8,background:D.card}},R.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},R.createElement("div",{style:{fontSize:13,color:D.muted}},"Detected Faces"),R.createElement("label",{style:{fontSize:12,display:"flex",gap:6,alignItems:"center"}},R.createElement("input",{type:"checkbox",checked:J,onChange:W=>K(W.target.checked)})," Landmarks")),R.createElement("div",{style:{display:"grid",gap:8}},ae.length===0&&R.createElement("div",{style:{fontSize:12,color:D.muted}},"No face detected"),ae.map(W=>R.createElement("div",{key:W.i,style:{border:`1px solid ${D.border}`,borderRadius:8,padding:8,background:D.card}},R.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},R.createElement("div",{style:{fontSize:14,fontWeight:600}},W.status),R.createElement("div",{style:{fontSize:12,color:D.muted}},W.time)),R.createElement("div",{style:{fontSize:12}},"Confidence: ",W.score,"% ",W.distance!=null?` Match: ${(1-W.distance).toFixed(2)}`:""),W.empId?R.createElement("div",{style:{fontSize:12}},"Employee: ",W.label,"  ID: ",W.empId):R.createElement("div",{style:{fontSize:12,color:D.muted}},"Label: unknown"))))),R.createElement("div",{style:{padding:10,border:`1px solid ${D.border}`,borderRadius:8,background:D.card,maxHeight:150,overflow:"hidden",display:"flex",flexDirection:"column"}},R.createElement("div",{style:{fontSize:13,color:D.muted,marginBottom:6,flexShrink:0}},"Logs"),R.createElement("div",{style:{display:"grid",gap:6,overflowY:"auto",flex:1}},G.length===0&&R.createElement("div",{style:{fontSize:12,color:D.muted}},"No events yet"),G.map((W,Y)=>R.createElement("div",{key:Y,style:{fontSize:12}},W.t,"  ",W.msg)))))),_==="attendance"&&R.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},R.createElement("label",null,"Mode:"),R.createElement("button",{onClick:()=>Re("in"),style:B(Fe==="in")},"Check-in"),R.createElement("button",{onClick:()=>Re("out"),style:B(Fe==="out")},"Check-out"),R.createElement("button",{onClick:()=>A(W=>!W),style:ne},T?"Stop":"Start"," Recognition"),R.createElement("button",{onClick:()=>_e(),style:ue},"Retry Camera")),_==="register"&&R.createElement("div",{style:{display:"grid",gap:8,justifyItems:"start"}},R.createElement("div",{style:{fontSize:13,color:w0?"#0a7":"#a70"}},_0||"Align face and hold still for best capture."),R.createElement("div",{style:{display:"flex",gap:8}},R.createElement("input",{value:He,onChange:W=>Ve(W.target.value),placeholder:"Worker name",style:{padding:8,border:"1px solid #ddd",borderRadius:6,width:240}}),R.createElement("button",{onClick:async()=>{if(!c){S("Models missing");return}const W=re();if(!W){S("Camera not ready");return}let Y=zf;if(!Y){const nt=I==="ssd"&&h,Je=un.current.videoWidth||320,ln=Math.max(160,Math.min(416,Math.floor(Je/2))),lr=nt?new aa({minConfidence:.5}):new Ia({inputSize:ln,scoreThreshold:.3});let Zt=await p_(W,lr).withFaceLandmarks().withFaceDescriptor();if(!Zt)try{const cr=nt?new Ia({inputSize:ln,scoreThreshold:.3}):h?new aa({minConfidence:.5}):new Ia({inputSize:ln,scoreThreshold:.3});Zt=await p_(W,cr).withFaceLandmarks().withFaceDescriptor()}catch{}if(!Zt){S("No face detected  try switching detector or adjust lighting"),C("No face detected","warning");return}Y=Zt.descriptor}let he;const Le={name:He.trim()||"Unnamed",descriptor:M9(Y)};Me?(he=await z9(ee.id,Le),de(await Ta(ee.id))):(he=O9(ee.id,Le),de(wr(ee.id))),kl(null),Tl(!1),Ve(""),S(`Registered ${he.name}`),C("Employee registered","success")},style:ne},"Save Face Template"),R.createElement("button",{onClick:()=>{kl(null),Tl(!1),Wf("Reset capture  align face and hold still.")},style:ue},"Reset Capture")),R.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},R.createElement("label",{style:{fontSize:13}},"Detector:"),R.createElement("select",{value:I,onChange:W=>V(W.target.value),style:{padding:6,border:"1px solid #ddd",borderRadius:6}},R.createElement("option",{value:"tiny"},"Tiny Face Detector"),R.createElement("option",{value:"ssd"},"SSD Mobilenet")),R.createElement("button",{style:ue,onClick:async()=>{if(!c){S("Models missing");return}const W=re();if(!W){S("Camera not ready");return}try{const he=I==="ssd"&&h?new aa({minConfidence:.5}):new Ia({inputSize:320,scoreThreshold:.5}),Le=await Oh(W,he).withFaceLandmarks().withFaceDescriptors();S(`Self-Test: OK  detected ${Le.length} face(s) with ${I.toUpperCase()}`),C("Self-Test passed","success")}catch(Y){const he=I==="ssd"&&!h?"Self-Test failed: SSD model not loaded  switch to Tiny":"Self-Test failed: "+((Y==null?void 0:Y.message)||"error");S(he),C("Self-Test failed","error")}}},"Run Model Self-Test"),R.createElement("button",{style:ue,onClick:()=>{const W=un.current;if(!W)return;const Y=document.createElement("canvas");Y.width=W.videoWidth,Y.height=W.videoHeight,Y.getContext("2d").drawImage(W,0,0),Z.current=Y.toDataURL("image/png"),Q(Le=>[{t:new Date().toLocaleTimeString(),msg:"Snapshot captured"},...Le].slice(0,50))}},"Capture Snapshot")),Z.current&&R.createElement("div",{style:{display:"grid",gap:6}},R.createElement("div",{style:{fontSize:12,color:"#666"}},"Last Snapshot Preview"),R.createElement("img",{src:Z.current,alt:"snapshot",style:{width:240,borderRadius:6,border:"1px solid #eee"}}))),_==="records"&&R.createElement("div",{style:{width:720,maxWidth:"100%"}},R.createElement("h3",{style:{marginTop:0}},"Todays Attendance"),R.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},R.createElement("thead",null,R.createElement("tr",null,R.createElement("th",{style:q},"Name"),R.createElement("th",{style:q},"Check-in"),R.createElement("th",{style:q},"Check-out"))),R.createElement("tbody",null,ye.map(W=>{const Y=Ae.find(Le=>Le.id===W.employeeId),he=W.employeeName||(Y==null?void 0:Y.name)||W.employeeId;return R.createElement("tr",{key:W.id},R.createElement("td",{style:{...q,display:"flex",alignItems:"center",gap:8}},R.createElement(Qv,{name:he,size:20}),he),R.createElement("td",{style:q},W.checkIn?new Date(W.checkIn).toLocaleTimeString():"-"),R.createElement("td",{style:q},W.checkOut?new Date(W.checkOut).toLocaleTimeString():"-"))}),ye.length===0&&R.createElement("tr",null,R.createElement("td",{style:q,colSpan:3},R.createElement(Wl,{label:"No attendance records yet"}))))),R.createElement("div",{style:{marginTop:8,display:"flex",gap:8}},R.createElement("button",{style:ue,onClick:async()=>{if(Me){const W=y_(ee.id),Y=document.createElement("a");Y.href=W,Y.download="attendance_today.csv",Y.click()}else{const W=ye.map(Je=>{const ln=Ae.find(lr=>lr.id===Je.employeeId);return[Je.date,Je.employeeName||(ln==null?void 0:ln.name)||Je.employeeId,Je.checkIn?new Date(Je.checkIn).toLocaleTimeString():"",Je.checkOut?new Date(Je.checkOut).toLocaleTimeString():""]}),Y=[["Date","Name","CheckIn","CheckOut"],...W].map(Je=>Je.map(ln=>'"'+String(ln).replace(/"/g,'""')+'"').join(",")).join(`
`),he=new Blob([Y],{type:"text/csv"}),Le=URL.createObjectURL(he),nt=document.createElement("a");nt.href=Le,nt.download="attendance_today.csv",nt.click(),URL.revokeObjectURL(Le)}}},"Export CSV"),R.createElement("button",{style:ue,onClick:()=>{const W=ye.map(Y=>{const he=Ae.find(Le=>Le.id===Y.employeeId);return[Y.date,Y.employeeName||(he==null?void 0:he.name)||Y.employeeId,Y.checkIn?new Date(Y.checkIn).toLocaleTimeString():"",Y.checkOut?new Date(Y.checkOut).toLocaleTimeString():""]});aB({rows:W,headers:["Date","Name","CheckIn","CheckOut"],filename:"attendance_today.xlsx"})}},"Export Excel"),R.createElement("button",{style:ue,onClick:()=>{const W=ye.map(Y=>{const he=Ae.find(Le=>Le.id===Y.employeeId);return[Y.date,Y.employeeName||(he==null?void 0:he.name)||Y.employeeId,Y.checkIn?new Date(Y.checkIn).toLocaleTimeString():"",Y.checkOut?new Date(Y.checkOut).toLocaleTimeString():""]});uB({rows:W,headers:["Date","Name","CheckIn","CheckOut"],filename:"attendance_today.pdf",title:"Today Attendance"})}},"Export PDF"))),_==="employees"&&R.createElement("div",{style:{width:720,maxWidth:"100%"}},R.createElement("h3",{style:{marginTop:0}},"Employees"),!St&&Me&&R.createElement(Bb,{company:ee,adminEmail:Pn,adminPassword:Mr,setAdminEmail:$i,setAdminPassword:Kt,onLoggedIn:async({token:W})=>{Nh(W),Ut(W),S("Logged in as admin"),C("Logged in as admin","success")}}),R.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},R.createElement("thead",null,R.createElement("tr",null,R.createElement("th",{style:q},"Name"),R.createElement("th",{style:q},"Department"),R.createElement("th",{style:q},"Shift"),R.createElement("th",{style:q},"Actions"))),R.createElement("tbody",null,Ae.map(W=>R.createElement("tr",{key:W.id},R.createElement("td",{style:{...q,display:"flex",alignItems:"center",gap:8}},R.createElement(Qv,{name:W.name,size:24}),W.name),R.createElement("td",{style:q},Me?R.createElement("select",{value:W.departmentId||"",onChange:async Y=>{if(!St){S("Admin login required"),C("Admin login required","error");return}await w_(ee.id,W.id,{departmentId:Y.target.value||null}),de(await Ta(ee.id))}},R.createElement("option",{value:""},"(none)"),ji.map(Y=>R.createElement("option",{key:Y.id,value:Y.id},Y.name))):R.createElement("span",{style:{color:"#999"}},"Backend only")),R.createElement("td",{style:q},Me?R.createElement("select",{value:W.shiftId||"",onChange:async Y=>{if(!St){S("Admin login required"),C("Admin login required","error");return}await w_(ee.id,W.id,{shiftId:Y.target.value||null}),de(await Ta(ee.id))}},R.createElement("option",{value:""},"(none)"),Sl.map(Y=>R.createElement("option",{key:Y.id,value:Y.id},Y.name))):R.createElement("span",{style:{color:"#999"}},"Backend only")),R.createElement("td",{style:q},R.createElement("button",{style:ue,onClick:async()=>{const Y=prompt("New name",W.name);if(Y){if(Me){if(!St){S("Admin login required"),C("Admin login required","error");return}await U9(ee.id,W.id,Y),de(await Ta(ee.id))}else P9(ee.id,W.id,Y),de(wr(ee.id));C("Employee renamed","success")}}},"Rename"),R.createElement("button",{style:{...ue,marginLeft:8},onClick:()=>{e({open:!0,title:"Remove Employee",message:`Are you sure you want to remove ${W.name}? This cannot be undone.`,confirmText:"Remove",cancelText:"Cancel",onConfirm:async()=>{if(e(Y=>({...Y,open:!1})),Me){if(!St){S("Admin login required"),C("Admin login required","error");return}await V9(ee.id,W.id),de(await Ta(ee.id))}else N9(ee.id,W.id),de(wr(ee.id));C("Employee removed","success")},onCancel:()=>e(Y=>({...Y,open:!1}))})}},"Remove")))),Ae.length===0&&R.createElement("tr",null,R.createElement("td",{style:q,colSpan:4},R.createElement(Wl,{label:"No employees yet"})))))),_==="admin"&&R.createElement("div",{style:{width:720,maxWidth:"100%",display:"grid",gap:12}},R.createElement("h3",{style:{marginTop:0}},"Admin"),!St&&Me&&R.createElement(Bb,{company:ee,adminEmail:Pn,adminPassword:Mr,setAdminEmail:$i,setAdminPassword:Kt,onLoggedIn:async({token:W})=>{Nh(W),Ut(W),S("Logged in as admin"),C("Logged in as admin","success")}}),St&&Me&&R.createElement(ChangePasswordForm,null),R.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},R.createElement("label",null,"Check-in ends at:"),R.createElement("input",{type:"time",value:Te,onChange:W=>Et(W.target.value)}),R.createElement("label",null,"Check-out starts at:"),R.createElement("input",{type:"time",value:vt,onChange:W=>bn(W.target.value)}),R.createElement("button",{style:ue,onClick:async()=>{if(Me){if(!St){S("Admin login required"),C("Admin login required","error");return}await H9(ee.id,{schedule:{checkInEnd:Te,checkOutStart:vt}}),de(await Ta(ee.id))}else L9(ee.id,{checkInEnd:Te,checkOutStart:vt}),de(wr(ee.id));S("Schedule saved"),C("Schedule saved","success")}},"Save Schedule")),R.createElement("div",{style:{display:"flex",gap:8}},R.createElement("button",{style:ne,onClick:()=>{b("attendance"),Re("in"),A(!0),Xt&&(clearInterval(Xt),ur(null));const W=setInterval(()=>{const Y=new Date,he=Lb(Te),Le=Lb(vt);Y>=Le||Y>=he?Re("out"):Re("in")},3e4);ur(W),S("Day started: auto mode enabled"),C("Day started","success")}},"Start Day"),R.createElement("button",{style:ue,onClick:()=>{Xt&&(clearInterval(Xt),ur(null)),A(!1),S("Day ended"),C("Day ended","info")}},"End Day"),R.createElement("button",{style:ue,onClick:()=>{e({open:!0,title:"Mark Absences for Today",message:"Are you sure you want to close the day and mark absences for all employees who did not check in? This cannot be undone.",confirmText:"Mark Absences",cancelText:"Cancel",onConfirm:async()=>{if(e(W=>({...W,open:!1})),Me){if(!St){S("Admin login required"),C("Admin login required","error");return}await $9(ee.id),de(await Ta(ee.id))}else closeDayLocal(ee.id),de(wr(ee.id));S("Absences marked for today"),C("Absences marked for today","success")},onCancel:()=>e(W=>({...W,open:!1}))})}},"Close Day (mark absences)")),R.createElement("div",null,R.createElement("button",{style:ue,onClick:()=>$e(W=>!W)},"Storage: ",Me?"Backend API":"Browser only"," (toggle)")),Me&&R.createElement("div",{style:{display:"grid",gap:8,marginTop:12}},R.createElement("h4",{style:{margin:"8px 0"}},"Departments"),R.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},R.createElement("input",{placeholder:"Department name",id:"depName",style:{padding:6,border:"1px solid #ddd",borderRadius:6}}),R.createElement("button",{style:ue,onClick:async()=>{if(!St){S("Admin login required");return}const W=document.getElementById("depName"),Y=W&&W.value.trim();Y&&(await j9(ee.id,Y),nu(await Lv(ee.id)),W.value="",C("Department added","success"))}},"Add")),R.createElement("ul",null,ji.map(W=>R.createElement("li",{key:W.id,style:{display:"flex",alignItems:"center",gap:8}},R.createElement("span",null,W.name),R.createElement("button",{style:ue,onClick:()=>{e({open:!0,title:"Delete Department",message:`Are you sure you want to delete the department "${W.name}"? This cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",onConfirm:async()=>{if(e(Y=>({...Y,open:!1})),!St){S("Admin login required");return}await G9(ee.id,W.id),nu(await Lv(ee.id)),C("Department deleted","success")},onCancel:()=>e(Y=>({...Y,open:!1}))})}},"Delete"))),ji.length===0&&R.createElement("li",null,R.createElement(Wl,{label:"No departments",style:{padding:12}}))),R.createElement("h4",{style:{margin:"8px 0"}},"Shifts"),R.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},R.createElement("input",{placeholder:"Shift name",id:"shiftName",style:{padding:6,border:"1px solid #ddd",borderRadius:6}}),R.createElement("label",null,"Check-in ends:"),R.createElement("input",{type:"time",id:"shiftIn",defaultValue:Te}),R.createElement("label",null,"Check-out starts:"),R.createElement("input",{type:"time",id:"shiftOut",defaultValue:vt}),R.createElement("button",{style:ue,onClick:async()=>{if(!St){S("Admin login required");return}const W=document.getElementById("shiftName"),Y=document.getElementById("shiftIn"),he=document.getElementById("shiftOut"),Le=W&&W.value.trim();Le&&(await X9(ee.id,{name:Le,schedule:{checkInEnd:Y.value,checkOutStart:he.value}}),es(await Bv(ee.id)),W.value="",C("Shift added","success"))}},"Add")),R.createElement("ul",null,Sl.map(W=>{var Y,he;return R.createElement("li",{key:W.id,style:{display:"flex",alignItems:"center",gap:8}},R.createElement("span",null,W.name,"  in  ",(Y=W.schedule)==null?void 0:Y.checkInEnd," | out  ",(he=W.schedule)==null?void 0:he.checkOutStart),R.createElement("button",{style:ue,onClick:()=>{e({open:!0,title:"Delete Shift",message:`Are you sure you want to delete the shift "${W.name}"? This cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",onConfirm:async()=>{if(e(Le=>({...Le,open:!1})),!St){S("Admin login required");return}await K9(ee.id,W.id),es(await Bv(ee.id)),C("Shift deleted","success")},onCancel:()=>e(Le=>({...Le,open:!1}))})}},"Delete"))}),Sl.length===0&&R.createElement("li",null,R.createElement(Wl,{label:"No shifts",style:{padding:12}}))))),_==="history"&&R.createElement("div",{style:{width:720,maxWidth:"100%",display:"grid",gap:10}},R.createElement("h3",{style:{marginTop:0}},"History"),R.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},R.createElement("label",null,"Start:"),R.createElement("input",{type:"date",value:qt,onChange:W=>ro(W.target.value)}),R.createElement("label",null,"End:"),R.createElement("input",{type:"date",value:Vt,onChange:W=>io(W.target.value)}),R.createElement("button",{style:ue,onClick:async()=>{if(Me){const W=await Mh(ee.id,qt,Vt);Kn(W)}else{const W=Ph(ee.id,qt,Vt);Kn(W)}}},"Load"),R.createElement("button",{style:ue,onClick:()=>{const W=y_(ee.id,qt,Vt),Y=document.createElement("a");Y.href=W,Y.download="attendance.csv",Y.click()}},"Export CSV"),R.createElement("button",{style:ue,onClick:()=>{const W=`<!doctype html><html><head><title>Attendance</title><style>body{font-family:system-ui,Arial,sans-serif;padding:16px}table{border-collapse:collapse;width:100%}th,td{border:1px solid #ddd;padding:6px;font-size:12px}</style></head><body><h3>Attendance ${qt||""} ${Vt?" - "+Vt:""}</h3><table><thead><tr><th>Date</th><th>Name</th><th>Check-in</th><th>Check-out</th><th>Late</th><th>Early</th><th>Absent</th></tr></thead><tbody>${ai.map(he=>{const Le=Ae.find(nt=>nt.id===he.employeeId);return`<tr><td>${he.date}</td><td>${he.employeeName||(Le==null?void 0:Le.name)||he.employeeId}</td><td>${he.checkIn?new Date(he.checkIn).toLocaleTimeString():""}</td><td>${he.checkOut?new Date(he.checkOut).toLocaleTimeString():""}</td><td>${he.late?"late":""}</td><td>${he.earlyLeave?"early":""}</td><td>${he.absent?"absent":""}</td></tr>`}).join("")}</tbody></table><script>window.print()<\/script></body></html>`,Y=window.open("","_blank");Y&&(Y.document.write(W),Y.document.close())}},"Print")),R.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},R.createElement("thead",null,R.createElement("tr",null,R.createElement("th",{style:q},"Date"),R.createElement("th",{style:q},"Name"),R.createElement("th",{style:q},"Check-in"),R.createElement("th",{style:q},"Check-out"),R.createElement("th",{style:q},"Late"),R.createElement("th",{style:q},"Early"),R.createElement("th",{style:q},"Absent"))),R.createElement("tbody",null,ai.map(W=>{const Y=Ae.find(Le=>Le.id===W.employeeId),he=W.employeeName||(Y==null?void 0:Y.name)||W.employeeId;return R.createElement("tr",{key:W.id},R.createElement("td",{style:q},W.date),R.createElement("td",{style:{...q,display:"flex",alignItems:"center",gap:8}},R.createElement(Qv,{name:he,size:18}),he),R.createElement("td",{style:q},W.checkIn?new Date(W.checkIn).toLocaleTimeString():"-"),R.createElement("td",{style:q},W.checkOut?new Date(W.checkOut).toLocaleTimeString():"-"),R.createElement("td",{style:q},W.late?"late":""),R.createElement("td",{style:q},W.earlyLeave?"early":""),R.createElement("td",{style:q},W.absent?"absent":""))}),ai.length===0&&R.createElement("tr",null,R.createElement("td",{style:q,colSpan:7},R.createElement(Wl,{label:"No history records"})))))),_==="dashboard"&&R.createElement("div",{style:{width:720,maxWidth:"100%",display:"grid",gap:16}},R.createElement("h3",{style:{marginTop:0}},"Dashboard"),R.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16}},R.createElement("div",null,R.createElement("h4",{style:{margin:"0 0 8px"}},"Today status"),(()=>{const W=ye.filter(Je=>Je.checkIn).length,Y=ye.filter(Je=>Je.late).length,he=ye.filter(Je=>Je.earlyLeave).length,Le=ye.filter(Je=>Je.absent).length,nt={labels:["Present","Late","Early","Absent"],datasets:[{label:"Count",data:[W,Y,he,Le],backgroundColor:["#4caf50","#ff9800","#03a9f4","#f44336"]}]};return R.createElement(mG,{data:nt,options:{responsive:!0,plugins:{legend:{display:!1}}}})})()),R.createElement("div",null,R.createElement("h4",{style:{margin:"0 0 8px"}},"Last 7 days present"),(()=>{const W=[...Array(7)].map((Le,nt)=>{const Je=new Date;return Je.setDate(Je.getDate()-nt),Je.toISOString().slice(0,10)}).reverse(),Y=W.map(Le=>ai.filter(nt=>nt.date===Le&&nt.checkIn).length),he={labels:W,datasets:[{label:"Present",data:Y,borderColor:"#4caf50",backgroundColor:"rgba(76,175,80,0.2)"}]};return R.createElement(vG,{data:he,options:{responsive:!0,plugins:{legend:{position:"bottom"}}}})})()))),_==="print"&&R.createElement("div",{style:{width:720,maxWidth:"100%",display:"grid",gap:10}},R.createElement("h3",{style:{marginTop:0}},"Printable Summary"),R.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},R.createElement("label",null,"Start:"),R.createElement("input",{type:"date",value:qt,onChange:W=>ro(W.target.value)}),R.createElement("label",null,"End:"),R.createElement("input",{type:"date",value:Vt,onChange:W=>io(W.target.value)}),R.createElement("button",{style:ue,onClick:async()=>{if(Me){const W=await Mh(ee.id,qt,Vt);Kn(W)}else{const W=Ph(ee.id,qt,Vt);Kn(W)}}},"Load"),R.createElement("button",{style:ne,onClick:()=>{const W=`<!doctype html><html><head><title>Attendance</title><style>body{font-family:system-ui,Arial,sans-serif;padding:16px}table{border-collapse:collapse;width:100%}th,td{border:1px solid #ddd;padding:6px;font-size:12px}</style></head><body><h3>Attendance ${qt||""} ${Vt?" - "+Vt:""}</h3><table><thead><tr><th>Date</th><th>Name</th><th>Check-in</th><th>Check-out</th><th>Late</th><th>Early</th><th>Absent</th></tr></thead><tbody>${ai.map(he=>{const Le=Ae.find(nt=>nt.id===he.employeeId);return`<tr><td>${he.date}</td><td>${(Le==null?void 0:Le.name)||he.employeeId}</td><td>${he.checkIn?new Date(he.checkIn).toLocaleTimeString():""}</td><td>${he.checkOut?new Date(he.checkOut).toLocaleTimeString():""}</td><td>${he.late?"late":""}</td><td>${he.earlyLeave?"early":""}</td><td>${he.absent?"absent":""}</td></tr>`}).join("")}</tbody></table><script>window.print()<\/script></body></html>`,Y=window.open("","_blank");Y&&(Y.document.write(W),Y.document.close())}},"Print"))),!c&&["attendance","register"].includes(_)&&R.createElement("div",{style:{marginTop:16,display:"flex",flexDirection:"column",alignItems:"center",gap:8}},R.createElement("div",{style:{width:32,height:32,border:"4px solid #eee",borderTop:"4px solid #2563eb",borderRadius:"50%",animation:"spin 1s linear infinite"}}),R.createElement("span",{style:{fontSize:14,color:"#b36b00"}},"Loading face recognition models..."),R.createElement("style",null,"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }")),!c&&!["attendance","register"].includes(_)&&R.createElement("p",{style:{marginTop:8,fontSize:13,color:"#b36b00"}},"Note: Face models are not present. Add models under ",R.createElement("code",null,"public/models"),".")))):R.createElement(bG,{useBackend:Me,setUseBackend:$e,secondaryBtnStyle:ue,primaryBtnStyle:ne,palette:D,onCreated:async W=>{var Le;let Y;Me?Y=await W9(W.name,W.admin):Y=F9(W.name,W.admin),de(Y),we(Y.id),S("Company created. Models: "+(c?"loaded":"missing")),C("Company created","success");try{Mv({companyId:Y.id,adminId:Y.admins&&Y.admins[0]&&Y.admins[0].id||null})}catch{}const he=((Le=Y.settings)==null?void 0:Le.schedule)||{checkInEnd:"10:00",checkOutStart:"16:00"};Et(he.checkInEnd),bn(he.checkOutStart)},onLoggedIn:async({token:W,companyId:Y,adminId:he})=>{var Le;try{Nh(W),Ut(W),C("Logged in","success");const nt=await Ta(Y);de(nt),we(nt.id),S("Logged in and company loaded"),Mv({companyId:Y,adminId:he});const Je=((Le=nt.settings)==null?void 0:Le.schedule)||{checkInEnd:"10:00",checkOutStart:"16:00"};Et(Je.checkInEnd),bn(Je.checkOutStart)}catch{S("Failed to load company after login"),C("Failed to load company after login","error")}}})}function bG({useBackend:t,setUseBackend:e,onCreated:n,onLoggedIn:r,secondaryBtnStyle:i,primaryBtnStyle:a,palette:o}){const[s,u]=ve.useState(""),[l,c]=ve.useState(""),[f,h]=ve.useState(""),[d,v]=ve.useState(""),[p,m]=ve.useState(!1),[g,x]=ve.useState("Create your company and first admin"),[y,w]=ve.useState(""),{push:_}=H1();return R.createElement("div",{style:{display:"grid",placeItems:"center",minHeight:"100vh"}},R.createElement("div",{style:{width:420,maxWidth:"100%",border:"1px solid #eee",borderRadius:8,padding:16}},R.createElement("h2",{style:{marginTop:0}},"Setup"),R.createElement("div",{style:{display:"grid",gap:8}},R.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},R.createElement("span",{style:{fontSize:13,color:(o==null?void 0:o.muted)||"#666"}},"Storage:"),R.createElement("button",{style:i||{padding:"10px 14px",borderRadius:6,border:"1px solid #ddd",background:"#fff",color:"#222",cursor:"pointer"},onClick:()=>e(b=>!b)},t?"Backend API":"Browser only"," (toggle)")),R.createElement("input",{value:s,onChange:b=>u(b.target.value),placeholder:"Company name",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),R.createElement("input",{value:l,onChange:b=>c(b.target.value),placeholder:"Admin name",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),R.createElement("input",{value:f,onChange:b=>h(b.target.value),placeholder:"Admin email",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),R.createElement("div",{style:{display:"flex",alignItems:"center",gap:4}},R.createElement("input",{type:p?"text":"password",value:d,onChange:b=>v(b.target.value),placeholder:"Admin password",style:{padding:8,border:"1px solid #ddd",borderRadius:6,flex:1}}),R.createElement("button",{type:"button",style:{padding:"6px 8px",border:"none",background:"none",cursor:"pointer"},onClick:()=>m(b=>!b)},p?"Hide":"Show")),R.createElement("button",{style:a||{padding:"10px 14px",borderRadius:6,border:"1px solid #2b6cb0",background:"#2b6cb0",color:"#fff",cursor:"pointer"},onClick:()=>{const b=s.trim()||"Company",E={name:l.trim()||"Admin",email:f.trim()||"",password:d.trim()||"admin"};x("Creating company..."),n({name:b,admin:E})}},"Create Company"),R.createElement("div",{style:{fontSize:12,color:"#666"}},t?"Backend mode: After creating, open the Admin tab to log in with the admin email/password.":"Browser-only mode: Data stays in this browser. To use admin login, toggle to Backend before creating."),t&&R.createElement("div",{style:{borderTop:"1px solid #eee",marginTop:12,paddingTop:12,display:"grid",gap:8}},R.createElement("h3",{style:{margin:0,fontSize:16}},"Login to existing company"),R.createElement("div",{style:{display:"grid",gap:8}},R.createElement("input",{value:f,onChange:b=>h(b.target.value),placeholder:"Admin email",style:{padding:8,border:"1px solid #ddd",borderRadius:6}}),R.createElement("div",{style:{display:"flex",alignItems:"center",gap:4}},R.createElement("input",{type:p?"text":"password",value:d,onChange:b=>v(b.target.value),placeholder:"Password",style:{padding:8,border:"1px solid #ddd",borderRadius:6,flex:1}}),R.createElement("button",{type:"button",style:{padding:"6px 8px",border:"none",background:"none",cursor:"pointer"},onClick:()=>m(b=>!b)},p?"Hide":"Show")),R.createElement("button",{style:i||{padding:"10px 14px",borderRadius:6,border:"1px solid #ddd",background:"#fff",color:"#222",cursor:"pointer"},onClick:async()=>{try{const b=await Q4(null,f.trim(),d);r(b)}catch(b){x(""+b.message),_("Login failed","error")}}},"Login"))),R.createElement("div",{style:{fontSize:13,color:"#666"}},g))))}function Lb(t){const[e,n]=(t||"00:00").split(":").map(Number),r=new Date;return r.setHours(e||0,n||0,0,0),r}function Bb({company:t,adminEmail:e,adminPassword:n,setAdminEmail:r,setAdminPassword:i,onLoggedIn:a,secondaryBtnStyle:o}){const{push:s}=H1(),[u,l]=ve.useState(!1),[c,f]=ve.useState(()=>window.localStorage.getItem("officattend_remember")==="1"),[h,d]=ve.useState(()=>{try{return JSON.parse(window.localStorage.getItem("officattend_admin_emails")||"[]")}catch{return[]}}),v=p=>{p&&d(m=>{if(m.includes(p))return m;const g=[p,...m].slice(0,10);return window.localStorage.setItem("officattend_admin_emails",JSON.stringify(g)),g})};return ve.useEffect(()=>{c?window.localStorage.setItem("officattend_remember","1"):window.localStorage.removeItem("officattend_remember")},[c]),R.createElement("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8}},R.createElement("input",{value:e,onChange:p=>r(p.target.value),placeholder:"Admin email",style:{padding:8,border:"1px solid #ddd",borderRadius:6},list:"admin-email-list",autoComplete:"on"}),R.createElement("datalist",{id:"admin-email-list"},h.map(p=>R.createElement("option",{value:p,key:p}))),R.createElement("div",{style:{display:"flex",alignItems:"center",gap:4}},R.createElement("input",{type:u?"text":"password",value:n,onChange:p=>i(p.target.value),placeholder:"Password",style:{padding:8,border:"1px solid #ddd",borderRadius:6,flex:1}}),R.createElement("button",{type:"button",style:{padding:"6px 8px",border:"none",background:"none",cursor:"pointer"},onClick:()=>l(p=>!p)},u?"Hide":"Show")),R.createElement("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13}},R.createElement("input",{type:"checkbox",checked:c,onChange:p=>f(p.target.checked)})," Remember Me"),R.createElement("button",{style:o||{padding:"10px 14px",borderRadius:6,border:"1px solid #ddd",background:"#fff",color:"#222",cursor:"pointer"},onClick:async()=>{try{const p=await Q4(null,e,n);c&&(p!=null&&p.token)?window.localStorage.setItem("officattend_admin_token",p.token):window.localStorage.removeItem("officattend_admin_token"),v(e),a(p)}catch{s("Login failed","error")}}},"Login"))}const EG=qS(document.getElementById("root"));EG.render(R.createElement(lB,null,R.createElement(_G,null)));export{fw as _,AG as c,qA as g};
//# sourceMappingURL=index-C4AvdAk-.js.map
